!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=235)}([function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return o}));const n={filter:e=>t=>t.filter(e),map:e=>t=>t.map(e),flatMap:e=>t=>t.flatMap(e),forEach:e=>t=>t.forEach(e),getOrValue:e=>t=>t.getOrValue(e),orElse:e=>t=>t.orElse(e),fold:(e,t)=>i=>i.match({none:e,some:t})};class s{constructor(e,t){this.value=e,this._isEmpty=t}static of(e){return r(e)}static fromNullable(e){return null==e?o:s.of(e)}static fromPredicate(e,t){return t(e)?s.of(e):o}static empty(){return o}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}getOrElse(e){return this._isEmpty?e():this.value}getOrNull(){return this._isEmpty?null:this.value}getOrValue(e){return this._isEmpty?e:this.value}orElse(e){return this._isEmpty?e():this}map(e){return this._isEmpty?o:s.of(e(this.value))}flatMap(e){return this._isEmpty?o:e(this.value)||o}filter(e){return this._isEmpty||!e(this.value)?o:s.of(this.value)}existsIf(e){return!this._isEmpty&&e(this.value)}forEach(e){this._isEmpty||e(this.value)}match(e){return this._isEmpty?e.none():e.some(this.value)}}function r(e){return new s(e,!1)}const o=new s(null,!0)},function(e,t,i){"use strict";i.r(t),i.d(t,"head",(function(){return s})),i.d(t,"last",(function(){return r})),i.d(t,"tail",(function(){return o})),i.d(t,"join",(function(){return a})),i.d(t,"append",(function(){return d})),i.d(t,"appendIf",(function(){return c})),i.d(t,"find",(function(){return l})),i.d(t,"forEach",(function(){return h})),i.d(t,"difference",(function(){return u})),i.d(t,"filter",(function(){return p})),i.d(t,"some",(function(){return g})),i.d(t,"indexOf",(function(){return m})),i.d(t,"includes",(function(){return f})),i.d(t,"isMemberOf",(function(){return b})),i.d(t,"exclude",(function(){return v})),i.d(t,"fromNodeList",(function(){return A})),i.d(t,"fromArrayLike",(function(){return y})),i.d(t,"fromStringToNumber",(function(){return w})),i.d(t,"map",(function(){return E})),i.d(t,"unique",(function(){return O})),i.d(t,"reduce",(function(){return C})),i.d(t,"isEmpty",(function(){return I})),i.d(t,"isNotEmpty",(function(){return S})),i.d(t,"flatten",(function(){return T})),i.d(t,"partition",(function(){return k})),i.d(t,"groupByMap",(function(){return P})),i.d(t,"groupBy",(function(){return j})),i.d(t,"cArray",(function(){return L})),i.d(t,"flattenOptions",(function(){return x}));var n=i(2);function s(e){return e[0]}function r(e){return e[e.length-1]}function o(e){return e.slice(1)}const a=e=>t=>t.join(e),d=e=>t=>t.concat([e]),c=(e,t)=>i=>t()?d(e)(i):i;function l(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const n=Object(e),s=n.length>>>0;let r;for(let e=0;e<s;e++)if(r=n[e],t.call(i,r,e,n))return r}function h(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const n=Object(e),s=n.length>>>0;let r,o=0;for(;o<s;)o in n&&(r=n[o],t.call(i,r,o,n)),o++}const u=(e,t=n.equals)=>L.filter(Object(n.not)(b(e,t)));function p(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");const n=Object(e),s=n.length>>>0;if(s>n.length)throw new TypeError("negative length");const r=[];for(let e=0;e<s;e++)if(e in n){const s=n[e];t.call(i,s,e,n)&&r.push(s)}return r}function g(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const n=Object(e),s=n.length>>>0;if(s>n.length)throw new TypeError("negative length");for(let e=0;e<s;e++)if(e in n&&t.call(i,n[e],e,n))return!0;return!1}function m(e,t,i=n.equals,s){if(null===e)throw new TypeError("array is null or undefined");const r=Object(e),o=r.length>>>0;if(0===o)return-1;let a=s||0;if(Math.abs(a)===1/0&&(a=0),a>=o)return-1;let d=Math.max(a>=0?a:o-Math.abs(a),0);try{for(;d<o;){if(d in r&&i(r[d])(t))return d;d++}}catch(e){}return-1}function f(e,t,i=n.equals){return m(e,t,i)>-1}function b(e,t=n.equals){return i=>f(e,i,t)}const v=e=>t=>p(t,Object(n.not)(b(e)));function A(e){return y(e)}function y(e){return Array.prototype.slice.call(e)}function w(e,t=10){return E(e,e=>Object(n.isString)(e)?parseInt(e,t):NaN)}function E(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");const n=Object(e),s=n.length>>>0,r=new Array(s);let o,a,d=0;for(;d<s;)d in n&&(o=n[d],a=t.call(i,o,d,n),r[d]=a),d++;return r}function O(e){if(null===e)throw new TypeError("array is null or undefined");const t=[];for(let i of e)f(t,i)||t.push(i);return t}function C(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");let n=e.length>>>0;if(0===n&&void 0===i)throw new TypeError("reduce of empty array with no initial value");let s,r=0;if(void 0!==i)s=i;else for(;;){if(r in e){s=e[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}for(;r<n;r++)r in e&&(s=t(s,e[r],r,e));return s}function I(e){return!e.length}function S(e){return!I(e)}function T(e){return I(e)?[]:C(e,(e,t)=>[...e,...t])}function k(e){return t=>C(t,([t,i],n)=>e(n)?[[...t,n],i]:[t,[...i,n]],[[],[]])}const P=(e,t)=>i=>{const n={};return i.forEach(i=>{var s;const r=e(i);n[r]=null!==(s=n[r])&&void 0!==s?s:[],n[r].push(t(i))}),n},j=e=>t=>P(e,n.identity)(t),L={map:e=>t=>E(t,e),mapWithIndex:e=>t=>E(t,e),flatMap:e=>t=>T(E(t,e)),filter:e=>t=>p(t,e),foldLeft:(e,t)=>i=>I(i)?e:C(i,t,e),forEach:e=>t=>h(t,e)};function x(e){return C(e,(e,t)=>t.match({some:t=>e.concat(t),none:()=>e}),[])}},function(e,t,i){"use strict";i.r(t),i.d(t,"seconds",(function(){return l})),i.d(t,"offset",(function(){return h})),i.d(t,"getAudioContext",(function(){return u})),i.d(t,"throttle",(function(){return p})),i.d(t,"safeUrl",(function(){return g})),i.d(t,"getProtocol",(function(){return m})),i.d(t,"getExtensionFromMimeType",(function(){return f})),i.d(t,"containsKeys",(function(){return b})),i.d(t,"matchesCheckers",(function(){return v})),i.d(t,"isBoolean",(function(){return A})),i.d(t,"isNumber",(function(){return y})),i.d(t,"isArray",(function(){return w})),i.d(t,"isString",(function(){return E})),i.d(t,"isUndefined",(function(){return O})),i.d(t,"isNull",(function(){return C})),i.d(t,"isObject",(function(){return I})),i.d(t,"not",(function(){return S})),i.d(t,"hasValidProperty",(function(){return T})),i.d(t,"hasOwnProperty",(function(){return k})),i.d(t,"hasOwnProperties",(function(){return P})),i.d(t,"isFunction",(function(){return j})),i.d(t,"isStudioCreative",(function(){return L})),i.d(t,"isSizeInPx",(function(){return x})),i.d(t,"isNative",(function(){return D})),i.d(t,"noop",(function(){return R})),i.d(t,"identity",(function(){return _})),i.d(t,"prop",(function(){return M})),i.d(t,"safeProp",(function(){return F})),i.d(t,"tap",(function(){return U})),i.d(t,"equals",(function(){return B})),i.d(t,"exhaustive",(function(){return W}));var n=i(0),s=i(17),r=i(13),o=i(6);const a=Object.prototype.toString,d=Function.prototype.toString,c=Object.prototype.hasOwnProperty;function l(e){if(!e)return NaN;const t=e.split("."),i=t[0].split(":");let n=3600*Number(i[0])+60*Number(i[1])+Number(i[2]);return 2===t.length&&(n=Number(n+"."+t[1])),n}function h(e=0){const t=e?Math.floor(e/3600):0,i=(e-=3600*t)?Math.floor(e/60):0,n=((e-=60*i)%1).toFixed(3).substr(1);return e=Math.floor(e),r.pad(t)+":"+r.pad(i)+":"+r.pad(e)+n}function u(){return window.AudioContext||window.webkitAudioContext}function p(e,t=250,i=this){let n=!1;return(...s)=>{n||(e.apply(i,s),window.setTimeout(()=>{n=!1},t),n=!0)}}function g(e){const t=document.createElement("a");return t.href=e,window.swInstalled&&/(teads|ebu?z)/.test(t.hostname)?"/"+btoa(e).replace(/=/g,"_"):e}function m(){return location&&location.protocol&&0===location.protocol.indexOf("http:")?location.protocol:"https:"}function f(e){if(!e)return"";let t=e.split("/")[1]||e;switch(t){case"javascript":case"x-javascript":t="js";break;case"mpeg":t="mpg"}return t}function b(e,t){let i=!1;if(!t)return!1;for(let n in e)if(k(e,n)){if(void 0===typeof t[n])return!1;i=!0}return i}function v(e){return t=>{let i=!0;for(const n in e)if(e.hasOwnProperty(n)&&(O(t[n])||!e[n](t[n]))){i=!1;break}return i}}function A(e){return"boolean"==typeof e}function y(e){return"number"==typeof e&&!isNaN(e)}function w(e){return"[object Array]"===a.call(e)}function E(e){return"string"==typeof e}function O(e){return void 0===e}function C(e){return null===e}function I(e){return!!e&&"object"==typeof e}function S(e){return t=>!e(t)}const T=(e,t,i)=>k(e,t)&&i(e[t]);function k(e,t){return c.call(e,t)}function P(e,t){return t.every(t=>k(e,t))}function j(e){return!!e&&"function"==typeof e&&"[object Function]"===a.call(e)}function L(){var e;return n.b.fromNullable(null===(e=window.teads)||void 0===e?void 0:e.api).map(e=>Object(s.a)(e.getStudioData,e)).filter(j).map(e=>e()).existsIf(I)}function x(e){return!!e.match(/px$/)&&y(parseFloat(e))}const V=/^\[object .+?Constructor\]$/,N=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function D(e){const t=typeof e;return o.a.tryCatch(()=>"function"===t?N.test(d.call(e)):!(!e||"object"!==t||!V.test(a.call(e)))).getOrElse(()=>!1)}function R(){}const _=e=>e,M=e=>t=>t[e],F=e=>t=>n.b.fromNullable(t[e]),U=e=>t=>(e(t),t);function B(e){return t=>t===e}const W=e=>e},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t=null){this.type=e,this.data=t}}n.AdLoaded="AdLoaded",n.AdStarted="AdStarted",n.AdStopped="AdStopped",n.AdSkipped="AdSkipped",n.AdLinearChange="AdLinearChange",n.AdSizeChange="AdSizeChange",n.AdExpandedChange="AdExpandedChange",n.AdSkippableStateChange="AdSkippableStateChange",n.AdRemainingTimeChange="AdRemainingTimeChange",n.AdDurationChange="AdDurationChange",n.AdVolumeChange="AdVolumeChange",n.AdImpression="AdImpression",n.AdVideoStart="AdVideoStart",n.AdVideoFirstQuartile="AdVideoFirstQuartile",n.AdVideoMidpoint="AdVideoMidpoint",n.AdVideoThirdQuartile="AdVideoThirdQuartile",n.AdVideoComplete="AdVideoComplete",n.AdClickThru="AdClickThru",n.AdInteraction="AdInteraction",n.AdUserAcceptInvitation="AdUserAcceptInvitation",n.AdUserMinimize="AdUserMinimize",n.AdUserClose="AdUserClose",n.AdPaused="AdPaused",n.AdPlaying="AdPlaying",n.AdLog="AdLog",n.AdError="AdError"},function(e,t,i){"use strict";i.r(t),i.d(t,"UABrowser",(function(){return w})),i.d(t,"UAOs",(function(){return E})),i.d(t,"UADevice",(function(){return O})),i.d(t,"getContextSummary",(function(){return R})),i.d(t,"getClientSideDeviceProperties",(function(){return M})),i.d(t,"getFullContext",(function(){return F})),i.d(t,"init",(function(){return U})),i.d(t,"setDeviceModel",(function(){return B})),i.d(t,"setSDKVersion",(function(){return W})),i.d(t,"setAppId",(function(){return H})),i.d(t,"setAppVersion",(function(){return z})),i.d(t,"setIsSDK",(function(){return G})),i.d(t,"isDesktop",(function(){return q})),i.d(t,"isIpad",(function(){return $})),i.d(t,"isTablet",(function(){return K})),i.d(t,"isMobile",(function(){return Y})),i.d(t,"isChromeIos",(function(){return X})),i.d(t,"isFacebookWebview",(function(){return Q})),i.d(t,"isAndroidNative",(function(){return J})),i.d(t,"isSamsungBrowser",(function(){return Z})),i.d(t,"isAndroid",(function(){return ee})),i.d(t,"isIos",(function(){return te})),i.d(t,"isIphone",(function(){return ie})),i.d(t,"isAndroidMobile",(function(){return ne})),i.d(t,"isIE",(function(){return se})),i.d(t,"isChrome",(function(){return re})),i.d(t,"isChromeWebView",(function(){return oe})),i.d(t,"isFirefox",(function(){return ae})),i.d(t,"isEdge",(function(){return de})),i.d(t,"isAmp",(function(){return ce})),i.d(t,"isAmpInABox",(function(){return le})),i.d(t,"isAmpSF",(function(){return he})),i.d(t,"isAmpObserveIntersection",(function(){return ue})),i.d(t,"isIABSafeFrame",(function(){return pe})),i.d(t,"getIABSafeFrameWindow",(function(){return ge})),i.d(t,"isEdgeTouchScreen",(function(){return me})),i.d(t,"isSDK",(function(){return fe})),i.d(t,"getIEVersion",(function(){return be})),i.d(t,"getAndroidVersion",(function(){return ve})),i.d(t,"getChromeVersion",(function(){return Ae})),i.d(t,"getIosVersion",(function(){return ye})),i.d(t,"getFacebookWebviewVersion",(function(){return we})),i.d(t,"getSafariVersion",(function(){return Ee})),i.d(t,"isUIWebview",(function(){return Oe})),i.d(t,"isSafari",(function(){return Ce})),i.d(t,"isSafari11Plus",(function(){return Ie})),i.d(t,"isChrome66Plus",(function(){return Se})),i.d(t,"isGoogleSearchApp",(function(){return Te})),i.d(t,"isIos10Safari",(function(){return ke})),i.d(t,"isIos10OtherBrowser",(function(){return Pe})),i.d(t,"isFacebookWebviewIOS10",(function(){return je})),i.d(t,"isIosOrMacOs16_3",(function(){return Le})),i.d(t,"isCanvasUsed",(function(){return xe})),i.d(t,"videoSupport",(function(){return Ve})),i.d(t,"getLanguage",(function(){return Ne})),i.d(t,"getUA",(function(){return De})),i.d(t,"setUA",(function(){return Re})),i.d(t,"getDevice",(function(){return _e})),i.d(t,"getOS",(function(){return Me})),i.d(t,"getBrowser",(function(){return Fe})),i.d(t,"canAutoplay",(function(){return Ue})),i.d(t,"isCanvasNeeded",(function(){return Be})),i.d(t,"getShortContext",(function(){return We})),i.d(t,"getEnv",(function(){return He})),i.d(t,"getNetworkBandwidthInMbps",(function(){return ze})),i.d(t,"activatePrivacySandboxRelevanceAndMeasurementFeatures",(function(){return Ge})),i.d(t,"cacheCanvasUsed",(function(){return qe})),i.d(t,"checkUserAgent",(function(){return $e})),i.d(t,"startAutoplayTest",(function(){return Ke}));i(68);var n=i(41),s=i(6),r=i(0),o=i(11),a=i(18),d=i(13);const c="model",l="name",h="type",u="vendor",p="version",g="mobile",m="tablet",f={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(){for(var e,t,i,n,s,r,o,a=0,d=arguments;a<d.length&&!r;){var c=d[a],l=d[a+1];if(void 0===e)for(n in e={},l)"object"==typeof(s=l[n])?e[s[0]]=void 0:e[s]=void 0;for(t=i=0;t<c.length&&!r;)if(r=c[t++].exec(De()))for(n=0;n<l.length;n++)o=r[++i],"object"==typeof(s=l[n])&&s.length>0?2===s.length?"function"==typeof s[1]?e[s[0]]=s[1].call(this,o):e[s[0]]=s[1]:3===s.length?"function"!=typeof s[1]||s[1].exec&&s[1].test?e[s[0]]=o?o.replace(s[1],s[2]):void 0:e[s[0]]=o?s[1].call(this,o,s[2]):void 0:4===s.length&&(e[s[0]]=o?s[3].call(this,o.replace(s[1],s[2])):void 0):e[s]=o||void 0;a+=2}return e},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(f.has(t[i][n],e))return"?"===i?void 0:i}else if(f.has(t[i],e))return"?"===i?void 0:i;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},A={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,p],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[l,p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],p],[/(edge)\/((\d+)?[\w\.]+)/i],[l,p],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],p],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],p],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[p,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],p],[/;fbav\/([\w\.]+);/i],[p,[l,"Facebook"]],[/fxios\/([\w\.-]+)/i],[p,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[p,b.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,p]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[c,u,[h,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[u,"Apple"],[h,m]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,c,[h,m]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[c,[u,"Amazon"],[h,m]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[c,b.str,v.device.amazon.model],[u,"Amazon"],[h,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,u,[h,g]],[/\((ip[honed|\s\w*]+);/i],[c,[u,"Apple"],[h,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,c,[h,g]],[/\(bb10;\s(\w+)/i],[c,[u,"BlackBerry"],[h,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[c,[u,"Asus"],[h,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[c,"Xperia Tablet"],[h,m]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[c,"Xperia Phone"],[h,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,c,[h,"console"]],[/android.+;\s(shield)\sbuild/i],[c,[u,"Nvidia"],[h,"console"]],[/(playstation\s[3portablevi]+)/i],[c,[u,"Sony"],[h,"console"]],[/(sprint\s(\w+))/i],[[u,b.str,v.device.sprint.vendor],[c,b.str,v.device.sprint.model],[h,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,c,[h,m]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[c,/_/g," "],[h,g]],[/(nexus\s9)/i],[c,[u,"HTC"],[h,m]],[/(nexus\s6p)/i],[c,[u,"Huawei"],[h,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,c,[h,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[u,"Microsoft"],[h,"console"]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[u,"Microsoft"],[h,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[u,"Motorola"],[h,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[u,"Motorola"],[h,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,f.trim],[c,f.trim],[h,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[u,"Samsung"],[h,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[c,[u,"Sharp"],[h,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],c,[h,m]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],c,[h,g]],[/smart-tv.+(samsung)/i],[u,c,[h,"smarttv"]],[/sie-(\w+)*/i],[c,[u,"Siemens"],[h,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],c,[h,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[c,[u,"Acer"],[h,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],c,[h,m]],[/(lg) netcast\.tv/i],[u,c,[h,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[c,[u,"LG"],[h,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[u,"Lenovo"],[h,m]],[/linux;.+((jolla));/i],[u,c,[h,g]],[/((pebble))app\/[\d\.]+\s/i],[u,c,[h,"wearable"]],[/android.+;\s(glass)\s\d/i],[c,[u,"Google"],[h,"wearable"]],[/android.+;\s(pixel c)\s/i],[c,[u,"Google"],[h,m]],[/android.+;\s(pixel xl|pixel)\s/i],[c,[u,"Google"],[h,g]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[c,/_/g," "],[u,"Xiaomi"],[h,g]],[/android.+a000(1)\s+build/i],[c,[u,"OnePlus"],[h,g]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,f.lowerize],u,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[p,b.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[p,b.str,v.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[l,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[l,"Symbian"],p],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[l,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],p],[/(sunos)\s?([\w\.]+\d)*/i],[[l,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[l,p],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[l,"iOS"],[p,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[l,p]]};var y=i(2);class w{constructor(e){this.name=e.name||"",this.version=e.version||""}toString(){return d.separate("|",this.name,this.version).toLowerCase()}}class E{constructor(e){this.name=e.name||"",this.version=e.version||""}toString(){return d.separate("|",this.name,this.version).toLowerCase()}}class O{constructor(e){this.model=e.model||"",this.type=e.type||(O.typeRegExp.test(Me().name)?"desktop":""),this.vendor=e.vendor||""}toString(){return d.separate("|",this.model,this.type,this.vendor).toLowerCase()}}O.typeRegExp=/^windows|mac\s+os|linux|bsd|dragonfly|chromium\s+os|haiku|ubuntu|slackware|gentoo|solaris|debian|fedora|arch|beos|mint|gnu|os|suse\/2$/i;const C=new o.a("Context");let I,S,T,k,P,j=r.a,L="",x="",V="";const N={};let D=null;function R(){return[Y()&&!K()?"mob":K()?"tab":"desk",ee()?"android":te()?"ios":se()?"ie":re()?"ch":ae()?"ff":"ot"].join(" ")}const _={deviceType:{mobile:"m",desktop:"d",tablet:"t"},browserName:{"Mobile Safari":"Safari M","Chrome WebView":"Chrome WV"}};function M(){return j.map(e=>e.getPropertiesAsString())}function F(e=!0){var t,i,n;return fe()?[_e().model,Me().name,Me().version,L,V,We(),x].join("|"):[e&&null!==(t=_.deviceType[_e().type])&&void 0!==t?t:_e().type,Me().name,e?(n=Me().version,n.replace(/(\d+)\.(\d+)\.\d+/,"$1.$2")):Me().version,e&&null!==(i=_.browserName[Fe().name])&&void 0!==i?i:Fe().name,Fe().version.split(".")[0],We()].join("|")}function U(e=!0){var t,i,n,s,o,d,c,l,h;window.teads.CONTEXT_IS_INITIALIZED||(e&&$e(),function(){try{S=window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en"}catch(e){C.error("Could not get navigator language",e),S="en"}}(),k=new E(b.rgx.apply(this,A.os)),P=new w(b.rgx.apply(this,A.browser)),T=new O(b.rgx.apply(this,A.device)),function(){try{N.isAmp=!!window._teads_amp}catch(e){C.error("Could not check if `!!window._teads_amp`",e),N.isAmp=!1}}(),function(){var e,t,i;try{N.isAmpInABox=Object(y.isArray)(null===(e=window.top)||void 0===e?void 0:e.ampInaboxIframes)&&Object(y.isBoolean)(null===(t=window.top)||void 0===t?void 0:t.ampInaboxInitialized)&&Object(y.isArray)(null===(i=window.top)||void 0===i?void 0:i.ampInaboxPendingMessages)}catch(e){C.error("Could not check if AMP-inabox is used",e),N.isAmpInABox=!1}}(),function e(t=window){try{t.$sf&&t.$sf.ext?(N.isIabsf=!0,N.iabsfWindow=t):t.parent!==t&&e(t.parent)}catch(e){C.error("Could not check if `!!window.$sf.ext`",e),N.isIabsf=!1}}(),function(){try{if(pe()){const e=ge();N.isAmpSF=!Object(y.isUndefined)(e)&&!!e.AMP_CONTEXT_DATA}else N.isAmpSF=!1}catch(e){C.error("Could not check if `!!window.AMP_CONTEXT_DATA`",e),N.isAmpSF=!1}}(),function(){try{N.hasTouchPoints=!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>0)}catch(e){C.error("Could not check if `navigator.maxTouchPoints > 0`",e),N.hasTouchPoints=!1}}(),function(){try{N.isNavigatorStandalone=window.navigator.standalone}catch(e){C.error("Could not check navigator.standalone",e),N.isNavigatorStandalone=!1}}(),function(){try{N.observeIntersection=!(!window.context||!window.context.observeIntersection)}catch(e){C.error("Could not check if `!!window.context.observeIntersection`",e),N.observeIntersection=!1}}(),N.isIE="IE"===P.name||/MSIE|Trident/.test(I),N.isFirefox="Firefox"===P.name||/Firefox/i.test(I),N.isEdge="Edge"===P.name||/Edge/i.test(I),N.isGoogleSearchApp=/GSA\//i.test(I),N.isSafari=("Safari"===P.name||"Mobile Safari"===P.name)&&!Te(),N.isChromeWebView="Chrome WebView"===P.name,N.isChrome="Chrome"===P.name||oe(),N.isEdgeTouchScreen=de()&&N.hasTouchPoints,N.isChromeIos=/CriOS/i.test(I),N.isAndroidNative="Android Browser"===P.name,N.isFacebookWebview="Facebook"===P.name||/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(I),N.isSamsungBrowser=/SamsungBrowser/i.test(I),N.isIpad="iPad"===T.model||/iPad/i.test(I)||/mac\s+os/i.test(k.name)&&N.hasTouchPoints,N.isIphone="iPhone"===T.model||/iPhone/i.test(I),N.isIos="iOS"===k.name||$()||ie(),N.isAndroid="Android"===k.name||/Android/i.test(I),function(){let e=/(m|M)obile/.test(I);N.isTablet="tablet"===T.type||$()||ee()&&!e,N.isMobile="mobile"===T.type||te()&&!$()||ee()&&e,N.isDesktop=!Y()&&!K()}(),N.ieVersion=se()?P.version:"",N.iOsVersion=te()?k.version:"",N.androidVersion=ee()?k.version:"",N.chromeVersion=re()?P.version:"",N.FacebookWebviewVersion=Q()?P.version:"",N.safariVersion=Ce()?P.version:"",N.isAndroidMobile=ee()&&Y(),N.isAmpObserveIntersection=N.isAmp&&N.observeIntersection,N.isUIWebview=(ie()||$())&&!Ce()&&!re()&&!N.isNavigatorStandalone,N.isIos10Safari=a.a(ye(),"10")&&!Oe()&&!X(),N.isIos10OtherBrowser=a.a(ye(),"10")&&a.d(ye(),"11")&&Oe()&&X(),te()&&(j=r.b.fromNullable((t=window,i=document,n={apiVersion:"1.9.1",propsCache:"",divStyle:null,ns:{svg:"http://www.w3.org/2000/svg"},cssPrfxs:["Webkit","Moz","O","ms","Khtml"],fncPrfxs:["webkit","moz","o","ms","khtml"],getPropertiesAsString:function(){return this.propsCache}},s={},o={"js.webGlRenderer":function(){if(!t.CanvasRenderingContext2D)return null;var e=i.createElement("canvas");if(!(e=e.getContext("webgl")||e.getContext("experimental-webgl")))return null;var n=e.getExtension("WEBGL_debug_renderer_info");return n&&(e=e.getParameter(n.UNMASKED_RENDERER_WEBGL))?e:null},deviceAspectRatio:function(){var e="2/3 40/71 3/4 16/9 16/10 375/667 9/16 10/16 375/812 207/448".split(" ");e:{try{var i=t.screen.width+"/"+t.screen.height;break e}catch(e){}i=""}return i&&e.push(i),d("device-aspect-ratio",e)},screenWidthHeight:function(){try{return t.screen.width+"/"+t.screen.height}catch(e){}return!1},devicePixelRatio:function(){var e=1;try{e=t.devicePixelRatio}catch(e){}return e+""},"js.deviceOrientation":function(){return"js.deviceOrientation"in s&&s["js.deviceOrientation"]},rendererRef:function(){if(!t.CanvasRenderingContext2D)return null;var e=i.createElement("canvas"),n=e.getContext("2d");return n.textBaseline="top",n.font="16px 'Arial'",n.textBaseline="alphabetic",n.rotate(.05),n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText("DeviceAtlas",2,15),n.fillStyle="rgba(102, 200, 0, 0.7)",n.fillText("DeviceAtlas",4,17),n.shadowBlur=10,n.shadowColor="blue",n.rotate(-.15),n.fillRect(-20,25,234,5),("p3"===d("color-gamut",["p3"])?"1":"0")+c(e.toDataURL())}},d=function(e,i){if(void 0===t.matchMedia)return null;for(var n in i)if(t.matchMedia("("+e+":"+i[n]+")").matches)return i[n]+"";return null},c=function(e){for(var t=e.length,i=5381,n=0;n<t;n++)i=33*i^e.charCodeAt(n);return String(i>>>0)},l=function(e){try{var t=o[e]()}catch(e){}(null!=t&&void 0!==t||null!=(t=s[e])&&void 0!==t)&&h(e,t)},h=function(e,t){if(-1!=e.indexOf(".")){var i=e.split(".");void 0===n[i[0]]&&(n[i[0]]={}),n[i[0]][i[1]]=t}else n[e]=t;s[e]=t},function(){if(t.addEventListener&&t.removeEventListener){var e=function(i){null!=i&&null!=i.alpha&&h("js.deviceOrientation",!0),t.removeEventListener("deviceorientation",e,!1)};t.addEventListener("deviceorientation",e,!1)}}(),function(){for(var e in o)l(e)}(),n.propsCache=function(e){var t,i="";for(t in e){var s=e[t];i+=(s="boolean"==typeof s?"b":"number"==typeof s?"i":"s")+t+":"+("b"==s?e[t]+0:e[t])+"|"}return i+"sversion:"+n.apiVersion+"|bE:0"}(s),n))),window.teads.CONTEXT_IS_INITIALIZED=!0)}function B(e){T.model=e}function W(e){V=e,D=!0}function H(e){L=e}function z(e){x=e}function G(e){N.isSDK=e}function q(){return!!N.isDesktop}function $(){return!!N.isIpad}function K(){return!!N.isTablet}function Y(){return!!N.isMobile}function X(){return!!N.isChromeIos}function Q(){return!!N.isFacebookWebview}function J(){return!!N.isAndroidNative}function Z(){return!!N.isSamsungBrowser}function ee(){return!!N.isAndroid}function te(){return!!N.isIos}function ie(){return!!N.isIphone}function ne(){return!!N.isAndroidMobile}function se(){return!!N.isIE}function re(){return!!N.isChrome}function oe(){return!!N.isChromeWebView}function ae(){return!!N.isFirefox}function de(){return!!N.isEdge}function ce(){return!!N.isAmp}function le(){return!!N.isAmpInABox}function he(){return!!N.isAmpSF}function ue(){return!!N.isAmpObserveIntersection}function pe(){return!!N.isIabsf}function ge(){return N.iabsfWindow}function me(){return!!N.isEdgeTouchScreen}function fe(){return!!N.isSDK}function be(){return N.ieVersion?N.ieVersion:""}function ve(){return N.androidVersion?N.androidVersion:""}function Ae(){return N.chromeVersion?N.chromeVersion:""}function ye(){return N.iOsVersion?N.iOsVersion:""}function we(){return N.FacebookWebviewVersion?N.FacebookWebviewVersion:""}function Ee(){return N.safariVersion?N.safariVersion:""}function Oe(){return!!N.isUIWebview}function Ce(){return!!N.isSafari}function Ie(){return a.a(Ee(),"11")}function Se(){return a.a(Ae(),"66")}function Te(){return!!N.isGoogleSearchApp}function ke(){return!!N.isIos10Safari}function Pe(){return!!N.isIos10OtherBrowser}function je(){return a.a(we(),"87")&&a.a(ye(),"10.2")}function Le(){return a.a(ye(),"16.3")&&a.d(ye(),"16.4")||a.a(Ee(),"16.3")&&a.d(Ee(),"16.4")}function xe(){return!!N.isCanvasUsed}function Ve(e){return!!e.createElement("video").canPlayType}function Ne(){return S}function De(){return I}function Re(e){I=e}function _e(){return T}function Me(){return k}function Fe(){return P}function Ue(){return!1!==D}function Be(){return!Ue()}function We(){let e;return e=fe()?"sdk":ce()?"amp":he()?"ampsf":pe()?"sf":Q()?"fbwv":oe()||Oe()?"wv":"web",xe()?e+"-canvas":e}function He(){return fe()?"sdk-inapp":"js-"+We()}function ze(){return s.a.tryCatch(()=>window.navigator.connection.downlink).toOption()}function Ge(){const e=document.createElement("meta");e.httpEquiv="origin-trial",e.content="Az9xQo/imzWWuauBg0JngENQMoxulJzGzdGQ0VfUZDk7et2DJfmfUxfOWnHlwQiZRFG+Grc8bH8xWgOPW2ltjQQAAAB+eyJvcmlnaW4iOiJodHRwczovL3RlYWRzLnR2OjQ0MyIsImZlYXR1cmUiOiJQcml2YWN5U2FuZGJveEFkc0FQSXMiLCJleHBpcnkiOjE2ODA2NTI3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9",document.head.appendChild(e)}function qe(e){N.isCanvasUsed=e}function $e(){try{I=navigator.userAgent}catch(e){C.error("Could not get `navigator.userAgent`",e),I=""}}function Ke(){if(null!==D)return void C.error("Context.startAutoplayTest has already been called and autoplay is "+D);if(!(te()||ee()))return void C.debug("Not on iOS/Android, no need to start autoplay test");n.c(()=>{const e=document.createElement("video");e.src="https://a.teads.tv/media/format/v3/assets/default/autoplay.mp4",e.style.setProperty("display","none"),e.setAttribute("webkit-playsinline","true"),e.setAttribute("playsinline","true"),e.muted=!0,document.body.appendChild(e);const t=e.play();t&&t.catch(e=>{"NotAllowedError"===e.name||"AbortError"===e.name?(C.debug("Not allowed to play video without user interaction, disable autoplay"),D=!1):C.error("Error when trying to play the autoplay video:",e)}).then(()=>{C.debug("Autoplay test done");try{e.pause(),document.body.removeChild(e)}catch(e){}})},window)}},function(e,t,i){"use strict";i.r(t),i.d(t,"getBoundingClientRect",(function(){return p})),i.d(t,"copyBoundingClientRect",(function(){return g})),i.d(t,"isEmptyBoundingClientRect",(function(){return m})),i.d(t,"getClientRectRelativeToDocument",(function(){return f})),i.d(t,"getClientRectFromClientRectRelativeToDocument",(function(){return b})),i.d(t,"getSize",(function(){return v})),i.d(t,"getTextContent",(function(){return A})),i.d(t,"isEmpty",(function(){return y})),i.d(t,"querySelectorAll",(function(){return w})),i.d(t,"findMatchingElement",(function(){return E})),i.d(t,"getAttributeValue",(function(){return O})),i.d(t,"getAndRemoveAttributeValue",(function(){return C})),i.d(t,"getWindowSize",(function(){return S})),i.d(t,"inject",(function(){return T})),i.d(t,"addEventListener",(function(){return k})),i.d(t,"removeEventListener",(function(){return P})),i.d(t,"onDomReady",(function(){return j})),i.d(t,"onDomComplete",(function(){return L})),i.d(t,"getScrollLeft",(function(){return x})),i.d(t,"getScrollTop",(function(){return V})),i.d(t,"getElementsByClassName",(function(){return N})),i.d(t,"isHTMLElement",(function(){return D})),i.d(t,"removeElementFromDOM",(function(){return R})),i.d(t,"isNodeList",(function(){return _})),i.d(t,"isSelfClosingTag",(function(){return M})),i.d(t,"isISlotSelector",(function(){return F})),i.d(t,"htmlDecode",(function(){return U})),i.d(t,"htmlEncode",(function(){return B})),i.d(t,"getOuterHTML",(function(){return W}));var n=i(48),s=i(0),r=i(1),o=i(10),a=i(4),d=i(2),c=i(41);const l={IMG:" ",BR:"\n"},h=["SCRIPT","STYLE","HEAD","IFRAME","OBJECT"],u=3;function p(e,t=!0){try{const i=e.getBoundingClientRect(),n=g(i);if(t&&!a.isAmp()&&!a.isIABSafeFrame()&&Object(o.getWindow)(e)!==window.top){const t=Object(o.findFirstParentFrameNode)(e);if(t!==e){const e=p(t);e.top&&(n.top=e.top+i.top,n.bottom=e.top+i.bottom),e.left&&(n.left=e.left+i.left,n.right=e.left+i.right)}}return n}catch(e){return{left:0,top:0,right:0,bottom:0,width:0,height:0}}}function g(e){return{top:e.top||0,right:e.right||0,bottom:e.bottom||0,left:e.left||0,width:e.width||0,height:e.height||0}}function m(e){return!(0!==e.top||0!==e.right||0!==e.bottom||0!==e.left||0!==e.width||0!==e.height)}function f(e,t){return{left:e.left+t.x,top:e.top+t.y,right:e.right+t.x,bottom:e.bottom+t.y,width:e.width,height:e.height}}function b(e,t){return{left:e.left-t.x,top:e.top-t.y,right:e.right-t.x,bottom:e.bottom-t.y,width:e.width,height:e.height}}function v(e){const t=e.offsetWidth,i=e.offsetHeight,n=a.getUA().indexOf("WebKit")>-1&&!t&&!i;if((!t||n)&&e.getBoundingClientRect){const t=p(e);return{width:t.right-t.left,height:t.bottom-t.top}}return{width:t,height:i}}function A(e,t){if(r.indexOf(h,e.nodeName)>=0);else if(e.nodeType===u&&e.nodeValue)t.push(e.nodeValue);else if(e.nodeName in l)t.push(l[e.nodeName]);else{let i=e.firstChild;for(;i;)A(i,t),i=i.nextSibling}}function y(e,t=window){const i=e.tagName.toLowerCase(),n=["iframe","object","img"];return!(r.includes(n,i)||w(n.join(","),t,e).length>0||!e.textContent||""!==e.textContent.trim())}function w(e,t,i){return Object(r.fromArrayLike)((i||t.document).querySelectorAll(e))}function E(e,t){const i=e[0];if(i){const n=i.querySelector(t);return s.b.fromNullable(n).orElse(()=>E(e.slice(1),t))}return s.b.empty()}function O(e,t){return s.b.fromNullable(e.getAttribute(t)).filter(e=>""!==e)}function C(e,t){return O(e,t).map(i=>(e.removeAttribute(t),i))}const I={};function S(e=window,t=!1){var i,r;if(a.isAmp())return s.b.fromNullable(null===(i=window.context)||void 0===i?void 0:i.initialIntersection.rootBounds).map(({width:e,height:t})=>({width:e,height:t})).getOrValue({width:window.innerWidth,height:window.innerHeight});if(a.isIABSafeFrame())return s.b.fromNullable(null===(r=a.getIABSafeFrameWindow())||void 0===r?void 0:r.$sf.ext.geom()).map(e=>({width:e.win.w,height:e.win.h})).getOrValue({width:0,height:0});if(!t&&!a.isAmp()&&a.isIos()&&a.isSafari()){const t=e.innerWidth>e.innerHeight?"landscape":"portrait";return Object(d.isUndefined)(I[t])&&(Object(n.a)(e),Object(n.d)(e),I[t]=Object(n.c)(e),Object(n.e)()),{width:e.innerWidth,height:I[t]}}return"number"==typeof e.innerWidth?{width:e.innerWidth,height:e.innerHeight}:e.document.documentElement&&(e.document.documentElement.clientWidth||e.document.documentElement.clientHeight)?{width:e.document.documentElement.clientWidth,height:e.document.documentElement.clientHeight}:e.document.body&&(e.document.body.clientWidth||e.document.body.clientHeight)?{width:e.document.body.clientWidth,height:e.document.body.clientHeight}:{width:1e3,height:600}}function T(e,t=window){s.b.fromNullable(t.document.getElementsByTagName("head")[0]).orElse(()=>s.b.fromNullable(t.document.body)).forEach(t=>t.appendChild(e))}function k(e,t,i){c.a(e,t,i)}function P(e,t,i){c.d(e,t,i)}function j(e,t=window){c.c(e,t)}function L(e,t=window,i=this){c.b(e,t,i)}function x(e){return e.pageXOffset?e.pageXOffset:"CSS1Compat"===(e.document.compatMode||"")?e.document.documentElement.scrollLeft:e.document.body.scrollLeft}function V(e){return e.pageYOffset?e.pageYOffset:"CSS1Compat"===(e.document.compatMode||"")?e.document.documentElement.scrollTop:e.document.body.scrollTop}function N(e,t,i=window){if((t=t||i.document).getElementsByClassName)return Object(r.fromArrayLike)(t.getElementsByClassName(e));const n=e.split(" ");let s="";for(let e=0,t=n.length;e<t;e++)s+="."+n[e];return w(s,i,t)}function D(e,t){return!(!e||"object"!=typeof e||_(e))&&(t||(t=Object(o.getWindow)(e)||window),"object"==typeof t.HTMLElement?e instanceof t.HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName)}function R(e){return s.b.fromNullable(e.parentElement).forEach(t=>t.removeChild(e))}function _(e){return!(!e||"object"!=typeof e)&&e instanceof NodeList}function M(e){if(D(e))return/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(e.nodeName)}function F(e,t){let i=!1;const n=Object.keys(t);for(const t in e)if(i=Object(r.includes)(n,t)&&(Object(d.isString)(e[t])||_(e[t])||D(e[t])),!i)break;return i}function U(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}function B(e){const t=document.createElement("textarea");return t.innerText=e,t.innerHTML}function W(e){return D(e)?U(e.outerHTML):""}},function(e,t,i){"use strict";i.d(t,"f",(function(){return s})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return l})),i.d(t,"e",(function(){return h}));var n=i(0);const s={filterOrElse:(e,t)=>i=>i.filterOrElse(e,t),fold:(e,t)=>i=>i.fold(e,t)};class r{constructor(e,t){this._isRight="right"===t,this.value=e}static tryCatch(e){try{return c(e())}catch(e){return a(e)}}static of(e){return c(e)}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&this.value===e}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:a(t(this.value)):this}flatMap(e){return this._isRight?e(this.value):this}fold(e,t){return this._isRight?t(this.value):e(this.value)}getOrElse(e){return this._isRight?this.value:e()}getOrValue(e){return this._isRight?this.value:e}orElse(e){return this._isRight?this:e(this.value)}map(e){return this._isRight?c(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}tap(e){return this._isRight&&e(this.value),this}tapLeft(e){return this._isRight||e(this.value),this}toOption(){return this._isRight?n.b.fromNullable(this.value):n.a}}class o extends r{constructor(e){super(e,"left")}}function a(e){return new o(e)}class d extends r{constructor(e){super(e,"right")}}function c(e){return new d(e)}const l=a,h=c},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n={ABORT:"abort",CAN_PLAY:"canplay",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",LOADED:"loaded",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",RESUME_AFTER_STALLED:"resumeafterstalled",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",AUDIO_SYNC:"audiosync",BENCH_FPS:"benchFps",RESIZE:"resize"}},function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.INIT=0]="INIT",e[e.INIT_VIDEO=1]="INIT_VIDEO",e[e.INIT_AUDIO=2]="INIT_AUDIO",e[e.CAN_PLAY=3]="CAN_PLAY",e[e.PLAYING=4]="PLAYING",e[e.PAUSED=5]="PAUSED",e[e.LOADED=6]="LOADED",e[e.STALLED=7]="STALLED",e[e.ENDED=8]="ENDED"}(n||(n={}))},function(e,t,i){"use strict";function n(e,t,i,n,s,r,o,a,d,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return i(t(e));case 4:return n(i(t(e)));case 5:return s(n(i(t(e))));case 6:return r(s(n(i(t(e)))));case 7:return o(r(s(n(i(t(e))))));case 8:return a(o(r(s(n(i(t(e)))))));case 9:return d(a(o(r(s(n(i(t(e))))))));case 10:return c(d(a(o(r(s(n(i(t(e)))))))))}}i.d(t,"b",(function(){return n})),t.a=function(e,t,i,n,s,r,o,a,d){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return i(t(e.apply(this,arguments)))};case 4:return function(){return n(i(t(e.apply(this,arguments))))};case 5:return function(){return s(n(i(t(e.apply(this,arguments)))))};case 6:return function(){return r(s(n(i(t(e.apply(this,arguments))))))};case 7:return function(){return o(r(s(n(i(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(r(s(n(i(t(e.apply(this,arguments))))))))};case 9:return function(){return d(a(o(r(s(n(i(t(e.apply(this,arguments)))))))))}}}},function(e,t,i){"use strict";i.r(t),i.d(t,"createIframe",(function(){return f})),i.d(t,"makeIframeIABFriendly",(function(){return b})),i.d(t,"resetIframeBodyCSS",(function(){return v})),i.d(t,"appendIframeToElement",(function(){return A})),i.d(t,"isFullscreen",(function(){return y})),i.d(t,"getWindow",(function(){return w})),i.d(t,"getDocument",(function(){return E})),i.d(t,"toggleFullscreen",(function(){return O})),i.d(t,"openFullscreen",(function(){return C})),i.d(t,"closeFullscreen",(function(){return I})),i.d(t,"addClass",(function(){return S})),i.d(t,"removeClass",(function(){return T})),i.d(t,"hasClass",(function(){return k})),i.d(t,"toggleClass",(function(){return P})),i.d(t,"replaceClass",(function(){return j})),i.d(t,"isInCrossDomainIframe",(function(){return L})),i.d(t,"isChildWindow",(function(){return x})),i.d(t,"isRectZeroFilled",(function(){return V})),i.d(t,"findParentWindows",(function(){return N})),i.d(t,"findTopWindow",(function(){return D})),i.d(t,"findChildWindows",(function(){return R})),i.d(t,"findAllWindows",(function(){return _})),i.d(t,"findParentFrameNode",(function(){return M})),i.d(t,"findFirstParentFrameNode",(function(){return F})),i.d(t,"isKarmaFrame",(function(){return U})),i.d(t,"findParentElements",(function(){return B})),i.d(t,"isInView",(function(){return W})),i.d(t,"getPercentageInView",(function(){return H})),i.d(t,"isChildOf",(function(){return z})),i.d(t,"isChildBoundsInParentBounds",(function(){return G})),i.d(t,"findFloatingHeaders",(function(){return q})),i.d(t,"getTop",(function(){return $})),i.d(t,"checkIsHtmlElement",(function(){return K})),i.d(t,"checkForDisplayNone",(function(){return Y})),i.d(t,"checkForTiny",(function(){return X})),i.d(t,"visibilityChecksOnParents",(function(){return Q})),i.d(t,"isDisplayNoneOverParents",(function(){return J})),i.d(t,"checkForOverflow",(function(){return Z})),i.d(t,"checkElementVisibility",(function(){return ee})),i.d(t,"getCSSRules",(function(){return te})),i.d(t,"copyCSSRules",(function(){return ie}));var n=i(1),s=i(0),r=i(2);var o=i(6),a=i(33);const d=new class{constructor(e){this.length=0,this.keys=[],this.values=[],Object(r.isUndefined)(e)||Object(n.forEach)(e,e=>this.put(e[0],e[1]))}contains(e){return Object(n.indexOf)(this.keys,e)>-1}get(e){const t=Object(n.indexOf)(this.keys,e);return t>-1?Object(s.c)(this.values[t]):s.a}put(e,t){const i=Object(n.indexOf)(this.keys,e);if(i>-1){const e=this.values[i];return this.values[i]=t,Object(s.c)(e)}return this.keys.push(e),this.values.push(t),this.length=this.values.length,s.a}remove(e){const t=Object(n.indexOf)(this.keys,e);if(t>-1){const e=this.values[t];return this.keys.splice(t,1),this.values.splice(t,1),this.length=this.values.length,Object(s.c)(e)}return s.a}clear(){this.keys.splice(0,this.length),this.values.splice(0,this.length),this.length=0}size(){return this.length}};let c=!1;function l(e,t){const{windowHeight:i,viewabilityThreshold:s,offset:r=0,withClearCache:u=!0,getClientRect:p,getElementFromPoint:g,findParentElements:m,findFirstParentFrameNode:f}=e,b=p(t),v=function(e,t,i){return(e+t)/2>i/2}(b.top,b.bottom,i),A=function(e,t){return e/100*t}(s,b.height),y=(w=b.left,E=b.right,Math.round((w+E)/2));var w,E;const O=function(e,t,i,n,s){return e?Math.round(t+Math.max(1,i+1)):Math.round(Math.min(s-1,n-1)-t)}(v,r,b.top,b.bottom,i),C=(I=O,S=A,T=v,Math.round(I+(T?S-1:1-S)));var I,S,T;const k=function(e,t,i,n,s){return`${e}-${t}-${i}-${n}-${s}`}(v,r,y,O,C);return u&&(c||(c=!0,Object(a.d)(()=>{d.clear(),c=!1},1e3))),d.get(k).getOrElse(()=>g(y,O).match({none:()=>h(k,Object(o.c)("hidden-overflow")),some:i=>{const s=function(e,{top:t,bottom:i},{top:n,bottom:s}){return e?i-n:s-t}(v,p(i),b);return r===s?h(k,Object(o.c)("hidden-overflow")):g(y,C).match({none:()=>h(k,l(Object.assign(Object.assign({},e),{offset:s}),t)),some:r=>{const a=(d=[i,...m(i)],c=[r,...m(r)],u=f(t),n.includes(d,u)&&n.includes(c,u));var d,c,u;return h(k,a?o.a.of(t):l(Object.assign(Object.assign({},e),{offset:s}),t))}})}}))}function h(e,t){return d.contains(e)||d.put(e,t),t}var u=i(5),p=i(13),g=i(4);const m=g.isDesktop()?.1:.15;function f(e){const t=document.createElement("iframe");return t.style.setProperty("margin","0","important"),t.style.setProperty("padding","0","important"),t.style.setProperty("width","0","important"),t.style.setProperty("height","0","important"),t.style.setProperty("border","0","important"),t.style.setProperty("overflow","hidden","important"),t.style.setProperty("float","none","important"),t.setAttribute("allow","autoplay; attribution-reporting 'src' https://cm.teads.tv"),t.setAttribute("scrolling","no"),t.setAttribute("title",e),t.frameBorder="0",t}function b(e){s.b.fromNullable(e.contentWindow).forEach(e=>e.inDapIF=!0)}function v(e){var t;s.b.fromNullable(null===(t=null==e?void 0:e.document)||void 0===t?void 0:t.body).forEach(e=>{e.style.overflow="hidden",e.style.padding="0",e.style.margin="0"})}function A(e,t){return Object(u.isHTMLElement)(e)&&e.appendChild(t),t}function y(e){return e||(e=document),!!(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}function w(e){if(!e||Object(u.isNodeList)(e))return null;var t=E(e);return t?t.defaultView||t.parentWindow:null}function E(e){return!e||Object(u.isNodeList)(e)?null:e.ownerDocument}function O(e){y()?I(e):C(e)}function C(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function I(e){const t=E(e);t&&(t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen())}function S(e,t){(t=p.trim(t))&&!k(e,t)&&e.classList.add(t)}function T(e,t){(t=p.trim(t))&&k(e,t)&&e.classList.remove(t)}function k(e,t){return e.classList.contains(p.trim(t))}function P(e,t){e.classList.toggle(p.trim(t))}function j(e,t,i){t=p.trim(t),!k(e,i=p.trim(i))&&k(e,t)&&(r.isFunction(e.classList.replace)?e.classList.replace(t,i):(T(e,t),S(e,i)))}function L(e){return N(e).pop()!==window.top}function x(e){return e!==window.top}function V(e){return!n.some(Object.keys(e),t=>0!==e[t])}function N(e,t=!0){const i=[];if(Object(u.isHTMLElement)(e)){let n;n=e=>{if(e.parent!==e&&e.parent.location&&e.parent.window){if(t){e.parent.document}i.push(e.parent),n(e.parent)}};const s=w(e);s&&i.push(s);try{n(s)}catch(e){}}return i}function D(e){return N(e).pop()||window}function R(e,t=!1){let i=[];if(Object(u.isHTMLElement)(e)){const r=e.getElementsByTagName("iframe");for(let e=0;e<r.length;e++)try{s.b.fromNullable(r[e].contentWindow).flatMap(e=>{var t;return s.b.fromNullable(null===(t=e.document)||void 0===t?void 0:t.body).map(t=>({win:e,body:t}))}).forEach(({win:e,body:s})=>{i.push(e),t&&n.forEach(R(s,!0),e=>{i=i.concat(e)})})}catch(e){}}return i}function _(e,t=!1){return N(e).concat(R(e,t))}function M(e){const t=w(e);try{if(t&&t.parent!==t&&void 0!==t.parent.Window&&t.parent instanceof t.parent.Window){const e=t.parent.document.getElementsByTagName("iframe");if(e)for(let i=0;i<e.length;i++)if(e[i].contentWindow===t)return M(e[i])}}catch(e){}return e}function F(e){const t=w(e);try{if(t&&t.parent!==t&&void 0!==t.parent.Window&&t.parent instanceof t.parent.Window){const e=t.parent.document.getElementsByTagName("iframe");if(e)for(let i=0;i<e.length;i++)if(e[i].contentWindow===t&&!U(e[i]))return e[i]}}catch(e){}return e}function U(e){return"context"===e.id&&"http://localhost:5555/context.html"===e.src&&"100%"===e.width&&"100%"===e.height}function B(e,t=!0){const i=[];if(Object(u.isHTMLElement)(e)){const n=E(e);let s=e;const r=!(!s.tagName||!s.tagName.toUpperCase||"HTML"!==s.tagName.toUpperCase());for(;!r&&(t||n&&s!==n.body)&&Object(u.isHTMLElement)(s);)s=s.parentElement,s&&i.push(s)}return i}function W({element:e,elementAncestors:t,elementClientRect:i,mainWindow:n,thresholdCoefficient:s,elementHeight:r,getPercentage:o=H,envIsAmp:a=g.isAmp(),envIsIABSafeFrame:d=g.isIABSafeFrame()}){const c=o({element:e,elementAncestors:t,elementClientRect:i,mainWindow:n,elementHeight:r});return(!a&&!d||0!==c)&&c>=s}function H({element:e,elementAncestors:t,elementClientRect:i,mainWindow:n,elementHeight:s,allowNegative:o=!1,detectFloatingHeaders:a=!g.isAndroid(),getWindowSize:d=u.getWindowSize,envIsAmp:c=g.isAmp(),envIsIABSafeFrame:l=g.isIABSafeFrame(),envIabSFWindow:h=g.getIABSafeFrameWindow()}){if(c&&n._teads_amp)return n._teads_amp.change?n._teads_amp.change.intersectionRect.height/n._teads_amp.change.boundingClientRect.height:0;if(l){const e=h;if(r.isUndefined(e))return 0;const t=e.$sf.ext.geom();return t&&t.self?t.self.yiv:0}const p=d(n,!0),m=a?$(n,q(n,e,t,i),p.height):0,f=i.top-m;let b=(f>0?p.height-i.top:f+s)/s;return o||(b=b>0?b:0,b=b<1?b:1),b}function z(e,t){return n.includes(B(e),t)}function G(e,t,i,n){const s=("bottom"===i?e.height:e.width)*n;return e[i]-s>t[i]}function q(e=window,t,i=[document.body],s,r=u.getWindowSize){let o=[];const a=r(e),d=a.width/2,c=a.height*m,l=c*m;let h,p;const g=r=>{const o=Object(u.getBoundingClientRect)(r);return"fixed"===e.getComputedStyle(r).position&&(!s||o.right>s.left&&o.left<s.right)&&!n.includes(i,r)&&!r.className.match(/teads/)&&!z(r,t)};for(let t=1;t<c;t+=l)h=e.document.elementFromPoint(d,t),h&&p!==h&&(p=h,g(h)&&o.push(h),n.forEach(B(h),e=>{g(e)&&o.push(e)}));return n.unique(o)}function $(e,t,i){var s;let r=0;const o=null!==(s=window.FORCE_DEMO)&&void 0!==s&&s;n.forEach(t,e=>r=Math.max(r,Object(u.getBoundingClientRect)(e,!o).bottom));const a=Object(u.getScrollTop)(e),d=a>0?r:a+r;return Math.max(0,Math.min(i,d))}function K(e){return Object(u.isHTMLElement)(e)?o.a.of(e):Object(o.c)("invalid-dom")}function Y(e){return"none"===window.getComputedStyle(e).display?Object(o.c)("hidden-display"):o.a.of(e)}function X(e){const t=Object(u.getBoundingClientRect)(e),i=window.getComputedStyle(e);return(g.isCanvasUsed()?(t.height<50||t.width<50)&&("hidden"===i.overflowX||"hidden"===i.overflowY):t.height<50||t.width<50)?Object(o.c)("tiny"):o.a.of(e)}function Q(e){const t=e=>e.flatMap(Y).flatMap(e=>e.parentElement?Q(e.parentElement):Object(o.d)(e));return g.isCanvasUsed()?t(K(e).flatMap(X)):t(K(e))}function J(e){return e.map(e=>"none"===window.getComputedStyle(e).display||J(s.b.fromNullable(e.parentElement))).getOrValue(!1)}function Z(e,t){const i=(100-t)/100,n=Object(u.getBoundingClientRect)(e);let s=o.a.of(e);const r=e=>{const t=!k(e,"teads-inread"),a=window.getComputedStyle(e);let d;return t&&"hidden"===a.overflowY&&(d=Object(u.getBoundingClientRect)(e),G(n,d,"bottom",i)||(s=Object(o.c)("hidden-overflow"))),s.isRight()&&t&&"hidden"===a.overflowX&&(d=d||Object(u.getBoundingClientRect)(e),G(n,d,"right",i)||(s=Object(o.c)("hidden-overflow"))),s.isRight()&&e.parentElement?r(e.parentElement):s};return e.parentElement?r(e.parentElement):s}function ee(e,t,i=u.getWindowSize){return X(e).flatMap(()=>Q(e).flatMap(()=>Z(e,t).orElse(()=>{const n=D(e);return l({windowHeight:i(n).height,viewabilityThreshold:t,getClientRect:u.getBoundingClientRect,getElementFromPoint:(e,t)=>s.b.fromNullable(n.document.elementFromPoint(e,t)),findParentElements:B,findFirstParentFrameNode:F},e)})))}function te(e){const t=w(e),i=[];if(t){const n=t.document.styleSheets;if(e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,r.isFunction(e.matches))for(let t in n){let s=n[t],r=o.a.tryCatch(()=>s.rules||s.cssRules).getOrElse(()=>({}));for(let t in r){let n=r[t];e.matches(n.selectorText)&&i.push(n)}}}return i}function ie(e,t,i){const s=te(e);n.forEach(s,e=>{n.forEach(i,i=>{let n=e.style.getPropertyValue(i);!n||t.style[i]||t.getAttribute(i)||(t.style[i]=n)})})}},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i(68),i(17);var n,s=i(27),r=i(1),o=i(62),a=[],d=[],c=!1;class l{log(...e){}}n=window.console&&void 0!==console.log?window.console:new l;let h=!1;class u{constructor(e){this.namespace=e}static clear(){u.logs=[],window.teads.FULL_LOGS=[]}static getFullLogs(){return window.teads.FULL_LOGS}debug(...e){this._log("debug",e)}info(...e){this._log("info",e)}warn(...e){this._log("warn",e)}error(...e){this._log("error",e)}table(e,...t){n.table&&n.table(e,t.length>0?t:null)}_log(e,t){if(t.length){var i=((Object(s.a)()-window.teads.START_TIME)/1e3).toFixed(3)+"s",o="";for(let e=0;e<t.length;e++)if(e>0&&(o+=" + "),"object"==typeof t[e])try{o+=JSON.stringify(t[e])}catch(i){o+=t[e]}else o+=t[e];if(window.teads.FULL_LOGS.push({level:e,message:i+" ["+this.namespace+"] "+o}),!(Object(r.indexOf)(a,e)<0)){if(!c&&d.length)if(!Object(r.some)(d,e=>0===this.namespace.indexOf(e)))return;u.logs.push({level:e,message:i+" ["+this.namespace+"] "+t.join(" ")}),t.unshift("Teads %c"+i+" "+this.namespace,"color:#7ebde5;");var l=n[e]||n.log;try{l.apply(n,t)}catch(e){Function.prototype.apply.apply(l,[n,t])}}}}}u.logs=[],h||(h=!0,Object(o.a)("teadsDebugLevel").toOption().filter(e=>!!e).map(e=>e.split(",")).forEach(e=>{a=Object(r.indexOf)(e,"all")>=0?["debug","info","warn","error"]:e}),Object(o.a)("teadsDebugNamespace").toOption().filter(e=>!!e).forEach(e=>{d=e.split(","),c="all"===String(e).toLocaleLowerCase()}),a.length&&!window.teads.Logger&&(n.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#585858;font-family:Helvetica,sans-serif;font-size:2em;"),n.log("%cv1160', 'color:#7ebde5;font-style:italic;")),window.teads.HAS_DEBUG_LOGS=!!a.length)},function(e,t,i){"use strict";var n;!function(e){e[e.REMOVED=-6]="REMOVED",e[e.REMOVING=-5]="REMOVING",e[e.ERROR=-4]="ERROR",e[e.STOPPED=-3]="STOPPED",e[e.STOPPING=-2]="STOPPING",e[e.SKIPPED=-1]="SKIPPED",e[e.SKIPPING=0]="SKIPPING",e[e.READY=1]="READY",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED",e[e.STARTING=5]="STARTING",e[e.STARTED=6]="STARTED",e[e.PAUSING=7]="PAUSING",e[e.PAUSED=8]="PAUSED",e[e.RESUMING=9]="RESUMING",e[e.PLAYING=10]="PLAYING",e[e.COMPLETE=11]="COMPLETE"}(n||(n={})),t.a=n},function(e,t,i){"use strict";i.r(t),i.d(t,"isURL",(function(){return s})),i.d(t,"pad",(function(){return r})),i.d(t,"ucfirst",(function(){return o})),i.d(t,"rand",(function(){return a})),i.d(t,"trim",(function(){return d})),i.d(t,"separate",(function(){return c})),i.d(t,"endsWith",(function(){return l})),i.d(t,"match",(function(){return h})),i.d(t,"replaceStringsWithValue",(function(){return u})),i.d(t,"includesSubString",(function(){return p})),i.d(t,"isEmpty",(function(){return g})),i.d(t,"isNotEmpty",(function(){return m}));var n=i(1);function s(e){return"string"==typeof e&&!e.match(/\s/)&&/(((((http|ftp|https):)?(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\-]+\.|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(e)}function r(e,t="00"){var i=String(e);return t.substring(0,t.length-i.length)+i}function o(e){return e.charAt(0).toUpperCase()+e.substr(1)}function a(e,t=!0){for(var i=t?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",s=0;s<e;s++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}function d(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function c(e="|",...t){let i=!0,n=0;for(;i&&n<t.length;)i=i&&!t[n],n++;return i?"":t.join(e)}function l(e,t){return e.slice(-t.length)===t}function h(e,t){return e.match(t)||[]}function u(e,t){return i=>n.reduce(e,(e,i)=>e.replace(i,""+t),i)}function p(e,t){return-1!==e.indexOf(t)}function g(e){return""===e}function m(e){return!g(e)}},function(e,t,i){"use strict";i.d(t,"p",(function(){return p})),i.d(t,"q",(function(){return g})),i.d(t,"l",(function(){return m})),i.d(t,"j",(function(){return f})),i.d(t,"o",(function(){return b})),i.d(t,"k",(function(){return v})),i.d(t,"n",(function(){return A})),i.d(t,"h",(function(){return y})),i.d(t,"r",(function(){return w})),i.d(t,"c",(function(){return E})),i.d(t,"e",(function(){return O})),i.d(t,"s",(function(){return C})),i.d(t,"a",(function(){return I})),i.d(t,"b",(function(){return S})),i.d(t,"m",(function(){return T})),i.d(t,"d",(function(){return k})),i.d(t,"i",(function(){return P})),i.d(t,"f",(function(){return j})),i.d(t,"g",(function(){return L}));var n=i(1),s=i(4),r=i(66),o=i(13),a=i(11),d=i(2),c=i(0),l=i(6),h=i(10);const u=new a.a("URIHelper");function p(e){const t=document.createElement("a");return t.href=e,{href:t.href,protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}}function g(e){const t={};return"string"!=typeof e?t:(e=Object(o.trim)(e).replace(/^(\?|&)/,""))?(n.forEach(e.split("&"),e=>{const i=e.split("="),n=i.shift();n&&(t[n]=i.length>0?i.join("="):void 0)}),t):t}function m(e){return/^http(s)*:\/\/localhost/i.test(e)||/^http(s)*:\/\/teads-qa.com/i.test(e)||/^\/track\?action=/.test(e)||/^\/dist\/.*teads/.test(e)||/^\.\/teads/.test(e)}function f(e){return/teads\.(tv|net|tech|com)$/.test(p(e).hostname)||m(e)}function b(e){return/^http(s)*:\/\/t\.teads\.tv/i.test(e)||m(e)}function v(e){return/itunes\.apple\.com/.test(p(e).hostname)}const A=e=>/^(\w+\.sandbox\.teads\.net|(\w+\.)+teads\.tech)|(\d+\.\d+\.\d+\.\d+)$/.test(e);function y(e){const t=e.split(".");let i=t.length>1?t[t.length-2]:e;return n.includes(["uk"],t[t.length-1])&&(i=t[t.length-3]),i}function w(e,t,i){var n,s;if(e.indexOf(t)<0)return e;{const r=new RegExp("[\\?&]"+t+"=([^&#]*)");return c.b.fromNullable(null===(s=null===(n=r.exec(e))||void 0===n?void 0:n[0])||void 0===s?void 0:s.charAt(0)).match({some:n=>e.replace(r,n+t+"="+i),none:()=>(u.warn(`Tried to replace parameter "${t}" value with "${i}" on URL ${e} and failed.`),e)})}}function E(e,t){const i=n.map(Object.keys(t),e=>e+"="+t[e]).join("&"),s=-1===e.indexOf("?")?"?":"&";return e+(""===i?"":s+i)}function O(e){return Object(r.b)(r.a,Object(r.e)(e))}function C(e){return e.replace(/^http:/,Object(d.getProtocol)())}function I(e,t,i){return T(e,t)?e:E(e,{[t]:i})}function S(e,t,i){return i.map(i=>I(e,t,i)).getOrValue(e)}function T(e,t){return e.indexOf(`?${t}=`)>-1||e.indexOf(`&${t}=`)>-1}function k(e,t,i){return T(e,t)?w(e,t,i):I(e,t,i)}function P(){return l.a.tryCatch(()=>window.top.location.search).getOrElse(()=>p(document.referrer).search)}function j(e){var t,i;try{let e,n,r=Object(h.findParentWindows)(window.document.body);return window.top!==window?Object(s.isAmp)()&&c.b.fromNullable(window.context).map(e=>e.sourceUrl).nonEmpty()?(e=window.context.sourceUrl,n=window.context.canonicalUrl):Object(s.isAmpSF)()&&c.b.fromNullable(window.AMP_CONTEXT_DATA).map(e=>e.sourceUrl).nonEmpty()?(e=window.AMP_CONTEXT_DATA.sourceUrl,n=window.AMP_CONTEXT_DATA.canonicalUrl):e=document.referrer?Object(s.isIABSafeFrame)()&&(Object(s.isIos)()||Object(s.isSafari)())?c.b.fromNullable(null===(t=null===window||void 0===window?void 0:window.teads)||void 0===t?void 0:t.pageURL).getOrElse(()=>document.referrer):document.referrer:l.a.tryCatch(()=>window.top.location.href).getOrElse(()=>window.location.href):e=window._teads_canonical_url?window._teads_canonical_url:null===(i=window.location)||void 0===i?void 0:i.href,e.match("ampproject.org")&&n&&!n.match("amproject.org")&&(e=n),c.b.fromNullable({windowDepth:r.length,windowReferrerUrl:e})}catch(t){e.warning("get-current-page-referrer error retrieving top win")}return c.b.empty()}const L=e=>encodeURIComponent(j(e).flatMap(e=>c.b.fromNullable(e.windowReferrerUrl)).getOrValue(""))},,function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));class n{constructor(e,t){this.code=e,this.error=t}static get(e,t,i){return new n({id:e,message:t},i)}getFullMessage(){return"Error #"+this.code.id+": "+this.code.message}getId(){return this.code.id}getMessage(){return this.code.message}getStackTrace(){return this.error&&this.error.stack?this.error.stack:""}toString(){return this.getFullMessage()}}class s extends n{}s.XML_PARSE={id:100,message:"XML parsing error"},s.XML_INVALID_SCHEMA={id:101,message:'VAST schema validation error: expected "%s" but found "%s"'},s.UNSUPPORTED_VERSION={id:102,message:"VAST version of response not supported. Expected VAST2 or VAST3 but VAST1 found"},s.TRAFFICKING={id:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display"},s.LINEARITY={id:201,message:"Video player expecting different linearity"},s.DURATION={id:202,message:"Video player expecting different duration"},s.SIZE={id:203,message:"Video player expecting different size"},s.WRAPPER={id:300,message:"General Wrapper error"},s.WRAPPER_TIMEOUT={id:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element (URI was either unavailable or reached a timeout as defined by the video player)"},s.WRAPPER_LIMIT={id:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},s.NO_ADS={id:303,message:"No Ads VAST response after one or more Wrappers"},s.GENERAL_LINEAR={id:400,message:"General Linear error. Video player is unable to display the Linear Ad."},s.FILE_NOT_FOUND={id:401,message:"File not found. Unable to find Linear/MediaFile from URI."},s.MEDIAFILE_TIMEOUT={id:402,message:"Timeout of MediaFile URI."},s.UNSUPPORTED_MEDIAFILE={id:403,message:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},s.MEDIAFILE_DISPLAY={id:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but could not display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},s.GENERAL_NONLINEAR={id:500,message:"General NonLinearAds error."},s.CREATIVE_DIMENSIONS={id:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},s.NONLINEAR_FETCH={id:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},s.SUPPORTED_NONLINEAR_NOT_FOUND={id:503,message:"Could not find NonLinear resource with supported type."},s.GENERAL_COMPANION={id:600,message:"General CompanionAds error."},s.COMPANION_DIMENSIONS={id:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},s.COMPANION_DISPLAY={id:602,message:"Unable to display Required Companion."},s.COMPANION_FETCH={id:603,message:"Unable to fetch CompanionAds/Companion resource."},s.SUPPORTED_COMPANION_NOT_FOUND={id:604,message:"Could not find Companion resource with supported type."},s.UNDEFINED={id:900,message:"Undefined Error"},s.GENERAL={id:901,message:"General VPAID error"}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});const s=function(e,t,...i){if(Object(n.isNative)(e.bind))return e.bind(t,...i);const s=n.noop,r=function(...n){return e.apply(this instanceof s?this:t,i.concat(n))};return s.prototype=e.prototype,r.prototype=new s,r}},function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return d})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return l}));class n{constructor(e){if(this.isValid=!0,"string"!=typeof e&&(e=""+e),e.length>s)return void(this.isValid=!1);const t=e.trim().match(o);if(!t){return e.split(".").length<3?new n(e+".0"):void(this.isValid=!1)}this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0||this.minor>r||this.minor<0||this.patch>r||this.patch<0?this.isValid=!1:this.version=this.major+"."+this.minor+"."+this.patch}toString(){return this.version}}const s=256,r=9007199254740991,o=new RegExp("^v?(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*).*?$");function a(e,t){let i=u(e,t);return null!==i&&i>0}function d(e,t){let i=u(e,t);return null!==i&&i<0}function c(e,t){let i=u(e,t);return null!==i&&i>=0}function l(e,t){let i=u(e,t);return null!==i&&i<=0}function h(e,t){return e<t?-1:e>t?1:0}function u(e,t){let i=new n(e),s=new n(t);return i.isValid&&s.isValid?function(e,t){return h(e.major,t.major)||h(e.minor,t.minor)||h(e.patch,t.patch)}(i,s):null}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(11),s=i(49);class r{constructor(e){if(this.logger=new n.a("option."+e),!e)throw new s.a(s.a.OPTION_NAME_REQUIRED)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o}));var n,s=i(1),r=i(9);!function(e){e.Error="error",e.Click="click",e.Pause="pause",e.Resume="resume",e.Skip="skip",e.CreativeView="creativeView",e.Start="start",e.FirstQuartile="firstQuartile",e.Midpoint="midpoint",e.ThirdQuartile="thirdQuartile",e.Complete="complete",e.Impression="impression",e.Close="close",e.Progress="progress",e.Mute="mute",e.Unmute="unmute",e.Rewind="rewind",e.Fullscreen="fullscreen",e.ExitFullscreen="exitFullscreen",e.Expand="expand",e.Collapse="collapse",e.AcceptInvitationLinear="acceptInvitationLinear",e.AcceptInvitation="acceptInvitation",e.CloseLinear="closeLinear",e.NoAd="noAd",e.NoLinearAd="noLinearAd",e.CustomClicks="customClicks",e.Billable="billable",e.OtherAdInteraction="otherAdInteraction",e.ClickIcon="clickIcon"}(n||(n={}));const o=Object(r.b)(Object.keys(n),s.cArray.map(e=>n[e]))},function(e,t,i){"use strict";i.d(t,"g",(function(){return d})),i.d(t,"f",(function(){return c})),i.d(t,"a",(function(){return u})),i.d(t,"c",(function(){return p})),i.d(t,"b",(function(){return g})),i.d(t,"e",(function(){return m})),i.d(t,"d",(function(){return f})),i.d(t,"h",(function(){return b})),i.d(t,"j",(function(){return v})),i.d(t,"i",(function(){return A})),i.d(t,"l",(function(){return y})),i.d(t,"k",(function(){return w}));var n=i(0),s=i(2);const r={type:"ClassicFormatTrackingStore",trackedEvents:[],customTrackings:[]},o={type:"HeaderBiddingFormatTrackingStore",trackedEvents:[]},a={type:"DebugTrackingStore",trackedEvents:[]},d={type:"VastTrackingStore",trackings:[],progressTrackings:[],trackedEvents:[],trackedProgressOffsets:[],alreadyBilledAdvertiser:!1,studioCreativeId:n.a,customTrackings:[],customProgressTrackings:[],trackBillable:!1},c={type:"ThirdPartyVastTrackingStore",trackings:[],progressTrackings:[],trackedEvents:[],trackedProgressOffsets:[],customTrackings:[],customProgressTrackings:[]},l={},h=e=>(Object(s.isUndefined)(l[e])&&(l[e]={classicFormatStore:r,headerBiddingFormatStore:o,debugStore:a,vastStore:d,thirdPartyVastStore:c}),l[e]),u=e=>h(e).classicFormatStore,p=e=>h(e).headerBiddingFormatStore,g=e=>h(e).debugStore,m=e=>h(e).vastStore,f=e=>h(e).thirdPartyVastStore,b=e=>t=>(h(e).classicFormatStore=t,t),v=e=>t=>(h(e).headerBiddingFormatStore=t,t),A=e=>t=>(h(e).debugStore=t,t),y=e=>t=>(h(e).vastStore=t,t),w=e=>t=>(h(e).thirdPartyVastStore=t,t)},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"l",(function(){return d})),i.d(t,"e",(function(){return c})),i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return h})),i.d(t,"i",(function(){return u})),i.d(t,"h",(function(){return p})),i.d(t,"j",(function(){return g})),i.d(t,"b",(function(){return m})),i.d(t,"k",(function(){return f})),i.d(t,"f",(function(){return b})),i.d(t,"g",(function(){return v}));var n,s=i(1),r=i(6),o=i(9),a=i(2);!function(e){e.LimitedCapabilities="limitedCapabilities",e.PlacementCall="placementCall",e.FallbackIntegration="passback-integration",e.FallbackNoAd="passback-noAd",e.NoSlotSelector="noSlot-selector",e.HbNoSlotSelector="hbNoSlot-selector",e.NoSlotFilter="noSlot-filter",e.NoSlotAvoid="noSlot-avoid",e.NoSlotSize="noSlot-size",e.NoSlotBtf="noSlot-BTF",e.NoSlotMinimum="noSlot-minimum",e.NoSlotMinimumBelow="noSlot-minimumBelow",e.NoSlotContent="noSlot-content",e.NoSlotPosition="noSlot-position",e.NoSlotVideoArticle="noSlot-videoArticle",e.NoSlotVideoSlot="noSlot-videoSlot",e.NoSlotImageSlot="noSlot-imageSlot",e.NoSlotSafeFrame="noSlot-safeFrame",e.IncompatibilityBrowser="incompatibility-browser",e.IncompatibilityContext="incompatibility-context",e.IncompatibilityFormat="incompatibility-format",e.IncompatibilityVideo="incompatibility-video",e.SlotAvailable="slotAvailable",e.HbSlotAvailable="hbSlotAvailable",e.AdReceived="adReceived",e.AdNotAvailableNetworkError="adNotAvailable-networkError",e.AdNotAvailableServerError="adNotAvailable-serverError",e.AdAvailableErrorParseTimeout="adAvailable-error-parseTimeout",e.AdAvailableErrorBadResponse="adAvailable-error-badResponse",e.AdAvailableErrorVast="adAvailable-error-vast-{code}",e.AdAvailableErrorSettings="adAvailable-error-settings",e.AdAvailableErrorSameAd="adAvailable-error-sameAd",e.AdAvailableSuccess="adAvailable-success",e.AdCall="adCall",e.ErrorBeforeAdReached="errorBeforeAdReached",e.AdReached="adReached",e.NoAdServerError="noAd-serverError",e.NoAdNetworkError="noAd-networkError",e.NoAdVastError="noAd-vastError-{code}",e.NoAdParseTimeout="noAd-parseTimeout",e.NoAdSettingsError="noAd-settingsError",e.NoAdBadResponse="noAd-badResponse",e.NoAdSameAd="noAd-sameAd",e.NoAdIvtDoubleVerify="noAd-ivt-doubleVerify",e.NoAdIvtTag="noAd-ivt-tag",e.NoAdBlockedSiteDoubleVerify="noAd-blockedSite-doubleVerify",e.NoAdBlockedSiteTeads="noAd-blockedSite-teads",e.EarlyClick="early-click",e.ClickReplay="click-replay",e.Bts="bts",e.SlotVisibilityTiny="slotVisibility-tiny",e.SlotVisibilityInvalidDom="slotVisibility-invalid-dom",e.SlotVisibilityHiddenDisplay="slotVisibility-hidden-display",e.SlotVisibilityHiddenOverflow="slotVisibility-hidden-overflow",e.Warning="warning"}(n||(n={}));const d=Object(o.a)(r.a.of,r.f.filterOrElse(Object(s.isMemberOf)(["IVT DoubleVerify","IVT Tag","BlockedSite DoubleVerify","Teads Blacklist"]),e=>"Got an unknown fraud reason: "+e)),c=e=>{switch(e){case"tiny":return n.SlotVisibilityTiny;case"invalid-dom":return n.SlotVisibilityInvalidDom;case"hidden-display":return n.SlotVisibilityHiddenDisplay;case"hidden-overflow":return n.SlotVisibilityHiddenOverflow;default:return Object(a.exhaustive)(e)}},l={[n.AdNotAvailableServerError]:n.NoAdServerError,[n.AdNotAvailableNetworkError]:n.NoAdNetworkError,[n.AdAvailableErrorVast]:n.NoAdVastError,[n.AdAvailableErrorParseTimeout]:n.NoAdParseTimeout,[n.AdAvailableErrorSettings]:n.NoAdSettingsError,[n.AdAvailableErrorBadResponse]:n.NoAdBadResponse,[n.AdAvailableErrorSameAd]:n.NoAdSameAd},h=Object.keys(l),u=Object(o.b)(h,s.cArray.filter(Object(a.not)(Object(a.equals)(n.AdAvailableErrorVast)))),p=Object(o.b)(h,s.cArray.map(e=>l[e])),g=Object(o.b)(p,s.cArray.filter(Object(a.not)(Object(a.equals)(n.NoAdVastError)))),m=([e,t])=>e.replace("{code}",t.toString()),f=e=>Object(o.b)(e.split("-"),s.last,e=>parseInt(e,10),t=>[b(e)?n.AdAvailableErrorVast:n.NoAdVastError,t]),b=e=>new RegExp(n.AdAvailableErrorVast.replace("{code}","\\d{3}")).test(e),v=e=>new RegExp(n.NoAdVastError.replace("{code}","\\d{3}")).test(e)},function(e,t,i){"use strict";function n(e,t,i){e.style[t]=i,t=s(t),e.style["Moz"+t]=i,e.style["webkit"+t]=i,e.style["O"+t]=i,e.style["ms"+t]=i}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(){return window.performance?window.performance.now():Date.now()}function o(e,t){for(var i=0,n=e.length;i<n;i++)e[i]=t}function a(e){return e<1?parseFloat(e.toString().substr(0,4)):Math.round(e)}i.r(t),i.d(t,"applyVendorProperties",(function(){return n})),i.d(t,"capitalize",(function(){return s})),i.d(t,"now",(function(){return r})),i.d(t,"fillArray",(function(){return o})),i.d(t,"formatBenchTime",(function(){return a}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"b",(function(){return a}));i(154);const n={inread:"inread"},s={limitedCapabilities:"limitedCapabilities",placementCall:"placementCall",fallback:{integration:"passback-integration",noAd:"passback-noAd"},noSlot:{selector:"noSlot-selector",hbSelector:"hbNoSlot-selector",filter:"noSlot-filter",avoid:"noSlot-avoid",size:"noSlot-size",btf:"noSlot-BTF",minimum:"noSlot-minimum",minimumBelow:"noSlot-minimumBelow",content:"noSlot-content",position:"noSlot-position",videoArticle:"noSlot-videoArticle",videoSlot:"noSlot-videoSlot",imageSlot:"noSlot-imageSlot",safeFrame:"noSlot-safeFrame"},incompatibility:{browser:"incompatibility-browser",context:"incompatibility-context",format:"incompatibility-format",video:"incompatibility-video"},slotAvailable:"slotAvailable",hbSlotAvailable:"hbSlotAvailable",adReceived:"adReceived",adNotAvailable:{networkError:"adNotAvailable-networkError",serverError:"adNotAvailable-serverError"},adAvailable:{error:{parseTimeout:"adAvailable-error-parseTimeout",badResponse:"adAvailable-error-badResponse",vast:"adAvailable-error-vast-{code}",settings:"adAvailable-error-settings",sameAd:"adAvailable-error-sameAd"},success:"adAvailable-success"},adCall:"adCall",errorBeforeAdReached:"errorBeforeAdReached",adReached:"adReached",noAd:{serverError:"noAd-serverError",networkError:"noAd-networkError",vastError:"noAd-vastError-{code}",parseTimeout:"noAd-parseTimeout",settingsError:"noAd-settingsError",badResponse:"noAd-badResponse",sameAd:"noAd-sameAd",ivt:{doubleVerify:"noAd-ivt-doubleVerify",tag:"noAd-ivt-tag"},blockedSite:{doubleVerify:"noAd-blockedSite-doubleVerify",teads:"noAd-blockedSite-teads"}},impression:"impression",openExpand:"open-expand",open:"open",visible:"visible",click:"click",clickReplay:"click-replay",ivt:{doubleVerify:"IVT DoubleVerify",tag:"IVT Tag"},blockedSite:{doubleVerify:"BlockedSite DoubleVerify",teads:"Teads Blacklist"},debugBts:"debug-bts",warning:"warning"},r={placementCall:"f11",noSlot:"f21",incompatibility:"f22",slotAvailable:"f24",adReceived:"f30",adNotAvailable:"f31","adAvailable-error":"f32","adAvailable-success":"f33",adCall:"f41",errorBeforeAdReached:"f42",adReached:"f43",noAd:"f51"},o="https://a.teads.tv/media/flavors/nativeClassic.js",a="teads_internal_passback_no_passback"},function(e,t,i){"use strict";i.d(t,"a",(function(){return o.a}));var n=i(27),s=i(0),r=i(9),o=i(60),a=i(21),d=i(122),c=i(47);var l=i(86),h=i(1),u=i(37),p=i(14),g=i(2),m=i(20),f=i(114);const b=e=>Object(p.o)(e)||Object(p.n)(Object(p.p)(e).hostname),v=e=>!b(e),A=(e,t)=>i=>Object(r.b)(Object.keys(e),h.cArray.filter(t=>Object(h.isNotEmpty)(e[t])),h.cArray.filter(Object(h.isMemberOf)(m.b)),h.cArray.foldLeft(i,(i,n)=>n===m.a.Progress?(e=>(t,i)=>Object(r.b)(t,h.cArray.map(({url:e,data:t})=>Object(r.b)(e,s.b.fromNullable,s.d.filter(i),s.d.map(e=>({url:e,offset:t})))),h.flattenOptions,Object(h.groupByMap)(Object(g.prop)("offset"),Object(g.prop)("url")),t=>Object(r.b)(Object.keys(t),h.cArray.map(e=>parseInt(e,10)),h.cArray.foldLeft(e,(e,i)=>Object(r.b)(t[i],e=>({offset:i,trackingUrls:e}),E(e))))))(i)(e[n],t):(e=>(t,i,n)=>Object(r.b)(t,h.cArray.map(Object(r.a)(Object(g.prop)("url"),s.b.fromNullable,s.d.filter(e=>""!==e),s.d.filter(i))),h.flattenOptions,e=>({event:n,trackingUrls:e}),w(e)))(i)(e[n],t,n))),y=e=>t=>Object(r.b)(t,u.a.bimap(A(e,b),A(e,v))),w=e=>t=>Object.assign(Object.assign({},e),{trackings:[...e.trackings,t]}),E=e=>t=>Object.assign(Object.assign({},e),{progressTrackings:[...e.progressTrackings,t]});t.b={format:{getNewTrackedEvents:l.b,getNewTrackedEventsWithDebug:l.c,addFormatCustomTrackings:l.a,classic:{track:l.d,trackWithDebug:l.e,trackError:l.f,trackErrorWithDebug:l.g},headerBidding:{track:l.j,trackWithDebug:l.k,trackError:l.h,trackErrorWithDebug:l.i}},vast:{getNewTrackedVastEvents:([e,t])=>t.trackedEvents.slice(e.trackedEvents.length),addVastCustomTrackings:e=>({event:t,trackingUrl:i})=>Object(r.b)([Object(a.e)(e),Object(a.d)(e)],u.a.bimap(e=>b(i)?Object.assign(Object.assign({},e),{customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}):e,e=>v(i)?Object.assign(Object.assign({},e),{customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}):e),u.a.bimap(Object(a.l)(e),Object(a.k)(e))),addVastCustomProgressTrackings:e=>({offset:t,trackingUrl:i})=>Object(r.b)([Object(a.e)(e),Object(a.d)(e)],u.a.bimap(e=>b(i)?Object.assign(Object.assign({},e),{customProgressTrackings:[...e.customProgressTrackings,{offset:t,trackingUrls:[i]}]}):e,e=>v(i)?Object.assign(Object.assign({},e),{customProgressTrackings:[...e.customProgressTrackings,{offset:t,trackingUrls:[i]}]}):e),u.a.bimap(Object(a.l)(e),Object(a.k)(e))),registerVastTrackings:e=>t=>Object(r.b)([Object(a.e)(e),Object(a.d)(e)],y(t),u.a.bimap(Object(a.l)(e),Object(a.k)(e))),trackedEventsToEventsWithTrackingUrls:e=>Object(r.b)(e,Object(h.groupBy)(Object(g.prop)("event")),e=>Object(r.b)(Object.keys(e),h.cArray.foldLeft([],(t,i)=>[...t,{event:i,trackingUrls:Object(r.b)(e[i],h.cArray.map(Object(g.prop)("trackingUrl")))}]))),setStudioCreativeId:e=>t=>{const i=Object(a.e)(e);return Object(a.l)(e)(Object.assign(Object.assign({},i),{studioCreativeId:s.b.fromPredicate(t,g.isString)}))},resetTrackedEvents:e=>Object(r.b)([[Object(a.e)(e),Object(a.e)(e)],[Object(a.d)(e),Object(a.d)(e)]],u.a.bimap(u.a.sndMap(t=>Object(r.b)(Object.assign(Object.assign({},t),{trackedEvents:a.g.trackedEvents,trackedProgressOffsets:a.g.trackedProgressOffsets,alreadyBilledAdvertiser:a.g.alreadyBilledAdvertiser}),Object(a.l)(e))),u.a.sndMap(t=>Object(r.b)(Object.assign(Object.assign({},t),{trackedEvents:a.f.trackedEvents,trackedProgressOffsets:a.f.trackedProgressOffsets}),Object(a.k)(e))))),track:e=>(t,i)=>Object(r.b)([Object(a.e)(e),Object(a.d)(e)],([n,s])=>Object(r.b)(f.d(t,Object.assign(Object.assign({},i),{trackStrategy:o.d,formatVersion:o.c}))(n,s),([e,t])=>[[n,e],[s,t]],u.a.bimap(u.a.sndMap(Object(a.l)(e)),u.a.sndMap(Object(a.k)(e))))),trackProgress:e=>(t,i)=>Object(r.b)([Object(a.e)(e),Object(a.d)(e)],([n,s])=>Object(r.b)(f.c(t,Object.assign(Object.assign({},i),{trackStrategy:o.d,formatVersion:o.c}))(n,s),([e,t])=>[[n,e],[s,t]],u.a.bimap(u.a.sndMap(Object(a.l)(e)),u.a.sndMap(Object(a.k)(e))))),trackErrorWithCause:e=>(t,i,n)=>{const s=i.slice(0,128),r=Object(a.e)(e),d=Object(a.d)(e),[c,l]=f.b(t,s,Object.assign(Object.assign({},n),{trackStrategy:o.d,formatVersion:o.c}))(r,d);return Object(a.l)(e)(c),Object(a.k)(e)(l),[[r,c],[d,l]]}},debug:{track:e=>(t,{baseUrl:i,referer:l,queryParameters:h},u=s.a)=>Object(r.b)(Object(c.a)({baseUrl:i,queryParameters:Object.assign({referer:l,action:t,fv:o.c,ts:Object(n.a)().toString()},h)},u),i=>d.a.track(t,{trackStrategy:o.b,trackingUrl:i},Object(a.b)(e)),Object(a.i)(e))}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(3);class s extends n.a{}s.FullscreenRequest="FullscreenRequest",s.PlayPauseRequest="PlayPauseRequest",s.SkipRequest="SkipRequest",s.UIButtonRequest="UIButtonRequest",s.ClickToPlayRequest="ClickToPlayRequest",s.ClickRequest="ClickRequest",s.CallRequest="CallRequest",s.SoundToggleRequest="SoundToggleRequest",s.ReplayRequest="ReplayRequest",s.EndscreenInit="EndscreenInit",s.CollapseRequest="CollapseRequest",s.AdChoicesClickRequest="AdChoicesClickRequest",s.EarlyClickRequest="EarlyClickRequest"},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2);const s=window.Date,r=s.prototype.getTime,o=Object(n.isNative)(s.now)?s.now:Object(n.isNative)(r)?()=>r.call(new s):()=>+new s;s.now||(s.now=o)},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(11);class s{constructor(){this.loggerED=new n.a("canvas.player.components.EventDispatcher"),this.cb={},this.addEventListener=this.listen,this.removeEventListener=this.muteEvent}listen(e,t,i=!1){this.cb[e]||(this.cb[e]=[]),this.cb[e].push(t)}muteEvent(e,t){this.cb[e]?t&&-1!==this.cb[e].indexOf(t)?this.cb[e].splice(this.cb[e].indexOf(t),1):t?this.loggerED.error("call muteEvent for",e,"but handler ",t," does not exist for this event"):this.cb[e]=[]:this.loggerED.error("call muteEvent for",e,"but handlers for this event are empty")}dispatch(e,t){this.cb[e]&&(t?t.type=e:t={type:e},this.cb[e].forEach((function(e,i){e(t)})))}dispatchEvent(e){return this.loggerED.debug("dispatchEvent method is not implemented",e),!0}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}n.AdVideoMetadata="AdVideoMetadata",n.AdRemovedHeavyAdIntervention="AdRemovedHeavyAdIntervention",n.AdWarningHeavyAdIntervention="AdWarningHeavyAdIntervention"},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));var n=i(0);class s{constructor(e={}){this.protocol="https:",this.basePathUrl=this.protocol+"//a.teads.tv/media/format/v3",this.assetsUrl=this.basePathUrl+"/assets",this.richAdServerUrl=this.protocol+"//a.teads.tv/page/{id}/ad",this.buyingEngineUrl=this.protocol+"//a.teads.tv/vast/get",this.trackingUrl=this.protocol+"//t.teads.tv/track",this.userSyncUrl=this.protocol+"//sync.teads.tv/iframe",this.wigoIframeUrl=this.protocol+"//sync.teads.tv/wigo-no-slot",this.consensuIframeUrl=this.protocol+"//cmp.teads.mgr.consensu.org/index.html",this.isSumologicLogsEnabled=!0,this.isRichAdServerRequestEnabled=!0,this.isQA=!1,this.richAdServerRequestTimeout=5e3,this.timestampMacroNames=["[RANDOM]","[RANDOMNUM]","[TIMESTAMP]","[CACHE_BREAKER]","[CACHEBREAKER]","[CACHEBUSTING]","[CACHE_BUSTING]","[CACHEBUSTER]","[CACHE_BUSTER]"],this.refresh(e)}refresh(e={}){n.b.fromNullable(e.ASSETS_URL).forEach(e=>{this.basePathUrl=e,this.assetsUrl=e+"/assets"}),n.b.fromNullable(e.RAS_URL).forEach(e=>this.richAdServerUrl=e),n.b.fromNullable(e.BE_URL).forEach(e=>this.buyingEngineUrl=e),n.b.fromNullable(e.TRACKING_URL).forEach(e=>this.trackingUrl=e),n.b.fromNullable(e.USER_SYNC_URL).forEach(e=>this.userSyncUrl=e),n.b.fromNullable(e.WIGO_IFRAME_URL).forEach(e=>this.wigoIframeUrl=e),n.b.fromNullable(e.SUMOLOGIC_ENABLED).forEach(e=>this.isSumologicLogsEnabled=e),n.b.fromNullable(e.WITH_RAS_REQUEST).forEach(e=>this.isRichAdServerRequestEnabled=e),n.b.fromNullable(e.IS_QA).forEach(e=>this.isQA=e),n.b.fromNullable(e.TEADS_CONSENSU_URL).forEach(e=>this.consensuIframeUrl=e)}}const r=new s(window.teads)},function(e,t,i){"use strict";var n=i(17);t.a=function(e){const t=e.length;return function i(...s){return s.length<t?Object(n.a)(i,null,...s):e.call(null,...s)}}},function(e,t,i){"use strict";i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return h})),i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return p})),i.d(t,"e",(function(){return g}));var n=i(1),s=i(0),r=i(9),o=i(14),a=i(57),d=i(47),c=i(22);const l=["f","ts","fv","action","referer","pageId","pid","auctid","env","pfid","gid","sid","vid","slot","gdpr_status","gdpr_consent","gdpr_reason","gdpr_api_version","gdpr_cmp_id","hb_provider","ad_source_id","error_cause","cid","dsp_campaign_id","dsp_creative_id","scid","studio_cid","hb_h","hb_w"],h=Object(r.b)(Object.keys(c.a),n.cArray.map(e=>c.a[e]),Object(n.exclude)(c.h),n.cArray.foldLeft([],(e,t)=>t===c.a.AdAvailableErrorVast?[...e,...Object(r.b)(a.b,n.cArray.map(e=>Object(c.b)([t,e])))]:[...e,t])),u=Object(r.a)(s.d.map(String),s.d.getOrValue("")),p=Object(r.a)(s.b.fromNullable,u),g=e=>t=>Object(s.c)(e).map(Object.keys).map(n.cArray.filter(e=>!t.match(new RegExp(e+"=[^&]")))).filter(n.isNotEmpty).match({none:()=>t,some:Object(r.a)(n.cArray.foldLeft(Object(d.d)(t),(t,i)=>Object.assign(Object.assign({},t),{queryParameters:Object.assign(Object.assign({},t.queryParameters),{[i]:e[i]})})),({baseUrl:e,queryParameters:t})=>Object(o.c)(e,t))})},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return c}));var n,s=i(44),r=i(39),o=i(6);!function(e){e[e.Standard=0]="Standard",e[e.Worker=1]="Worker",e[e.Precise=2]="Precise"}(n||(n={}));function a(e,t,i=n.Standard){return o.a.tryCatch(()=>{if(i===n.Worker&&h()){const i=l(e,'self.setTimeout(function(){self.postMessage("tick")}, '+t+")");return{clear:()=>{i.terminate()}}}if(i===n.Precise){const i=s.f();let n,o=0;var r=()=>{const a=s.f()-i;a<t-(0===o?o:a/o)?(o+=1,n=c(r)):e()};return r(),{clear:()=>{var e;e=n,(window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout)(e)}}}{const i=window.setTimeout(()=>{e()},t);return{clear:()=>{clearTimeout(i)}}}}).fold(e=>({clear:()=>{}}),e=>e)}function d(e,t,i=!1){if(i&&h()){const i=l(e,'self.setInterval(function(){self.postMessage("tick")}, '+t+")");return{clear:()=>{i.terminate()}}}{const i=window.setInterval(()=>{e()},t);return{clear:()=>{clearInterval(i)}}}}function c(e,t=1e3/60){const i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return i?i(e):window.setTimeout(e,t)}function l(e,t){const i=r.b(t),n=new Worker(r.c().map(e=>e.createObjectURL(i)).getOrValue(""));return n.onmessage=t=>e(),n}function h(){return!!window.Worker&&r.c().nonEmpty()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return A})),i.d(t,"q",(function(){return w})),i.d(t,"x",(function(){return E})),i.d(t,"n",(function(){return O})),i.d(t,"b",(function(){return C})),i.d(t,"u",(function(){return k})),i.d(t,"r",(function(){return P})),i.d(t,"v",(function(){return j})),i.d(t,"o",(function(){return L})),i.d(t,"s",(function(){return x})),i.d(t,"y",(function(){return V})),i.d(t,"t",(function(){return N})),i.d(t,"j",(function(){return D})),i.d(t,"c",(function(){return R})),i.d(t,"k",(function(){return _})),i.d(t,"e",(function(){return M})),i.d(t,"g",(function(){return F})),i.d(t,"p",(function(){return U})),i.d(t,"i",(function(){return B})),i.d(t,"f",(function(){return W})),i.d(t,"h",(function(){return H})),i.d(t,"d",(function(){return z})),i.d(t,"m",(function(){return G})),i.d(t,"w",(function(){return q})),i.d(t,"l",(function(){return $}));var n=i(1),s=i(4),r=i(90),o=i(67),a=i(0),d=i(9),c=i(14),l=i(2),h=i(87),u=i(30),p=i(24),g=i(22),m=i(20),f=i(32),b=i(25),v=i(6);const A=({pageId:e,placementId:t,auctionId:i,sumologicLogger:n},o,d)=>{const c={baseUrl:u.b.trackingUrl,referer:C(n),queryParameters:{env:s.getEnv(),auctid:i.getOrValue(Object(r.b)("")),pageId:e.toString(),pid:t.toString()}};return Object.assign(Object.assign({},c),{queryParameters:Object.assign(Object.assign({},c.queryParameters),o),trackingUrl:a.a})},y=({pageId:e,placementId:t,auctionId:i,viewerId:n,hbProvider:d,sumologicLogger:c},l,h)=>{const p={baseUrl:u.b.trackingUrl,referer:C(c),queryParameters:{env:s.getEnv(),auctid:i.getOrValue(Object(r.b)("")),pageId:e.toString(),pid:t.toString(),hb_provider:d,vid:n.getOrValue(Object(o.b)(""))}};return Object.assign(Object.assign({},p),{queryParameters:Object.assign(Object.assign({},p.queryParameters),l),trackingUrl:a.a})},w=({sumologicLogger:e,wigo:t,logger:i,placementKey:s})=>(r,o,a)=>Object(d.b)(a(r),Object(l.tap)(r=>Object(d.b)(b.b.format.getNewTrackedEvents(r),n.cArray.forEach(Object(d.a)(Object(l.tap)(e=>i.info(`[${s}][${o}] ${e}`,r[1])),Object(l.tap)(S(e)),I(t)))))),E=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,durationPlayed:r,totalDuration:o})=>(a,u)=>Object(d.b)(u(a),([a,u])=>{const p=b.b.vast.getNewTrackedVastEvents(a),g=b.b.vast.getNewTrackedVastEvents(u);return Object(n.forEach)(b.b.vast.trackedEventsToEventsWithTrackingUrls(g),({event:e,trackingUrls:i})=>{Object(n.forEach)(i,i=>{const n=v.a.tryCatch(()=>Object(c.p)(i).hostname).getOrValue("<invalid>");e===m.a.Billable?t.info(`3p-billable-track ${e} ${n}`,5):t.info(`3p-vast-track ${e} ${n}`,1e3)})}),Object(d.b)([...p,...g],b.b.vast.trackedEventsToEventsWithTrackingUrls,n.cArray.forEach(Object(d.a)(Object(l.tap)(({event:t,trackingUrls:i})=>s.info(`[${e}][vast] ${t}`,i)),Object(h.c)({wigo:i,durationPlayed:r,totalDuration:o}))))}),O=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,durationPlayed:r=a.a,totalDuration:o=a.a,errorCode:d,errorCause:c,slotType:l,creativeSize:u,macros:p})=>{const[g,m]=b.b.vast.trackErrorWithCause(e)(d,c,{slotType:l,macros:p,referer:C(t),creativeSize:u});t.error("vast-error "+d);const f=b.b.vast.trackedEventsToEventsWithTrackingUrls([...b.b.vast.getNewTrackedVastEvents(g),...b.b.vast.getNewTrackedVastEvents(m)]);Object(n.forEach)(f,({event:t,trackingUrls:n})=>{s.info(`[${e}][vast] ${t} ${d}`,n),Object(h.c)({wigo:i,durationPlayed:r,totalDuration:o})({event:t,trackingUrls:n})})},C=Object(d.a)(c.f,a.d.flatMap(Object(d.a)(Object(l.prop)("windowReferrerUrl"),a.b.fromNullable)),a.d.getOrValue("")),I=e=>t=>{(Object(n.isMemberOf)([g.a.AdNotAvailableNetworkError,g.a.AdNotAvailableServerError,g.a.AdAvailableErrorParseTimeout,g.a.AdAvailableErrorSettings,g.a.AdAvailableErrorBadResponse,g.a.AdAvailableErrorSameAd,g.a.NoAdIvtDoubleVerify,g.a.NoAdIvtTag,g.a.NoAdBlockedSiteDoubleVerify,g.a.NoAdBlockedSiteTeads])(t)||Object(g.f)(t)||Object(g.g)(t))&&(e.valid(1,2,t,"error"),e.valid(1,1,t,"error"))},S=e=>Object(d.a)(T,a.d.map(e=>p.d[e]),a.d.forEach(t=>e.info(t,40))),T=e=>Object(d.b)(a.b.fromPredicate(e,Object(n.isMemberOf)([g.a.PlacementCall,g.a.SlotAvailable,g.a.AdReceived,g.a.AdAvailableSuccess,g.a.AdCall,g.a.ErrorBeforeAdReached,g.a.AdReached])),a.d.orElse(()=>/^noSlot-/.test(e)?a.b.of("noSlot"):a.a),a.d.orElse(()=>/^incompatibility-/.test(e)?a.b.of("incompatibility"):a.a),a.d.orElse(()=>/^adNotAvailable-/.test(e)?a.b.of("adNotAvailable"):a.a),a.d.orElse(()=>/^adAvailable-error-/.test(e)?a.b.of("adAvailable-error"):a.a),a.d.orElse(()=>/^noAd-/.test(e)?a.b.of("noAd"):a.a)),k=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:r,auctionId:o,randomString:a})=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(g.a.PlacementCall,"classic",s=>b.b.format.classic.track(i)(s,A({pageId:e,placementId:t,auctionId:o,sumologicLogger:n},{debug_metadata:a},s))),P=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:r,auctionId:o,viewerId:c,headerBiddingProvider:l})=>Object(d.b)(l,a.d.fold(()=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(g.a.IncompatibilityFormat,"classic",s=>b.b.format.classic.track(i)(s,A({pageId:e,placementId:t,auctionId:o,sumologicLogger:n},{slot:"native"},s))),a=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(g.a.IncompatibilityFormat,"header-bidding",s=>b.b.format.headerBidding.track(i)(s,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:n,hbProvider:a,viewerId:c},{slot:"native",pfid:""}))))),j=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:r,auctionId:o,viewerId:c,headerBiddingProvider:l},h)=>Object(d.b)(l,a.d.fold(()=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(h,"classic",s=>b.b.format.classic.track(i)(s,A({pageId:e,placementId:t,auctionId:o,sumologicLogger:n},{slot:"native"},s))),a=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(h,"header-bidding",s=>b.b.format.headerBidding.track(i)(s,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:n,hbProvider:a,viewerId:c},{slot:"native",pfid:""}))))),L=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:r,auctionId:o,viewerId:c,headerBiddingProvider:l})=>Object(d.b)(l,a.d.fold(()=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(g.a.FallbackIntegration,"classic",s=>b.b.format.classic.track(i)(s,A({pageId:e,placementId:t,auctionId:o,sumologicLogger:n},{slot:"native"},s))),a=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(g.a.FallbackIntegration,"header-bidding",s=>b.b.format.headerBidding.track(i)(s,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:n,hbProvider:a,viewerId:c},{slot:"native",pfid:""}))))),x=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,viewerId:r,pageId:c,placementId:l,auctionId:h})=>{const u={sumologicLogger:t,wigo:i,logger:n,placementKey:e};Object(d.b)(s,a.d.fold(()=>w(u)(g.a.LimitedCapabilities,"classic",e=>b.b.format.classic.track(u.placementKey)(e,A({pageId:c,placementId:l,auctionId:h,sumologicLogger:t},{vid:r.getOrValue(Object(o.b)(""))},e))),e=>w(u)(g.a.LimitedCapabilities,"header-bidding",i=>b.b.format.headerBidding.track(u.placementKey)(i,y({pageId:c,placementId:l,auctionId:h,sumologicLogger:t,hbProvider:e,viewerId:r},{pfid:""})))))},V=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:r,viewerId:c,insertionId:l,connectionId:h,portfolioItemId:u,scenarioId:p,adSourceId:m,errorCause:v,creativeId:E,dspCampaignId:O,dspCreativeId:C,studioCreativeId:I})=>{const S={slot:s,gid:Object(f.a)(l),sid:Object(f.a)(h),pfid:Object(f.a)(u),scid:Object(f.a)(p),ad_source_id:Object(f.a)(m),error_cause:v,cid:E,dsp_campaign_id:null!=O?O:"",dsp_creative_id:null!=C?C:"",studio_cid:I.getOrValue("")};Object(d.b)(t,a.d.fold(()=>w(e)(g.a.Warning,"classic",t=>b.b.format.classic.track(e.placementKey)(t,A({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger},Object.assign(Object.assign({},S),{vid:c.getOrValue(Object(o.b)(""))}),t))),t=>w(e)(g.a.Warning,"header-bidding",s=>b.b.format.headerBidding.track(e.placementKey)(s,y({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:c},S)))))},N=({pageId:e,placementId:t,placementKey:i,sumologicLogger:n,logger:s,wigo:r,auctionId:o,viewerId:c,headerBiddingProvider:l},h)=>Object(d.b)(l,a.d.fold(()=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(h,"classic",s=>b.b.format.classic.track(i)(s,A({pageId:e,placementId:t,auctionId:o,sumologicLogger:n},{},s))),a=>w({sumologicLogger:n,wigo:r,logger:s,placementKey:i})(h,"header-bidding",s=>b.b.format.headerBidding.track(i)(s===g.a.NoSlotSelector?g.a.HbNoSlotSelector:s,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:n,hbProvider:a,viewerId:c},{pfid:""}))))),D=e=>({placementKey:t,sumologicLogger:i,wigo:n,logger:s,queryParameters:r})=>w({sumologicLogger:i,wigo:n,logger:s,placementKey:t})(e,"classic",e=>b.b.format.classic.track(t)(e,{baseUrl:u.b.trackingUrl,referer:C(i),queryParameters:r,trackingUrl:a.a})),R=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,queryParameters:s})=>w({sumologicLogger:t,wigo:i,logger:n,placementKey:e})(g.a.AdAvailableErrorBadResponse,"classic",i=>b.b.format.classic.track(e)(i,{baseUrl:u.b.trackingUrl,referer:C(t),queryParameters:s,trackingUrl:a.a})),_=({placement:{key:e,pageId:t,pid:i,slotType:n,wigo:s},sumologicLogger:r,logger:c,auctionId:l,viewerId:h,headerBiddingProvider:u,portfolioItemId:p})=>{const m={sumologicLogger:r,wigo:s,logger:c,placementKey:e},v=Object(f.b)(p);Object(d.b)(u,a.d.fold(()=>w(m)(g.a.AdReceived,"classic",s=>b.b.format.classic.track(e)(s,A({pageId:t,placementId:i,auctionId:l,sumologicLogger:r},{slot:n,vid:h.getOrValue(Object(o.b)("")),pfid:v},s))),s=>w(m)(g.a.AdReceived,"header-bidding",o=>b.b.format.headerBidding.track(e)(o,y({pageId:t,placementId:i,auctionId:l,sumologicLogger:r,hbProvider:s,viewerId:h},{slot:n,pfid:v})))))},M=({placement:{key:e,pageId:t,pid:i,slotType:n,wigo:s},sumologicLogger:r,logger:c,auctionId:l,viewerId:h,headerBiddingProvider:u,portfolioItemId:p,insertionId:m,connectionId:v})=>{const E={sumologicLogger:r,wigo:s,logger:c,placementKey:e},O=Object(f.b)(p),C=Object(f.b)(m),I=Object(f.b)(v);Object(d.b)(u,a.d.fold(()=>w(E)(g.a.AdAvailableErrorSettings,"classic",s=>b.b.format.classic.track(e)(s,A({pageId:t,placementId:i,auctionId:l,sumologicLogger:r},{slot:n,vid:h.getOrValue(Object(o.b)("")),pfid:O,gid:C,sid:I},s))),s=>w(E)(g.a.AdAvailableErrorSettings,"header-bidding",o=>b.b.format.headerBidding.track(e)(o,y({pageId:t,placementId:i,auctionId:l,sumologicLogger:r,hbProvider:s,viewerId:h},{slot:n,pfid:O,gid:C,sid:I})))))},F=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,pageId:r,placementId:c,slotType:l,auctionId:h,viewerId:u,insertionId:p,connectionId:m,portfolioItemId:f})=>{const v={sumologicLogger:t,wigo:i,logger:n,placementKey:e},E="0"===p?"":p;Object(d.b)(s,a.d.fold(()=>w(v)(g.a.AdAvailableErrorParseTimeout,"classic",e=>b.b.format.classic.track(v.placementKey)(e,A({pageId:r,placementId:c,auctionId:h,sumologicLogger:t},{slot:l,vid:u.getOrValue(Object(o.b)("")),gid:E,sid:m,pfid:f},e))),e=>w(v)(g.a.AdAvailableErrorParseTimeout,"header-bidding",i=>b.b.format.headerBidding.track(v.placementKey)(i,y({pageId:r,placementId:c,auctionId:h,sumologicLogger:t,hbProvider:e,viewerId:u},{slot:l,pfid:f,gid:E,sid:m})))))},U=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,pageId:r,placementId:c,slotType:l,portfolioItemId:h,auctionId:u,viewerId:p})=>{Object(d.b)(s,a.d.fold(()=>w({sumologicLogger:t,wigo:i,logger:n,placementKey:e})(g.a.FallbackNoAd,"classic",i=>b.b.format.classic.track(e)(i,A({pageId:r,placementId:c,auctionId:u,sumologicLogger:t},{slot:l,vid:p.getOrValue(Object(o.b)("")),pfid:Object(f.b)(h)},i))),s=>w({sumologicLogger:t,wigo:i,logger:n,placementKey:e})(g.a.FallbackNoAd,"header-bidding",i=>b.b.format.headerBidding.track(e)(i,y({pageId:r,placementId:c,auctionId:u,sumologicLogger:t,hbProvider:s,viewerId:p},{slot:l,pfid:Object(f.b)(h)})))))},B=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,baseUrlWithQueryParameters:r})=>{const o={sumologicLogger:t,wigo:i,logger:n,placementKey:e},c=Object.assign(Object.assign({},r),{referer:C(o.sumologicLogger)});Object(d.b)(s,a.d.fold(()=>w(o)(g.a.AdCall,"classic",e=>b.b.format.classic.track(o.placementKey)(e,c)),e=>w(o)(g.a.AdCall,"header-bidding",t=>b.b.format.headerBidding.track(o.placementKey)(t,Object.assign(Object.assign({},c),{queryParameters:Object.assign(Object.assign({},c.queryParameters),{hb_provider:e})})))))},W=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,headerBiddingProvider:s,code:r,pageId:c,placementId:l,slotType:h,auctionId:u,viewerId:p,insertionId:m,connectionId:f,portfolioItemId:v})=>{const E={sumologicLogger:t,wigo:i,logger:n,placementKey:e},O="0"===m?"":m;Object(d.b)(s,a.d.fold(()=>w(E)(g.a.AdAvailableErrorVast,"classic",e=>b.b.format.classic.trackError(E.placementKey)(r,A({pageId:c,placementId:l,auctionId:u,sumologicLogger:t},{slot:h,vid:p.getOrValue(Object(o.b)("")),gid:O,sid:f,pfid:v},e))),e=>w(E)(g.a.AdAvailableErrorVast,"header-bidding",i=>b.b.format.headerBidding.trackError(E.placementKey)(r,y({pageId:c,placementId:l,auctionId:u,sumologicLogger:t,hbProvider:e,viewerId:p},{slot:h,pfid:v,gid:O,sid:f})))))},H=({sumologicLogger:e,logger:t,wigo:i,placementKey:n})=>({pageId:s,placementId:r,auctionId:c,viewerId:l,portfolioItemId:h,slotType:u,insertionId:p,connectionId:m,headerBiddingProvider:v})=>{const E=Object(f.b)(h),O=Object(f.b)(p),C=Object(f.b)(m);Object(d.b)(v,a.d.fold(()=>w({sumologicLogger:e,wigo:i,logger:t,placementKey:n})(g.a.AdAvailableSuccess,"classic",t=>b.b.format.classic.track(n)(t,A({pageId:s,placementId:r,auctionId:c,sumologicLogger:e},{slot:u,vid:l.getOrValue(Object(o.b)("")),pfid:E,gid:O,sid:C},t))),o=>w({sumologicLogger:e,wigo:i,logger:t,placementKey:n})(g.a.AdAvailableSuccess,"header-bidding",t=>b.b.format.headerBidding.track(n)(t,y({pageId:s,placementId:r,auctionId:c,sumologicLogger:e,hbProvider:o,viewerId:l},{slot:u,pfid:E,gid:O,sid:C})))))},z=({sumologicLogger:e,logger:t,wigo:i,placementKey:n})=>({pageId:s,placementId:r,auctionId:c,viewerId:l,portfolioItemId:h,slotType:u,insertionId:p,connectionId:m,headerBiddingProvider:v})=>{const y=Object(f.b)(h),E=Object(f.b)(p),O=Object(f.b)(m);Object(d.b)(v,a.d.fold(()=>w({sumologicLogger:e,wigo:i,logger:t,placementKey:n})(g.a.AdAvailableErrorSameAd,"classic",t=>b.b.format.classic.track(n)(t,A({pageId:s,placementId:r,auctionId:c,sumologicLogger:e},{slot:u,vid:l.getOrValue(Object(o.b)("")),pfid:y,gid:E,sid:O},t))),i=>{t.warn("Could not track adAvailable-error-sameAd, it should not be possible on Header-Bidding context",i),e.error("hb-samead "+i)}))},G=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:r,viewerId:c,insertionId:l,connectionId:h,portfolioItemId:u,creativeId:p})=>{const m=c.getOrValue(Object(o.b)("")),v=Object(f.a)(u),E=Object(f.a)(l),O=Object(f.a)(h);Object(d.b)(t,a.d.fold(()=>w(e)(g.a.EarlyClick,"classic",t=>b.b.format.classic.track(e.placementKey)(t,A({auctionId:r,sumologicLogger:e.sumologicLogger,pageId:i,placementId:n},{slot:s,vid:m,pfid:v,gid:E,sid:O,cid:p},g.a.EarlyClick))),t=>w(e)(g.a.EarlyClick,"header-bidding",o=>b.b.format.headerBidding.track(e.placementKey)(o,y({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:c},{slot:s,pfid:v,gid:E,sid:O,cid:p})))))},q=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:r,viewerId:c,insertionId:l,connectionId:h,portfolioItemId:u,notVisibleReason:p})=>{const m=Object(g.e)(p),v=c.getOrValue(Object(o.b)("")),E=Object(f.a)(u),O=Object(f.a)(l),C=Object(f.a)(h);Object(d.b)(t,a.d.fold(()=>w(e)(m,"classic",t=>b.b.format.classic.track(e.placementKey)(t,A({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger},{slot:s,vid:v,pfid:E,gid:O,sid:C},t))),t=>w(e)(m,"header-bidding",o=>b.b.format.headerBidding.track(e.placementKey)(o,y({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:c},{slot:s,pfid:E,gid:O,sid:C})))))},$=e=>({headerBiddingProvider:t,pageId:i,placementId:n,slotType:s,auctionId:r,viewerId:c,insertionId:l,connectionId:h,portfolioItemId:u})=>{const p=c.getOrValue(Object(o.b)("")),m=Object(f.a)(u),v=Object(f.a)(l),E=Object(f.a)(h);Object(d.b)(t,a.d.fold(()=>w(e)(g.a.ClickReplay,"classic",t=>b.b.format.classic.track(e.placementKey)(t,A({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger},{slot:s,vid:p,pfid:m,gid:v,sid:E},t))),t=>w(e)(g.a.ClickReplay,"header-bidding",o=>b.b.format.headerBidding.track(e.placementKey)(o,y({pageId:i,placementId:n,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:c},{slot:s,pfid:m,gid:v,sid:E})))))}},function(e,t,i){"use strict";i.d(t,"k",(function(){return b})),i.d(t,"a",(function(){return A})),i.d(t,"f",(function(){return y})),i.d(t,"d",(function(){return w})),i.d(t,"j",(function(){return E})),i.d(t,"b",(function(){return O})),i.d(t,"i",(function(){return C})),i.d(t,"c",(function(){return I})),i.d(t,"h",(function(){return S})),i.d(t,"g",(function(){return T})),i.d(t,"e",(function(){return k}));var n=i(1),s=i(0),r=i(9),o=i(13),a=i(2),d=i(69);const c=["[","]"],l=["${","}"],h=e=>({type:"StaticPatternBit",pattern:e}),u=e=>({ignoreCase:!1,supportMultipleOccurrences:!1,supportUriEncoded:!1,patternBits:[h(e)],delimiters:[c]}),p={CacheBusting:u("CACHEBUSTING"),ImpressionId:u("impressionId"),ContentPlayHead:u("CONTENTPLAYHEAD"),ErrorCode:u("ERRORCODE"),AssetUri:u("ASSETURI"),MediaFileType:u("MEDIAFILETYPE"),Viewability:u("VIEWABILITY"),BundleId:u("BUNDLEID"),DeviceId:u("DEVICEID"),LimitTracking:u("LIMIT_TRACKING"),StudioCid:u("STUDIO_CID"),SlotType:u("slotType"),DebugFormat:u("DEBUG_FORMAT"),Gdpr:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[h("GDPR")],delimiters:[c,l]},GdprConsent:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[h("GDPR_CONSENT")],delimiters:[c,l]},GdprConsentWithVendorId:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[h("GDPR_CONSENT_"),(g="\\d+",{type:"DynamicPatternBit",pattern:g})],delimiters:[l]}};var g;const m=e=>t=>Object(r.b)(t,n.cArray.map(({type:t,pattern:i})=>{switch(t){case"StaticPatternBit":return e(i);default:return i}}),e=>e.join("")),f=e=>e.replace(/[[\]{}$]/g,"\\$&"),b=(e,t)=>[e,t],v=(e,[t,i])=>e.replace((({ignoreCase:e,supportMultipleOccurrences:t,delimiters:i,supportUriEncoded:s,patternBits:o})=>{const d=`${e?"i":""}${t?"g":""}`,c=Object(r.b)(i,n.cArray.foldLeft([],(e,[t,i])=>{const n=[h(t),...o,h(i)];return[...e,m(a.identity)(n)].concat(s?[m(encodeURIComponent)(n)]:[])}),n.cArray.map(e=>`(${e})`),e=>e.join("|"),f);return new RegExp(c,d)})(p[t]),i),A=e=>t=>Object(r.b)(e,n.cArray.foldLeft(t,v)),y=()=>[w(0),I(),O(s.a),C(s.a),E(0)],w=e=>{const t=e>0?Object(a.offset)(e):"0";return b("ContentPlayHead",t)},E=e=>b("Viewability",String(e)),O=e=>Object(r.b)(e,s.d.map(e=>e.url.toString()),s.d.fold(()=>"",encodeURIComponent),e=>b("AssetUri",e)),C=e=>Object(r.b)(e,s.d.map(e=>e.type),s.d.fold(()=>"unknown",a.getExtensionFromMimeType),e=>b("MediaFileType",e)),I=(e=Object(o.rand)(8))=>b("CacheBusting",e),S=e=>{const t=Object(d.a)(e);return b("Gdpr",Object(d.b)(t))},T=e=>[b("GdprConsent",e),b("GdprConsentWithVendorId",e)],k=e=>b("DebugFormat","[new|"+e.options.getFullContext()+"]")},,function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n={bimap:(e,t)=>([i,n])=>[e(i),t(n)],fstMap:e=>([t,i])=>[e(t),i],sndMap:e=>([t,i])=>[t,e(i)],biforeach:(e,t)=>([i,n])=>{e(i),t(n)},fstForeach:e=>([t])=>e(t),sndForeach:e=>([,t])=>e(t),zip:([[e,t],[i,n]])=>[[e,i],[t,n]]}},function(e,t,i){"use strict";let n,s;function r(){if(n)return n();let e=null;if(window.XMLHttpRequest&&(e=new XMLHttpRequest),e&&!("withCredentials"in e)&&(e=window.XDomainRequest?new window.XDomainRequest:null),!e){try{e=new window.ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(t){try{e=new window.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}e.responseType="msxml-document"}return e}function o(e){return s?s(e):e instanceof XMLHttpRequest}function a(e,t){n=e,s=t}i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a}))},function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return a}));var n=i(0),s=i(2);function r(e,t="application/javascript"){if(window.Blob)try{return new Blob([e],{type:t})}catch(e){}window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;let i=new window.BlobBuilder;return i.append(e),i.getBlob()}function o(){return Object(s.isFunction)(window.Blob)&&Object(s.isNative)(window.Blob)}function a(){return d(window.URL).orElse(()=>d(window.webkitURL))}function d(e){return n.b.fromNullable(e).filter(e=>Object(s.hasOwnProperty)(e,"createObjectURL")&&Object(s.isNative)(e.createObjectURL))}},function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o}));var n=i(132);function s(e){return(new DOMParser).parseFromString(e,"text/xml")}function r(e){if(e)try{var t=function(e){let t=e.firstChild;for(;t;){if(!a(t))return t;t=t.nextSibling}return null}(e);return t?function(e){var t;let i=null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.trim();" "===i.charAt(0)&&(i=i.substring(1,i.length));" "===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1));return i}(t):""}catch(t){n.a.error(`Couldn't get content for node ${e.nodeName}: "${t}"`)}}function o(e,t){try{if(e.attributes[t])return String(e.attributes[t].value)}catch(e){n.a.error(`Couldn't get attribute "${t}" value: "${e}"`)}}function a(e){return 8===e.nodeType||3===e.nodeType&&function(e){return!/[^\t\n\r ]/.test(e.textContent)}(e)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return d})),i.d(t,"c",(function(){return c})),i.d(t,"b",(function(){return l}));var n=i(1);const s=new(i(11).a)("Dom"),r=["scroll","touchstart","touchmove"];function o(e){return Object(n.includes)(r,e)}function a(e,t,i){try{t.addEventListener(e,i,{passive:o(e),capture:!0})}catch(n){s.warn(`Failed to add listener for event ${e}, fallback to Boolean form`,t,n),t.addEventListener(e,i,!0)}}function d(e,t,i){try{t.removeEventListener(e,i,!0)}catch(i){s.warn("Failed to remove listener for event "+e,t,i)}}function c(e,t){const i=t.document,n=()=>{"interactive"!==i.readyState&&"complete"!==i.readyState||(d("readystatechange",i,n),e())};"interactive"===i.readyState||"complete"===i.readyState?e():a("readystatechange",i,n)}function l(e,t,i){"complete"===t.document.readyState?e.call(i):a("load",t,e.bind(i))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return f}));var n=i(4),s=i(43),r=i(10),o=i(18),a=i(0),d=i(2),c=i(7),l=i(28),h=i(107),u=i(108),p=i(109),g=i(110),m=m||{};class f extends l.a{constructor(e,t,i,l){super(),this.meta=t,this.player=l;const m=Object(r.findTopWindow)(document.body),f=m===window.top,b=(Object(n.isSafari)()||Object(n.isFacebookWebview)())&&o.a(Object(n.getIosVersion)(),"10");this.sumologic=s.a.copy({collectorUrl:"https://s8t.teads.tv/logs/player/http-source",placementId:a.b.fromNullable(this.player.parameters.pid).map(e=>parseInt(e,10)).filter(d.isNumber)}),f&&this.meta.mp4&&("HTML5"===this.player.parameters.type||Object(n.isIpad)()&&o.a(Object(n.getIosVersion)(),"9.2")&&"CANVAS"!==this.player.parameters.type)?(this.api=new p.a(e,t,l,m),this.sumologic.info("canvas video mp4")):f&&this.meta.mp4&&"CANVAS"!==this.player.parameters.type&&(o.b(Object(n.getIosVersion)(),"9.1")&&o.d(Object(n.getIosVersion)(),"10")||b)?(this.api=new u.a(e,t,l,m),this.sumologic.info("canvas video mp4CT")):this.meta.tv?(this.api=new h.a(e,t,i,l),this.sumologic.info("canvas video tv")):(this.api=new g.a(e,t,i,l),this.sumologic.info("canvas video mpeg")),this.api.listen(c.a.CAN_PLAY,()=>this.dispatch(c.a.CAN_PLAY)),this.api.listen(c.a.LOADED,()=>this.dispatch(c.a.LOADED)),this.api.listen(c.a.STALLED,()=>this.dispatch(c.a.STALLED)),this.api.listen(c.a.RESUME_AFTER_STALLED,()=>this.dispatch(c.a.RESUME_AFTER_STALLED)),this.api.listen(c.a.TIME_UPDATE,()=>this.dispatch(c.a.TIME_UPDATE)),this.api.listen(c.a.ENDED,()=>this.dispatch(c.a.ENDED)),this.api.listen(c.a.BENCH_FPS,e=>this.dispatch(c.a.BENCH_FPS,e))}canplay(){return this.api.canplay()}play(){this.api.play()}pause(){this.api.pause()}getCurrentTime(){return this.api.getCurrentTime()}setCurrentTime(e){return this.api.setCurrentTime(e)}get duration(){return this.api.duration}get state(){return this.api.state}get videoFrames(){return this.api.videoFrames}get averageDecodingTime(){return this.api.averageDecodingTime}cleanStallTimeout(){this.api.cleanStallTimeout()}}},function(e,t,i){"use strict";var n=i(4),s=i(0),r=i(46),o=i(30);const a=new r.c("https://s8t.teads.tv/logs/format/http-source",o.b.isSumologicLogsEnabled?20:0,o.b.isQA?"HEAD#0a3819e53":"1160",s.a,{getSamplingThreshold:r.d,sendLog:r.e,getFullContext:n.getFullContext,isHeaderBiddingTag:()=>!1});t.a=a},function(e,t,i){"use strict";i.d(t,"f",(function(){return u})),i.d(t,"c",(function(){return g})),i.d(t,"e",(function(){return m})),i.d(t,"d",(function(){return f})),i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return v}));var n=i(9),s=i(27),r=i(0),o=i(1),a=i(6),d=i(2);const c=e=>a.a.tryCatch(()=>e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance).toOption(),l=c(window),h={tag:{name:/(^http(s)*:\/\/a\.teads\.tv\/page\/\d+\/tag|\/dist\/quality\/v3\/ms\/tag\/.+\.js)/,value:r.a,win:r.a},format:{name:/(^(http(s)?:)?\/\/a\.teads\.tv\/media\/format\/v3|\/dist\/format)\/teads-format(\.min)?\.js/,value:r.a,win:r.a}};function u(){return l.map(e=>e.now()).getOrElse(s.a)}function p(e,t=window){return c(t).filter(e=>Object(d.isFunction)(e.getEntriesByType)).map(t=>t.getEntriesByType(e)).filter(o.isNotEmpty)}function g(e=window){return p("resource",e)}function m(e,t=window){return g(t).flatMap(t=>r.b.fromNullable(Object(o.find)(t,t=>e.test(t.name))))}function f(e=window){return function(e=window){return p("navigation",e)}(e).match({some:e=>r.b.fromNullable(e[0].responseStart-e[0].requestStart).map(Math.round),none:()=>c(e).flatMap(Object(n.a)(Object(d.prop)("timing"),r.b.fromNullable)).map(e=>e.responseStart-e.requestStart)})}function b(e,t){Object(o.forEach)(t,t=>Object(o.forEach)(e,e=>h[e].value=h[e].value.orElse(()=>(h[e].win=r.b.fromNullable(t),m(h[e].name,t)))))}function v(e){let t=e.length;const i=Object(o.reduce)(e,(e,{transferSize:i,responseEnd:n,responseStart:s})=>i>0&&n>0&&s>=0&&n-s>0?e+8*i/1024/((n-s)/1e3):(t--,e),0);return t>0?i/t:0}},function(e,t,i){"use strict";i.r(t),i.d(t,"abort",(function(){return n})),i.d(t,"canplay",(function(){return s})),i.d(t,"canplaythrough",(function(){return r})),i.d(t,"durationchange",(function(){return o})),i.d(t,"emptied",(function(){return a})),i.d(t,"encrypted",(function(){return d})),i.d(t,"ended",(function(){return c})),i.d(t,"error",(function(){return l})),i.d(t,"interruptbegin",(function(){return h})),i.d(t,"interruptend",(function(){return u})),i.d(t,"loadeddata",(function(){return p})),i.d(t,"loadedmetadata",(function(){return g})),i.d(t,"loadstart",(function(){return m})),i.d(t,"pause",(function(){return f})),i.d(t,"play",(function(){return b})),i.d(t,"playing",(function(){return v})),i.d(t,"progress",(function(){return A})),i.d(t,"ratechange",(function(){return y})),i.d(t,"seeked",(function(){return w})),i.d(t,"seeking",(function(){return E})),i.d(t,"stalled",(function(){return O})),i.d(t,"suspend",(function(){return C})),i.d(t,"timeupdate",(function(){return I})),i.d(t,"volumechange",(function(){return S})),i.d(t,"waiting",(function(){return T}));const n="abort",s="canplay",r="canplaythrough",o="durationchange",a="emptied",d="encrypted",c="ended",l="error",h="interruptbegin",u="interruptend",p="loadeddata",g="loadedmetadata",m="loadstart",f="pause",b="play",v="playing",A="progress",y="ratechange",w="seeked",E="seeking",O="stalled",C="suspend",I="timeupdate",S="volumechange",T="waiting"},function(e,t,i){"use strict";i.d(t,"b",(function(){return b})),i.d(t,"e",(function(){return v})),i.d(t,"d",(function(){return A})),i.d(t,"c",(function(){return y})),i.d(t,"a",(function(){return w}));var n=i(31),s=i(0),r=i(9),o=i(6),a=i(11),d=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};const c=Math.random(),l="[samplingFactor][context][businessIds][logLevel] message",h=new a.a("Sumologic"),u=Object(n.a)(({formatVersion:e,fullContext:t,bidType:i,portfolioItemId:n,headerBidding:s},r)=>{const o=n.map(String).getOrValue("");return r.replace("context",`${e}|${t}|${i}|${o}|${s?"hb":""}`)}),p=Object(n.a)((e,t,i,n)=>{const s=e=>e.map(String).getOrValue("");return n.replace("businessIds",`${s(e)}|${s(i)}|${s(t)}`)}),g=Object(n.a)((e,t)=>t.replace("logLevel",e)),m=Object(n.a)((e,t)=>t.replace("samplingFactor",e.toString())),f=Object(n.a)((e,t)=>t.replace("message",e));function b(e,t){return e>0&&t<=1/e}function v(e,t){o.a.tryCatch(()=>{(new Image).src=`${e}?${encodeURIComponent(t)}`}).tapLeft(i=>{h.warn("An error occurred while sending log message to Sumologic collector",e,t,i)})}function A(){return c}class y{constructor(e,t,i,n,s){this.collectorUrl=e,this.samplingFactor=t,this.formatVersion=i,this.placementId=n,this.options=s}log(e,t=this.samplingFactor){b(t,this.options.getSamplingThreshold())?this.options.sendLog(this.collectorUrl,e):h.debug(`Did not send log to Sumologic collector (sampling too low, threshold: ${this.options.getSamplingThreshold().toFixed(2)})`,e)}metadata(e,t=this.samplingFactor){this.logBasedOnTemplate("metadata",e,t)}info(e,t=this.samplingFactor){this.logBasedOnTemplate("info",e,t)}warning(e,t=this.samplingFactor){this.logBasedOnTemplate("warning",e,t)}error(e,t=this.samplingFactor){this.logBasedOnTemplate("error",e,t)}generateLogFromTemplate(e,t,{fullContext:i,bidType:n,portfolioItemId:o,headerBidding:a},d){return Object(r.a)(u({fullContext:i,bidType:n,portfolioItemId:o,headerBidding:a,formatVersion:this.formatVersion}),p(this.placementId,s.a,s.a),g(e),m(t),f(d))(l)}logBasedOnTemplate(e,t,i=this.samplingFactor){this.log(this.generateLogFromTemplate(e,i,{fullContext:this.options.getFullContext(),bidType:"",portfolioItemId:s.a,headerBidding:this.options.isHeaderBiddingTag()},t),i)}copy(e={}){const{collectorUrl:t=this.collectorUrl,samplingFactor:i=this.samplingFactor,formatVersion:n=this.formatVersion,placementId:s=this.placementId,options:r=this.options}=e;return new y(t,i,n,s,r)}}class w extends y{constructor(e="",t,i,n,s){super(s.collectorUrl,s.samplingFactor,s.formatVersion,s.placementId,s.options),this.bidType=e,this.insertionId=t,this.connectionId=i,this.portfolioItemId=n}generateLogFromTemplate(e,t,{fullContext:i,bidType:n,portfolioItemId:s,headerBidding:o},a){return Object(r.a)(u({fullContext:i,bidType:n,portfolioItemId:s,headerBidding:o,formatVersion:this.formatVersion}),p(this.placementId,this.insertionId,this.connectionId),g(e),m(t),f(a))(l)}logBasedOnTemplate(e,t,i=this.samplingFactor){this.log(this.generateLogFromTemplate(e,i,{fullContext:this.options.getFullContext(),bidType:this.bidType,portfolioItemId:this.portfolioItemId,headerBidding:this.options.isHeaderBiddingTag()},t),i)}copy(e={}){const{bidType:t=this.bidType,insertionId:i=this.insertionId,connectionId:n=this.connectionId,portfolioItemId:s=this.portfolioItemId}=e,r=d(e,["bidType","insertionId","connectionId","portfolioItemId"]);return new w(t,i,n,s,super.copy(r))}}},function(e,t,i){"use strict";i.d(t,"h",(function(){return c})),i.d(t,"j",(function(){return l})),i.d(t,"f",(function(){return h})),i.d(t,"i",(function(){return u})),i.d(t,"c",(function(){return p})),i.d(t,"g",(function(){return g})),i.d(t,"b",(function(){return m})),i.d(t,"a",(function(){return f})),i.d(t,"d",(function(){return b})),i.d(t,"e",(function(){return E}));var n=i(1),s=i(52),r=i(0),o=i(9),a=i(14),d=i(13);const c=e=>e,l=e=>e,h=e=>e,u=e=>e,p=e=>e,g=(e,t=r.a)=>{const i=b(p(e));return E(Object.assign(Object.assign({},i),{queryParameters:Object.assign(Object.assign(Object.assign({},i.queryParameters),{action:"debug-"+i.queryParameters.action}),t.map(e=>({debug_metadata:encodeURIComponent(e)})).getOrValue({}))}))},m=(e,t)=>({baseUrl:e,queryParameters:Object.assign(Object.assign({},t),{f:"1"})}),f=(e,t=r.a)=>E(Object.assign(Object.assign({},e),{queryParameters:Object.assign(Object.assign(Object.assign({},e.queryParameters),{action:"debug-"+e.queryParameters.action,f:"1"}),t.map(e=>({debug_metadata:e})).getOrValue({}))})),b=e=>{const t=a.p(e),i=Object(o.b)(t.search.substring(1).split("&"),n.cArray.filter(d.isNotEmpty),n.cArray.map(e=>e.split("=")),e=>Object(n.reduce)(e,(e,[t,i])=>Object.assign(Object.assign({},e),{[t]:decodeURIComponent(i)}),{}));return{baseUrl:`${t.protocol}//${t.host}${/^\//.test(t.pathname)?t.pathname:"/"+t.pathname}`,queryParameters:i}},v=["gdpr_api_version","gdpr_cmp_id","gdpr_consent"],A=e=>Object(n.filter)(Object.keys(e),t=>""!==e[t]||Object(n.isMemberOf)(v)(t)),y=e=>Object.keys(e),w=e=>e.sort((e,t)=>"action"===t?1:"action"===e||"referer"===t?-1:0);function E({baseUrl:e,queryParameters:t},i=y){return Object(o.a)(A,e=>s.b(t,t=>Object(n.includes)(e,t)),i,w,i=>{return`${s=e,/\?/.test(s)?s+"&":s+"?"}${Object(n.map)(i,e=>`${e}=${encodeURIComponent(t[e])}`).join("&")}`;var s})(t)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return u}));var n=i(11),s=i(2),r=i(0);let o;const a=new n.a("IOSWindowHeight");function d(e){return Object(s.isUndefined)(o)&&(o=e.document.createElement("div"),o.style.setProperty("position","fixed"),o.style.setProperty("height","100vh"),o.style.setProperty("width","0"),o.style.setProperty("top","0")),o}function c(e){r.b.fromNullable(o).match({some:t=>e.document.documentElement.appendChild(t),none:()=>a.warn("Could not insert ruler to DOM as it was not created yet")})}function l(){r.b.fromNullable(o).match({some:e=>r.b.fromNullable(e.parentElement).forEach(t=>t.removeChild(e)),none:()=>a.warn("Could not remove ruler from DOM as it was not created yet")})}function h(e){return r.b.fromNullable(o).match({some:e=>e.offsetHeight,none:()=>(a.warn("Could not get ruler height value as it was not created yet, fallback to innerHeight"),e.innerHeight)})}function u(e){return Math.max(h(e)-e.innerHeight,0)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(16);class s extends n.a{}s.INCOMPLETE_OBJECT={id:1,message:"Ad configuration is missing settings or placement"},s.OPTION_CHECKVALUE_MISSING={id:2,message:"checkValue function is missing"},s.OPTION_THRESHOLD_MISSING={id:3,message:"Option threshold is required"},s.OPTION_PARENTWINDOW_INVALID={id:4,message:"Option parentWindow is required"},s.OPTION_VAST_INVALID={id:5,message:"Option vast has to contain type and content"},s.MULTIPLE_PAGE_PROCESS={id:6,message:"Cannot process more than 1 page"},s.OPTION_PID_INVALID={id:7,message:"Option Pid must be a positive number"},s.OPTION_FORMAT_INVALID={id:8,message:"Option Format must be a known string"},s.LOADING_MEDIAFILE={id:9,message:"Error when loading mediafile"},s.RAS_REQUEST={id:10,message:"RAS request error"},s.RAS_TIMEOUT={id:11,message:"RAS request timeout"},s.RAS_CUSTOM_TIMEOUT={id:12,message:"RAS request custom timeout"},s.RAS_RESPONSE={id:13,message:"RAS response error"},s.RAS_RESPONSE_ADS_NOT_ARRAY={id:14,message:"RAS response ads is not an array"},s.EVENT_CALLBACK={id:15,message:"Callback threw an error"},s.FILTER_FUNCTION={id:16,message:"The filter function threw an error"},s.OPTION_NAME_REQUIRED={id:17,message:"Name must be a valid string"}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(1),s=i(5),r=i(0),o=i(11),a=i(2);const d={addEventListener:s.addEventListener,removeEventListener:s.removeEventListener};class c extends class{constructor(e="EventListenerManager",t){this.adRemoveListenerStrategy=t,this.listeners={},this.logger=new o.a(e)}add(e,t,i){a.isString(e)||this.logger.warn("First argument of EventListenerManager.add must be a string",e),this.logger.debug("Add listener to event",e),r.b.fromNullable(this.listeners[e]).orElse(()=>r.b.fromNullable([])).map(e=>e.concat([{context:t,callback:i}])).forEach(t=>{this.listeners[e]=t}),this.addEventListener(e,t,i)}addMultiple(e,t,i){a.isArray(e)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",e),n.forEach(e,e=>this.add(e,t,i))}remove(e){a.isString(e)||this.logger.warn("First argument of EventListenerManager.add must be a string",e),this.logger.debug("Remove listener from event",e),n.forEach(this.listeners[e],t=>this.removeEventListener(e,t.context,t.callback)),this.listeners[e]=[]}removeMultiple(e){a.isArray(e)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",e),n.forEach(e,e=>this.remove(e))}removeAll(){for(const e in this.listeners)this.listeners.hasOwnProperty(e)&&n.forEach(this.listeners[e],t=>this.removeEventListener(e,t.context,t.callback))}addEventListener(e,t,i){this.adRemoveListenerStrategy.addEventListener(e,t,i)}removeEventListener(e,t,i){this.adRemoveListenerStrategy.removeEventListener(e,t,i)}}{constructor(e=d){super("DOMEventListenerManager",e)}}},,function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return c}));var n=i(31),s=i(2),r=i(1),o=i(9);const a=Object(n.a)((e,t)=>{for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])});function d(e,t){return Object(s.isObject)(e)?Object(o.b)(Object.keys(e),r.cArray.foldLeft({},(i,n)=>t(n,e[n])?Object.assign(Object.assign({},i),{[n]:e[n]}):i)):e}function c(e,t){return d(e,(e,i)=>t(i))}},function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return s})),i.d(t,"g",(function(){return r})),i.d(t,"h",(function(){return o})),i.d(t,"f",(function(){return a})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return c})),i.d(t,"a",(function(){return l}));let n=8e3;function s(e){n=e}const r=8e3,o=1e3,a=1e3;let d=1e4;function c(e){d=e}const l=500},function(e,t,i){"use strict";i.d(t,"b",(function(){return h})),i.d(t,"e",(function(){return u})),i.d(t,"g",(function(){return p})),i.d(t,"h",(function(){return g})),i.d(t,"a",(function(){return m})),i.d(t,"d",(function(){return f})),i.d(t,"c",(function(){return b})),i.d(t,"f",(function(){return v}));var n=i(0),s=i(13),r=i(10);var o=i(2),a=i(5),d=i(69),c=i(14),l=i(43);const h=({auctionId:e=n.b.empty(),pageId:t=n.b.empty(),pid:i=n.b.empty(),insertionId:s=n.b.empty(),connectionId:r=n.b.empty(),slotType:o=n.b.empty(),env:a=n.b.empty(),impressionId:h=n.b.empty(),cachebusting:u=n.b.empty(),headerBiddingProvider:p=n.b.empty(),gdprIab:g=n.b.empty(),userStore:m=n.b.empty(),portfolioItemId:f=n.b.empty(),viewerId:b=n.b.empty(),debugMetadata:v=n.b.empty()}={})=>{const A={"[auctid]":e.getOrValue(""),"[pageId]":t.map(String).getOrValue(""),"[pid]":i.map(String).getOrValue(""),"[insertionId]":s.map(String).getOrValue(""),"[connectionId]":r.map(String).getOrValue(""),"[slotType]":o.getOrValue(""),"[env]":p.match({some:()=>"js-web",none:()=>a.getOrValue("")}),"[impressionId]":h.map(String).getOrValue(""),"[CACHEBUSTING]":u.map(String).getOrValue(""),"[headerBiddingProvider]":p.getOrValue(""),"[pfid]":f.map(String).getOrValue(""),"[viewerId]":b.getOrValue(""),"[debugMetadata]":v.getOrValue(""),"[PAGEURL]":Object(c.g)(l.a)};return g.forEach(({status:e,consent:t,reason:i,apiVersion:n,cmpId:s})=>{A["[gdpr_status]"]=String(e),A["[gdpr_consent]"]=t,A["[gdpr_reason]"]=String(i),A["[gdpr_cmp_id]"]=s.map(String).getOrValue(""),A["[gdpr_api_version]"]=n.map(String).getOrValue(""),A["[gdpr_apply]"]=Object(d.b)(Object(d.a)(e))}),m.forEach(e=>{A["[userId]"]=e.userId,A["[os]"]=e.userDevice.os.toLowerCase(),A["[DEVICEID]"]=e.userDevice.device,A["[LIMIT_TRACKING]"]=String(e.userOptOut)}),A},u=({currentTime:e=n.b.empty(),errorCode:t=n.b.empty(),assetUrl:i=n.b.empty(),mediaFileType:r=n.b.empty(),viewability:a=n.b.empty(),userStore:d=n.b.empty(),debugMetadata:c=n.b.empty(),errorCause:l=n.b.empty(),gdprApplies:h=n.b.empty(),gdprConsent:u=n.b.empty()}={},p=s.rand)=>{const g=h.map(e=>e?"1":"0").getOrValue(""),m=u.getOrValue(""),f={"[CONTENTPLAYHEAD]":e.filter(e=>e>=0).match({some:o.offset,none:()=>"0"}),"[CACHEBUSTING]":p(8),"[ERRORCODE]":t.map(String).getOrValue(""),"[ASSETURI]":encodeURIComponent(i.getOrValue("")),"[MEDIAFILETYPE]":r.getOrValue("unknown"),"[VIEWABILITY]":a.map(String).getOrValue("0"),"[debugMetadata]":c.getOrValue(""),"[errorCause]":l.getOrValue(""),"[GDPR]":g,"%5BGDPR%5D":g,"${GDPR}":g,"%24%7BGDPR%7D":g,"${GDPR_CONSENT_\\d+}":m,"%24%7BGDPR_CONSENT_\\d+%7D":m,"[GDPR_CONSENT]":m,"%5BGDPR_CONSENT%5D":m,"${GDPR_CONSENT}":m,"%24%7BGDPR_CONSENT%7D":m};return d.forEach(e=>{f["[BUNDLEID]"]=e.userDevice.appId,f["[DEVICEID]"]=e.userDevice.device,f["[LIMIT_TRACKING]"]=String(e.userOptOut)}),f},p=e=>([t,i])=>e.replace(new RegExp(t.replace("[","\\[").replace("]","\\]").replace("{","\\{").replace("}","\\}").replace("$","\\$"),"gi"),i),g=(e,t=!1)=>i=>((e,t,i)=>{let n,s=i;for(;!(n=e.next()).done;)s=t(s,n.value);return s})(function*(e,t=!1){for(const i in e)e.hasOwnProperty(i)&&(t||""!==e[i])&&(yield[i,e[i]])}(e,t),(e,t)=>p(e)(t),i),m=(e,t)=>Object(o.isNumber)(e)&&Object(o.isNumber)(t)?e-t:0,f=(e=n.a)=>e.map(e=>e.url.toString()),b=(e=n.a)=>e.map(e=>Object(o.getExtensionFromMimeType)(e.type)),v=(e,t,i)=>{const s=Math.ceil(100*Object(r.getPercentageInView)({element:e,elementAncestors:Object(r.findParentElements)(e),elementClientRect:Object(a.getBoundingClientRect)(e),mainWindow:n.b.fromNullable(Object(r.getWindow)(e)).getOrValue(window),elementHeight:t}));return s<0||Object(r.checkElementVisibility)(e,i).isLeft()?0:s}},function(e,t,i){"use strict";i.r(t),i.d(t,"FormatEvent",(function(){return n.a})),i.d(t,"parseFraudReason",(function(){return n.l})),i.d(t,"getFormatEventFromSlotVisibilityReason",(function(){return n.e})),i.d(t,"formatEventToMirroredEvent",(function(){return n.c})),i.d(t,"formatEventsWithMirroringEvent",(function(){return n.d})),i.d(t,"nonErrorFormatEventsWithMirroringEvent",(function(){return n.i})),i.d(t,"mirroredFormatEvents",(function(){return n.h})),i.d(t,"nonErrorMirroredFormatEvents",(function(){return n.j})),i.d(t,"createFormatErrorAction",(function(){return n.b})),i.d(t,"parseFormatErrorAction",(function(){return n.k})),i.d(t,"matchesAdAvailableErrorVast",(function(){return n.f})),i.d(t,"matchesNoAdVastError",(function(){return n.g})),i.d(t,"VastEvent",(function(){return s.a})),i.d(t,"vastEvents",(function(){return s.b})),i.d(t,"VastErrorCode",(function(){return r.a})),i.d(t,"vastErrorCodes",(function(){return r.b})),i.d(t,"teadsVastUrl",(function(){return o.h})),i.d(t,"thirdPartyVastUrl",(function(){return o.j})),i.d(t,"teadsFormatUrl",(function(){return o.f})),i.d(t,"thirdPartyFormatUrl",(function(){return o.i})),i.d(t,"debugUrl",(function(){return o.c})),i.d(t,"teadsUrlToDebugUrl",(function(){return o.g})),i.d(t,"createTeadsParsedUrl",(function(){return o.b})),i.d(t,"createDebugTrackingUrl",(function(){return o.a})),i.d(t,"parseUrl",(function(){return o.d})),i.d(t,"stringifyParsedUrl",(function(){return o.e})),i.d(t,"supportedQueryParameterNames",(function(){return a.c})),i.d(t,"trackableFormatActions",(function(){return a.d})),i.d(t,"optNumberToString",(function(){return a.b})),i.d(t,"nullableNumberToString",(function(){return a.a})),i.d(t,"updateUrlWithQueryParametersIfMissing",(function(){return a.e}));var n=i(22),s=i(20),r=i(57),o=i(47),a=i(32)},function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.UNSUPPORTED=0]="UNSUPPORTED",e[e.JS=1]="JS",e[e.VPAID=2]="VPAID",e[e.CANVAS=3]="CANVAS"}(n||(n={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}));var n,s=i(1),r=i(9),o=i(2);!function(e){e[e.XmlParsingError=100]="XmlParsingError",e[e.XmlInvalidSchema=101]="XmlInvalidSchema",e[e.UnsupportedVastVersion=102]="UnsupportedVastVersion",e[e.Trafficking=200]="Trafficking",e[e.PlayerExpectingDifferentLinearity=201]="PlayerExpectingDifferentLinearity",e[e.PlayerExpectingDifferentDuration=202]="PlayerExpectingDifferentDuration",e[e.PlayerExpectingDifferentSize=203]="PlayerExpectingDifferentSize",e[e.GeneralWrapper=300]="GeneralWrapper",e[e.WrapperTimeout=301]="WrapperTimeout",e[e.WrapperLimitReached=302]="WrapperLimitReached",e[e.NoAdsAfterWrappers=303]="NoAdsAfterWrappers",e[e.GeneralLinear=400]="GeneralLinear",e[e.MediaFileNotFound=401]="MediaFileNotFound",e[e.MediaFileTimeout=402]="MediaFileTimeout",e[e.UnsupportedMediaFile=403]="UnsupportedMediaFile",e[e.MediaFileDisplayProblem=405]="MediaFileDisplayProblem",e[e.GeneralNonLinear=500]="GeneralNonLinear",e[e.NonLinearCreativeDimensions=501]="NonLinearCreativeDimensions",e[e.NonLinearUnableFetch=502]="NonLinearUnableFetch",e[e.SupportedNonLinearNotFound=503]="SupportedNonLinearNotFound",e[e.GeneralCompanion=600]="GeneralCompanion",e[e.CompanionDimensions=601]="CompanionDimensions",e[e.CompanionDisplayProblem=602]="CompanionDisplayProblem",e[e.CompanionUnableFetch=603]="CompanionUnableFetch",e[e.SupportedCompanionNotFound=604]="SupportedCompanionNotFound",e[e.Undefined=900]="Undefined",e[e.GeneralVpaid=901]="GeneralVpaid"}(n||(n={}));const a=Object(r.b)(Object.keys(n),s.cArray.filter(Object(r.a)(e=>parseInt(e,10),Object(o.not)(o.isNumber))),s.cArray.map(e=>n[e]))},function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));const n="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=",s=16/9},function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.AD_VERIFICATIONS="AdVerifications",e.MOAT_JS="MoatJs",e.VISIBILITY="Visibility",e.HTML="Html",e.IFRAME="Iframe",e.SCRIPT="Script",e.ALENTY="Alenty",e.TEADS_IAS="teads-IAS",e.TEADS_CONTEXT="teads-context"}(n||(n={}))},function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return c}));var n=i(1),s=i(4);function r(e){if(s.isFacebookWebview())fetch(e,{keepalive:!0});else{(new Image).src=e}}const o="1160",a=n.cArray.forEach(r),d=n.cArray.forEach(r),c=(e,t,i)=>`${e}-${t}-${i}`},function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.CANVAS=0]="CANVAS",e[e.HTML5=1]="HTML5",e[e.ANY=2]="ANY"}(n||(n={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i(27);var n=i(6);const s=(e,t=window)=>n.a.tryCatch(()=>t.document.cookie).map(t=>decodeURIComponent(t.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")))},function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return d})),i.d(t,"c",(function(){return g}));var n=i(0),s=i(6),r=i(2),o=i(64);const a=e=>o.b(JSON.stringify(e)),d=e=>n.b.fromNullable(e).filter(r.isObject).match({some:c,none:l(e)}),c=e=>r.isString(e.AdParameters)?h(e.AdParameters):Object(s.e)(e),l=e=>()=>n.b.fromNullable(e).filter(r.isString).match({some:h,none:()=>Object(s.b)(new Error("adParameters is neither an object or string: "+e))}),h=e=>p(u(e,o.c,o.a,decodeURIComponent),JSON.parse),u=(e,t,i,n)=>t(e)?i(e):0===e.indexOf("%7B")?n(e):e,p=(e,t)=>s.a.tryCatch(()=>t(e)).orElse(()=>Object(s.b)(new Error("Unable to JSON.parse adParameters string: "+e))),g=(e,t)=>d(e).toOption().filter(e=>/teads-vpaid-display/.test(t)).map(e=>!0===e.viewable).getOrValue(!0)},function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));const n=e=>{const t=/^(?:[A-Za-z\d+/]{4})*(?:[A-Za-z\d+/]{2}==|[A-Za-z\d+/]{3}=)?$/.exec(e);return null!==t&&t.length>0},s=e=>window.btoa(encodeURIComponent(e).replace(/%([\dA-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16)))),r=e=>decodeURIComponent([...window.atob(e)].map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var s=(o=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[i].concat(r).concat([s]).join("\n")}var o;return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(n[r]=!0)}for(s=0;s<e.length;s++){var o=e[s];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return p})),i.d(t,"b",(function(){return f}));var n=i(1),s=i(6),r=i(0),o=i(11),a=i(14),d=i(2);const c=new o.a("BusinessIds"),l=Object(s.c)({placementId:r.a,insertionId:r.a,connectionId:r.a});function h(e){return e.fold(e=>e.insertionId,e=>0===e.type||2===e.type?Object(r.c)(e.insertionId):r.a)}function u(e){return e.fold(e=>e.connectionId,e=>1===e.type||2===e.type?Object(r.c)(e.connectionId):r.a)}function p(e){return Object(n.filter)(Object(n.map)(e,e=>e.url),a.o)}function g(e){const{pid:t,gid:i,sid:n}=Object(a.q)(e);return{placementId:r.b.fromNullable(t).map(parseInt).filter(d.isNumber),insertionId:r.b.fromNullable(i).map(parseInt).filter(d.isNumber),connectionId:r.b.fromNullable(n).map(parseInt).filter(d.isNumber)}}function m(e,{insertionId:t,connectionId:i}){return t.match({some:t=>i.map(i=>function(e,t,i){return Object(s.d)({type:2,placementId:e,insertionId:t,connectionId:i})}(e,t,i)).getOrElse(()=>function(e,t){return Object(s.d)({type:0,placementId:e,insertionId:t})}(e,t)),none:()=>i.map(t=>function(e,t){return Object(s.d)({type:1,placementId:e,connectionId:t})}(e,t)).getOrElse(()=>Object(s.c)({placementId:Object(r.c)(e),insertionId:t,connectionId:i}))})}function f(e,t){return e.orElse(e=>r.b.fromNullable(Object(n.head)(t)).map(g).match({none:()=>(c.warn("Could not extract all the business IDs from the Teads URLs, and there is no more URL to check"),Object(s.c)(e)),some:i=>{const r={placementId:i.placementId.orElse(()=>e.placementId),insertionId:i.insertionId.orElse(()=>e.insertionId),connectionId:i.connectionId.orElse(()=>e.connectionId)};return r.placementId.match({none:()=>f(Object(s.c)(r),Object(n.tail)(t)||[]),some:e=>{const i=Object(n.tail)(t)||[];return 0===i.length||function({placementId:e,insertionId:t,connectionId:i}){return e.nonEmpty()&&t.nonEmpty()&&i.nonEmpty()}(r)?m(e,r):f(Object(s.c)(r),i)}})}}))}},function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));var n=i(2);const s=e=>e,r=e=>Object(n.isString)(e)},function(e,t,i){"use strict";var n=i(27);const s=window.teads||{};s.START_TIME=s.START_TIME||Object(n.a)(),s.FULL_LOGS=s.FULL_LOGS||[],s.HAS_DEBUG_LOGS=s.HAS_DEBUG_LOGS||!1,s.CONTEXT_IS_INITIALIZED=!1,s.WIGO_DEBUG_KEY=s.WIGO_DEBUG_KEY||null,window.teads=s},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));var n=i(0);const s=e=>{switch(e){case 0:return Object(n.c)(!1);case 11:case 12:return Object(n.c)(!0);default:return n.a}},r=e=>e.map(e=>e?"1":"0").getOrValue("")},function(e,t,i){"use strict";i.r(t),i.d(t,"SHADER_FRAGMENT_YCBCRTORGBA",(function(){return n})),i.d(t,"SHADER_FRAGMENT_LOADING",(function(){return s})),i.d(t,"SHADER_VERTEX_IDENTITY",(function(){return r}));const n=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),s=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),r=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n")},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));var n=i(0);function s(e){return n.b.fromNullable(e.message).getOrElse(()=>JSON.stringify(e)).substr(0,120)}function r(e){return n.b.fromNullable(e.getFullMessage()).getOrElse(()=>JSON.stringify(e)).substr(0,120)}},function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return a}));const n={id:100,message:"callback success function throw an exception "},s={id:200,message:"You must specify the bundle asset you want to use with teads.vpaid.BundledContainer.(CANVAS|VIDEO)"},r={id:400,message:"VPAIDJS getVPAIDAd throw an exception"},o={id:500,message:"Unable to load VPAID ad, file doesn't exists"},a={id:501,message:"Unable to load VPAID ad, timeout error"}},function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n,s,r=i(61),o=i(56),a=i(125),d="teads-vpaid-video.min.js",c="teads-vpaid-canvas.min.js",l=i(11),h=i(0),u=i(18),p=i(4),g=i(38),m=i(1),f=i(44),b=i(14),v=i(58);!function(e){e[e.VIDEO=0]="VIDEO",e[e.MPEG=1]="MPEG",e[e.TV=2]="TV",e[e.VPAIDJS=3]="VPAIDJS"}(n||(n={})),function(e){e.landscape="l",e.square="s",e.vertical="v"}(s||(s={}));class A{static getPreferredMediafileTypes(e){let t=[n.VIDEO,n.VPAIDJS,n.TV,n.MPEG];return p.isDesktop()||(t=Object(m.filter)(t,e=>e!==n.VPAIDJS).concat([n.VPAIDJS])),p.isIE()?t=Object(m.filter)(t,e=>e!==n.TV&&e!==n.MPEG):p.isSDK()?t=[n.VIDEO,n.VPAIDJS]:p.isIos()&&u.d(p.getIosVersion(),"8")?t=e===r.a.HTML5?[n.VIDEO]:p.isIpad()?[n.MPEG,n.TV]:[]:e===r.a.CANVAS&&(t=Object(m.filter)(t,e=>e!==n.VIDEO)),t}static getElectedMediafiles(e,t){const i=A.getPreferredMediafileTypes(t);let s=[];Object(m.map)(e,e=>{e.api&&e.api.toLowerCase&&(e.api=e.api.toLowerCase()),e.type&&e.type.toLowerCase&&(e.type=e.type.toLowerCase())});let r=0;const o=i.length;for(;r<o&&0===s.length;){switch(i[r]){case n.VIDEO:s=Object(m.filter)(e,A.isPlayableVideo);break;case n.TV:s=Object(m.filter)(e,A.isTv);break;case n.MPEG:s=Object(m.filter)(e,A.isMpeg);break;case n.VPAIDJS:s=Object(m.filter)(e,A.isVpaidJS)}r++}return s}static getTargetedBitrate(e){return e>0?e/2:0}static extractMediafileFromBitrate(e,t){if(t){const i=(e,t,n)=>n.length>0?e.bitrate<t?e:i(Object(m.head)(n),t,Object(m.tail)(n)):e;return i(Object(m.head)(e),t,Object(m.tail)(e))}return e[Math.floor(e.length/2)]}static sortMediafilesByBitrate(e,t){const i=Object(m.map)(e,e=>(e.bitrate=e.bitrate||2*t.max,e));let n=Object(m.filter)(i,e=>e.bitrate<=t.max&&e.bitrate>=t.min);return n=n.length?n:i,n.sort((e,t)=>t.bitrate-e.bitrate)}static getMaxBitrateForContext(){return p.isMobile()?A.bitrates.mobile:A.bitrates.default}static getMediaProvider(e){switch(e.type){case"application/x-javascript":case"application/javascript":case"text/javascript":return o.a.VPAID;case"video/mpg":case"video/mpeg":case"video/tv":return p.cacheCanvasUsed(!0),o.a.CANVAS;default:return A.isPlayableVideo(e)?o.a.JS:o.a.UNSUPPORTED}}static getOptimalMediaFiles(e,t,i,n,s){if(0===t.length)return null;const o=A.getEncodingCandidate(t.slice()),a=A.getElectedMediafiles(t,s),d=A.getDownloadSpeed();if(s!==r.a.CANVAS&&!u.a(p.getIosVersion(),"8")||0!==a.length&&!A.isVpaidJS(a[0])||!o)if(a.length>1){const t=A.getTargetedBitrate(d),n=p.isChrome()||p.isEdge()?A.limitBitrateForHAI(e,t):t,s=A.extractMediafileFromBitrate(A.sortMediafilesByBitrate(a,A.getMaxBitrateForContext()),n);this.logger.debug(`Picked mediafile ${s.url} with bitrate ${s.bitrate}`),i(s,d)}else if(1===a.length)i(a[0],null);else{const e="No Mediafile for this context";i(null,null,e),A.logger.info("getOptimalMediaFiles",e)}else A.waitForProxy(o.url,A.getMediaProxyBitrate(A.getTargetedBitrate(d)),(e,t)=>{o.url=e,o.type="video/tv",i(e?o:null,d,t)},n)}static limitBitrateForHAI(e,t){this.logger.debug(`limitBitrateForHAI called with duration ${e} and target bitrate ${t}`);const i=Math.max(30,Math.min(0|e,60)),n=Math.floor(30720/i);return this.logger.debug(`Maximum allowed bitrate ${n} for ${i} seconds`),Math.min(n,t)}static waitForProxy(e,t,i,n){const s=location.hostname.match(/.+\.sandbox\.teads\.net|localdocker/),r="https://[HOST]/transcode?url=[URL]&bitrate=[BITRATE]".replace(/\[HOST\]/,s?s[0]+":18088":"mp.teads.tv").replace(/\[URL\]/,encodeURIComponent(e)).replace(/\[BITRATE\]/,t.toString()),o=g.a();let a=!1;o.open("GET",r,!0),o.onreadystatechange=()=>{let e;if(4===o.readyState&&!a){switch(a=!0,o.status){case 200:i(o.responseText);break;case 202:e="Mediaproxy - encoding ongoing - need wait",i(null,e);break;case 201:e="Mediaproxy - encoding init - need one more call to encode",i(null,e);break;case 410:e="Mediaproxy - encoding failed",i(null,e);break;case 400:e="Mediaproxy - bad request",i(null,e);break;default:e="Mediaproxy - other error - "+o.status,i(null,e)}A.logger.debug("proxy resp",o.status),n.info(["proxy","resp",o.status].join(" "))}},o.send(),n.info("proxy call")}static getOptimalMediaFile(e,t,i,n,s){var o,a;p.isCanvasNeeded()&&(n.type=r.a.CANVAS,null===(a=null===(o=n.formatConfig)||void 0===o?void 0:o.allowedPlayer)||void 0===a||a.setValue(r.a.CANVAS)),A.getOptimalMediaFiles(e,t,(e,t,n)=>{if(e){const n=0;s.info("media "+e.type,n),i(e,t?` -> dlSpeed: ${t}kbit/s`:"")}else i(null,n)},s,n.type)}static getOptimalHeight(e,t,i){return t?Math.ceil(t/A.getRatio(e,i)):0}static getRatio(e,t){const i=!Object(b.j)(e.url);return!e.height||!e.width||!t&&i&&e.api&&"vpaid"===e.api.toLowerCase()&&e.width>e.height?v.a:e.width/e.height}static getAssetFromMediaProvider(e){let t;switch(e){case o.a.JS:t=d;break;case o.a.CANVAS:t=c;break;default:t=""}return t}static getEncodingCandidate(e){let t;return Object(m.forEach)(e,e=>{let i=e.type||"";switch(e.weight=0,i.split("/").pop()){case"mov":e.weight=150;break;case"mp4":e.weight=100;break;case"webm":case"ogg":case"ogv":e.weight=50}(!t||t.weight<=e.weight)&&(t=t||e,(t.weight<e.weight||t.bitrate<e.bitrate)&&(t=e))}),t.weight?t:null}static getMediaProxyBitrate(e){return e>=1e3?1e3:e>=700?700:e>=500?500:300}static sendMediasToSumologic(e,t,i){try{let n={},s=Object(m.map)(Object(m.filter)(e.mediaFiles,e=>!n[e.type]&&(n[e.type]=!0,!0)),e=>e.type);const r=Object(m.map)(e.wrappers,e=>Object(b.p)(e).hostname),o=0;i.info(`[mf-${t}] ${s.join(" | ")}||${r.join(" > ")}`,o)}catch(e){A.logger.error("sendMediasToSumologic error",e)}}static getRatioCategory(e){return e.width>e.height?s.landscape:e.width===e.height?s.square:s.vertical}static isMpeg(e){return/^video\/mpe?g$/.test(e.type)}static isTv(e){return"video/tv"===e.type}static isVideo(e){return!A.isMpeg(e)&&!A.isTv(e)&&/^video\/*/.test(e.type)}static isPlayableVideo(e){return A.isVideo(e)&&a.a(e.type)}static isVpaidJS(e){return"vpaid"===e.api&&e.type.indexOf("javascript")>-1}static getDownloadSpeed(e=window.navigator){var t;return h.b.fromNullable(null===(t=null==e?void 0:e.connection)||void 0===t?void 0:t.downlink).match({some:e=>1024*e,none:()=>Object(f.c)().map(e=>e.sort((e,t)=>t.transferSize-e.transferSize)).map(e=>Object(f.b)(e.slice(0,Math.round(e.length*A.percentResourcesAmount)))).getOrValue(0)})}}A.logger=new l.a("player.MediaFileHelper"),A.bitrates={mobile:{min:200,max:5e3},default:{min:200,max:1e4}},A.percentResourcesAmount=.1},function(e,t,i){"use strict";i.d(t,"e",(function(){return v})),i.d(t,"a",(function(){return A})),i.d(t,"b",(function(){return y})),i.d(t,"g",(function(){return w})),i.d(t,"f",(function(){return O})),i.d(t,"j",(function(){return C})),i.d(t,"h",(function(){return I})),i.d(t,"i",(function(){return S})),i.d(t,"c",(function(){return x})),i.d(t,"d",(function(){return D}));var n=i(11),s=i(4),r=i(1),o=i(43),a=i(2),d=i(0);let c,l,h,u,p,g,m=[];const f=new n.a("helper.Amp");let b={noContentAvailable:!1,renderStart:!1,reportRenderedEntityIdentifier:!1};function v(){!s.isAmp()||!T()||p&&c&&window._teads_amp.change.rootBounds.width===p.width||(p=T().rootBounds,l=s.isDesktop()?window.innerWidth:Math.min(Math.min(p.width,p.height),window.innerWidth),l!==window.innerWidth&&(l-=2*window.context.initialIntersection.boundingClientRect.left),c||(window.context.onResizeDenied((e,t)=>j(e,t,!1)),window.context.onResizeSuccess((e,t)=>j(e,t,!0)),T().boundingClientRect.height>10&&(y(),o.a.error("AMP tag malformed "+window.context.location.href)),c=!0),2!==u&&2!==h||w())}function A(e=(()=>{}),t=!1){h=0,c&&k(0,e,h,t)}function y(e=(()=>{}),t=!1){h=1,c&&k(1,e,h,t)}function w(e=null,t=(()=>{}),i=!1){h=2,c&&k(e||E(),t,h,i)}function E(){return Math.ceil(l/(4/3))}function O(){return 2===u}function C(e){let t="teads-";e?(t+=e.id?e.id:"0",t+="-",t+=e.creativeId?e.creativeId:"0"):t+="0",g=t}function I(){if(window.context&&Object(a.isFunction)(window.context.renderStart)&&!b.renderStart){b.renderStart=!0;let e={height:E(),width:l};f.debug("renderStart",e),window.context.renderStart(e)}}function S(){if(g&&window.context&&Object(a.isFunction)(window.context.reportRenderedEntityIdentifier)&&!b.reportRenderedEntityIdentifier){b.reportRenderedEntityIdentifier=!0;let e="teads-"+g;f.debug("reportRenderedEntityIdentifier",e),window.context.reportRenderedEntityIdentifier(e)}}function T(){return window._teads_amp.change&&window.context.initialIntersection?window._teads_amp.change:null}function k(e,t,i,n){!function(e,t){if(!s.isAmp()||!window.context.requestResize||!c)return;m.push({width:l,height:e,done:!1,callback:t}),window.context.requestResize(l,e),f.warn("amp request resize",l,e)}(e,s=>{let r="function"==typeof n?n():n;s||r?(h=null,u=s?i:null,t(s),O()&&S()):h===i&&setTimeout(()=>k(e,t,i,r),100)})}function P(e,t,i){return e>=t-i&&e<=t+i}function j(e,t,i){r.forEach(m,n=>{P(e,n.height,2)&&P(t,n.width,2)&&!n.done&&(n.done=!0,n.callback(i))}),i?f.warn("amp request resize success",t,e):f.error("amp request resize denied",t,e)}const L=e=>Object(a.isObject)(e)&&function(e){return"accepted"===e.consentStateValue||"rejected"===e.consentStateValue}(e)&&Object(a.isString)(e.consentString)?Object(d.c)(e.consentString):d.a,x=()=>{var e;return d.b.fromNullable(null===(e=window.context)||void 0===e?void 0:e.initialConsentValue).orElse(()=>{var e;return L(null===(e=window.context)||void 0===e?void 0:e.consentSharedData)}).map(e=>{var t,i;return{status:12,reason:127,consent:e,apiVersion:d.b.fromNullable(null===(i=null===(t=window.context)||void 0===t?void 0:t.initialConsentMetadata)||void 0===i?void 0:i.consentStringType).flatMap(e=>2===e?Object(d.c)(2):1===e?Object(d.c)(1):d.a),cmpId:d.a}}).getOrValue({status:25,reason:250,consent:"",apiVersion:d.a,cmpId:d.a})},V=e=>{var t;return 3===(null===(t=e.initialConsentMetadata)||void 0===t?void 0:t.consentStringType)},N=e=>/^[1-9][YN-]{3}$/.test(e),D=e=>{const t=e.flatMap(e=>d.b.fromNullable(e.initialConsentValue)).orElse(()=>e.flatMap(e=>L(e.consentSharedData)));return e.filter(V).flatMap(()=>t).orElse(()=>t.filter(N))}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(72),s=i(127),r=i(0),o=i(140),a=i.n(o);class d extends s.a{loadVpaid(e,t,i){e===d.CANVAS?this.loadBundled(d.CANVAS,t,i):e===d.VIDEO?this.loadBundled(d.VIDEO,t,i):super.loadVpaid(e,t,i)}loadBundled(e,t,i){this.setUpCreativeContainers(this.container,e),r.b.fromNullable(this.getCreativeWindow(this.creativeContainer)).forEach(t=>{switch(e){case d.VIDEO:this.vpaid=new t.teads.video.VPAIDVideo;break;case d.CANVAS:this.vpaid=new t.teads.video.VPAIDCanvas;break;default:return i(n.a)}}),r.b.fromNullable(this.vpaid).forEach(e=>t(e))}getCreativeTemplate(e,t,i){return`\n      <!DOCTYPE html>\n      <html>\n        <head>\n            ${a.a}\n        </head>\n        <body style="margin:0px;padding:0px;overflow:hidden">\n          <div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color:${i}"></div>\n          <div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div>\n        </body>\n      </html>\n    `}}d.CANVAS="canvas",d.VIDEO="video"},function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return a}));var n=i(3),s=i(12);function r(e){return Number(e.handshakeVersion("2.0"))>=2}function o(e,t){return function(...i){var s=i[0];switch(t){case n.a.AdClickThru:s={url:i[0],id:i[1],playerHandles:i[2]};break;case n.a.AdError:s={message:i[0],id:i[1]}}e({type:t,data:s})}}function a(e,t){switch(e){case"initAd":if(t>=s.a.LOADING)throw"VPAID already initalized, cannot call initAd twice";break;case"startAd":if(t<s.a.LOADED)throw"VPAID not started, use initAd, and wait for AdLoaded event before call startAd method";if(t>=s.a.STARTING)throw"Ad already started, cannot call startAd twice"}}},function(e,t,i){"use strict";i.d(t,"f",(function(){return r})),i.d(t,"d",(function(){return o})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"a",(function(){return h}));var n=i(4);let s=0;function r(){s=0}function o(e){var t,i,n,s;const r=null!==(i=null===(t=e.screen)||void 0===t?void 0:t.availWidth)&&void 0!==i?i:e.innerWidth,o=null!==(s=null===(n=e.visualViewport)||void 0===n?void 0:n.width)&&void 0!==s?s:e.innerWidth;return Math.min(r,o)}function a(e){var t,i,n,s;const r=null!==(i=null===(t=e.screen)||void 0===t?void 0:t.availHeight)&&void 0!==i?i:e.innerHeight,o=null!==(s=null===(n=e.visualViewport)||void 0===n?void 0:n.height)&&void 0!==s?s:e.innerHeight;return Math.min(r,o)}function d(e){const t=a(e);return s=Math.max(s,t),s}function c(e){return{width:o(e),height:d(e)}}function l(e){return o(e)>a(e)}function h(){return!Object(n.isTablet)()&&!Object(n.isAmp)()&&!Object(n.isIABSafeFrame)()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(30),s=i(93);class r{constructor(e,t){this.className=e,this.css=t}initElement(){this.element=document.createElement("div"),this.element.className=this.className,this.element.style.setProperty("margin-bottom","0","important"),this.element.innerHTML=this.getInnerHtml()}getElement(){return this.element}getHTML(){let e=this.getInnerHtml();if(e)return`<div class="${this.className}">${e}</div>`}getCSS(){return s.a(this.css,{assetsPath:n.b.assetsUrl})}getInnerHtml(){return this.isEnabled()?this.innerHTML:""}hide(){this.element&&this.element.style.setProperty("display","none")}show(){this.element&&this.element.style.setProperty("display","block")}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}n.READY="ready",n.ERROR="error",n.WAITING="waiting"},function(e,t,i){"use strict";var n;!function(e){e[e.ERROR=-1]="ERROR",e[e.UNSTARTED=0]="UNSTARTED",e[e.WAITING=1]="WAITING",e[e.READY=2]="READY"}(n||(n={})),t.a=n},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(1),s=i(3),r=i(29);class o{constructor(){this.listeners={},this.listenersScope={}}subscribe(e,t,i){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this.listenersScope[t]=this.listenersScope[t]||[],this.listenersScope[t].push(i||null)}unsubscribe(e,t){if(this.listeners[t]){var i=Object(n.indexOf)(this.listeners[t],e);i>=0&&(this.listeners[t][i]=function(){})}}clearListeners(){this.listeners={},this.listenersScope={}}handleEvent(e,t){for(var i=this.listeners[e.type]||[],n=0,o=i.length;n<o;n++)try{var a=[];if(e.data)switch(e.type){case s.a.AdClickThru:a=[e.data.url,e.data.id,!!e.data.playerHandles];break;case s.a.AdLog:case s.a.AdError:case r.a.AdRemovedHeavyAdIntervention:case r.a.AdWarningHeavyAdIntervention:a="string"==typeof e.data?[e.data,null]:"object"==typeof e.data&&e.data.message?[e.data.message,e.data.id]:[String(e.data),null];break;case s.a.AdInteraction:a=[e.data.id];break;case r.a.AdVideoMetadata:a=[e.data]}i[n].apply(this.listenersScope[e.type][n],a)}catch(i){if(t)throw"failed to log error on callback: "+e.data;this.handleEvent({type:s.a.AdLog,data:"Callback #"+n+" on event "+e.type+" throws an exception: "+i},!0)}}}},function(e,t,i){"use strict";i.r(t),i.d(t,"getRandomValue",(function(){return o})),i.d(t,"getNativeCrypto",(function(){return a})),i.d(t,"generateUuidWithRandom",(function(){return d})),i.d(t,"getRandomBytes",(function(){return c}));var n=i(0),s=i(6),r=i(2);function o(e=window){return Object(r.isNative)(Math.random)?Math.random():n.b.fromNullable(e.crypto).filter(e=>Object(r.isNative)(e.getRandomValues)).flatMap(e=>s.a.tryCatch(()=>e.getRandomValues(new Uint32Array(1))[0]).toOption()).map(e=>e/4294967295).getOrValue(0)}function a(e){return Object(r.isObject)(e)&&Object(r.isFunction)(e.getRandomValues)&&Object(r.isNative)(e.getRandomValues)?Object(n.c)(e):n.a}function d(e,t=Math.random){const i=new Array(e);for(let n=0,s=0;n<e;n++)0==(3&n)&&(s=4294967296*t()),i[n]=s>>>((3&n)<<3)&255;return i}function c(e,t=window,i=(()=>d(e))){return a(t.crypto).orElse(()=>a(t.msCrypto)).flatMap(t=>{const i=new Uint8Array(e);return t.getRandomValues(i),void 0!==i[e-1]?Object(n.c)(i):n.a}).getOrElse(i)}},function(e,t,i){"use strict";var n;!function(e){e[e.JS=2]="JS",e[e.POSTMESSAGE=3]="POSTMESSAGE"}(n||(n={})),t.a=n},,function(e,t,i){"use strict";i.d(t,"d",(function(){return g})),i.d(t,"j",(function(){return m})),i.d(t,"e",(function(){return f})),i.d(t,"k",(function(){return b})),i.d(t,"f",(function(){return v})),i.d(t,"h",(function(){return A})),i.d(t,"g",(function(){return y})),i.d(t,"i",(function(){return w})),i.d(t,"b",(function(){return O})),i.d(t,"c",(function(){return C})),i.d(t,"a",(function(){return I}));var n=i(1),s=i(0),r=i(9),o=i(37),a=i(2),d=i(60),c=i(21),l=i(92),h=i(122),u=i(133);const p=e=>Object.assign({formatVersion:d.c,trackStrategy:d.d},e);function g(e){return(t,i)=>Object(r.b)([Object(c.a)(e),Object(c.a)(e)],o.a.sndMap(n=>Object(r.b)(l.b.track(t,p(i),n),Object(c.h)(e))))}function m(e){return(t,i)=>Object(r.b)([Object(c.c)(e),Object(c.c)(e)],o.a.sndMap(n=>Object(r.b)(u.a.track(t,p(i),n),Object(c.j)(e))))}function f(e){return(t,i,n=s.a)=>Object(r.b)([[Object(c.a)(e),Object(c.b)(e)],[Object(c.a)(e),Object(c.b)(e)]],o.a.sndMap(([s,a])=>Object(r.b)(h.c(t,{trackStrategy:d.b},p(i),n)(s,a),o.a.bimap(Object(c.h)(e),Object(c.i)(e)))),o.a.zip)}function b(e){return(t,i,n=s.a)=>Object(r.b)([[Object(c.c)(e),Object(c.b)(e)],[Object(c.c)(e),Object(c.b)(e)]],o.a.sndMap(([s,a])=>Object(r.b)(h.e(t,{trackStrategy:d.b},p(i),n)(s,a),o.a.bimap(Object(c.j)(e),Object(c.i)(e)))),o.a.zip)}const v=e=>(t,i)=>Object(r.b)([Object(c.a)(e),Object(c.a)(e)],o.a.sndMap(n=>Object(r.b)(l.b.trackFormatError(t,p(i),n),Object(c.h)(e)))),A=e=>(t,i)=>Object(r.b)([Object(c.c)(e),Object(c.c)(e)],o.a.sndMap(n=>Object(r.b)(u.a.trackFormatError(t,p(i),n),Object(c.j)(e)))),y=e=>(t,i,n)=>Object(r.b)([[Object(c.a)(e),Object(c.b)(e)],[Object(c.a)(e),Object(c.b)(e)]],o.a.sndMap(([s,a])=>Object(r.b)(h.b(t,{trackStrategy:d.b},p(i),n)(s,a),o.a.bimap(Object(c.h)(e),Object(c.i)(e)))),o.a.zip),w=e=>(t,i,n,s)=>Object(r.b)([[Object(c.c)(e),Object(c.b)(e)],[Object(c.c)(e),Object(c.b)(e)]],o.a.sndMap(([t,a])=>Object(r.b)(h.d(i,{trackStrategy:d.b},p(n),s)(t,a),o.a.bimap(Object(c.j)(e),Object(c.i)(e)))),o.a.zip),E=Object(r.a)(Object(a.prop)("trackedEvents"),n.cArray.map(Object(a.prop)("event"))),O=([e,t])=>Object(n.difference)(E(e))(E(t)),C=o.a.bimap(O,O),I=e=>({event:t,trackingUrl:i})=>Object(r.b)(Object(c.a)(e),e=>Object.assign(Object.assign({},e),{customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}),Object(c.h)(e))},function(e,t,i){"use strict";i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return v})),i.d(t,"c",(function(){return A}));i(68);var n=i(4),s=i(27),r=i(5),o=i(10),a=i(1);var d=i(11),c=i(38),l=i(2),h=i(6),u=i(14),p=i(13),g=i(0),m=i(150),f=i.n(m);const b="wigo.teads.tv";class v{constructor(){if(this.settings=g.a,this.color="blue",this.statusDetails="",this.bottomPxPosition=10,this.position=1,this.buttonHeight=0,window.teads.WIGO_DEBUG_KEY=!window.teads.WIGO_DEBUG_KEY&&window.teads.HAS_DEBUG_LOGS?"debug":window.teads.WIGO_DEBUG_KEY,this.elapsedTime=0,this.logfile={context:(Object(n.getDevice)().toString()+"-"+Object(n.getOS)().toString()+"-"+Object(n.getBrowser)().toString()).replace(/\|/g," "),url:location.href,steps:[],logs:[],timeline:[],vasts:[]},g.b.fromNullable(v.reportPromise).forEach(e=>e.then(e=>this.report=e)),this.topWindow=Object(o.findTopWindow)(document.body),window.teads.WIGO_DEBUG_KEY)this.createDebugButton(this.color),this.recordUserActions();else{const e=e=>{const t=e.data.wigoLiveDebug;t&&t.length&&t.length>1&&this.enableWigo(t[1])};try{this.topWindow.addEventListener("message",e)}catch(t){this.topWindow=window,this.topWindow.addEventListener("message",e)}}v.storeInstance(this)}static getInstances(){return v.instances}static loadAndStoreReportIfNeeded(e){const t=Object(u.i)(),i=Object(u.q)(t),n=i.teadsWigoDebug||i.teadswigodebug;n&&(e.info(`wigo debug ${n} on ${location.href}`,1),v.reportPromise=v.loadReport(n))}static isCeltraParameterSet(e){return"true"===Object(u.q)(e).celtra}static storeInstance(e){v.instances.push(e)}static loadReport(e){return new Promise((t,i)=>{const n=Object(c.a)();n.open("GET",`${Object(l.getProtocol)()}//wigo.teads.tv/livedebug/upload/${e}.json`),n.onload=()=>{h.a.tryCatch(()=>JSON.parse(n.response)).orElse(()=>h.a.tryCatch(()=>JSON.parse(n.responseText))).tapLeft(e=>{new d.a("WIGO").error(e)}).orElse(()=>Object(h.b)(new Error("report is not available from xhr response"))).fold(i,t)},n.onerror=i,n.send()})}enableWigo(e="enableFromAdSettings"){window.teads.WIGO_DEBUG_KEY=e,this.createDebugButton(this.color),this.recordUserActions()}setPlayerContainer(e){this.playerContainer=e,this.setElementToFollow(this.playerContainer)}setElementToFollow(e){this.elementToFollow=e,this.elementToFollowRelativeRect=Object(r.getClientRectRelativeToDocument)(Object(r.getBoundingClientRect)(e),{x:Object(r.getScrollLeft)(this.topWindow),y:Object(r.getScrollTop)(this.topWindow)})}valid(e,t,i,n){if(this.addValidEvent(e,t,{store:i,type:n}),"error"===n){const e=g.b.fromNullable(i),t=e.filter(l.isString).orElse(()=>e.filter(e=>!!e.message).map(e=>g.b.fromNullable(e.id).filter(e=>!!e).map(t=>`${t} - ${e.message}`).getOrValue(""+e.message))).orElse(()=>e.filter(e=>e.length>0).map(String)).getOrElse(()=>JSON.stringify(i));this.setStatus(!1,t)}else 3===e&&2===t?this.setStatus(!0,"AdLoaded"):3===e&&3===t&&this.setStatus(!0,"AdStarted")}vastEvent(e,t,i,n){if(this.addValidEvent(0,0,{store:{name:e,time:t,percent:i,pixels:n},type:"vastEvent"}),"complete"===e)this.setStatus(!0,"AdComplete");else if("pause"===e)this.setStatus(!0,"AdPaused"),this.lastTracking="pause";else if("pause"===this.lastTracking)this.lastTracking=null;else if("progress"===e){const e=t?t.split(".")[0]+"s":"";this.setStatus(!0,"AdPlaying: "+e)}}setStatus(e,t=""){const i=e?"green":"red";this.button?(this.status.style.setProperty("background-color",i),this.status.style.setProperty("display","block"),this.loader.style.setProperty("display","none"),this.status.innerHTML=t):(this.color=i,this.statusDetails=t)}moveButton(e){this.bottomPxPosition=v.initialBottomPosition+(e-1)*v.bottomPxInterval,this.position=e,this.button&&this.button.style.setProperty("bottom",this.bottomPxPosition+"px")}followElement(){if(this.isActivated()){const e=Object(r.getBoundingClientRect)(this.elementToFollow);this.elementToFollowRelativeRect=Object(r.isEmptyBoundingClientRect)(e)?this.elementToFollowRelativeRect:Object(r.getClientRectRelativeToDocument)(e,{x:Object(r.getScrollLeft)(this.topWindow),y:Object(r.getScrollTop)(this.topWindow)});const t=Object(r.getClientRectFromClientRectRelativeToDocument)(this.elementToFollowRelativeRect,{x:Object(r.getScrollLeft)(this.topWindow),y:Object(r.getScrollTop)(this.topWindow)}),i=this.topWindow.innerHeight-this.buttonHeight-(v.initialBottomPosition+(v.instances.length-this.position)*v.bottomPxInterval);let n=this.topWindow.innerHeight-t.bottom+t.height/2-this.buttonHeight/2,s=10;n<this.bottomPxPosition?n=this.bottomPxPosition:n>i?n=i:s=50,this.button.style.setProperty("bottom",n+"px"),this.button.style.setProperty("right",s+"px")}}forceReportWithKey(e){window.teads.WIGO_DEBUG_KEY=e,this.sendLogsToWigo(()=>{})}isActivated(){return!(!window.teads.WIGO_DEBUG_KEY||!this.button)}setVast(e,t,i=""){this.logfile.vasts.push({url:e,content:t,uploadedUrl:i})}getVastUrl(e){var t;return g.b.fromNullable(null===(t=this.report)||void 0===t?void 0:t.vasts).map(t=>Object(a.filter)(t,t=>t.url===e)).filter(a.isNotEmpty).map(e=>e[0].uploadedUrl).getOrValue(e)}saveVast(e){this.sendLogsToWigo(()=>{},e)}recordUserActions(){this.elapsedTime<3e5&&setTimeout(()=>{const e=this.logfile.timeline[this.logfile.timeline.length-1],t=Object(r.getWindowSize)(this.topWindow),i=Object(r.getScrollLeft)(this.topWindow),n=Object(r.getScrollTop)(this.topWindow);if(!e||this.hasInteracted(e,t,i,n)){const e={time:this.elapsedTime,scrollX:i,scrollY:n,screenWidth:t.width,screenHeight:t.height,player:{top:0,height:0,left:0,width:0}};if(this.playerContainer){const t=Object(r.getBoundingClientRect)(this.playerContainer);e.player={top:t.top,height:t.height,left:t.left,width:t.width}}this.logfile.timeline.push(e)}this.elapsedTime+=v.recordUserActionsTiming,this.recordUserActions()},v.recordUserActionsTiming)}addValidEvent(e,t,i){this.logfile.steps.push({step:e,substep:t,info:i})}createDebugButton(e){if(window.teads.WIGO_DEBUG_KEY&&!this.button){const t=this.topWindow.document.createElement("div");t.innerHTML=v.TEMPLATE,this.button=t.firstChild,this.button.onclick=e=>{this.openWigoReport(),e.stopPropagation()},this.button.style.setProperty("bottom",this.bottomPxPosition+"px"),this.topWindow.document.body.appendChild(this.button),this.status=this.button.firstChild,this.status.style.setProperty("background-color",e),this.status.innerHTML=this.statusDetails,this.loader=this.status.nextSibling,"blue"!==this.color?(this.status.style.setProperty("display","block"),this.loader.style.setProperty("display","none")):(this.status.style.setProperty("display","none"),this.loader.style.setProperty("display","block")),this.buttonHeight=Object(r.getBoundingClientRect)(this.button).height,Object(n.isAmp)()&&teads.helper.AmpResize&&("red"===e&&(teads.helper.AmpResize.ratio=4),setTimeout(()=>this.forceAmpOpen(),1e3))}}forceAmpOpen(){if(!teads.helper.AmpResize.isVisible()){const e=setTimeout(()=>this.forceAmpOpen(),1e3);teads.helper.AmpResize.open(()=>{this.button.style.setProperty("display","none"),setTimeout(()=>this.button.style.setProperty("display","block"),100),clearTimeout(e)})}}openWigoReport(){if(window.teads.WIGO_DEBUG_KEY){this.button.onclick=e=>{e.stopPropagation()};const e=e=>{setTimeout(()=>{this.button.onclick=e=>{this.openWigoReport(),e.stopPropagation()}},500)};window.open(this.sendLogsToWigo(e))}}sendLogsToWigo(e,t=`${window.teads.WIGO_DEBUG_KEY}_${Object(s.a)()}.json`){this.logfile.logs=d.a.getFullLogs(),this.sendVastsToWigo(this.logfile.vasts);const i=Object(c.a)();var n,r,o,l;i.open("PUT",v.serviceUrl+"/livedebug/upload/"+t,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=e,i.onerror=e,i.send(JSON.stringify((n=this.logfile,o=[],l=[],function e(t,i){var n,s;return void 0!==r&&(t=r(t)),"object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String?t:(n=Object(a.indexOf)(o,t))>=0?{$ref:l[n]}:(o.push(t),l.push(i),Array.isArray(t)?(s=[],Object(a.forEach)(t,(function(t,n){s[n]=e(t,i+"["+n+"]")}))):(s={},Object(a.forEach)(Object.keys(t),(function(n){s[n]=e(t[n],i+"["+JSON.stringify(n)+"]")}))),s)}(n,"$"))));return v.serviceUrl+"/livedebug/1e5be8207477d3ae7c5a946e7e0f5d1a.html?file="+t}sendVastsToWigo(e){Object(a.forEach)(Object(a.filter)(e,e=>!e.uploadedUrl),e=>{const t=`${v.serviceUrl}/livedebug/upload/${Object(p.rand)(20,!1)}.xml`,i=Object(c.a)();i.open("PUT",t,!0),i.setRequestHeader("Content-Type","application/xml; charset=UTF-8"),i.send(e.content),e.uploadedUrl=t,delete e.content})}hasInteracted(e,t,i,n){return e.scrollY!==n||e.scrollX!==i||e.screenHeight!==t.height||e.screenWidth!==t.width}}v.bottomPxInterval=80,v.recordUserActionsTiming=1e3,v.serviceUrl=location.hostname.match(/(sandbox\.teads\.net|par2\.teads\.tech|wigo|localhost)$/)?Object(l.getProtocol)()+"//"+location.hostname+":18091":"https://"+b,v.instances=[],v.initialBottomPosition=10,v.TEMPLATE=f.a;const A=({wigo:e,durationPlayed:t,totalDuration:i})=>({event:n,trackingUrls:s})=>{const r=((e,t)=>t>0?Math.floor(100*e/t):0)(t.getOrValue(0),i.getOrValue(0));e.vastEvent(n,(e=>e.map(e=>e.toFixed(2)).getOrValue(""))(t),r,Object(a.map)(s,e=>({url:e})))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o}));var n=i(1);const s=e=>Object(n.includes)([36,37,38,39],e),r=e=>Object(n.includes)([25],e),o=e=>Object(n.includes)([22,23],e)},function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.FULL=0]="FULL",e[e.SMART=1]="SMART",e[e.NO_STREAM=2]="NO_STREAM"}(n||(n={}))},function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));var n=i(2);const s=e=>e,r=e=>Object(n.isString)(e)},function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return y})),i.d(t,"e",(function(){return w})),i.d(t,"d",(function(){return E})),i.d(t,"f",(function(){return O})),i.d(t,"a",(function(){return C}));var n=i(11),s=i(50),r=i(4),o=i(2),a=i(1),d=i(43);let c,l=0;const h=new n.a("helper.IABSafeFrame");let u,p=[];const g=[],m=[],f=[];let b,v,A;function y(){let e=function(){if(!Object(r.isIABSafeFrame)())return"not in IABSafeFrame context";if(A=Object(r.getIABSafeFrameWindow)(),Object(o.isUndefined)(A))return"IABSafeFrame window not found";if(!A.$sf.ext.geom)return"window.$sf.ext.geom not present";if(!(c=A.$sf.ext.geom()))return"window.$sf.ext.geom() return falsy value";if(!A.$sf.ext.supports)return"window.$sf.ext.supports not present"}();if(e)return h.error("init","failed",e),d.a.error("SF "+e),e;b=new s.a;const t=c.self.w;return A.$sf.ext.register(t||A.innerWidth,1,(e,t)=>function(e,t){switch(h.debug("event received",e,t),e){case"expanded":case"collapsed":case"failed":u&&u.callback&&u.callback(e),u=null,I();break;case"geom-update":"focus-update"===(null==t?void 0:t.cmd)?Object(a.forEach)(m,e=>e(t)):Object(a.forEach)(g,e=>e(t));break;case"focus-change":Object(a.forEach)(m,e=>e(t));break;case"cmpReturn":Object(a.forEach)(f,e=>e(t))}}(e,t)),h.debug("init - register (width-innerWidth-geom)",t,A.innerWidth,c),w(()=>c=A.$sf.ext.geom()),e}function w(e){const t=g.push(e);return()=>g[t-1]=()=>{}}function E(e=(()=>{})){h.debug("initSlot"),0===A.innerWidth?(h.debug("initSlot - window.innerWidth=0 so wait for resize"),T(e)):1===c.self.w&&1===c.self.h?function(e){if(A.$sf.ext.supports()["exp-push"]){h.debug("initSlot - 1x1 detected - need to wait to get the slot width available");const t=()=>{h.debug("initSlot - 1x1 detected - expand available - get width"),I({name:"initial expand",action:()=>A.$sf.ext.expand({r:c.exp.r,push:!0}),callback:t=>{const i="expanded"===t;l=i?1:0,i?(v=c.exp.r,h.debug("initSlot - 1x1 detected - initial expand done - width",v),e()):(h.error("initSlot - 1x1 detected - initial expand refused"),T(e))}})};if(c.exp.r)t();else{const e=w(()=>{c.exp.r&&(e(),t())})}}else h.error("initSlot - 1x1 detected - but exp-push not supported"),T(e)}(e):e()}function O(e,t=(()=>{})){let i=e=>I({name:"open "+e,action:()=>A.$sf.ext.expand({b:e,r:v,push:!0}),callback:e=>{let i="expanded"===e;l=i?2:0,t(i)}}),n=c.self.h,s=e-n;2!==l&&s>0?A.$sf.ext.supports()["exp-push"]?s<=c.exp.b?(h.debug("open (askedHeight - currentHeight - allowed - requiredHeight)",e,n,c.exp.b,s),1===l?(h.debug("open - slot already open by init - close it before"),C(()=>{let e=Math.min(Math.floor(A.$sf.ext.geom().exp.b),s);i(e)})):i(s)):(h.debug("open not allowed (askedHeight - currentHeight - allowed - requiredHeight)",e,n,c.exp.b,s),t(!1)):(h.error("open failed - exp-push not supported"),T(()=>t(!0)),t(!1)):(h.debug("already open (askedHeight - currentHeight - requiredHeight)",e,n,s),t(!0))}function C(e=(()=>{})){0!==l?(h.debug("close"),I({name:"close",action:()=>A.$sf.ext.collapse(),callback:()=>e(!0)}),l=0):e(!0)}function I(e){e&&(h.debug("processRequest add to list",e.name),p.push(e)),!u&&p.length&&(u=p.shift(),h.debug("processRequest - process",u.name),u.action())}function S(e,t){return e>=10&&t>=10}function T(e){h.debug("wait for auto expand");const t=e=>Object(a.forEach)(e,e=>e()),i=(t,i)=>{h.debug(`slot has auto expanded with w: ${t}, h: ${i}`),l=2,e()};if(S(window.innerWidth,window.innerHeight))i(window.innerWidth,window.innerHeight);else{const e=w(()=>{S(c.self.w,c.self.h)&&(t([e,n]),i(c.self.w,c.self.h))}),n=()=>b.remove("resize");b.add("resize",A,()=>{S(window.innerWidth,window.innerHeight)&&(t([e,n]),i(window.innerWidth,window.innerHeight))})}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"d",(function(){return b})),i.d(t,"c",(function(){return w}));var n=i(32),s=i(47),r=i(1),o=i(27),a=i(11),d=i(9),c=i(2),l=i(37),h=i(0),u=i(52),p=i(55);const g=new a.a("tracker-v2 formatTracker"),m=(e,{trackedEvents:t})=>!Object(r.some)(t,t=>t.event===e),f=(e,t)=>i=>{const n=(i,n)=>Object(d.b)(p.formatEventToMirroredEvent[n],n=>b(n,n,t,e,i,w(n,e))),s=Object(d.b)(i.trackedEvents,r.cArray.map(Object(c.prop)("event")));return Object(d.b)(s,Object(d.a)(r.cArray.filter(p.matchesAdAvailableErrorVast),r.cArray.foldLeft(i,(i,n)=>Object(d.b)(n,p.parseFormatErrorAction,l.a.fstMap(e=>p.formatEventToMirroredEvent[e]),p.createFormatErrorAction,n=>b(n,p.FormatEvent.NoAdVastError,t,e,i,w(n,e))))),e=>Object(d.b)(s,r.cArray.filter(Object(r.isMemberOf)(p.nonErrorFormatEventsWithMirroringEvent)),r.cArray.foldLeft(e,n)))},b=(e,t,i,s,a,l,m=c.identity)=>{const{trackStrategy:b,baseUrl:v,formatVersion:A,referer:y,timestamp:w=Object(o.a)()}=s;if(!i(e,a))return e!==p.FormatEvent.SlotVisibilityTiny&&e!==p.FormatEvent.SlotVisibilityInvalidDom&&e!==p.FormatEvent.SlotVisibilityHiddenDisplay&&e!==p.FormatEvent.SlotVisibilityHiddenOverflow&&g.debug(`Could not track format event ${e}, tracked events: `,a.trackedEvents),a;const E=["gdpr_status","gdpr_consent","gdpr_reason","gdpr_api_version","gdpr_cmp_id","rpm_reason"],O=({queryParameters:e,businessIds:{insertionId:t,connectionId:i}})=>Object.assign(Object.assign({},Object(u.b)(e,e=>Object(r.includes)(n.c,e)&&!Object(r.includes)(E,e))),{gid:t,sid:i});return b([l]),Object(d.b)(Object.assign(Object.assign({},a),{trackedEvents:[...a.trackedEvents,{event:e,time:w,trackingUrl:l}]}),m,e=>t===p.FormatEvent.AdCall?f({trackStrategy:b,baseUrl:v,formatVersion:A,referer:y,timestamp:w,queryParameters:O(s),trackingUrl:h.a},i)(e):t===p.FormatEvent.AdAvailableSuccess?f(s,i)(e):e)},v=(e,{trackStrategy:t,timestamp:i=Object(o.a)()})=>n=>Object(r.isEmpty)(n.customTrackings)?n:Object(d.b)(n.customTrackings,r.cArray.filter(Object(d.a)(Object(c.prop)("event"),Object(c.equals)(e))),r.cArray.flatMap(Object(c.prop)("trackingUrls")),Object(c.tap)(t),t=>Object.assign(Object.assign({},n),{trackedEvents:[...n.trackedEvents,...Object(r.map)(t,t=>({event:e,time:i,trackingUrl:t}))]})),A=(e,t)=>()=>{const{baseUrl:i,formatVersion:n,referer:r,timestamp:a=Object(o.a)(),queryParameters:d}=t;return Object(s.e)(Object(s.b)(i,Object.assign(Object.assign({},d),{action:e,fv:n,ts:a.toString(),referer:r})))},y=e=>t=>{const{formatVersion:i,referer:n,timestamp:r=Object(o.a)()}=e;return Object(s.e)({baseUrl:t,queryParameters:{fv:i,ts:r.toString(),referer:n}})},w=(e,t)=>t.trackingUrl.match({some:y(t),none:A(e,t)}),E={track:(e,t,i)=>b(e,e,E.canTrack,t,i,w(e,t),v(e,t)),trackFormatError:(e,t,i)=>Object(d.b)(Object(p.createFormatErrorAction)([p.FormatEvent.AdAvailableErrorVast,e]),e=>b(e,p.FormatEvent.AdAvailableErrorVast,E.canTrack,t,i,w(e,t),v(e,t))),canTrack:m};t.b=E},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i(1);function n(e,t){if(t)for(var i in t)e=e.replace(new RegExp("{{"+i+"}}","g"),t[i]);return e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"e",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return a}));const n=new RegExp("/videoplayback/id/(\\w+)/itag/"),s={xs:{className:"xs-screen",size:480},sm:{className:"sm-screen",size:640}},r=0,o=2147483647,a=[125,128]},,,function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return d}));var n=i(0),s=i(4),r=i(91),o=i(50);const a=(e,t,i)=>{const a={eventListenerManager:n.a,unlistenAmp:n.a};return Object(s.isIABSafeFrame)()?r.e(()=>e(new Event("touchmove"))):Object(s.isAmp)()?a.unlistenAmp=n.b.fromNullable(i.observeIntersection(t=>e(new Event("touchmove")))):(a.eventListenerManager=n.b.fromNullable(new o.a),a.eventListenerManager.forEach(i=>i.add("scroll",t,t=>e(t))),a.eventListenerManager.forEach(i=>i.addMultiple(["touchstart","touchmove","touchend"],t,t=>e(t)))),a},d=e=>{e.unlistenAmp.forEach(e=>e()),e.eventListenerManager.forEach(e=>e.removeAll())}},function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i(101),s=i(102),r=i(106),o=i(42),a=i(11),d=i(17),c=i(7),l=i(4),h=i(38),u=i(89),p=i(8),g=i(14);class m extends n.a{constructor(e,t,i,n={}){super(e,t,i),this.parameters=n,this.defaultVolume=0,this.logger=new a.a("canvas.player.CanvasPlayer"),this.audioSyncDiff=.5,this.waitForPlay=!1,this.logger.debug("constructor()",e,t,i,n.assetsPath),this.parameters.assetsPath&&this.parameters.assetsPath.match(/http:|https:/)||(this.logger.warn("assetsPath replace with default (relative path not allow)"),this.parameters.assetsPath=window.location.protocol+"//a.teads.tv/media/player")}load(e,t=!1,i=u.a.NO_STREAM){this.logger.debug("load()",e,t,i),e?(this.url=Object(g.s)(e),this.dispatch(c.a.LOAD_START),this.getMeta(this.url,e=>{var n=this.url.split("/");n.pop(),this.video=new o.b(n.join("/"),e,i,this),this.audio=new s.a(n.join("/"),e,i,this),this.buffer=new r.a(this),t&&this.listen(c.a.CAN_PLAY,()=>this.play()),this.buffer.show(),this.listen(c.a.CAN_PLAY,()=>this.buffer.hide()),this.listen(c.a.ENDED,()=>this.audio.release()),this.video.listen(c.a.STALLED,()=>this.dispatch(c.a.STALLED)),this.video.listen(c.a.STALLED,()=>this.pause(!0)),this.video.listen(c.a.RESUME_AFTER_STALLED,()=>this.dispatch(c.a.RESUME_AFTER_STALLED)),this.video.listen(c.a.RESUME_AFTER_STALLED,()=>this.play()),this.video.listen(c.a.TIME_UPDATE,()=>this.onVideoProgress()),this.video.listen(c.a.CAN_PLAY,()=>this.canPlayAll()),this.audio.listen(c.a.CAN_PLAY,()=>this.canPlayAll()),this.video.listen(c.a.ENDED,()=>this.dispatch(c.a.ENDED)),this.video.listen(c.a.LOADED,()=>this.dispatch(c.a.LOADED)),this.video.listen(c.a.ERROR,()=>this.dispatch(c.a.ERROR,{error:"An error occured with the video."}))})):this.video.state===p.a.PLAYING&&this.pause()}play(){this.logger.info("play()"),this.canplay()?(this.waitForPlay=!1,this.video.play(),this.audio.play(),this.dispatch(c.a.PLAY),this.dispatch(c.a.PLAYING)):this.waitForPlay||(this.waitForPlay=!0,this.dispatch(c.a.STALLED),this.dispatch(c.a.PAUSE),this.listen(c.a.CAN_PLAY,()=>{this.dispatch(c.a.RESUME_AFTER_STALLED),this.play()}))}pause(e=!1){this.video&&this.audio&&this.video.state!==p.a.ENDED?(this.video.pause(),this.audio.pause(),this.dispatch(c.a.PAUSE),this.logger.info("pause()"),e||this.video.state!==p.a.STALLED||(this.video.cleanStallTimeout(),this.buffer.hide())):(this.muteEvent(c.a.CAN_PLAY),this.waitForPlay=!1)}canplay(){return!(!this.video||!this.audio)&&(this.video.canplay()&&this.audio.canplay())}get src(){return this.url}set src(e){this.load(e,!1,u.a.FULL)}get currentTime(){return this.video?this.video.getCurrentTime():0}set currentTime(e){this.video&&(this.logger.info("set currentTime",e),this.dispatch(c.a.SEEKING),this.video.setCurrentTime(e)&&(this.audio.currentTime=e),this.dispatch(c.a.SEEKED))}get duration(){return this.video&&this.audio?this.video.duration||this.audio.duration:0}get volume(){return this.audio?this.audio.volume:0}set volume(e){if(this.logger.debug("set volume",e),this.audio){this.audio.volume=e;this.audio.canplay()&&this.video.state===p.a.PLAYING&&(()=>{this.audio.play(this.currentTime)})(),this.dispatch(c.a.VOLUME_CHANGE,{value:e})}else this.defaultVolume=e}onVideoProgress(){if(this.audio.api&&this.audio.playing()){var e=this.audio.currentTime-this.currentTime,t=Math.abs(e);t>=this.audioSyncDiff&&(e>0||this.video.meta.tv?this.video.setCurrentTime(this.audio.currentTime)||this.video.setCurrentTime(this.currentTime+this.audioSyncDiff):this.audio.currentTime=this.currentTime,this.logger.debug("sync audio (diff/audioTime)",t,this.audio.currentTime),this.dispatch(c.a.AUDIO_SYNC,{value:t}))}this.dispatch(c.a.TIME_UPDATE)}canPlayAll(){this.canplay()&&(this.dispatch(c.a.CAN_PLAY),this.dispatch(c.a.LOADED_METADATA))}getMeta(e,t){var i=Object(h.a)();i.open("GET",e.replace(/(\.mpg|\.mpeg|\.tv)(?!\/)/gi,".meta?v2"),!0),i.responseType="json",i.addEventListener("load",e=>{if(i.response){var n="string"==typeof i.response?JSON.parse(i.response):i.response;!n.tv&&(Object(l.isChromeIos)()||Object(l.isUIWebview)()||Object(l.isFacebookWebview)()||Object(l.isIpad)())?this.dispatch(c.a.ERROR,{error:"The metadata are missing."}):t(n)}else this.dispatch(c.a.ERROR,{error:"No response from the HTTPRequest, did the file exist?"})}),i.addEventListener("error",e=>{this.dispatch(c.a.ERROR,{error:"An error occured with the HTTPRequest."}),Object(d.a)(this.logger.error,this.logger)}),i.send()}}},function(e,t,i){"use strict";i.r(t),i.d(t,"toUuid",(function(){return a})),i.d(t,"bytesToUuid",(function(){return c})),i.d(t,"getUuidFromBlobUrl",(function(){return l})),i.d(t,"generateUuid",(function(){return h})),i.d(t,"getUuid",(function(){return u}));var n=i(39),s=i(0),r=i(6),o=i(83);const a=e=>e,d=[];for(let e=0;e<256;++e)d[e]=(e+256).toString(16).slice(1);function c(e,t=0){let i=t;return a([d[e[i++]],d[e[i++]],d[e[i++]],d[e[i++]],"-",d[e[i++]],d[e[i++]],"-",d[e[i++]],d[e[i++]],"-",d[e[i++]],d[e[i++]],"-",d[e[i++]],d[e[i++]],d[e[i++]],d[e[i++]],d[e[i++]],d[e[i++]]].join(""))}function l(e){const t=e.match(/blob:(.*)/),i=t?t[1]:e;return a(i.substring(i.lastIndexOf("/")+1).toLowerCase())}function h(e,t=window){return e.flatMap(e=>{const i=new t.Blob,n=e.createObjectURL(i);return e.revokeObjectURL(n),s.b.fromNullable(n)}).map(l).getOrElse(()=>c(Object(o.getRandomBytes)(16,t)))}function u(){return r.a.tryCatch(()=>{const e=Object(n.a)()?Object(n.c)():s.a;return[h(e),h(e)]}).flatMap(([e,t])=>e!==t?Object(r.e)(e):Object(r.b)(new Error("Same auctid generated twice")))}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(70),s=i(28),r=i(7),o=i(23),a=i(11),d=i(0);const c=new a.a("Canvas");class l extends s.a{constructor(e,t,i){super(),this.container=e,this.cWidth=t,this.cHeight=i,this.totalPrintingTime=0,this.totalPrintedFrame=0,this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.canvas.style.setProperty("background","#000"),this.canvasContext=this.canvas.getContext("2d"),e.appendChild(this.canvas),this.initWebGL()}get width(){return this.cWidth}set width(e){this.cWidth=e,this.resize()}get height(){return this.cHeight}set height(e){this.cHeight=e,this.resize()}get videoHeight(){return this._videoHeight}set videoHeight(e){this._videoHeight=e}get videoWidth(){return this._videoWidth}set videoWidth(e){this._videoWidth=e}get parentNode(){return this.html5video?this.html5video.parentNode:this.canvas.parentNode}get style(){return this.html5video?this.html5video.style:this.canvas.style}useCustomDisplay(e){this.html5video=e,d.b.fromNullable(this.canvas.parentNode).forEach(t=>t.replaceChild(e,this.canvas)),this.resize()}resize(e,t){d.b.fromNullable(this.html5video).match({some:()=>this.resizeHtml5(e,t),none:()=>this.resizeCanvas(e,t)}),this.dispatch(r.a.RESIZE,{width:this.width,height:this.height})}resizeCanvas(e,t){e&&(this.canvas.width=this.decoderWidth=e),t&&(this.canvas.height=this.decoderHeight=t);let i=this.cWidth/this.canvas.width,n=this.cHeight/this.canvas.height,s=parseInt(Math.max((this.cHeight-this.canvas.height*i)/2,0).toFixed(2),10),r=parseInt(Math.max((this.cWidth-this.canvas.width*n)/2,0).toFixed(2),10),a=Math.min(i,n);Object(o.applyVendorProperties)(this.canvas,"transformOrigin","0 0"),Object(o.applyVendorProperties)(this.canvas,"transform","translateX("+r+"px) translateY("+s+"px) scale("+a+")"),e&&t&&(this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,e,t)):this.canvasContext&&(this.currentRGBA=this.canvasContext.getImageData(0,0,e,t),Object(o.fillArray)(this.currentRGBA.data,255)))}resizeHtml5(e,t){this.html5video.style.setProperty("width",this.width+"px"),this.html5video.style.setProperty("height",this.height+"px")}renderFrame(e){var t=Object(o.now)();this.gl?this.renderFrameGL(e):this.renderFrame2D(e),this.totalPrintingTime+=Object(o.now)()-t,this.totalPrintedFrame++}renderHtmlImageElement(e){var t=Object(o.now)();this.canvasContext&&this.canvasContext.drawImage(e,0,0),this.totalPrintingTime+=Object(o.now)()-t,this.totalPrintedFrame++}averagePrintingTime(){return this.totalPrintingTime/this.totalPrintedFrame}initWebGL(){try{this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(e){return c.error(`Unable to get a WebGL context: "${e}"`),!1}if(!this.gl)return!1;var e=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),this.gl.STATIC_DRAW),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.compileShader(this.gl.VERTEX_SHADER,n.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.program,this.compileShader(this.gl.FRAGMENT_SHADER,n.SHADER_FRAGMENT_YCBCRTORGBA)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error(this.gl.getProgramInfoLog(this.program));this.gl.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var t=this.gl.getAttribLocation(this.program,"vertex");return this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0),this.loadingProgram=this.gl.createProgram(),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.VERTEX_SHADER,n.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.FRAGMENT_SHADER,n.SHADER_FRAGMENT_LOADING)),this.gl.linkProgram(this.loadingProgram),this.gl.useProgram(this.loadingProgram),t=this.gl.getAttribLocation(this.loadingProgram,"vertex"),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0),!0}renderFrameGL(e){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.YTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.codedWidth,this.canvas.height,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e.currentY),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CBTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e.currentCr),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CRTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e.currentCb),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}compileShader(e,t){var i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw new Error(this.gl.getShaderInfoLog(i));return i}createTexture(e,t){var i=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),e),i}YCbCrToRGBA(e){for(var t,i,n,s,r,o=e.currentY,a=e.currentCb,d=e.currentCr,c=this.currentRGBA.data,l=0,h=e.codedWidth,u=e.codedWidth+(e.codedWidth-this.decoderWidth),p=0,g=e.halfWidth-(this.decoderWidth>>1),m=0,f=4*this.decoderWidth,b=4*this.decoderWidth,v=this.decoderWidth>>1,A=this.decoderHeight>>1,y=0;y<A;y++){for(var w=0;w<v;w++){t=a[p],i=d[p],p++,n=i+(103*i>>8)-179,s=(88*t>>8)-44+(183*i>>8)-91,r=t+(198*t>>8)-227;var E=o[l++],O=o[l++];c[m]=E+n,c[m+1]=E-s,c[m+2]=E+r,c[m+4]=O+n,c[m+5]=O-s,c[m+6]=O+r,m+=8;var C=o[h++],I=o[h++];c[f]=C+n,c[f+1]=C-s,c[f+2]=C+r,c[f+4]=I+n,c[f+5]=I-s,c[f+6]=I+r,f+=8}l+=u,h+=u,m+=b,f+=b,p+=g}}renderFrame2D(e){this.YCbCrToRGBA(e),this.canvasContext&&this.canvasContext.putImageData(this.currentRGBA,0,0)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(28),s=i(103),r=i(105),o=i(7),a=i(4),d=i(2),c=i(18);class l extends n.a{constructor(e,t,i,n){super(),this.baseUrl=e,this.meta=t,this.stream=i,this.player=n,t.audio.length&&this.init()}authorizeAudio(e){this.api?this.api.authorizeAudio(e):e()}play(e=0){this.api&&this.api.play(e)}pause(){this.api&&this.api.pause()}get duration(){return this.api?this.api.duration:0}set currentTime(e){this.api&&(this.api.currentTime=e)}get currentTime(){return this.api?this.api.currentTime:0}get volume(){return this.api?this.api.volume:0}set volume(e){this.api&&(this.api.volume=e)}get authorized(){return!this.api||this.api.authorized}canplay(){return!this.api||this.api.canplay()}playing(){return!!this.api&&this.api.playing()}release(){this.api&&this.api.release()}init(){(Object(a.isAndroid)()||Object(c.a)(Object(a.getIosVersion)(),"9.1")&&this.meta.infos.audio_size<4e5)&&Object(d.getAudioContext)()?this.api=new s.a(this.baseUrl,this.meta,this.stream,this.player.defaultVolume):this.api=new r.a(this.baseUrl,this.meta,this.player.defaultVolume),this.api.listen(o.a.CAN_PLAY,()=>this.dispatch(o.a.CAN_PLAY))}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(4),s=i(17),r=i(11),o=i(2),a=i(28),d=i(7),c=i(104),l=i(8);class h extends a.a{constructor(e,t,i,a=0){super(),this.baseUrl=e,this.meta=t,this.stream=i,this.aVolume=a,this.estimatedDuration=0,this.iosReady=!1,this.logger=new r.a("canvas.player.components.Audio"),this.file=new c.a(this.baseUrl,this.meta.audio,this.stream);const h=Object(o.getAudioContext)();this.context=new h,this.file.listen(d.a.LOADED_DATA,Object(s.a)(this.oninit,this)),this.file.listen(d.a.PROGRESS,Object(s.a)(this.onloadprogress,this)),this.file.listen(d.a.LOADED,Object(s.a)(this.onload,this)),this.file.listen(d.a.CAN_PLAY,Object(s.a)(this.oncanplay,this)),this.file.state=l.a.INIT,Object(n.isIos)()&&(this.aVolume=0),this.iosReady=!Object(n.getIosVersion)()}static decodeAudioData(e,t,i,n){e.decodeAudioData(t.slice(0,t.byteLength),i,n)}authorizeAudio(e=(()=>{})){if(!this.iosReady){const t=Object(o.getAudioContext)(),i=this.context.createBuffer(1,1,44100),n=this.context.createBufferSource();n.buffer=i,n.connect(this.context.destination),n.start(0),n.disconnect(),this.context.close&&this.context.close(),this.context=new t,this.iosReady=!0,e()}}play(e=0){if(this.file.state!==l.a.PLAYING&&this.volume&&this.iosReady){if(!this.buffer)return void setTimeout(()=>this.play(e+.05),50);this.resetAudio(),this.source&&(this.noteOnAt&&!e?(this.source.start(0,this.noteOnAt/1e3),this.noteOnAt=Date.now()-this.noteOnAt):(this.noteOnAt=Date.now()-1e3*e,this.source.start(0,e))),this.file.state=l.a.PLAYING}}pause(){this.file.state!==l.a.PAUSED&&this.source&&(this.noteOnAt=Date.now()-this.noteOnAt,this.source.stop(0),this.file.state!==l.a.STALLED&&(this.file.state=l.a.PAUSED))}canplay(){return this.file.canplay()}playing(){return this.file.state===l.a.PLAYING}release(){this.context.close&&this.context.close().then(()=>{this.buffer=null,this.gainNode&&this.gainNode.disconnect&&(this.gainNode.disconnect(),this.gainNode=null),this.source&&this.source.disconnect&&(this.source.disconnect(),this.source=null)}),this.file.state=l.a.ENDED}get duration(){return this.estimatedDuration}set currentTime(e){this.file.state===l.a.PLAYING&&(this.pause(),this.noteOnAt=1e3*e,this.play())}get currentTime(){return(this.file.state===l.a.PLAYING?Date.now()-this.noteOnAt:this.noteOnAt)/1e3}get volume(){return this.aVolume}set volume(e){this.aVolume=e,this.gainNode&&(this.gainNode.gain.value=e)}get authorized(){return this.iosReady}oninit(e){this.data=e,h.decodeAudioData(this.context,e,e=>{const t=Math.ceil(this.meta.infos.audio_size/this.meta.infos.chunk_size)*e.length;this.estimatedDuration=t/e.sampleRate,this.buffer=this.context.createBuffer(e.numberOfChannels,t,e.sampleRate),this.setToMainBuffer(e)},Object(s.a)(this.logger.error,this.logger))}onloadprogress(e){e&&(this.appendFileToData(e),this.decodeData())}onload(){this.source&&this.source.buffer?this.estimatedDuration=this.source.buffer.duration:setTimeout(()=>this.onload(),50)}appendFileToData(e){const t=new Uint8Array(this.data.byteLength+e.byteLength);t.set(new Uint8Array(this.data),0),t.set(new Uint8Array(e),this.data.byteLength),this.data=t.buffer.slice(0,t.buffer.byteLength)}decodeData(){h.decodeAudioData(this.context,this.data,e=>{this.setToMainBuffer(e)},Object(s.a)(this.logger.error,this.logger))}setToMainBuffer(e){if(this.buffer)for(let t=0;t<e.numberOfChannels;t++){this.buffer.getChannelData(t).set(e.getChannelData(t),0)}}oncanplay(){this.file.state=l.a.CAN_PLAY,this.dispatch(d.a.CAN_PLAY)}resetAudio(){if(this.source)try{this.source.stop(0)}catch(e){this.logger.debug("Error when resetting audio",e)}this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.source&&(this.source.buffer=this.buffer,this.gainNode&&this.source.connect(this.gainNode)),this.gainNode&&this.gainNode.connect(this.context.destination),this.volume=this.aVolume}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(28),s=i(8),r=i(11),o=i(17),a=i(7),d=i(38);class c extends n.a{constructor(e,t,i){super(),this.baseUrl=e,this.chunkUrls=t,this.streamType=i,this.chunkLoaded=0,this.chunkLength=0,this.loggerF=new r.a("canvas.player.components.File"),this.chunkNumStart=1,this.chunkNumCanPlay=3,this.chunkLength=this.chunkUrls.length,this.streamLoad()}canplay(){return this.state===s.a.CAN_PLAY||this.state===s.a.PLAYING||this.state===s.a.PAUSED||this.state===s.a.LOADED||this.state===s.a.ENDED}streamLoad(){const e=this.baseUrl+"/"+this.chunkUrls.shift(),t=Object(d.a)();t.open("GET",e,!0),t.responseType="arraybuffer",t.addEventListener("load",e=>{this.chunkLoaded++,this.chunkLoaded===this.chunkNumStart?this.dispatch(a.a.LOADED_DATA,t.response):this.dispatch(a.a.PROGRESS,t.response),(this.chunkLoaded===this.chunkNumCanPlay||this.chunkLength<this.chunkNumCanPlay)&&this.dispatch(a.a.CAN_PLAY),this.chunkLoaded===this.chunkLength&&this.dispatch(a.a.LOADED),this.chunkUrls.length&&this.streamLoad()}),t.addEventListener("error",Object(o.a)(this.loggerF.error,this.loggerF)),t.send()}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(4),s=i(28),r=i(8),o=i(7);class a extends s.a{constructor(e,t,i=0){super(),this.baseUrl=e,this.meta=t,this.fakeVolume=i,this.touchOk=!1,this.node=document.createElement("audio"),this.node.src=this.baseUrl+"/"+this.meta.audio[0].replace(/\.mp3\.\w\w\w/gi,".mp3"),this.node.preload="auto",this.dispatch(o.a.CAN_PLAY),n.isIos()&&(this.fakeVolume=0)}authorizeAudio(e=(()=>{})){(!this.touchOk||this.node.readyState<=2)&&(this.touchOk=!0,this.node.play(),this.node.pause(),e())}play(e=0){0!==this.fakeVolume&&this.state!==r.a.PLAYING&&(this.node.readyState<=2?setTimeout(()=>this.play(e+.1),100):(e&&(this.currentTime=e),this.node.play(),this.state=r.a.PLAYING))}pause(){this.node.pause(),this.state=r.a.PAUSED}get duration(){return this.node.duration}set currentTime(e){this.node.currentTime=e}get currentTime(){return this.node.currentTime}get volume(){return this.fakeVolume}set volume(e){0===e&&this.pause(),this.fakeVolume=e,this.node.volume=e}get authorized(){return this.touchOk&&this.node.readyState>=3}canplay(){return!0}playing(){return this.state===r.a.PLAYING}release(){}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(7),s=i(123),r=i.n(s);class o{constructor(e){this.player=e,this.initBufferDiv(),this.player.video.listen(n.a.STALLED,()=>this.show()),this.player.video.listen(n.a.RESUME_AFTER_STALLED,()=>this.hide()),this.player.video.listen(n.a.TIME_UPDATE,()=>this.hide()),this.player.listen(n.a.RESIZE,e=>this.resize(e))}show(){this.player.container.insertBefore(this.container,this.player.html5video||this.player.canvas||null)}hide(){this.container.parentNode&&this.player.container.removeChild(this.container)}resize(e){this.container.style.setProperty("top",e.height/2-this.container.offsetHeight+"px"),this.container.style.setProperty("left",e.width/2-this.container.offsetWidth/2+"px")}initBufferDiv(){var e=document.createElement("div");e.innerHTML=o.TEMPLATE,this.container=e.firstChild}}o.TEMPLATE=r.a},function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i(28),s=i(8),r=i(38),o=i(23),a=i(7),d=i(4),c=i(0),l=i(33),h=i(17),u=i(2);const p=2*"frame[xxxxxx]".length;class g extends n.a{constructor(e,t,i,n){super(),this.meta=t,this.player=n,this.videoFrames=[],this.headBuffer=0,this.head=0,this.frameWait=1e3/24,this.frameRate=24,this.frameCachedLimit=24,this.reading=!1,this.decodingTime=0,this.extractTime=0,this.extractCount=0,this.load(e+"/"+t.tv)}canplay(){return this.head+this.frameCachedLimit<=this.videoFrames.length}play(){this.state!==s.a.PLAYING&&(this.state=s.a.PLAYING,this.isTickTimerStarted()||this.initTickTimer())}pause(){this.state!==s.a.STALLED&&(this.state=s.a.PAUSED)}getCurrentTime(){return this.state===s.a.INIT?0:this.head/this.frameRate}setCurrentTime(e){const t=Math.ceil(e*this.frameRate);return!!this.videoFrames[t]&&(this.head=t,this.player.renderHtmlImageElement(this.videoFrames[this.head]),!0)}get duration(){return parseFloat(this.meta.infos.duration)}get averageDecodingTime(){return this.decodingTime/this.videoFrames.length}get averageExtractTime(){return this.extractTime/this.extractCount}cleanStallTimeout(){}load(e){this.xhr=Object(r.a)(),this.xhr.open("GET",e,!0),this.xhr.responseType="text",this.xhr.onreadystatechange=Object(h.a)(this.onStateChange,this),this.xhr.onload=Object(h.a)(this.onload,this),this.xhr.send()}onStateChange(){this.xhr.responseText&&this.xhr.readyState>=3&&!this.reading&&(this.slidingWindowSize=c.b.fromNullable(this.meta.infos.maxFrameSize).filter(u.isNumber).map(e=>e+p).getOrValue(10*this.meta.infos.averageFrameSize),this.readResponseRecursive())}readResponseRecursive(){if(this.reading){const e=Object(o.now)(),t=this.xhr.responseText.substr(this.headBuffer,this.slidingWindowSize),i=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)frame\\["+(this.videoFrames.length+1)+"\\]").exec(t);if(this.extractTime+=Object(o.now)()-e,this.extractCount++,i)this.headBuffer+=7+this.videoFrames.length.toString().length+i[2].length,this.extractFrame(i);else{if(this.loaded){const e=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)").exec(t);e&&(this.headBuffer+=7+this.videoFrames.length.toString().length+e[2].length,this.extractFrame(e))}this.headBuffer>=this.xhr.responseText.length&&(this.reading=!1,this.frameCachedLimit=0)}}else this.reading=!0,this.initTickTimer()}initTickTimer(){const e=()=>{this.reading&&this.readResponseRecursive(),this.state===s.a.PLAYING&&this.loopPlay()};try{this.timer=l.c(e,1,Object(d.isAmpInABox)()||Object(d.isAmp)()||Object(d.isFacebookWebview)())}catch(t){this.tickInterval=setInterval(e,1)}}stopTickTimer(){this.timer?(this.timer.clear(),this.timer=null):this.tickInterval&&(clearInterval(this.tickInterval),this.tickInterval=null)}onload(){this.loaded=!0,this.dispatch(a.a.LOADED)}oninit(){this.state=s.a.INIT_VIDEO,this.player.resize(this.videoFrames[0].width,this.videoFrames[0].height),this.player.videoWidth=this.videoFrames[0].width,this.player.videoHeight=this.videoFrames[0].height,this.player.dispatch(a.a.LOADED_METADATA),this.player.dispatch(a.a.DURATION_CHANGE),this.player.dispatch(a.a.LOADED_DATA),this.player.renderHtmlImageElement(this.videoFrames[0])}oncanplay(){this.state===s.a.INIT_VIDEO&&(this.state=s.a.CAN_PLAY,this.dispatch(a.a.CAN_PLAY))}onstalled(){this.state=s.a.STALLED,this.dispatch(a.a.STALLED),this.listen(a.a.LOADED,()=>this.onresumestalled())}onresumestalled(){this.state===s.a.STALLED&&this.dispatch(a.a.RESUME_AFTER_STALLED)}ondecodeframe(){this.state!==s.a.ENDED&&this.dispatch(a.a.TIME_UPDATE)}onfinish(){this.state=s.a.ENDED,this.dispatch(a.a.ENDED)}extractFrame(e){const t=Object(o.now)(),i=this.videoFrames[e[1]]=new Image;i.src="data:image/jpeg;base64,"+e[2],i.onload=()=>this.decodingTime+=Object(o.now)()-t,1===this.videoFrames.length?i.onload=()=>this.oninit():this.videoFrames.length>=this.frameCachedLimit&&this.oncanplay(),this.head+this.frameCachedLimit<=this.videoFrames.length&&this.onresumestalled()}loopPlay(){if(Object(o.now)()<this.targetTime)return;this.head++;const e=this.targetTime?Math.max(-this.frameWait/2,this.targetTime-Object(o.now)()):0;this.head>=this.videoFrames.length-1?(this.loaded&&!this.reading?(this.stopTickTimer(),this.onfinish()):this.onstalled(),this.targetTime=0):this.state===s.a.PLAYING&&(this.targetTime=Object(o.now)()+this.frameWait+e),this.head&&this.videoFrames&&this.videoFrames[this.head]&&this.player.renderHtmlImageElement(this.videoFrames[this.head]),this.head%this.frameRate==0&&this.ondecodeframe()}isTickTimerStarted(){return!this.timer&&!this.tickInterval}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i(28),s=i(8),r=i(7),o=i(4),a=i(23),d=i(5),c=i(17),l=i(42),h=i(124),u=i.n(h);class p extends n.a{constructor(e,t,i,n){super(),this.meta=t,this.player=i,this.targetTime=0,this.frameWait=1e3/24,this.frameWaitS=1/24;let r=e+"/"+t.mp4;this.authorized=!!l.a[r]||!Object(o.isMobile)()&&!Object(o.isTablet)(),this.state=s.a.INIT_VIDEO,this.load(r),this.authorized||Object(d.addEventListener)("touchstart",n,Object(c.a)(this.authorize,this));var a=document.createElement("div");a.innerHTML=p.TEMPLATE,this.player.container.appendChild(a.firstChild)}canplay(){return!0}play(){this.state!==s.a.PLAYING&&this.authorized?(this.state=s.a.PLAYING,this.loopPlay()):this.authorized||this.listen(r.a.CAN_PLAY,()=>this.play())}pause(){this.state!==s.a.STALLED&&(this.state=s.a.PAUSED,this.timer&&(clearTimeout(this.timer),this.timer=null))}getCurrentTime(){return this.video.currentTime}setCurrentTime(e){return!!(this.video.currentTime=e)}get duration(){return parseFloat(this.meta.infos.duration)}get averageDecodingTime(){return 0}get averageExtractTime(){return 0}cleanStallTimeout(){}authorize(){this.authorized||(this.video.play(),this.video.pause(),this.authorized=!0,this.oncanplay())}load(e){let t=!!l.a[e];this.video=l.a[e]=l.a[e]||document.createElement("video"),this.video.muted=!0,t||(this.video.src=e),this.player.useCustomDisplay(this.video),this.video.onload=()=>this.onload(),this.video.ontimeupdate=()=>this.ondecodeframe(),this.video.onloadedmetadata=()=>{this.player.videoWidth=this.video.videoWidth,this.player.videoHeight=this.video.videoHeight,this.player.dispatch(r.a.LOADED_METADATA),this.player.dispatch(r.a.DURATION_CHANGE),this.player.dispatch(r.a.LOADED_DATA),this.oncanplay()}}onload(){this.dispatch(r.a.LOADED)}oncanplay(){this.state===s.a.INIT_VIDEO&&this.authorized&&(this.state=s.a.CAN_PLAY,this.dispatch(r.a.CAN_PLAY))}ondecodeframe(){this.state!==s.a.ENDED&&this.dispatch(r.a.TIME_UPDATE)}onfinish(){this.pause(),this.video.currentTime=0,this.state=s.a.ENDED,this.dispatch(r.a.ENDED)}loopPlay(){if(this.video.currentTime+this.frameWaitS>this.video.duration)return this.video.currentTime=this.video.duration,this.onfinish();this.video.currentTime+=this.frameWaitS;var e=this.targetTime?Math.max(-this.frameWait/2,this.targetTime-Object(a.now)()):0;this.state===s.a.PLAYING&&(this.targetTime=Object(a.now)()+this.frameWait+e,this.timer=window.setTimeout(()=>this.loopPlay(),this.frameWait+e))}}p.TEMPLATE=u.a},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(28),s=i(8),r=i(7),o=i(5),a=i(17),d=i(42);class c extends n.a{constructor(e,t,i,n){super(),this.meta=t,this.player=i;let r=e+"/"+t.mp4;this.authorized=!!d.a[r],this.state=s.a.INIT_VIDEO,this.load(r),this.authorized||Object(o.addEventListener)("touchstart",n,Object(a.a)(this.authorize,this))}canplay(){return!0}play(){this.state!==s.a.PLAYING&&(this.state=s.a.PLAYING,this.video.play())}pause(){this.state!==s.a.STALLED&&(this.state=s.a.PAUSED,this.video.pause())}getCurrentTime(){return this.video.currentTime}setCurrentTime(e){return!!(this.video.currentTime=e)}get duration(){return parseFloat(this.meta.infos.duration)}get averageDecodingTime(){return 0}get averageExtractTime(){return 0}cleanStallTimeout(){}authorize(){this.authorized||(this.authorized=!0,this.video.play(),this.state!==s.a.PLAYING&&this.video.pause(),this.oncanplay())}load(e){this.video=d.a[e]=d.a[e]||document.createElement("video"),this.video.setAttribute("webkit-playsinline","true"),this.video.src=e,this.video.onload=()=>this.onload(),this.video.onended=()=>this.onfinish(),this.video.ontimeupdate=()=>this.ondecodeframe(),this.video.onloadedmetadata=()=>{this.player.videoWidth=this.video.videoWidth,this.player.videoHeight=this.video.videoHeight,this.player.dispatch(r.a.LOADED_METADATA),this.player.dispatch(r.a.DURATION_CHANGE),this.player.dispatch(r.a.LOADED_DATA),this.oncanplay()},this.player.useCustomDisplay(this.video)}onload(){this.dispatch(r.a.LOADED)}oncanplay(){this.state===s.a.INIT_VIDEO&&this.authorized&&(this.state=s.a.CAN_PLAY,this.dispatch(r.a.CAN_PLAY))}ondecodeframe(){this.state!==s.a.ENDED&&this.dispatch(r.a.TIME_UPDATE)}onfinish(){this.state=s.a.ENDED,this.dispatch(r.a.ENDED)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(28),s=i(8),r=i(11),o=i(7),a=i(23),d=i(39),c=i(17),l=i(0);class h extends n.a{constructor(e,t,i,n){super(),this.meta=t,this.player=n,this.logger=new r.a("canvas.player.components.Video"),this.head=0,this.targetTime=0,this.decodeFinish=!1,this.benchFps=0,this.benchFpsRetained=0,this.benchFpsCount=0,this.fpsLimit=0,this.frameRate=24,this.frameStart=1,this.frameCachedLimit=24,this.videoFrames=[],this.frameWait=Math.floor(1e3/this.frameRate);const o=Object(d.b)('importScripts("'+this.player.parameters.assetsPath+'/teads-mpeg-decoder.min.js")');this.worker=Object(d.c)().map(i=>{const n=new Worker(i.createObjectURL(o));return n.onmessage=Object(c.a)(this.onmessage,this),n.postMessage(["init",e,t]),n}),this.state=s.a.INIT}canplay(){return this.state===s.a.CAN_PLAY||this.state===s.a.PLAYING||this.state===s.a.PAUSED||this.state===s.a.LOADED||this.state===s.a.ENDED}play(){this.state!==s.a.PLAYING&&(this.state=s.a.PLAYING,this.loopPlay())}pause(){this.state!==s.a.STALLED&&(this.state=s.a.PAUSED)}getCurrentTime(){return this.state===s.a.INIT?0:this.head/this.frameRate}setCurrentTime(e){var t=Math.ceil(e*this.frameRate);return!!this.videoFrames[t]&&(this.cleanFrame(this.head,t),this.head=t,!0)}get duration(){return this.decodeFinish?this.videoFrames.length/this.frameRate:parseFloat(this.meta.infos.duration)}cleanStallTimeout(){l.b.fromNullable(this.timeoutStalled).forEach(e=>{clearTimeout(e),this.timeoutStalled=null,this.state=s.a.PAUSED})}onload(){this.dispatch(o.a.LOADED),this.decodeFinish=!0}oninit(){this.benchFps=Object(a.now)(),this.state=s.a.INIT_VIDEO,this.renderFrame()}oncanplay(){this.state=s.a.CAN_PLAY,this.dispatch(o.a.CAN_PLAY)}onstalled(){this.state=s.a.STALLED,this.dispatch(o.a.STALLED),this.listen(o.a.LOADED,()=>this.onresumestalled())}onresumestalled(){this.state===s.a.STALLED&&(this.cleanStallTimeout(),this.dispatch(o.a.RESUME_AFTER_STALLED))}ondecodeframe(){this.state!==s.a.ENDED&&this.dispatch(o.a.TIME_UPDATE)}onfinish(){this.state=s.a.ENDED,this.dispatch(o.a.ENDED)}onmessage(e){switch(e.data[0]){case"frame":this.appendFrames(e.data),this.videoFrames.length===this.frameStart?this.oninit():this.videoFrames.length===this.frameCachedLimit&&this.oncanplay();break;case"initCanvas":this.player.resize(e.data[1],e.data[2]);break;case"finish":this.averageDecodingTime=e.data[1],this.onload();break;default:this.logger.debug(e.data)}}appendFrames(e){if(this.videoFrames.push({codedWidth:e[1],halfWidth:e[2],currentY:new Uint8Array(e[3]),currentCr:new Uint8Array(e[4]),currentCb:new Uint8Array(e[5])}),this.averageDecodingTime=e[6],this.benchFpsCount++,this.benchFpsCount===this.frameCachedLimit){this.benchFpsRetained=Object(a.now)()-this.benchFps;var t=Math.ceil(this.frameRate*this.benchFpsRetained/1e3);this.fpsLimit=Math.max(3,Math.min(this.frameCachedLimit,t+1))}this.state===s.a.STALLED&&this.head+this.frameCachedLimit<=this.videoFrames.length&&(this.averageDecodingTime<=1e3/this.frameRate?this.timeoutStalled||(this.logger.warn("We are stalled and have",this.frameCachedLimit,"in memory, but stalled for download, so wait",2*this.benchFpsRetained,"ms"),this.timeoutStalled=setTimeout(()=>this.onresumestalled(),2*this.benchFpsRetained),this.dispatch(o.a.BENCH_FPS,2*this.benchFpsRetained)):this.onresumestalled())}loopPlay(){this.head++;var e=this.targetTime?Math.max(-this.frameWait/2,Math.min(0,this.targetTime-Object(a.now)())):0;this.head>=this.videoFrames.length-1?(this.decodeFinish?this.onfinish():this.onstalled(),this.targetTime=0):this.state===s.a.PLAYING&&(this.targetTime=Object(a.now)()+this.frameWait,window.setTimeout(()=>this.loopPlay(),this.frameWait+e)),this.renderFrame(),this.head%this.frameRate==0&&this.ondecodeframe()}renderFrame(){this.videoFrames[this.head]&&(this.player.renderFrame(this.videoFrames[this.head]),this.videoFrames[this.head]=null,this.videoFrames.length<this.head+this.fpsLimit&&(this.benchFps=Object(a.now)(),this.benchFpsCount=0,this.worker.forEach(e=>e.postMessage(["resume"]))))}cleanFrame(e,t){for(var i=e;i<t;i++)this.videoFrames[i]=null}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));var n=i(58);const s=e=>Math.round(e/n.a),r=e=>e.height-s(e.width)},,function(e,t,i){"use strict";i.d(t,"e",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"d",(function(){return p})),i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return m}));var n=i(0),s=i(33),r=i(24),o=i(1),a=i(11),d=i(5),c=i(6);const l=new a.a("Format main");let h={};function u(){window.teads.instances=h={}}function p(){n.b.fromNullable(window.teads.instances).forEach(e=>h=e)}function g(){for(let e in r.a)if(r.a.hasOwnProperty(e)&&h[e]&&h[e].length)for(;h&&h[e]&&h[e].length;){const t=h[e].pop();n.b.fromNullable(t.getWigo()).forEach(e=>e.setStatus(!0,"Cleaned up")),t.close(4)}}function m(){l.warn("teads.cleanup()"),c.a.tryCatch(()=>{const e=Object(o.flatten)(Object(o.map)([".teads-inline-style","script.teads","iframe#teadsConsensu","#teadsusersync","#teads-format-css"],e=>Object(o.fromArrayLike)(document.querySelectorAll(e))));Object(o.forEach)(e,d.removeElementFromDOM),g(),delete window.teadsscript;Object(s.d)(()=>{for(const e in window.teads)window.teads.hasOwnProperty(e)&&!Object(o.includes)(["WIGO_DEBUG_KEY","FULL_LOGS"],e)&&delete window.teads[e]},3e3)}).tapLeft(e=>l.error("Error when using cleanup()",e))}},function(e,t,i){"use strict";i.d(t,"d",(function(){return P})),i.d(t,"c",(function(){return j})),i.d(t,"a",(function(){return L})),i.d(t,"b",(function(){return x}));var n=i(0),s=i(9),r=i(20),o=i(35),a=i(27),d=i(2),c=i(11),l=i(1);const h=[r.a.Progress,r.a.Click,r.a.Resume,r.a.Pause,r.a.Mute,r.a.Unmute,r.a.Expand,r.a.Collapse],u=(e,t,i)=>n=>0===n.customTrackings.length?n:Object(s.b)(n.customTrackings,l.cArray.filter(Object(s.a)(Object(d.prop)("event"),Object(d.equals)(e))),l.cArray.flatMap(Object(d.prop)("trackingUrls")),s=>s.length>0?i(e,()=>!0,s,t,n):n),p=(e,t,i)=>n=>0===n.customTrackings.length?n:Object(s.b)(n.customProgressTrackings,l.cArray.filter(Object(s.a)(Object(d.prop)("offset"),Object(d.equals)(e))),l.cArray.flatMap(Object(d.prop)("trackingUrls")),e=>e.length>0?i(r.a.Progress,()=>!0,e,t,n):n),g=(e,t,i,n)=>o=>1===e?o:Object(s.b)(Object(s.b)([...Array(e-1)],l.cArray.mapWithIndex((e,t)=>t+1)),Object(l.difference)(o.trackedProgressOffsets),l.cArray.map(e=>{var t,i;return[e,null!==(i=null===(t=Object(l.find)(o.progressTrackings,t=>t.offset===e))||void 0===t?void 0:t.trackingUrls)&&void 0!==i?i:[]]}),l.cArray.filter(([,e])=>e.length>0),l.cArray.foldLeft(o,(e,[s,o])=>n(r.a.Progress,(e,t)=>i(e,t)&&!Object(l.includes)(t.trackedProgressOffsets,s),o,t,e,e=>Object.assign(Object.assign({},e),{trackedProgressOffsets:[...e.trackedProgressOffsets,s]})))),m=new c.a("tracker-v2 thirdPartyVastTracker"),f=(e,t,i,n,s,r=d.identity)=>{const{trackStrategy:c,macros:u,timestamp:p=Object(a.a)()}=n;return t(e,s)?r(Object(l.reduce)(i,(t,i)=>{const n=Object(o.a)(u)(i);return c([n]),Object.assign(Object.assign({},t),{trackedEvents:[...t.trackedEvents,{event:e,time:p,trackingUrl:n}]})},s)):(m.debug(`Could not track third-party VAST event ${e}, tracked events: `,s.trackedEvents,"multiple-allowed events: ",h),s)},b={track:(e,t,i)=>{var n,r;return Object(s.b)(f(e,b.canTrack,null!==(r=null===(n=Object(l.find)(i.trackings,t=>t.event===e))||void 0===n?void 0:n.trackingUrls)&&void 0!==r?r:[],t,i),u(e,t,f))},trackProgress:(e,t,i)=>Object(s.b)(i,g(e,t,b.canTrack,f),i=>{var n,s;return f(r.a.Progress,(t,i)=>b.canTrack(t,i)&&!Object(l.includes)(i.trackedProgressOffsets,e),null!==(s=null===(n=Object(l.find)(i.progressTrackings,t=>t.offset===e))||void 0===n?void 0:n.trackingUrls)&&void 0!==s?s:[],t,i,t=>Object.assign(Object.assign({},t),{trackedProgressOffsets:[...t.trackedProgressOffsets,e]}))},p(e,t,f)),trackVastError:(e,t,i)=>{var n,a;const d=Object.assign(Object.assign({},t),{macros:[...t.macros,Object(o.k)("ErrorCode",e.toString())]});return Object(s.b)(f(r.a.Error,b.canTrack,null!==(a=null===(n=Object(l.find)(i.trackings,e=>e.event===r.a.Error))||void 0===n?void 0:n.trackingUrls)&&void 0!==a?a:[],d,i),u(r.a.Error,d,f))},canTrack:(e,{trackedEvents:t})=>!Object(l.some)(t,t=>t.event===e)||Object(l.isMemberOf)(h)(e)};var v=b,A=i(4),y=i(14),w=i(47);const E=new c.a("tracker-v2 teadsVastTracker"),O=e=>Object.assign(Object.assign({},e),{alreadyBilledAdvertiser:!0,trackBillable:!0}),C=e=>{const t=A.canAutoplay()?"apa":"apna",i=A.isCanvasUsed()?"apf":"apnf";return Object(w.h)(Object(y.a)(e,"plft",[t,i].join(",")))},I=(e,t,i,c,u,p=d.identity)=>{const{trackStrategy:g,formatVersion:m,referer:f,timestamp:b=Object(a.a)(),macros:v,slotType:A,creativeSize:I}=c;return t(e,u)?Object(s.b)(i,l.cArray.foldLeft(u,(t,i)=>{const[a,d]=(c=t,l=i,Object(y.m)(l,"revenue")&&Object(y.m)(l,"gid")?c.alreadyBilledAdvertiser&&l.indexOf("?dr=0")<0&&l.indexOf("&dr=0")<0?[c,Object(w.h)(l+"&dr=1")]:[O(c),l]:[c,l]);var c,l;const h=Object(s.a)(Object(o.a)(v),(e=>t=>Object(w.h)(Object(y.a)(t,"slot",encodeURIComponent(e))))(A),(e=>t=>Object(w.h)(Object(y.a)(t,"fv",encodeURIComponent(e))))(m),(u=t.studioCreativeId,e=>Object(s.b)(u,n.d.fold(()=>e,t=>Object(w.h)(Object(y.a)(e,"studio_cid",encodeURIComponent(t)))))),C,((e,t)=>i=>e===r.a.Click||e===r.a.Impression?t.match({some:e=>{const t=Object(y.a)(i,"hb_w",encodeURIComponent(e.width));return Object(w.h)(Object(y.a)(t,"hb_h",encodeURIComponent(e.height)))},none:()=>Object(w.h)(i)}):Object(w.h)(i))(e,I),(e=>t=>Object(w.h)(Object(y.a)(t,"referer",encodeURIComponent(e))))(f))(d);var u;return g([h]),Object.assign(Object.assign({},a),{trackedEvents:[...a.trackedEvents,{event:e,time:b,trackingUrl:h}]})}),p):(E.debug(`Could not track VAST event ${e}, tracked events: `,u.trackedEvents,"multiple-allowed events: ",h),u)},S={track:(e,t,i)=>{var n,r;return Object(s.b)(I(e,S.canTrack,null!==(r=null===(n=Object(l.find)(i.trackings,t=>t.event===e))||void 0===n?void 0:n.trackingUrls)&&void 0!==r?r:[],t,i),u(e,t,I))},trackProgress:(e,t,i)=>Object(s.b)(i,g(e,t,S.canTrack,I),i=>{var n,s;return I(r.a.Progress,(t,i)=>S.canTrack(t,i)&&!Object(l.includes)(i.trackedProgressOffsets,e),null!==(s=null===(n=Object(l.find)(i.progressTrackings,t=>t.offset===e))||void 0===n?void 0:n.trackingUrls)&&void 0!==s?s:[],t,i,t=>Object.assign(Object.assign({},t),{trackedProgressOffsets:[...t.trackedProgressOffsets,e]}))},p(e,t,I)),trackVastError:(e,t,i)=>{var n,a;const d=Object.assign(Object.assign({},t),{macros:[...t.macros,Object(o.k)("ErrorCode",e.toString())]});return Object(s.b)(I(r.a.Error,S.canTrack,Object(s.b)(null!==(a=null===(n=Object(l.find)(i.trackings,e=>e.event===r.a.Error))||void 0===n?void 0:n.trackingUrls)&&void 0!==a?a:[],l.cArray.map((c=t.errorCause,e=>c.match({some:t=>Object(w.h)(Object(y.a)(e,"error_cause",encodeURIComponent(t))),none:()=>e})))),d,i),u(r.a.Error,d,I));var c},canTrack:(e,{trackedEvents:t})=>(e===r.a.Pause?Object(l.some)(t,e=>e.event===r.a.Start):e!==r.a.Resume||Object(l.some)(t,e=>e.event===r.a.Pause))&&(!Object(l.some)(t,t=>t.event===e)||Object(l.isMemberOf)(h)(e))};var T=S;T.track,T.trackProgress,T.trackVastError,v.track,v.trackProgress,v.trackVastError;const k=e=>([t,i])=>[Object.assign(Object.assign({},t),{trackBillable:!1}),t.trackBillable?v.track(r.a.Billable,e,i):i],P=(e,t)=>(i,n)=>Object(s.b)([T.track(e,t,i),v.track(e,t,n)],k(t)),j=(e,t)=>(i,n)=>Object(s.b)([T.trackProgress(e,t,i),v.trackProgress(e,t,n)],k(t)),L=(e,t)=>(i,r)=>Object(s.b)([T.trackVastError(e,Object.assign(Object.assign({},t),{errorCause:n.a}),i),v.trackVastError(e,t,r)],k(t)),x=(e,t,i)=>(r,o)=>Object(s.b)([T.trackVastError(e,Object.assign(Object.assign({},i),{errorCause:n.b.of(t)}),r),v.trackVastError(e,i,o)],k(i))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return d}));var n=i(11),s=i(1);const r="teads-studio";function o(e){let t;return e&&e.extensions&&e.extensions.length>0&&s.forEach(e.extensions,e=>{e.type===r&&(t=d(e.content))}),t}function a(e){return!!o(e)}function d(e){try{return JSON.parse(e)}catch(e){new n.a("TeadsStudioExtension").error(r+" extension throw an exception",e)}}},function(e,t,i){"use strict";i.d(t,"e",(function(){return pi})),i.d(t,"a",(function(){return gi})),i.d(t,"b",(function(){return mi})),i.d(t,"c",(function(){return fi})),i.d(t,"d",(function(){return bi}));var n={};i.r(n),i.d(n,"TEMPLATE",(function(){return xt})),i.d(n,"expandTemplate",(function(){return Vt})),i.d(n,"inread",(function(){return Nt}));var s={};i.r(s),i.d(s,"Bench",(function(){return Zt})),i.d(s,"ClickThrough",(function(){return ti})),i.d(s,"Extensions",(function(){return ni})),i.d(s,"Responsive",(function(){return si})),i.d(s,"Tracker",(function(){return ai})),i.d(s,"AdChoices",(function(){return ci}));var r=i(63),o=i(1),a=i(0),d=i(9),c=i(11),l=i(2),h=i(30),u=i(44),p=i(4),g=i(5),m=i(90),f=i(50),b=i(10),v=i(18),A=i(13),y=i(33),w=i(14);class E{constructor(e,t,i){if(this.win=e,this.onVisible=t,this.onHidden=i,this.prefixes=["","webkit","ms","moz"],this.props=["VisibilityState","visibilitychange","Hidden"],this.isInitialState=!0,this.enabled=!0,this.isAmpVisible=!0,this.windows=[],E.logger.debug("init"),this.eventListenerManager=new f.a,p.isAmp()){E.logger.debug("Init AMP visibility plugin");let e=e=>{window.context&&(window.context.hidden&&this.isAmpVisible?(E.logger.debug("AMP visibility, window is hidden, call hidden callback"),this.isAmpVisible=!1,this.onHiddenCallback()):window.context.hidden||this.isAmpVisible||(E.logger.debug("AMP visibility, window is visible, call visibile callback"),this.isAmpVisible=!0,this.onVisibleCallback()))};this.eventListenerManager.add("amp:visibilitychange",window,e)}else if(p.isIABSafeFrame()){let e,t=!0;this.intervalIABSafeFrame=setInterval(()=>{e=this.isVisible(),e&&!t?(t=!0,this.onVisibleCallback()):!e&&t&&(t=!1,this.onHiddenCallback())},500)}else this.prefix=this.getPrefix(),this.addWindow(this.win),this.visibleWindow=this.win}static listenWindow(e,t,i){return new E(e,t,i)}destroy(){try{if(p.isAmp())return void this.eventListenerManager.remove("amp:visibilitychange");p.isIABSafeFrame()&&clearInterval(this.intervalIABSafeFrame),clearInterval(this.intervalFocus),this.eventListenerManager.removeAll(),o.forEach(this.windows,e=>{e.focus(),this.removeWindow(e,!1)}),E.logger.debug("destroy")}catch(e){E.logger.error("Visibility could not be fully destroyed.",e)}finally{this.disable(),this.windows=[]}}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}isVisible(){let e;if(p.isAmp())e=this.isAmpVisible;else if(p.isIABSafeFrame()){const t=p.getIABSafeFrameWindow();e=!Object(l.isUndefined)(t)&&t.$sf.ext.winHasFocus?t.$sf.ext.winHasFocus():!document.hidden}else e=!!this.visibleWindow;return e}addWindow(e){-1===o.indexOf(this.windows,e)&&(this.windows.push(e),this.addListener(e,()=>this.setWindowVisible(e),()=>this.setWindowHidden(e)))}removeWindow(e,t=!0,i=!0){if(o.indexOf(this.windows,e)>-1){var n=this.isVisible();i&&this.windows.splice(o.indexOf(this.windows,e),1),t&&n&&!this.isVisible()&&this.onHiddenCallback()}}getWindows(){return this.windows}addListener(e,t,i){try{const r=e.document;if(this.prefixesSupported(r)){const e=()=>{r[this.getPrefixedMethodName(this.props[2])]?i():t()};this.eventListenerManager.add(this.getPrefixedMethodName(this.props[1]),r,e)}else if(r.hasFocus)E.logger.debug("Add listener on hasFocus method with an interval of 100ms"),clearInterval(this.intervalFocus),this.intervalFocus=setInterval(()=>{r.hasFocus()?t():i()},100);else{const r=b.findAllWindows(this.win.document.body,!0);o.forEach(r,e=>{this.addWindow(e)}),E.logger.debug("Add listener on focus and blur events");var n=e=>{E.logger.debug("Exec callback visible"),t()},s=t=>{E.logger.debug("Exec callback hidden"),e===t.target&&i()};e.tt_visibility_visible=n,e.tt_visibility_hidden=s,e.hasOwnProperty("onpageshow")&&(this.eventListenerManager.add("pageshow",e,e=>{E.logger.debug("pageshow event received"),n()}),this.eventListenerManager.add("pagehide",e,e=>{E.logger.debug("pagehide event received"),s(e)})),this.eventListenerManager.add("focus",e,e=>{E.logger.debug("focus event received"),clearTimeout(this.eventTimeout),n()}),this.eventListenerManager.add("blur",e,e=>{E.logger.debug("blur event received"),this.eventTimeout=setTimeout(()=>{s(e)},10)})}}catch(e){}}setWindowVisible(e){this.isInitialState||this.isVisible()||(this.visibleWindow=e,E.logger.debug("onVisible callback exec"),this.onVisibleCallback())}setWindowHidden(e){this.isInitialState=!1,p.isIABSafeFrame()&&this.isVisible()||this.isVisible()&&(this.visibleWindow=null,E.logger.debug("onHidden callback exec"),this.onHiddenCallback())}onVisibleCallback(){this.enabled&&this.onVisible()}onHiddenCallback(){this.enabled&&this.onHidden()}getPrefixedMethodName(e,t){return a.b.fromNullable(t).orElse(()=>a.b.fromNullable(this.prefix)).match({some:t=>t+e,none:()=>e.toLowerCase()})}getPrefix(e){e||(e=window.document);for(let t=0,i=this.prefixes.length;t<i;t++){const i=this.getPrefixedMethodName(this.props[2],this.prefixes[t]);if(null!==e[i]&&void 0!==e[i])return this.prefixes[t]}}prefixesSupported(e){if(p.isDesktop())return!1;let t=!1;return o.forEach(this.props,i=>{t=t||this.getPrefixedMethodName(i,this.prefix)in e}),t}}E.logger=new c.a("Visibility");var O=i(87),C=i(88),I=i(79),S=i(17),T=i(155),k=i.n(T),P=i(156),j=i.n(P),L=i(162),x=i.n(L),V=(i(163),i(164)),N=i.n(V),D=i(165),R=i.n(D),_=(i(166),i(167)),M=i.n(_),F=i(168),U=i.n(F),B=i(26);class W extends I.a{constructor(e){super("teads-ui-components-adchoices",x.a),this.getVpaidAd=e,this.innerHTML="<span>AdChoices</span>",this.initElement(),p.isMobile()||(g.addEventListener("mouseover",this.getElement(),Object(S.a)(this.onMouseOver,this)),g.addEventListener("mouseout",this.getElement(),Object(S.a)(this.onMouseOut,this))),g.addEventListener("click",this.getElement(),Object(S.a)(this.onClick,this))}onMouseOver(){b.addClass(this.getElement(),"expanded")}onMouseOut(){b.removeClass(this.getElement(),"expanded")}onClick(){this.getVpaidAd().forEach(e=>e.dispatchCustomEvent(B.a.AdChoicesClickRequest))}isEnabled(){return!0}}class H extends I.a{constructor(e){super("teads-ui-components-hpl",N.a);const t=e.match({some:e=>"&auctid="+e,none:()=>""});this.innerHTML=`<a href="https://t.teads.tv/track?action=hpl-register${t}"></a>`,this.initElement()}isEnabled(){return!0}}class z extends I.a{constructor(e){super("teads-ui-components-credits",k.a),this.config=e;let t=this.config.getText().replace(/\[([^\]]*)\]/g,'<span class="teads-ui-components-credits-colored">$1</span>'),i=this.config.getLink()||"https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads";this.innerHTML=`<a href="${i}" rel="nofollow" target="_blank">${t}</a>`,this.initElement()}isEnabled(){return this.config.isEnabled()}}class G extends I.a{constructor(e){super("teads-ui-components-label",j.a),this.label=e,this.innerHTML=this.label.getText(),this.initElement()}isEnabled(){return this.label.isEnabled()}}class q extends I.a{constructor(){super("close-button icon-close",""),this.WIDTH_WHEN_VISIBLE=11,this.eventListenerManager=new f.a,this.innerHTML="",this.initElement(),this.eventListenerManager.add("click",this.getElement(),e=>this.onClick(e))}isEnabled(){return!0}hide(){this.element&&this.element.style.setProperty("width","0")}show(){this.element&&this.element.style.setProperty("width",this.WIDTH_WHEN_VISIBLE+"px")}onClick(e){Object(l.isFunction)(this.onClickAction)&&this.onClickAction()}}var $=i(3);function K(e){const t=Number(e.getAdDuration()),i=e.getAdRemainingTime()>0?e.getAdRemainingTime():t;return t>0?t-i:0}function Y(e){return!(e.getAdVolume()>0)}var X=i(82);class Q{constructor(e,t,i,n,s){if(this.ui=e,this.element=t,this.vpaid=i,this.config=n,this.globalVpaidEventHandler=s,this.eventHandler=new X.a,this.showOnVideoStart=!0,this.isCountdownEnded=!1,n.style){var r=t.getAttribute("style");t.setAttribute("style",(r?r+";":"")+n.style)}let o=new RegExp("teads-ui-component-([a-z]*)"),a=t.className.match(o);this.id=a&&a[1]?a[1]:"",this.logger=new c.a("teads.ui.Component"+(this.id?"."+this.id:"")),t.style.zIndex||t.style.setProperty("z-index","2"),this.hide(),this.vpaid.subscribe(()=>{this.onVideoStart()},$.a.AdVideoStart);const d=n.startOffset;if(!Object(l.isUndefined)(d)&&d>0){this.showOnVideoStart=!1;const e=()=>{K(this.vpaid)>=d&&(this.vpaid.unsubscribe(e,$.a.AdRemainingTimeChange),this.isCountdownEnded=!0,this.isEnabled()&&this.show())};this.vpaid.subscribe(e,$.a.AdRemainingTimeChange)}else this.isCountdownEnded=!0;this.bindClick()}init(){}setShowOnVideoStart(e){this.showOnVideoStart=e}getShowOnVideoStart(){return this.showOnVideoStart}getConfig(){return this.config}isEnabled(){return!this.config.disable}getElement(){return this.element}show(){this.isCountdownEnded&&(b.removeClass(this.getElement(),"hide"),b.addClass(this.getElement(),"show"))}hide(){b.removeClass(this.getElement(),"show"),b.addClass(this.getElement(),"hide")}isVisible(){return this.getElement().className.indexOf("show")>-1}getVpaid(){return this.vpaid}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}getOverridenEvents(){return[]}getOverridenMethods(){return[]}restoreOnClickAction(){}onMethod(e,t=[]){}onOverridenMethod(e,t=[]){}remove(){a.b.fromNullable(this.getElement().parentNode).forEach(e=>e.removeChild(this.getElement()))}onVideoStart(){this.showOnVideoStart&&this.show()}dispatchVpaidEvent(e,t){if(this.globalVpaidEventHandler)try{this.globalVpaidEventHandler({type:e,data:t})}catch(i){this.logger.error("error calling dispatchVpaidEvent "+e,t)}else this.logger.error("no globalVpaidEventHandler given. Dispatch "+e+" failed",t)}bindClick(){g.addEventListener("click",this.getElement(),e=>{this.onClick(e)})}onClick(e){this.dispatchUiEvent(this.eventName)}dispatchUiEvent(e){e&&(this.logger.info("dispatch UI event "+e),this.dispatchVpaidEvent(e))}}class J extends Q{constructor(){super(...arguments),this.lastVolume=1}init(){this.isMuted=Y(this.vpaid),this.eventName=B.a.SoundToggleRequest,this.vpaid.subscribe(()=>{this.isMuted=Y(this.vpaid),this.onMuteChange()},$.a.AdStarted),this.vpaid.subscribe(()=>{this.isMuted=Y(this.vpaid)},$.a.AdVideoStart),this.vpaid.subscribe(()=>{this.hide()},$.a.AdStopped),this.ui.subscribe(()=>{this.hide()},B.a.EndscreenInit),this.vpaid.subscribe(()=>{(!this.isMuted&&Y(this.vpaid)||this.isMuted&&!Y(this.vpaid))&&(this.lastVolume=Y(this.vpaid)?this.lastVolume:this.vpaid.getAdVolume(),this.isMuted=Y(this.vpaid),this.onMuteChange())},$.a.AdVolumeChange),this.onMuteChange(),super.init()}onMuteChange(){b[Y(this.vpaid)?"addClass":"removeClass"](this.getElement(),"muted")}setAdVolume(){this.vpaid.setAdVolume(this.isMuted?this.lastVolume:0)}onClick(e){super.onClick(e),this.setAdVolume(),this.isMuted=!this.isMuted,this.onMuteChange()}}class Z{}Z.OFF="icon-muteoff",Z.ON="icon-muteon";class ee extends I.a{constructor(){super("teads-ui-components-smart-header",M.a),this.isMuted=!0,this.eventListenerManagerAdChoices=new f.a,this.eventListenerManagerSound=new f.a,this.innerHTML=U.a}init(e,t){this.vpaidAd=e,this.volumeController=t,this.initElement(),this.hide(),this.smartCloseButton=new q,this.closeButtonContainer=this.element.getElementsByClassName("close-button-smart")[0],this.closeButtonContainer.appendChild(this.smartCloseButton.getElement()),this.hideCloseButton();const i=this.element.getElementsByClassName("adChoices-button-smart")[0];this.eventListenerManagerAdChoices.add("click",i,()=>this.onClickAdChoicesButton()),this.smartSoundButton=this.element.getElementsByClassName("sound-button-smart")[0],this.eventListenerManagerSound.add("click",this.smartSoundButton,()=>this.onClickSoundButton()),this.vpaidAd.subscribe(()=>this.onVolumeChange(),$.a.AdVolumeChange)}showCloseButton(){this.closeButtonContainer.style.setProperty("display","inline-block"),y.b(()=>this.smartCloseButton.show())}hideCloseButton(){this.closeButtonContainer.style.setProperty("display","none"),this.smartCloseButton.hide()}isEnabled(){return!0}toggleSoundButtonIcon(){const e=this.smartSoundButton.firstElementChild,t=this.isMuted?Z.OFF:Z.ON,i=this.isMuted?Z.ON:Z.OFF;Object(b.replaceClass)(e,t,i)}onClickSoundButton(){this.volumeController.toggleVolume()}onClickAdChoicesButton(){this.vpaidAd.dispatchCustomEvent(B.a.AdChoicesClickRequest)}onVolumeChange(){this.isMuted=Y(this.vpaidAd),this.toggleSoundButtonIcon()}}class te{constructor(e){this.components=e}getComponent(e){return this.components.hasOwnProperty(e)?this.components[e]:null}getComponents(){return this.components}showComponent(e){this.components.hasOwnProperty(e)&&this.components[e].show()}hideComponent(e){this.components.hasOwnProperty(e)&&this.components[e].hide()}showAllComponents(){for(let e in this.components)this.components.hasOwnProperty(e)&&this.components[e].show()}hideAllComponents(){for(let e in this.components)this.components.hasOwnProperty(e)&&this.components[e].hide()}}var ie=i(93),ne=i(175),se=i.n(ne),re=i(176),oe=i.n(re);function ae(e,t,i){a.b.fromNullable(null==t?void 0:t.document).forEach(t=>{if(!t.getElementById(i)){const n=ie.a(e,{assetsPath:h.b.assetsUrl}),s=t.createElement("style");s.setAttribute("id",i),s.setAttribute("class","teads-inline-style"),s.appendChild(t.createTextNode(n)),t.head.appendChild(s)}})}var de=i(158),ce=i(153);class le{constructor(){this.lastUserInteractionSound=0,this.cursorCoords={x:0,y:0},this.currentVolume=0,this.muteCallbacks=[],this.unmuteCallbacks=[],this.eventListenerManager=new f.a}init(e){this.abstractFormat=e,this.vpaidAd=e.getVpaidAd(),this.formatConfig=e.formatConfig,this.formatConfig.soundStart.isMute()?this.hasStarted=!1:this.formatConfig.soundStart.isUnmute()?this.hasStarted=!0:this.formatConfig.soundStart.isCountdown()&&(this.hasStarted=!1)}getVolume(){return-1===this.vpaidAd.getAdVolume()?this.currentVolume:this.vpaidAd.getAdVolume()}setVolume(e){this.getVolume()!==e&&(this.currentVolume=e,this.vpaidAd.setAdVolume(e))}toggleVolume(){if(this.getVolume()>0)this.mute(),this.lastUserInteractionSound=1,o.forEach(this.muteCallbacks,e=>e());else{let e=this.formatConfig.volume.getMain();this.setVolume(e),this.lastUserInteractionSound=2,o.forEach(this.unmuteCallbacks,e=>e())}}userAlreadyInteracted(){return 0!==this.lastUserInteractionSound}startAt(e){let t=()=>{this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()>=e&&(this.vpaidAd.unsubscribe(t,$.a.AdRemainingTimeChange),this.hasStarted||(this.hasStarted=!0,this.setVolume(this.formatConfig.volume.getMain())))};this.vpaidAd.subscribe(t,$.a.AdRemainingTimeChange)}mute(){this.setVolume(0)}isMuted(){return 0===this.getVolume()}onAdVideoStart(){this.formatConfig.soundStart.isUnmute()?this.setVolume(this.formatConfig.volume.getMain()):this.formatConfig.soundStart.isCountdown()?this.startAt(this.formatConfig.soundStart.getCountdown()):this.setVolume(0)}replay(){let e=Object(g.getBoundingClientRect)(this.abstractFormat.parentContainer);Object(p.isDesktop)()&&(this.cursorCoords={x:Math.floor(e.left+e.width/2),y:Math.floor(e.top+e.height/2)},this.eventListenerManager.add("mousemove",this.abstractFormat.placement.placementConfig.parentWindow.getWindow().document.body,e=>{this.cursorCoords={x:e.clientX,y:e.clientY}}))}startInView(){if(!this.userAlreadyInteracted()){this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&(this.formatConfig.soundStart.isCountdown()||this.formatConfig.soundStart.isUnmute())&&this.setVolume(this.formatConfig.volume.getMain())}}endInView(){!this.userAlreadyInteracted()&&this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&this.setVolume(0)}addMuteCallback(e){o.indexOf(this.muteCallbacks,e)<0&&this.muteCallbacks.push(e)}addUnmuteCallback(e){o.indexOf(this.unmuteCallbacks,e)<0&&this.unmuteCallbacks.push(e)}}var he=i(113),ue=i(136),pe=i(74),ge=i(71),me=i(91),fe=i(97),be=i(137),ve=i(25),Ae=i(34),ye=i(73),we=i(59),Ee=i(118),Oe=i(29),Ce=i(21),Ie=i(6);const Se=(e,t)=>t.reduce((e,t)=>e+g.getBoundingClientRect(t.getElement()).height,0)+e;class Te{constructor(e,t,i,n,s,r){this.placement=e,this.formatConfig=t,this.player=i,this.auctionId=n,this.viewerId=s,this.sumologicLogger=r,this.states={hasOpened:!1,isReady:!1,hasRequestedStartAd:!1,hasStarted:!1,hasStopped:!1,hasCompleted:!1,isReplay:!1,isPlaying:!1,isCollapsed:!1,shouldBePaused:!1},this.hasMoatExtension=!1,this.adWidth=0,this.adHeight=0,this.adDuration=-2,this.adRemainingTime=NaN,this.isVertical=!1,this.realVisibilityInterval=a.b.empty(),this.wigo=a.b.empty(),this.initAdTimingMark=a.b.empty(),this.customTrackingsFromTtcAdded=!1,this.trackHeavyAdInterventionWarning=e=>{const{sumologicLogger:t,logger:i,auctionId:n,viewerId:s,slotType:r,placement:{key:o,wigo:a,pageId:d,pid:c,placementConfig:{headerBiddingProvider:l}},formatConfig:{portfolioItemId:h,insertionId:u,connectionId:p,adSourceId:g,dspCampaignId:m,dspCreativeId:f,scenarioId:b}}=this,{studioCreativeId:v}=Object(Ce.e)(o);Object(Ae.y)({sumologicLogger:t,wigo:a,logger:i,placementKey:o})({headerBiddingProvider:l,pageId:d,placementId:c,slotType:r,auctionId:n,viewerId:s,insertionId:u,connectionId:p,portfolioItemId:h,adSourceId:g,creativeId:String(this.linearAd.creativeId),dspCampaignId:m,dspCreativeId:f,scenarioId:b,studioCreativeId:v,errorCause:"HeavyAdIntervention "+e})},this.logger=new c.a("format"),this.logger.debug("new",t.formatName.get()),this.linearAd=this.player?this.player.getLinearAd():null,this.hasMoatExtension=!!this.player&&this.player.hasMoatExtension(this.linearAd),pe.j(this.linearAd),this.slotType=this.placement.slotType,this.parentContainer=this.placement.getParentContainer(),this.playerContainer=this.placement.getPlayerContainer(),this.win=e.placementConfig.parentWindow.getWindow(),this.eventListenerManager=new f.a,this.volumeController=new le,this.viewabilityTagsHelper=new ce.a(this.sumologicLogger,this.formatConfig.adType,this.win,Object(a.c)({parentContainer:this.parentContainer,playerContainer:this.playerContainer})),this.initComponents(),this.vpaidApi=this.player.getConfig().vpaidApi}setWigo(e){this.wigo=a.b.fromNullable(e)}getWigo(){return this.wigo.getOrNull()}initComponents(){if(!this.placement.getElectedSlot())return void this.logger.debug("Could not init components because no elected slot");const e=new G(this.formatConfig.label),t=new z(this.formatConfig.credits),i=new H(this.auctionId),n={label:e,credits:t,honeyPotLink:i};if(this.shouldInstanciateSmartHeader()&&(n.smartHeader=new ee),!this.placement.isSliderEnabled()){n.adChoices=new W(()=>a.b.fromNullable(this.getVpaidAd()));const e=this.formatConfig.smartPosition.isTop()||this.formatConfig.smart6Behavior.isTop()||!this.formatConfig.label.isEnabled()?0:1;1===e&&this.playerContainer.parentNode.insertBefore(n.adChoices.getElement(),this.playerContainer),a.b.fromNullable(this.player).forEach(t=>t.getConfig().adChoicesIconLocation=e)}this.components=new te(n),(e=>{for(const t in e)a.b.fromNullable(e[t]).filter(e=>!!e.getHTML()).filter(e=>!!e.getCSS()).forEach(e=>ae(e.getCSS(),Object(b.getWindow)(this.parentContainer),"teads-inline-"+Object(A.rand)(5)))})(n),e.getHTML()&&!this.placement.isSliderEnabled()&&this.playerContainer.parentNode.insertBefore(e.getElement(),this.playerContainer),t.getHTML()&&!this.placement.isSliderEnabled()&&this.playerContainer.parentNode.appendChild(t.getElement()),this.playerContainer.parentNode.appendChild(i.getElement()),this.placement.placementConfig.css.applyRulesOn(this.parentContainer)}getBrandingMode(){return this.brandingMode}getTemplateName(){throw new Error("getTemplateName must be implemented in child class")}getVpaidAd(){return this.vpaidAd}getVolumeController(){return this.volumeController}getFullscreenHelper(){return this.fullscreenHelper}exit(e){switch(this.vpaidAd&&this.vpaidAd.stopAd(),this.smartPositionHelper&&this.smartPositionHelper.disableBehavior(),this.eventListenerManager.removeAll(),this.scrollListener&&Object(fe.b)(this.scrollListener),this.vpaidApi&&this.vpaidApi.close(),this.responsive&&this.responsive.unsetResponsive(),this.parentContainer&&this.parentContainer.parentNode&&y.d(()=>{this.parentContainer&&this.parentContainer.parentNode&&(this.parentContainer.parentNode.removeChild(this.parentContainer),this.unsetVisibility())},2e3),e){case 4:this.logger.info("Format successfully exited after displaying an ad");break;case 5:this.logger.info("Format successfully exited without displaying an ad");break;case 6:this.logger.info("Format successfully exited because the VAST contains a MOAT extension while the player is hidden by CSS");break;case 1:this.logger.error("Format exited with an ad error");break;case 2:this.logger.error("Format exited due to resize denied on opening by AMP framework");break;case 3:this.logger.error("Format exited due to an exception thrown during replay");break;default:this.logger.warn("Format exited with unknown status")}if(window.location.hostname!==O.a){let e=he.e[this.formatConfig.formatName.get()];for(let t=0,i=e.length;t<i;t++)if(e[t]===this){e.splice(t,1);break}}p.isAmp()&&(5!==e?pe.a():this.placement.placementConfig.fallback.hasValue()||(pe.a(),pe.i())),p.isIABSafeFrame()&&me.a()}getCurrentTime(){return this.adDuration>0&&this.adRemainingTime>=0?this.adDuration-this.adRemainingTime:0}getEnvironmentVars(){return a.b.fromNullable(this.vpaidAd).flatMap(e=>e.getTeadsEnvironmentVars()).getOrValue({})}load(e,t){const i=e=>{this.logger.error("VPAID play:",e);const{cid:i,studioCid:n}=this.getCidAndStudioCid();this.sumologicLogger.error(`loading-mediafile cid=${i} scid=${n} ${Object(ge.b)(e)}`),t&&t(e)},n=(t,i)=>{this.vpaidAd=t,this.initAdConfig=i,e&&(this.formatConfig.callbacks.trigger("adAvailable"),e())},s=Object(C.c)(this.formatConfig.portfolioItemId)?()=>!0:e=>this.placement.placementConfig.allowedRatio.mediafileRatioIsValid(e,ye.a.getRatio);!this.player&&e?e():this.mediafile?this.player.loadMediaFile(this.mediafile,n,i):this.player.loadOptimalMediaFile(n,i,s)}close(e){this.states.hasStopped||(this.states.hasStopped=!0,!this.states.hasOpened||v.c(p.getIEVersion(),"9")||p.isAmp()||this.states.isCollapsed?(this.collapse(),this.exit(e)):(this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.parentContainer,()=>this.exit(e)),this.collapse()))}collapse(){this.states.isCollapsed||(this.states.isCollapsed=!0,this.components.hideAllComponents(),this.formatConfig.animations.setCollapseDuration(this.parentContainer),this.parentContainer.style.setProperty("height","0"))}start(){this.customTrackingsFromTtcAdded||(this.customTrackingsFromTtcAdded=!0,this.addCustomTracking(window._ttc)),this.logger.debug("VPAID started",this.vpaidAd,this.initAdConfig),this.mediafile=this.player.getMediafile(),this.onVpaidReady(),(Object(C.a)(this.formatConfig.portfolioItemId)||this.formatConfig.friendly)&&(Object(b.makeIframeIABFriendly)(this.vpaidAd.getContainer()),Object(b.makeIframeIABFriendly)(this.vpaidAd.getCreativeContainer())),this.initAdTimingMark=a.b.of(Object(u.f)()),this.vpaidAd.initAd(this.initAdConfig.width,this.initAdConfig.height,this.initAdConfig.mode,this.initAdConfig.bitrate,this.initAdConfig.parameters)}onAdLoaded(){this.states.isReady=!0;!function(e){const t=[];for(const i in e)e.hasOwnProperty(i)&&t.push(Object.assign({hostname:i},e[i]));window.teads.vastDomains=t}(function(e,t){const i={},n=(e,t)=>{i[e]||(i[e]={origins:[t],count:0}),i[e].count++,o.includes(i[e].origins,t)||i[e].origins.push(t)};o.forEach(e.mediaFiles,e=>n(Object(w.p)(e.url).hostname,"mediafile")),o.forEach(e.wrappers,e=>n(Object(w.p)(e).hostname,"wrapperurl")),e.url&&n(Object(w.p)(e.url).hostname,"vasturl");for(const t in e.tracking)e.tracking.hasOwnProperty(t)&&o.forEach(e.tracking[t],e=>n(Object(w.p)(e.url).hostname,"tracking"));return o.forEach(e.extensions,e=>{switch(e.type){case we.a.MOAT_JS:n(("https:"===Object(l.getProtocol)()?"z":"js")+".moatads.com","extension");break;case we.a.AD_VERIFICATIONS:const i=t.getPlugin("Extensions").retrieveCreativePrefetchAdVerificationScriptUrls(e);o.forEach(i,({url:e})=>n(Object(w.p)(e).hostname,"extension"))}}),i}(this.linearAd,this.player)),p.isAmp()&&!pe.f()&&(pe.h(),pe.g(Se(this.vpaidAd.getAdHeight(),[this.components.getComponent("label"),this.components.getComponent("credits")])||this.fitContainerToContent(!0),e=>{if(e)this.initInternalResponsive();else{this.close(2),Object(fe.b)(this.scrollListener);const e="AMP resize open request denied";this.logger.info("AdLoaded",e),this.wigo.forEach(t=>t.valid(3,4,e,"error"))}},()=>{let e=window._teads_amp.change;return!(e.boundingClientRect.top>=e.rootBounds.height)})),this.volumeController.mute(),this.updateAdSize(),this.vpaidAd.render(this.vpaidAd.getVPAID())}onAdVideoStart(){this.states.hasCompleted=!1,this.states.isPlaying=!0,this.volumeController.onAdVideoStart()}onAdStarted(){this.states.hasStarted=!0,this.vpaidApi.getStudioData()?this.brandingMode.deinit():this.brandingMode.init(),this.volumeController.mute(),this.updateAdSize(),this.states.shouldBePaused&&this.requestPauseAd()}onAdPaused(){this.states.isPlaying=!1}onAdPlaying(){this.states.isPlaying=!0}onAdStopped(){this.states.isPlaying=!1,this.close(4)}onAdSkipped(){this.collapse()}onAdVideoComplete(){this.states.hasCompleted=!0}onAdError(e){var t,i;const n=Object(l.isString)(e)?e:Object(ge.a)(e),s=null!==(i=null===(t=this.player.getLinearAd())||void 0===t?void 0:t.id)&&void 0!==i?i:-1,{cid:r,studioCid:o}=this.getCidAndStudioCid();this.sumologicLogger.error(`aderror aid=${s} cid=${r} scid=${o} ${n}`),this.logger.error("AdError: ",n),this.close(1)}onAdSizeChange(){this.updateAdSize()}onAdRemainingTimeChange(){this.adRemainingTime=this.vpaidAd.getAdRemainingTime()}onAdDurationChange(){this.adDuration=this.vpaidAd.getAdDuration(),this.onAdRemainingTimeChange()}onCollapseRequest(){this.formatConfig.callbacks.trigger("CollapseRequest"),this.collapse()}onSoundToggleRequest(){const e=this.getEnvironmentVars();e.videoSlot&&e.videoSlot.audio&&!e.videoSlot.audio.authorized?e.videoSlot.audio.authorizeAudio(()=>this.volumeController.toggleVolume()):this.volumeController.toggleVolume()}onReplayRequest(){this.replay()}onEndscreenInit(){this.getInViewState()||(this.logger.debug("The video completed but it's not in view, pause it."),this.requestPauseAd()),this.visibility&&!this.visibility.isEnabled()&&(this.visibility.enable(),this.visibility.isVisible()||this.onHidden())}onEarlyClick(){const{sumologicLogger:e,logger:t,auctionId:i,viewerId:n,slotType:s,placement:{key:r,wigo:o,pageId:a,pid:d,placementConfig:{headerBiddingProvider:c}},formatConfig:{portfolioItemId:l,insertionId:h,connectionId:u}}=this;Object(Ae.m)({sumologicLogger:e,wigo:o,logger:t,placementKey:r})({headerBiddingProvider:c,pageId:a,placementId:d,slotType:s,auctionId:i,viewerId:n,insertionId:h,connectionId:u,portfolioItemId:l,creativeId:String(this.linearAd.creativeId)})}onVisible(){if(this.logger.debug("Format is visible",this.playerContainer.id),!this.states.hasStopped&&this.states.hasOpened&&this.states.hasStarted){let e;e=this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?!this.getInViewState():!this.formatConfig.videoPause.isNo(),e||this.requestResumeAd(),this.logger.debug("onVisible mustPause",e)}}onHidden(){this.logger.debug("Format is hidden",this.playerContainer.id),this.states.hasStarted&&this.states.isPlaying&&(!this.formatConfig.videoPause.isNo()||this.states.hasCompleted?this.requestPauseAd():!this.formatConfig.soundMute.isNo()&&this.volumeController.getVolume()>0&&this.volumeController.mute())}onCreateWigoReport(e){Ie.a.tryCatch(()=>{const t=`${e}_${this.auctionId.getOrNull()}.json`;this.wigo.forEach(e=>e.saveVast(t)),ve.b.debug.track(this.placement.key)("wigo-report-collector",{baseUrl:h.b.trackingUrl,referer:Object(Ae.b)(this.sumologicLogger),queryParameters:{env:p.getEnv(),pageId:this.placement.pageId.toString(),pid:this.placement.pid.toString(),hb_provider:this.placement.placementConfig.headerBiddingProvider.getOrValue(""),auctid:this.auctionId.getOrValue(Object(m.b)(""))},trackingUrl:a.a},a.b.of(""+t))}).tapLeft(e=>{this.sumologicLogger.info("wigo report collector error  "+e,1)})}initInternalResponsive(e=!0){this.player&&this.vpaidAd&&(this.player.getPlugin("Responsive").deinit(),this.responsive=new de.a(this),e&&this.responsive.resizeOnStart())}onVpaidReady(){p.isAmp()||this.initInternalResponsive(),this.isVertical=this.player.getMediafile().height>Te.VERTICAL_MARGIN*this.player.getMediafile().width,this.volumeController.init(this);const e=Object(b.findTopWindow)(this.playerContainer);this.visibility=E.listenWindow(e,()=>this.onVisible(),()=>this.onHidden()),this.vpaidAd.subscribe(()=>this.onAdLoaded(),$.a.AdLoaded),this.vpaidAd.subscribe(()=>this.onAdVideoStart(),$.a.AdVideoStart),this.vpaidAd.subscribe(()=>this.onAdStarted(),$.a.AdStarted),this.vpaidAd.subscribe(()=>this.onAdPaused(),$.a.AdPaused),this.vpaidAd.subscribe(()=>this.onAdPlaying(),$.a.AdPlaying),this.vpaidAd.subscribe(()=>this.onAdSizeChange(),$.a.AdSizeChange),this.vpaidAd.subscribe(()=>this.onAdDurationChange(),$.a.AdDurationChange),this.vpaidAd.subscribe(()=>this.onAdRemainingTimeChange(),$.a.AdRemainingTimeChange),this.vpaidAd.subscribe(()=>this.onAdVideoComplete(),$.a.AdVideoComplete),this.vpaidAd.subscribe(()=>this.onAdStopped(),$.a.AdStopped),this.vpaidAd.subscribe(()=>this.onAdSkipped(),$.a.AdSkipped),this.vpaidAd.subscribe(e=>this.onAdError(e),$.a.AdError),this.wigo.forEach(e=>e.settings.forEach(({reportEvent:e,reportName:t})=>this.vpaidAd.subscribe(()=>this.onCreateWigoReport(t),e))),this.vpaidAd.subscribe(this.trackHeavyAdInterventionWarning,Oe.a.AdWarningHeavyAdIntervention),this.vpaidAd.subscribe(t=>{const i="HeavyAdIntervention "+t;this.wigo.forEach(e=>e.valid(3,4,i,"error"));Object(w.j)(e.location.href)?(this.scrollListener&&Object(fe.b)(this.scrollListener),this.clearRealVisibilityInterval(),this.unsetVisibility()):this.close(1)},Oe.a.AdRemovedHeavyAdIntervention);for(const e in $.a)$.a.hasOwnProperty(e)&&this.vpaidAd.subscribe(()=>{this.formatConfig.callbacks.trigger(e,this.volumeController,this.fullscreenHelper)},e);this.linearAd.clickThrough&&this.linearAd.clickThrough.length&&this.vpaidAd.subscribe(()=>{this.onHidden()},$.a.AdClickThru),this.vpaidAd.subscribe(()=>this.onCollapseRequest(),B.a.CollapseRequest),this.vpaidAd.subscribe(()=>this.onSoundToggleRequest(),B.a.SoundToggleRequest),this.vpaidAd.subscribe(()=>this.onReplayRequest(),B.a.ReplayRequest),this.vpaidAd.subscribe(()=>this.onEndscreenInit(),B.a.EndscreenInit),this.vpaidAd.subscribe(()=>this.onEarlyClick(),B.a.EarlyClickRequest),this.formatConfig.vtpEvent.getEvent()&&this.vpaidAd.subscribe(()=>this.onVtpEvent(),this.formatConfig.vtpEvent.getEvent())}triggerOnVtpEvent(){this.formatConfig.videoPause.setToNo(),this.states.isPlaying||this.requestResumeAd()}onVtpEvent(){if(!this.formatConfig.videoPause.isNo())if(this.formatConfig.vtpEvent.getEvent()===$.a.AdRemainingTimeChange){const e=this.vpaidAd.getAdDuration(),t=this.vpaidAd.getAdRemainingTime(),i=Math.floor(e-t);!isNaN(i)&&i>0&&i>=this.formatConfig.vtpEvent.getOffset()&&this.triggerOnVtpEvent()}else this.triggerOnVtpEvent()}updateAdSize(){this.adWidth=this.vpaidAd.getAdWidth(),this.adHeight=this.vpaidAd.getAdHeight()}replay(){this.logger.debug("replay called");const{sumologicLogger:e,logger:t,auctionId:i,viewerId:n,slotType:s,placement:{key:r,wigo:o,pageId:a,pid:d,placementConfig:{headerBiddingProvider:c}},formatConfig:{portfolioItemId:l,insertionId:h,connectionId:u}}=this;Object(Ae.l)({sumologicLogger:e,wigo:o,logger:t,placementKey:r})({headerBiddingProvider:c,pageId:a,placementId:d,slotType:s,auctionId:i,viewerId:n,insertionId:h,connectionId:u,portfolioItemId:l}),this.sumologicLogger.info("click-replay "+p.getContextSummary(),1),this.volumeController.replay();try{this.player.getPlugin("Responsive").unsetResponsive(),ve.b.vast.resetTrackedEvents(this.placement.key),this.player.setLinearAd(this.linearAd),this.responsive&&this.responsive.unsetResponsive(),this.unsetVisibility(),this.states.isReady=!1,this.states.hasOpened=!0,this.states.hasRequestedStartAd=!1,this.states.hasStarted=!1,this.states.hasStopped=!1,this.states.hasCompleted=!1,this.states.isReplay=!0,this.vpaidAd=null,Ee.a.hasLogged=[],p.isDesktop()&&this.formatConfig.videoStart.isClick()&&(this.formatConfig.videoStart=new ue.a(ue.a.DEFAULT)),this.load(()=>this.start())}catch(e){this.logger.error("Replay callback threw an exception",e),this.close(3)}}unsetVisibility(){this.visibility&&(this.visibility.destroy(),this.visibility=null)}isWindowVisible(){return p.isAmp()?!!this.visibility&&(this.visibility.isVisible()&&pe.f()):!this.visibility||!this.visibility.isEnabled()||this.visibility.isVisible()}isElementVisibleForMoat(){return!(!p.isAmp()&&!p.isIABSafeFrame())||Object(b.checkElementVisibility)(this.playerContainer,this.formatConfig.threshold.get()).fold(e=>{const{sumologicLogger:t,logger:i,auctionId:n,viewerId:s,slotType:r,placement:{key:o,wigo:a,pageId:d,pid:c,placementConfig:{headerBiddingProvider:l}},formatConfig:{portfolioItemId:h,insertionId:u,connectionId:p}}=this;return Object(Ae.w)({sumologicLogger:t,wigo:a,logger:i,placementKey:o})({headerBiddingProvider:l,pageId:d,placementId:c,slotType:r,auctionId:n,viewerId:s,insertionId:u,connectionId:p,portfolioItemId:h,notVisibleReason:e}),!1},()=>this.isWindowVisible())}getInViewState(){return this.getViewportInViewState()&&(!this.states.hasOpened||this.getFullscreenHelper().isActive()||this.isElementVisibleForMoat())}clearRealVisibilityInterval(){this.realVisibilityInterval.forEach(e=>e.clear()),this.realVisibilityInterval=a.b.empty()}requestPauseAd(){this.states.hasStarted?this.vpaidAd.pauseAd():this.states.shouldBePaused=!0}requestResumeAd(){this.states.hasStarted?this.vpaidAd.resumeAd():this.states.shouldBePaused=!1}onScroll(e){this.wigo.forEach(e=>e.followElement())}startAd(){this.states.hasRequestedStartAd||(this.states.hasRequestedStartAd=!0,this.vpaidAd.startAd())}getCidAndStudioCid(){var e;const t=a.b.fromNullable(null===(e=this.vpaidApi.getContextData())||void 0===e?void 0:e.tracking);return{cid:t.map(e=>""+e.cid).getOrValue(""),studioCid:t.map(e=>""+e.studio_cid).getOrValue("")}}addCustomTracking(e={}){var t;Object(l.hasOwnProperty)(e,this.placement.pageId)&&Object(d.b)(null!==(t=e[this.placement.pageId].trackings)&&void 0!==t?t:[],be.c,Object(l.tap)(e=>this.logger.debug("Custom trackings from _ttc handled",e)),o.cArray.forEach(ve.b.vast.addVastCustomTrackings(this.placement.key)))}shouldInstanciateSmartHeader(){return this.formatConfig.smartPosition.isEnabled()||this.formatConfig.sliderBehavior.isEnabled()||this.formatConfig.smart6Behavior.isEnabled()}}Te.VERTICAL_MARGIN=1.05;var ke=i(94);const Pe=(e,t,i,n)=>{o.forEach(t,e=>{i.properties.push(je.getPropertyToSave(n,e))}),o.forEach(t,t=>{n.style.setProperty(t,e,"important")})};class je{constructor(e,t,i,n,s,r){if(this.formatContainer=e,this.vpaidAd=t,this.components=i,this.responsive=n,this.win=s,this.fullscreenElement=r,this.originalVpaidSize={width:0,height:0},this.fullscreenFormatStyle={width:"100%",height:"100%",top:"0",left:"0",position:"fixed","z-index":String(ke.b),"background-color":"#000000",margin:"0","max-width":"none",padding:"0"},this.originalFormatStyle={width:"",height:"",top:"",left:"",position:"","z-index":"","background-color":"",margin:"","max-width":"",padding:""},this.canvasTag=null,this.active=!1,this.isVideoPaused=!1,this.wasVideoPaused=!1,this.eventListenerManager=new f.a,this.beforeOpenEventListeners=[],this.closeEventListeners=[],this.logger=new c.a("FullscreenHelper"),this.parentsPropertiesList=[],this.logger.debug("new"),this.vpaidAd.subscribe(()=>this.isVideoPaused=!0,$.a.AdPaused),this.vpaidAd.subscribe(()=>this.isVideoPaused=!1,$.a.AdPlaying),!p.isIos()){const e=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];this.eventListenerManager.addMultiple(e,this.win,e=>{b.isFullscreen(this.win.document)?this.vpaidAd.resizeAd(this.win.screen.width,this.win.screen.height,"fullscreen"):(o.forEach(this.closeEventListeners,e=>{e()}),this.close())}),this.vpaidAd.subscribe(()=>this.eventListenerManager.removeMultiple(e),$.a.AdStopped)}this.responsive&&this.responsive.addOrientationChangeListener(()=>this.handleOrientationChange()),p.isIos()&&Ie.a.tryCatch(()=>{var e;a.b.fromNullable(null===(e=this.vpaidAd.getCreativeContainer())||void 0===e?void 0:e.contentWindow).forEach(e=>{this.eventListenerManager.add("touchmove",e,e=>{this.isActive()&&e.preventDefault()})})}).tapLeft(e=>this.logger.debug("Error when trying to access creative window to prevent touchmove on iOS",e))}static getPropertyToSave(e,t){return{name:t,value:e.style.getPropertyValue(t),priority:e.style.getPropertyPriority(t)}}handleOrientationChange(){this.active&&(this.logger.debug("orientation change, resizeAd"),this.responsive.resize(!0))}isActive(){return this.active}init(e){this.vpaidEnvironmentVars=e,this.vpaidEnvironmentVars.videoSlot&&(this.canvasTag=this.vpaidEnvironmentVars.videoSlot.canvas)}addBeforeOpenEventListener(e){o.indexOf(this.beforeOpenEventListeners,e)<0&&this.beforeOpenEventListeners.push(e)}addCloseEventListener(e){o.indexOf(this.closeEventListeners,e)<0&&this.closeEventListeners.push(e)}open(){this.active||(this.active=!0,o.forEach(this.beforeOpenEventListeners,e=>{e()}),b.addClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),p.isIos()?(this.overrideParentsProperties(),this.originalVpaidSize.width=Object(g.getBoundingClientRect)(this.formatContainer).width,this.originalVpaidSize.height=this.vpaidAd.getAdHeight(),b.addClass(this.formatContainer,"no-transition"),this.applyStyleRules(),this.components.hideAllComponents()):b.openFullscreen(this.fullscreenElement),this.responsive.resize(!0),this.isVideoPaused?(this.vpaidAd.resumeAd(),this.wasVideoPaused=!0):this.wasVideoPaused=!1)}close(){this.active&&(b.removeClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),p.isIos()?(this.restoreParentsProperties(),b.removeClass(this.formatContainer,"no-transition"),this.components.showAllComponents(),this.restoreStyleRules()):p.isAndroid()?setTimeout(()=>b.closeFullscreen(this.vpaidAd.getContainer()),100):b.closeFullscreen(this.fullscreenElement),this.wasVideoPaused&&this.vpaidAd.pauseAd(),this.active=!1,this.responsive.resize(!0),this.canvasTag&&this.resetCanvas(),o.forEach(this.closeEventListeners,e=>{e()}))}applyStyleRules(){for(let e in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(e)&&(this.originalFormatStyle[e]=this.formatContainer.style.getPropertyValue(e));for(let e in this.fullscreenFormatStyle)this.fullscreenFormatStyle.hasOwnProperty(e)&&this.formatContainer.style.setProperty(e,this.fullscreenFormatStyle[e])}restoreStyleRules(){for(let e in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(e)&&this.formatContainer.style.setProperty(e,this.originalFormatStyle[e])}resetCanvas(){this.logger.debug("reset canvas"),this.canvasTag.style.setProperty("position","relative"),this.canvasTag.style.setProperty("top","0"),this.canvasTag.style.setProperty("left","0")}overrideParentsProperties(){this.parentsPropertiesList=[];let e=b.findParentElements(this.formatContainer);o.forEach(e,e=>{let t={element:e,properties:[]};const i=this.win.getComputedStyle(e);i.zIndex&&"auto"!==i.zIndex&&(t.properties.push(je.getPropertyToSave(e,"z-index")),e.style.setProperty("z-index","auto","important"));Pe("none",["transform","-webkit-transform","transition","-webkit-transition"],t,e);Pe("auto",["will-change"],t,e),this.parentsPropertiesList.push(t)}),this.parentsPropertiesList.push({element:this.win.document.body,properties:[je.getPropertyToSave(this.win.document.body,"overflow")]}),this.win.document.body.style.setProperty("overflow","hidden")}restoreParentsProperties(){o.forEach(this.parentsPropertiesList,e=>{o.forEach(e.properties,t=>{e.element.style.removeProperty(t.name),e.element.style.setProperty(t.name,t.value,t.priority)})})}}var Le=i(48);const xe=({sliderIsEnabled:e,orientationIsLandscape:t,parentContainerIsInView:i})=>!!e||t&&!i,Ve=(e,t)=>e>t,Ne=["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],De=["","-webkit-","-moz-","-o-","-ms-"],Re=e=>{o.forEach(De,t=>{e.element.style.setProperty(t+"transition",`${e.property} ${e.duration}s ${e.effect}`)})},_e=e=>{o.forEach(De,t=>e.style.removeProperty(t+"transition"))},Me=e=>{e.style.removeProperty("transform-origin"),e.style.removeProperty("transform")},Fe=e=>{e.style.removeProperty("bottom"),e.style.removeProperty("right")},Ue=e=>{e.style.setProperty("z-index",String(ke.b)),e.style.setProperty("position","fixed")};class Be{constructor(e){this.format=e,this.originalPlayerZIndex=String(ke.c),this.behaviorIsEnabled=!1,this.transitionEndListenerManager=new f.a,this.transitionInProgress=!1,this.midpointIsReached=!1,this.timeoutSlotIsReached=!1,this.remainingTimeLastSmartInSec=0,this.timerOutOfSlot=null,this.timerSmart6=null,this.smartElapsedTimeInSec=0,this.detachedSlotState=a.b.empty(),this.currentTop=0,this.iOSRuler=a.b.empty(),this.window=e.placement.placementConfig.parentWindow.getWindow(),this.originalPlayerZIndex=this.format.playerContainer.style.getPropertyValue("z-index")}get isInDetachedSlot(){return this.detachedSlotState.nonEmpty()}toggleSmartPositionIfNeeded(){this.behaviorIsEnabled&&this.orientationIsLandscape===this.isOrientationLandscape()&&!this.transitionInProgress?(this.windowTopLimit=this.getWindowTopLimit(),this.detachedSlotState.match({some:e=>{switch(e){case"top":t=this.windowTopLimit,i=this.creativeTopLimit,t<=i&&this.transitionFromTopToNativeSlot();break;case"corner":this.isParentContainerInView()&&this.transitionFromCornerToNativeSlot()}var t,i},none:()=>{switch((({deviceIsDesktop:e,sliderIsEnabled:t,orientationIsLandscape:i})=>e||t||i?e||!e&&i||t?"corner":void 0:"top")({deviceIsDesktop:Object(p.isDesktop)(),sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape()})){case"corner":this.format.formatConfig.smart6Behavior.isCorner()&&(this.startSmart6Timer(),this.format.player.smartPosition.hideCloseButton()),xe({sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape(),parentContainerIsInView:this.isParentContainerInView()})&&this.transitionFromNativeSlotToCorner();break;case"top":this.updateCreativeTopLimit(),this.format.formatConfig.smart6Behavior.isTop()&&(this.startSmart6Timer(),this.format.player.smartPosition.hideCloseButton()),Ve(this.windowTopLimit,this.creativeTopLimit)&&this.transitionFromNativeSlotToTop()}}})):this.orientationIsLandscape=this.isOrientationLandscape()}enableBehavior(){this.nativeSlotPlaceholder=this.initNativeSlotPlaceholder(),this.format.getFullscreenHelper().addBeforeOpenEventListener(()=>this.onFullScreenOpen()),this.format.getFullscreenHelper().addCloseEventListener(()=>this.onFullScreenClose()),this.format.responsive.addOrientationChangeListener(()=>this.onOrientationChange()),this.orientationIsLandscape=this.isOrientationLandscape(),this.format.player.smartPosition.init(this.format.formatConfig.sliderBehavior.isEnabled(),this.format.formatConfig.smart6Behavior.isEnabled(),this.format.formatConfig.label.isEnabled(),()=>{this.showCloseButtonAtMidPoint()}),this.updateCreativeTopLimit(),this.behaviorIsEnabled=!0}disableBehavior(){this.behaviorIsEnabled&&(this.behaviorIsEnabled=!1,this.detachedSlotState.forEach(e=>{switch(e){case"top":this.transitionFromTopToNativeSlot();break;case"corner":this.transitionFromCornerToNativeSlot()}}),this.format.formatConfig.sliderBehavior.isEnabled()||this.nativeSlotPlaceholder.parentNode.removeChild(this.nativeSlotPlaceholder),Object(Le.e)(),this.iOSRuler=a.a)}moveToCornerPosition(){this.detachedSlotState=Object(a.c)("corner"),this.header||this.createSmartHeader();const e=this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.formatConfig.slider.closeButtonEnabled();this.format.player.smartPosition.setCornerPositionPlayerComponents({shouldShowCloseButton:e||this.timeoutSlotIsReached||this.midpointIsReached,showHeaderCloseButton:()=>this.header.showCloseButton()}),this.updateCloseButtonTimers(),Ue(this.format.playerContainer),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive(()=>this.handleDetachedSlotResize("corner")),Object(b.addClass)(this.format.playerContainer,Be.CUSTOMIZATION_CSS_CLASS.CORNER),this.executeNativeSlotPlaceholderFadeAnimation("#000000","#ffffff"),this.executeOncePlayerTransitionEnded().then(()=>{this.listenIOSNativeHeaderBarMovements(),this.setPlayerCornerPosition({withMarginFromEdge:!0}),_e(this.format.playerContainer),Me(this.format.playerContainer),this.transitionInProgress=!1}),this.slideInUpCornerPosition()}getOptimalDimension(e,t){return"corner"===t?this.format.responsive.getOptimalDimensionBasedOnSurface():this.format.responsive.getOptimalDimension(e)}slideOutDownCornerPosition(){const e=g.getBoundingClientRect(this.format.playerContainer).height;this.format.playerContainer.style.setProperty("transform-origin","bottom"),this.format.playerContainer.style.setProperty("transform",`translateY(${e+Be.MARGIN_FROM_EDGES_IN_PX}px)`),Re({element:this.format.playerContainer,property:"transform",duration:Be.TRANSITION_DURATION_IN_SECONDS,effect:"ease-in"})}transitionFromNativeSlotToCorner(){this.transitionInProgress=!0,this.showCompensationDiv(),this.moveToCornerPosition()}transitionFromNativeSlotToTop(){this.transitionInProgress=!0,this.showCompensationDiv(),this.updateCloseButtonTimers(),this.moveToTopPosition(),this.transitionInProgress=!1}createSmartHeader(){this.header=new ee,this.header.init(this.format.getVpaidAd(),this.format.getVolumeController()),this.header.smartCloseButton.onClickAction=()=>{this.disableBehavior(),this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.getVpaidAd().skipAd()},this.format.playerContainer.insertBefore(this.header.getElement(),this.format.playerContainer.firstChild)}shouldUpdateCloseButtonTimer(){return!(this.timeoutSlotIsReached||this.midpointIsReached||this.format.player.smartPosition.isCloseButtonMode(2)||this.format.formatConfig.smart6Behavior.isEnabled())}updateCloseButtonTimers(){this.shouldUpdateCloseButtonTimer()&&(this.remainingTimeLastSmartInSec=this.format.getVpaidAd().getAdRemainingTime(),this.timerOutOfSlot=this.showCloseButtonHandler())}startSmart6Timer(){this.timerSmart6||(this.timerSmart6=this.ensureSmart6DisabledOnComplete())}moveToTopPosition(){this.detachedSlotState=Object(a.c)("top"),Object(b.addClass)(this.format.playerContainer,Be.CUSTOMIZATION_CSS_CLASS.TOP),this.format.player.smartPosition.setTopPositionPlayerComponents({shouldShowCloseButton:this.timeoutSlotIsReached||this.midpointIsReached,onCloseButtonClick:()=>this.disableBehavior()}),Ue(this.format.playerContainer),this.handleFloatingHeaders(),this.format.playerContainer.style.setProperty("top",this.currentTop+"px"),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive(()=>this.handleDetachedSlotResize("top"))}slideInUpCornerPosition(){const e=g.getBoundingClientRect(this.format.playerContainer).height;this.header.show(),this.format.playerContainer.style.setProperty("bottom",`-${e}px`),this.format.playerContainer.style.setProperty("right",Be.MARGIN_FROM_EDGES_IN_PX+"px"),this.format.playerContainer.style.setProperty("transform-origin","bottom"),this.format.playerContainer.style.setProperty("transform",`translateY(-${e+Be.MARGIN_FROM_EDGES_IN_PX}px)`),Re({element:this.format.playerContainer,property:"transform",duration:Be.TRANSITION_DURATION_IN_SECONDS,effect:"ease-out"})}executeNativeSlotPlaceholderFadeAnimation(e,t){this.nativeSlotPlaceholder.style.setProperty("background-color",e),Re({element:this.nativeSlotPlaceholder,property:"background-color",duration:Be.TRANSITION_DURATION_IN_SECONDS,effect:"linear"}),this.nativeSlotPlaceholder.style.setProperty("background-color",t)}updateCreativeTopLimit(){var e;const t=this.detachedSlotState.isEmpty()?this.format.playerContainer:this.nativeSlotPlaceholder,i=null!==(e=window.FORCE_DEMO)&&void 0!==e&&e,{top:n,bottom:s}=g.getBoundingClientRect(t,!i),r=i?Object(b.getTop)(this.window,Object(b.findFloatingHeaders)(this.window,this.format.playerContainer,[this.format.playerContainer]),g.getWindowSize(this.window).height*Be.MAX_FLOATING_TOP):0,o=g.getScrollTop(this.window);this.creativeTopLimit=n===s?o:o+n-r}getWindowTopLimit(){return g.getScrollTop(this.window)+this.currentTop}transitionFromCornerToNativeSlot(){this.transitionInProgress=!0,Object(b.removeClass)(this.format.playerContainer,Be.CUSTOMIZATION_CSS_CLASS.CORNER),this.executeNativeSlotPlaceholderFadeAnimation("#ffffff","#000000"),this.executeOncePlayerTransitionEnded().then(()=>{this.format.player.smartPosition.cleanupCornerPositionSpecificUI(()=>this.header.showCloseButton()),this.header.hide(),Fe(this.format.playerContainer),this.moveToNativeSlotPosition(),_e(this.format.playerContainer),this.format.formatConfig.sliderBehavior.isEnabled()||Me(this.format.playerContainer),this.stopScrollListener(),this.transitionInProgress=!1}),this.slideOutDownCornerPosition()}transitionFromTopToNativeSlot(){Object(b.removeClass)(this.format.playerContainer,Be.CUSTOMIZATION_CSS_CLASS.TOP),this.transitionInProgress=!0,this.format.playerContainer.style.removeProperty("top"),this.format.player.smartPosition.cleanupTopPositionSpecificUI(),this.moveToNativeSlotPosition(),this.transitionInProgress=!1}moveToNativeSlotPosition(){this.detachedSlotState=a.a,(this.timerOutOfSlot||this.timerSmart6)&&(this.smartElapsedTimeInSec+=this.remainingTimeLastSmartInSec-this.format.getVpaidAd().getAdRemainingTime(),this.clearTimerOutOfSlot()),this.format.playerContainer.style.setProperty("position","relative"),this.format.playerContainer.style.setProperty("z-index",this.originalPlayerZIndex),this.nativeSlotPlaceholder.style.setProperty("display","none"),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive()}isParentContainerInView(){return Object(b.getPercentageInView)({element:this.format.parentContainer,elementAncestors:Object(b.findParentElements)(this.format.parentContainer),elementClientRect:Object(g.getBoundingClientRect)(this.format.parentContainer),mainWindow:this.window,elementHeight:this.format.parentContainer.offsetHeight})>=this.format.formatConfig.threshold.percentage()}showCompensationDiv(){const e=this.format.responsive.getOptimalDimension(this.format.parentContainer).height;this.nativeSlotPlaceholder.style.setProperty("display","block"),this.nativeSlotPlaceholder.style.setProperty("height",e+"px")}handleFloatingHeaders(){if(this.detachedSlotState.existsIf(e=>"top"===e)){const e=Object(b.getTop)(this.window,Object(b.findFloatingHeaders)(this.window,this.format.playerContainer,[this.format.playerContainer]),g.getWindowSize(this.window).height*Be.MAX_FLOATING_TOP);this.currentTop!==e&&(this.currentTop=e,this.format.playerContainer.style.setProperty("top",this.currentTop+"px"))}}handleDetachedSlotResize(e){const{width:t,height:i}=this.getOptimalDimension(this.format.parentContainer,e);this.format.getVpaidAd().resizeAd(t,i),this.handleFloatingHeaders()}initNativeSlotPlaceholder(){const e=this.window.document.createElement("div");return e.className="teads-player teads-compensation-div",e.style.setProperty("-webkit-box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("-moz-box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("background-color","#000000"),this.format.formatConfig.sliderBehavior.isEnabled()||(this.format.playerContainer.nextSibling?this.format.playerContainer.parentNode.insertBefore(e,this.format.playerContainer.nextSibling):this.format.playerContainer.parentNode.appendChild(e)),e}isOrientationLandscape(){if(Object(p.isDesktop)())return!0;const e=g.getWindowSize(this.window);return e.width>e.height}setPlayerCornerPosition(e){const t=e.withMarginFromEdge?Be.MARGIN_FROM_EDGES_IN_PX:0;this.format.playerContainer.style.setProperty("bottom",t+"px"),this.format.playerContainer.style.setProperty("right",t+"px"),this.handleIOSNativeHeaderBar(!0)}onFullScreenOpen(){this.detachedSlotState.existsIf(e=>"corner"===e)&&this.setPlayerCornerPosition({withMarginFromEdge:!1})}onFullScreenClose(){this.detachedSlotState.forEach(e=>{"corner"===e&&this.setPlayerCornerPosition({withMarginFromEdge:!0}),this.handleDetachedSlotResize(e)})}clearTimerOutOfSlot(){this.timerOutOfSlot&&(this.timerOutOfSlot.clear(),this.timerOutOfSlot=null)}showCloseButtonAtMidPoint(){if(this.timeoutSlotIsReached)return;this.midpointIsReached=!0;const e=this.format.getVpaidAd().getAdRemainingTime()-1,t=()=>this.format.getVpaidAd().unsubscribe(i,$.a.AdRemainingTimeChange),i=()=>{this.format.getVpaidAd().getAdRemainingTime()<e&&(this.showCloseButton(),t())};this.format.getVpaidAd().subscribe(i,$.a.AdRemainingTimeChange)}showCloseButtonHandler(){return y.c(()=>{if(!this.midpointIsReached){(this.format.formatConfig.sliderBehavior.isEnabled()?this.format.getVpaidAd().getAdDuration()-this.format.getVpaidAd().getAdRemainingTime():this.remainingTimeLastSmartInSec+this.smartElapsedTimeInSec-this.format.getVpaidAd().getAdRemainingTime())>=Be.TIME_IN_SEC_BEFORE_CLOSE_BUTTON&&(this.showCloseButton(),this.clearTimerOutOfSlot(),this.timeoutSlotIsReached=!0)}},Be.INTERVAL_DELAY_IN_MS)}ensureSmart6DisabledOnComplete(){return y.c(()=>{this.format.getVpaidAd().getAdDuration()-this.format.getVpaidAd().getAdRemainingTime()>Be.SMART_6_COUNTER&&this.disableBehavior(),this.behaviorIsEnabled||this.timerSmart6.clear()},Be.INTERVAL_DELAY_IN_MS)}showCloseButton(){this.detachedSlotState.forEach(e=>{"top"===e&&this.format.player.smartPosition.showCloseButton(),"corner"===e&&this.header.showCloseButton()})}executeOncePlayerTransitionEnded(){return new Promise(e=>{this.transitionEndListenerManager.addMultiple(Ne,this.format.playerContainer,()=>{this.transitionEndListenerManager.removeAll(),e()})})}onOrientationChange(){this.detachedSlotState.filter(e=>!this.format.getFullscreenHelper().isActive()).match({some:e=>{const t=xe({sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape(),parentContainerIsInView:this.isParentContainerInView()});switch(e){case"top":t&&this.transitionFromTopToCorner();break;case"corner":Ve(this.windowTopLimit,this.creativeTopLimit)&&!t?(this.updateCreativeTopLimit(),this.transitionFromCornerToTop()):Ve(this.windowTopLimit,this.creativeTopLimit)||t?this.format.formatConfig.sliderBehavior.isEnabled()&&this.isOrientationLandscape()?(this.handleIOSNativeHeaderBar(),this.listenIOSNativeHeaderBarMovements()):this.format.formatConfig.sliderBehavior.isEnabled()&&!this.isOrientationLandscape()&&(this.handleIOSNativeHeaderBar(),this.stopScrollListener()):this.transitionFromCornerToNativeSlot()}},none:()=>{this.format.responsive.resize(),this.isOrientationLandscape()||this.updateCreativeTopLimit()}})}transitionFromTopToCorner(){this.format.playerContainer.style.removeProperty("top"),this.showCompensationDiv(),this.moveToCornerPosition()}transitionFromCornerToTop(){this.stopScrollListener(),this.header.hide(),Fe(this.format.playerContainer),this.showCompensationDiv(),this.moveToTopPosition()}listenIOSNativeHeaderBarMovements(){if(Object(p.isIos)()&&this.isOrientationLandscape()&&!this.scrollListener){const e=this.format.placement.placementConfig.scrollSelector.getSlot();this.scrollListener=Object(fe.a)(()=>this.handleIOSNativeHeaderBar(),e,this.window.context),this.iOSRuler=Object(a.c)(Object(Le.a)(window)),Object(Le.d)(window)}}stopScrollListener(){this.scrollListener&&(Object(fe.b)(this.scrollListener),this.scrollListener=null)}handleIOSNativeHeaderBar(e=!1){if(this.behaviorIsEnabled&&this.iOSRuler.nonEmpty()){const t=!this.isOrientationLandscape()||e&&this.getWindowTopLimit()>0?Be.MARGIN_FROM_EDGES_IN_PX:Object(Le.b)(window)+Be.MARGIN_FROM_EDGES_IN_PX;this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.parentContainer.style.setProperty("bottom",t+"px"),this.format.playerContainer.style.setProperty("bottom",t+"px")}}}Be.MARGIN_FROM_EDGES_IN_PX=5,Be.TRANSITION_DURATION_IN_SECONDS=.4,Be.MAX_FLOATING_TOP=Object(p.isDesktop)()?.25:.2,Be.TIME_IN_SEC_BEFORE_CLOSE_BUTTON=5,Be.SMART_6_COUNTER=6.5,Be.INTERVAL_DELAY_IN_MS=300,Be.CUSTOMIZATION_CSS_CLASS={TOP:"smart-position-top",CORNER:"smart-position-corner"};var We=i(54);class He{constructor(e){this.format=e,this.initialized=!1,this.active=!1,this.logger=new c.a("BrandingMode")}isActive(){return this.active}isInitialized(){return this.initialized}init(){if(this.logger.debug("init called"),this.initialized)return void this.logger.warn("Branding mode helper has already been initialized");this.initialized=!0,this.vpaidEnvironmentVars=this.format.getEnvironmentVars();let e=this.format.getVpaidAd();e.showComponent("fullscreenbutton"),this.format.getFullscreenHelper().init(this.vpaidEnvironmentVars);let t=()=>{this.isFullscreenSupported()&&this.stop()};e.subscribe(t,$.a.AdClickThru,this),e.subscribe(()=>e.unsubscribe(t,$.a.AdClickThru),$.a.AdStopped),e.subscribe(this.toggle,B.a.FullscreenRequest,this),e.subscribe(()=>e.unsubscribe(this.toggle,B.a.FullscreenRequest),$.a.AdStopped),this.format.vpaidApi.getStudioData()||e.subscribe(this.stop,B.a.AdVideoComplete,this),e.subscribe(this.stop,B.a.EndscreenInit,this),e.subscribe(this.stop,B.a.AdStopped,this),this.format.getVolumeController().addUnmuteCallback(()=>this.onUnmute()),this.format.getVolumeController().addMuteCallback(()=>this.onMute())}deinit(){this.logger.debug("deinit called"),this.initialized=!1;let e=this.format.getVpaidAd(),t=()=>{this.isFullscreenSupported()&&this.stop()};e.subscribe(t,$.a.AdClickThru,this),e.subscribe(()=>e.unsubscribe(t,$.a.AdClickThru),$.a.AdStopped),e.unsubscribe(this.toggle,B.a.FullscreenRequest),e.unsubscribe(this.stop,B.a.AdVideoComplete),e.unsubscribe(this.stop,B.a.EndscreenInit),e.unsubscribe(this.stop,B.a.AdStopped),e.hideComponent("fullscreenbutton")}toggle(){this.initialized?this.active?this.stop():this.start():this.logger.warn("Cannot toggle branding mode helper before its initialization")}start(){this.active||(this.logger.debug("start"),this.initialVolume=this.format.getVolumeController().getVolume(),this.setVolume(this.format.formatConfig.volume.getMain()),this.isFullscreenSupported()?(this.format.getFullscreenHelper().open(),this.format.getVpaidAd().showComponent("fullscreenbutton")):this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!0)}stop(){this.active&&(this.logger.debug("stop"),this.format.getVolumeController().isMuted()&&(this.initialVolume=0),this.setVolume(this.initialVolume),this.isFullscreenSupported()?this.format.getFullscreenHelper().close():this.format.getVpaidAd().showComponent("fullscreenbutton"),this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!1)}setVolume(e){const t=()=>this.format.getVolumeController().setVolume(e);this.vpaidEnvironmentVars.videoSlot&&this.vpaidEnvironmentVars.videoSlot.audio&&!this.vpaidEnvironmentVars.videoSlot.audio.authorized?this.vpaidEnvironmentVars.videoSlot.audio.authorizeAudio(Object(S.a)(t,this)):t()}isFullscreenSupported(){let e=this.format.getVpaidAd(),t=this.format.getFullscreenHelper().isActive()||e.getAdWidth()>e.getAdHeight();return!p.isDesktop()&&!p.isAmp()&&!p.isIABSafeFrame()&&t}onUnmute(){this.isFullscreenSupported()||this.start()}onMute(){this.isFullscreenSupported()||this.stop()}}var ze=i(80),Ge=i(81),qe=i(148);var $e;function Ke(e,t,i,n){return`https://cm.teads.tv/v3/register-source?type=${e}&auction_id=${t}&creative_id=${i}&line_item_id=${n}`}function Ye(){var e,t;const i=null===(t=null===(e=document.featurePolicy)||void 0===e?void 0:e.allowedFeatures)||void 0===t?void 0:t.call(e);return i&&o.includes(i,"attribution-reporting")}!function(e){e.Navigation="navigation",e.Event="event"}($e||($e={}));class Xe extends Te{constructor(e,t,i,n,s,r,d){super(e,t,i,s,r,d),this.placement=e,this.formatConfig=t,this.player=i,this.adCallTrackOpts=n,this.hasLoggedPlayProblem=!1,this.adCallTracked=!1,this.getFunnelMacros=()=>{const e=a.b.fromNullable(this.slotType);return We.b({slotType:e})},this.formatConfig.adType.isDisplay()&&Object(b.addClass)(this.parentContainer,"teads-display"),Object(C.a)(this.formatConfig.portfolioItemId)&&(Object(b.addClass)(this.parentContainer,"teads-third-party-display"),o.includes([37,39],this.formatConfig.portfolioItemId)&&p.isIos()&&this.parentContainer.style.setProperty("-webkit-clip-path","inset(0)")),this.windowReferenceForViewability=this.getReferenceWindowForViewability(this.playerContainer)}load(e,t){p.isIABSafeFrame()&&!Object(qe.a)(this.formatConfig.portfolioItemId,this.placement.placementConfig.headerBiddingProvider.nonEmpty())?me.d(()=>super.load(e,t)):super.load(e,t)}getTemplateName(){return"inread"}start(){const e=this.placement.placementConfig.scrollSelector.getSlot();this.scrollListener=Object(fe.a)(e=>this.onScroll(e),e,this.win.context),p.isDesktop()&&this.setRealVisibilityInterval(),this.isInView=this.getInViewState(),this.formatConfig.vast.getContent()&&this.player.getMediafile()?super.start():this.onScroll()}onAdLoaded(){if(super.onAdLoaded(),this.extensions=a.b.fromNullable(this.player).map(e=>e.getPlugin("Extensions")),this.extensions.forEach(e=>this.loadAdVerificationScripts(e)),this.fullscreenHelper.addCloseEventListener(()=>{this.isSmartPositioned()||this.responsive&&this.responsive.resize(!0)}),this.isVertical){let e=()=>{this.responsive.unsetResponsive(),this.parentContainer.style.setProperty("display","none"),this.isInView=!1,this.requestPauseAd()};this.responsive.addOrientationChangeListener(t=>{this.isFullscreen()||(this.responsive.isLandscape?e():(this.parentContainer.style.setProperty("display","block"),this.responsive.setResponsive(),this.onScroll(t)))}),this.fullscreenHelper.addCloseEventListener(()=>{this.responsive&&this.responsive.isLandscape&&e()})}p.isDesktop()||this.vpaidAd.render(this.vpaidAd.getVPAID()),p.isIABSafeFrame()&&!this.states.hasOpened&&this.openFormat(),this.onScroll(),this.isInView=this.getInViewState()}onAdVideoStart(){super.onAdVideoStart(),this.smartPositionHelper&&this.smartPositionHelper.enableBehavior(),this.states.hasStarted&&this.states.hasOpened&&this.fitContainerToContent()}onAdSizeChange(){if(super.onAdSizeChange(),this.states.hasOpened){const e=this.fitContainerToContent();p.isAmp()&&pe.g(e)}}onAdVideoComplete(){super.onAdVideoComplete(),this.smartPositionHelper&&this.smartPositionHelper.disableBehavior()}onVpaidReady(){super.onVpaidReady(),this.fullscreenHelper=new je(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new He(this),this.shouldInstanciateSmart()&&(this.smartPositionHelper=new Be(this)),this.vpaidAd.subscribe(()=>this.pauseAdIfShouldNotBePlaying(),$.a.AdStarted),this.vpaidAd.subscribe(()=>this.pauseAdIfShouldNotBePlaying(),$.a.AdRemainingTimeChange),this.vpaidAd.subscribe(()=>this.clearRealVisibilityInterval(),$.a.AdError),this.vpaidAd.subscribe(()=>this.clearRealVisibilityInterval(),$.a.AdStopped),this.vpaidAd.subscribe(()=>this.clearRealVisibilityInterval(),$.a.AdSkipped),this.vpaidAd.subscribe(()=>this.clearRealVisibilityInterval(),$.a.AdVideoComplete),Ye()&&this.vpaidAd.subscribe(()=>this.registerAttributionReportingEvent(),$.a.AdImpression)}close(e){super.close(e),this.clearRealVisibilityInterval()}startInView(){this.states.hasStarted&&(this.formatConfig.videoPause.isThreshold()||this.isVertical||this.states.hasCompleted)&&this.requestResumeAd(),this.volumeController.startInView()}endInView(){this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?this.requestPauseAd():this.volumeController.endInView()}fitContainerToContent(e=!1){var t;const i=this.getEnvironmentVars();if(this.vpaidApi.isStudioDisplay());else if(p.isIos()&&!a.b.fromNullable(null===(t=i.videoSlot)||void 0===t?void 0:t.mediaProxy).isEmpty()){if(i.videoSlot.mediaProxy.getStatus()!==Ge.a.READY)return}if((this.states.hasOpened||e)&&!this.isFullscreen()){let e=g.getBoundingClientRect(this.placement.getInnerContainer()).height;return this.parentContainer.style.setProperty("height",e+"px"),e}}manageInView(e){e!==this.isInView&&(e?this.startInView():this.endInView()),this.isInView=e}openFormat(){var e;p.isIABSafeFrame()||(this.states.hasOpened=!0),this.formatConfig.animations.setExpandDuration(this.parentContainer);const t=this.getEnvironmentVars();if(this.vpaidApi.isStudioDisplay()||!this.formatConfig.adType.isVideo());else if(p.isIos()&&!a.b.fromNullable(null===(e=t.videoSlot)||void 0===e?void 0:e.mediaProxy).isEmpty()){let e=t.videoSlot.mediaProxy,i=e.getStatus();if(i===Ge.a.READY)this.logger.debug("mediaProxy is ready !",t.videoSlot.src);else{if(i===Ge.a.ERROR)return void this.logger.error("mediaProxy error, video is not available for the moment",t.videoSlot.src);if(!t.videoSlot.src||i<Ge.a.READY)return this.logger.debug("mediaProxy not ready or video.src not setted, delay inread opening",t.videoSlot.src),void e.listen(ze.a.READY,()=>{this.openFormat()},!1)}}const i=this.fitContainerToContent(!0);this.logger.debug(`Format (pageId = ${this.formatConfig.pageId}, placementId = ${this.formatConfig.placementId}) has been opened`),this.responsive&&!this.isSmartPositioned()&&this.responsive.setResponsive(),p.isIABSafeFrame()&&me.f(Se(this.vpaidAd.getAdHeight(),[this.components.getComponent("label"),this.components.getComponent("credits")])||i,e=>{this.states.hasOpened=e,this.vpaidApi.adMetadata.forEach(e=>this.responsive.updateAndResizeWithAdVideoMetadata(e))})}trackAdCall(e){!e||this.states.hasStopped||this.adCallTracked||(this.adCallTracked=!0,Object(Ae.i)({placementKey:this.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placement.wigo,logger:this.logger,headerBiddingProvider:this.placement.placementConfig.headerBiddingProvider,baseUrlWithQueryParameters:this.adCallTrackOpts}),this.initAdTimingMark.forEach(e=>{const t=Math.round(Object(u.f)()-e);Object(l.isFunction)(this.vpaidAd.getVPAID().handleAdCallTimeout)&&this.vpaidAd.getVPAID().handleAdCallTimeout(t),this.logger.info("Duration between initAd and adCall",t)}))}onScroll(e){if(super.onScroll(e),!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.toggleSmartPositionIfNeeded();const e=this.getInViewState();this.trackAdCall(e),!this.isSmartPositioned()&&this.states.isReady&&(this.states.hasOpened||this.isWindowVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&e)&&this.openFormat(),this.states.hasOpened&&!this.states.hasStopped&&(this.states.hasStarted?this.manageInView(e):(this.viewabilityTagsHelper.onScroll(),this.canStart(e)&&(this.startAd(),p.isDesktop()||this.setRealVisibilityInterval()))))}}canStart(e){return!this.formatConfig.videoStart.isThreshold()||e||this.states.isReplay||this.shouldBypassDeepVisibilityCheck()}canPlay(e){return this.formatConfig.videoPause.isNo()||e}isFullscreen(){return!!this.fullscreenHelper&&this.fullscreenHelper.isActive()}isSmartPositioned(){return this.smartPositionHelper&&this.smartPositionHelper.isInDetachedSlot}getReferenceWindowForViewability(e){var t;return null!==(t=this.win.FORCE_DEMO)&&void 0!==t&&t?Object(b.getWindow)(e):Object(b.findTopWindow)(e)}getViewportInViewState(){var e;const t=this.vpaidAd?this.vpaidAd.getAdHeight():Xe.DEFAULT_AD_HEIGHT,i=null!==(e=this.win.FORCE_DEMO)&&void 0!==e&&e;return!!this.isSmartPositioned()||Object(b.isInView)({element:this.playerContainer,elementAncestors:Object(b.findParentElements)(this.playerContainer),elementClientRect:g.getBoundingClientRect(this.playerContainer,!i),mainWindow:this.windowReferenceForViewability,thresholdCoefficient:this.formatConfig.threshold.get()/100,elementHeight:t})}setRealVisibilityInterval(){this.realVisibilityInterval=this.realVisibilityInterval.orElse(()=>a.b.fromNullable(y.c(()=>this.checkRealVisibility(),250)))}checkRealVisibility(){if(!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.toggleSmartPositionIfNeeded();const e=this.getInViewState();this.trackAdCall(e),this.states.isReady&&(this.states.hasOpened?this.states.hasOpened&&!this.states.hasStopped&&(this.states.hasStarted?(this.manageInView(e),Object(C.b)(this.formatConfig.portfolioItemId)&&this.fitContainerToContent()):(this.viewabilityTagsHelper.onScroll(),this.canStart(e)&&this.startAd())):this.isWindowVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&e)&&this.openFormat())}}pauseAdIfShouldNotBePlaying(){if(this.states.isPlaying){const e=this.getInViewState();if(!(this.states.hasStarted?this.canPlay(e):this.canStart(e))&&(this.isInView=!1,this.requestPauseAd(),!this.hasLoggedPlayProblem)){this.hasLoggedPlayProblem=!0;const e=this.linearAd&&this.linearAd.id?this.linearAd.id:"0",t=this.linearAd&&this.linearAd.creativeId?this.linearAd.creativeId:"0";this.sumologicLogger.info(`shouldnt-be-playing ${this.placement.pid} ${t} ${e}`)}}}shouldBypassDeepVisibilityCheck(){var e;const t=this.getEnvironmentVars();return p.isIos()&&p.isCanvasUsed()&&!a.b.fromNullable(null===(e=t.videoSlot)||void 0===e?void 0:e.mediaProxy).isEmpty()&&this.getViewportInViewState()}isVerticalLandscape(){return this.isVertical&&this.responsive&&this.responsive.isLandscape}shouldInstanciateSmart(){return!this.isVertical&&(this.formatConfig.smartPosition.isEnabled()||this.formatConfig.smart6Behavior.isEnabled())}insertViewabilityScripts(e,t){o.forEach(e,({vendor:e,url:i})=>{const n=document.createElement("script");n.type="text/javascript",n.src=i,n.async=!0,"IAS"===e?this.parentContainer.insertBefore(n,this.parentContainer.firstChild):"DoubleVerify"===e?t.parentElement.appendChild(n):t.insertBefore(n,this.playerContainer.firstChild)})}loadAdVerificationScripts(e){e.getExtension(we.a.AD_VERIFICATIONS).map(t=>e.retrieveCreativePrefetchAdVerificationScriptUrls(t)).map(e=>{const t=this.getFunnelMacros();return o.map(e,({vendor:e,url:i})=>({vendor:e,url:We.h(t)(i)}))}).forEach(e=>{const t=()=>{this.insertViewabilityScripts(e,this.playerContainer)};Object(r.c)(this.player.getLinearAd().adParameters,this.player.getMediafile().url)?this.viewabilityTagsHelper.onceThresholdReached(t):t()})}registerAttributionReportingEvent(){const e=this.auctionId.getOrNull(),t=this.linearAd.creativeId,i=this.formatConfig.insertionId;if(e&&t&&i){const n=Ke($e.Event,e,t,i),s=new Image(1,1);s.id="attribution-reporting",s.src="data:text/plain,",s.setAttribute("attributionsrc",n),s.style.display="none",this.playerContainer.appendChild(s)}}}Xe.DEFAULT_AD_HEIGHT=1;class Qe extends Te{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r),this.placement=e,this.config=t,this.player=i}load(e,t){super.load(e,t)}getTemplateName(){return"inread"}onAdLoaded(){super.onAdLoaded(),this.smartPositionHelper.enableBehavior(),this.smartPositionHelper.moveToCornerPosition();const e=this.smartPositionHelper.getOptimalDimension(this.parentContainer,"corner");this.parentContainer.style.setProperty("position","fixed"),this.parentContainer.style.setProperty("overflow","visible"),this.parentContainer.style.setProperty("width",e.width+"px"),this.parentContainer.style.setProperty("height",e.height+"px"),this.parentContainer.style.setProperty("right",Be.MARGIN_FROM_EDGES_IN_PX+"px"),this.parentContainer.style.setProperty("bottom",Be.MARGIN_FROM_EDGES_IN_PX+"px"),this.startAd()}onAdVideoStart(){super.onAdVideoStart(),this.openFormat()}fitContainerToContent(e){return null}getViewportInViewState(){return!0}initInternalResponsive(){super.initInternalResponsive(!1)}onVpaidReady(){super.onVpaidReady(),this.fullscreenHelper=new je(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new He(this),this.formatConfig.smartPosition.setValue({corner:!0,top:!1,mustBypassWhitelist:!1}),this.smartPositionHelper=new Be(this)}openFormat(){this.states.hasOpened=!0,this.placement.placementConfig.css.applyRulesOn(this.parentContainer)}}const Je=e=>Object(o.includes)([70],e);function Ze(e,t,i=null,n){var s;const r=n&&n.display||e.adType.isDisplay()||e.adType.isNative(),o=function(e,t,i){let n={disable:!e.closeButton.isEnabled(),countdown:e.closeButton.getCountdown(),listenSkippableState:!1};(e.closeButton.hasToGetValueFromVast()||n.disable&&e.smartPosition.isTop())&&(n.disable=!1,t&&t.skipDelay?n.countdown=t.skipDelay:n.listenSkippableState=!0);i.isSliderEnabled()&&(n.disable=!0,n.listenSkippableState=!1);return n}(e,i,t),a=function(e,t){let i={disable:e.disable,listenSkippableState:e.listenSkippableState};t.isSliderEnabled()&&(i.disable=!0,i.listenSkippableState=!1);return i}(o,t);return{clicktoplay:{disable:!e.videoStart.isClick()},closebutton:{disable:o.disable,countdown:o.countdown,listenSkippableState:o.listenSkippableState},soundbutton:{disable:!!(r||e.sliderBehavior.isEnabled()||t.isSliderEnabled())||!e.soundButton.isEnabled,startOffset:e.soundButton.countdown,type:e.soundButton.type},progressbar:{disable:r||Je(e.portfolioItemId)||!e.progressBar.isEnabled()},clickbutton:{disable:!!n||Je(e.portfolioItemId)||!e.callButton.isEnabled(),startOffset:e.callButton.getCountdown(),text:e.callButton.getText()},label:{disable:!0,html:e.label.getHTML()},credits:{formatName:e.formatName.get(),disable:!0,text:e.credits.getText(),url:e.credits.getLink()},endscreen:{disable:!!(r||e.sliderBehavior.isEnabled()||t.isSliderEnabled())||(e.end.isCollapse()||e.end.isEndScreen()&&!e.endScreen.isEnabled()),countdown:e.endScreen.getCountdown(),callButton:e.endScreen.getCallButton(),closeButton:{disable:a.disable,listenSkippableState:a.listenSkippableState},replayButton:e.endScreen.getReplayButton(),autoClose:e.endScreen.getAutoClose()},fullscreenbutton:{disable:r||!e.playerClick.isFullscreen(),preventDefault:!0},brandlogo:{disable:!e.brandLogo.isEnabled(),url:e.brandLogo.getUrl()},startscreen:{disable:!e.adType.isVideo()},earlyclickoverlay:{displayTime:null!==(s=e.earlyClickProtectionDuration)&&void 0!==s?s:0},bannervideobottom:{disable:!(e.adType.isVideo()&&Je(e.portfolioItemId)),text:e.bannerVideoBottom.getText()},hourglass:{disable:!e.smart6Behavior.isEnabled()}}}var et=i(143),tt=i(115);function it({instancesStore:e,placement:t,formatConfig:i,vastPlayer:n,sumologicLogger:s,adCallTrackOpts:r,auctionId:o,viewerId:a}){i.sliderBehavior.isEnabled()?t.enableSlider():t.isSliderEnabled()&&i.sliderBehavior.setValue({enable:!0});const d=i.sliderBehavior.isEnabled()?new Qe(t,i,n,o,a,s):new Xe(t,i,n,r,o,a,s);return function(e,t,i){const n=i.formatConfig.formatName.get();e[n]||(e[n]=[]);e[n].push(i),i.setWigo(t)}(e,t.wigo,d),et.b(),d}var nt=i(12),st=i(126),rt=i(7);function ot(){return p.isDesktop()}class at{constructor(){this.resize=l.noop,this.logger=new c.a("FixedBackground"),this.initialized=!1,this.loaded=!1,this.loadListeners=[],this.resizeContainer=e=>{e&&"orientationchange"===e.type&&(this.center=null);const t=g.getBoundingClientRect(this.container,!1),i=g.getWindowSize(this.win),n=Math.round(t.width),s=this.image.height*n/this.image.width;if(this.baseContainer.style.setProperty("width",n+"px"),this.baseContainer.style.setProperty("height",Math.round(t.height)+"px"),ot())this.center=this.center||(i.height-s)/2,this.baseContainer.style.setProperty("background-size",`${Math.round(n)}px ${Math.round(s)}px`),this.baseContainer.style.setProperty("background-position",`${Math.round(t.left)}px ${this.center}px`);else{this.fixedContainer.style.setProperty("width",Math.round(n)+"px"),this.fixedContainer.style.setProperty("height",Math.round(1.2*(i.height+s))+"px"),this.fixedContainer.style.setProperty("background-size",`${Math.round(n)}px ${Math.round(s)}px`),this.fixedContainer.style.setProperty("left",Math.round(t.left)+"px"),this.center=this.center||(i.height-s)/2%s;const e=this.center>0?this.center-s:this.center;this.fixedContainer.style.setProperty("top",e+"px")}},this.resizeVideoContainer=e=>{const t=g.getBoundingClientRect(this.container,!1),i=Math.round(t.width),n=Math.round(this.video.videoHeight*i/this.video.videoWidth);this.baseContainer.style.setProperty("width",i+"px"),this.baseContainer.style.setProperty("height",Math.round(t.height)+"px"),this.video.style.setProperty("width",i+"px"),this.video.width=i,this.video.style.setProperty("height",n+"px"),this.video.height=n,this.video.style.setProperty("left",Math.round(t.left)+"px")}}init(e,t){this.initialized||(this.initialized=!0,this.container=e,this.win=b.getWindow(this.container),b.addClass(t,"teads-display-format"),this.eventListenerManager=new f.a,this.eventListenerManager.addMultiple(["resize","orientationchange"],this.win,()=>this.resize()),this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.container,()=>this.resize()))}loadImage(e,t){new Promise(t=>{this.image=new Image,this.image.onerror=e=>t([!1,a.b.empty()]),this.image.onload=e=>{this.image.naturalWidth&&this.image.naturalHeight?t([!0,a.b.fromNullable(this.image)]):(this.logger.error("setFixedBackgroundImage: Asset size error: cannot retrieve image dimensions"),t([!1,a.b.fromNullable(this.image)]))},this.image.src=e}).then(([e,i])=>{t(e,i),e&&this.triggerLoadListeners()})}loadVideo(e,t,i){this.video&&this.destroy(),this.video=t.videoSlot,new Promise(t=>{this.video.addEventListener(rt.a.ERROR,()=>{t([!1,a.b.empty()])}),this.video.addEventListener(rt.a.LOADED_METADATA,()=>{this.video.videoWidth&&this.video.videoHeight?t([!0,a.b.fromNullable(this.video)]):(this.logger.error("setFixedBackgroundVideo: Asset size error: cannot retrieve video dimensions"),t([!1,a.b.fromNullable(this.video)]))}),this.video.src===e?(this.video.currentTime=0,t([!0,a.b.fromNullable(this.video)])):(this.video.setAttribute("preload","auto"),this.video.src=e)}).then(([e,t])=>{i(e,t),e&&this.triggerLoadListeners()})}initContainer(){var e,t;this.resize=this.resizeContainer,ae(at.CSS,this.win,at.STYLE_NODE_ID),this.baseContainer=null!==(e=this.baseContainer)&&void 0!==e?e:this.win.document.createElement("div"),this.baseContainer.className=at.CSSCLASSES.absolute,ot()?this.baseContainer.style.setProperty("background-image",`url(${this.image.src})`):(this.fixedContainer=null!==(t=this.fixedContainer)&&void 0!==t?t:this.win.document.createElement("div"),this.fixedContainer.style.setProperty("background-image",`url(${this.image.src})`),this.fixedContainer.className=at.CSSCLASSES.fixed,this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important"),this.baseContainer.appendChild(this.fixedContainer)),this.resize()}initVideoContainer(e){var t;if(this.resize=this.resizeVideoContainer,ae(at.CSS,this.win,at.STYLE_NODE_ID),this.baseContainer=null!==(t=this.baseContainer)&&void 0!==t?t:this.win.document.createElement("div"),this.baseContainer.className=at.CSSCLASSES.absolute,this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important"),(this.baseContainer.style.getPropertyValue("-webkit-clip-path")||this.baseContainer.style.getPropertyValue("clip-path"))&&b.addClass(this.video,at.CSSCLASSES.videoScroller),Object(p.isIos)()){const[t,i]=Object(p.getOS)().version.split(".").map(e=>parseInt(e,10));(12===t&&i>=2||t>12)&&e.subscribe(()=>{requestAnimationFrame(()=>{this.baseContainer.style.setProperty("display","none"),requestAnimationFrame(()=>{this.baseContainer.style.setProperty("display","block"),this.video.play()})})},$.a.AdVideoStart)}e.subscribe(()=>this.video.play(),$.a.AdPlaying),e.subscribe(()=>this.video.pause(),$.a.AdPaused),this.eventListenerManager.add("scroll",this.win,()=>{const t=this.isInView(this.container,e)?1:0;this.video.style.setProperty("opacity",""+t,"important")}),this.baseContainer.appendChild(this.video),this.resize()}append(){this.container.style.setProperty("position","relative"),this.container.style.setProperty("z-index","100"),this.container.parentNode.insertBefore(this.baseContainer,this.container)}destroy(){this.baseContainer.parentNode.removeChild(this.baseContainer),this.eventListenerManager.removeAll()}getBaseContainer(){return this.baseContainer}getFixedContainer(){return this.fixedContainer}getImage(){return this.image}getVideo(){return this.video}isInView(e,t){return b.isInView({element:e,elementAncestors:b.findParentElements(e),elementClientRect:g.getBoundingClientRect(e),mainWindow:this.win,thresholdCoefficient:.001,elementHeight:t.getAdHeight()})}get isLoaded(){return this.loaded}onLoad(e){this.loaded?e():this.loadListeners.push(e)}triggerLoadListeners(){this.loaded=!0;for(const e of this.loadListeners)e()}}at.CSS=R.a,at.CSSCLASSES={absolute:"teads-display-absolute",fixed:"teads-display-fixed",clickZone:"teads-display-clickzone",videoScroller:"teads-video-scroller"},at.STYLE_NODE_ID="teads-inread-display";var dt=i(152),ct=i(119),lt=i(69),ht=i(131),ut=i(78),pt=i(46);let gt,mt;function ft(e){return"Scroller | "+e}function bt(e,t){y.d(()=>{try{const n=e.placement.placementConfig.parentWindow.getWindow(),s=Object(ut.d)(n),r=e.playerContainer,o=r.getBoundingClientRect(),a=r.querySelector(":scope > iframe").getBoundingClientRect(),d=a.left,c=s-a.right,l=Math.abs(d-c),h=n===n.parent;i=`scroller type = ${t} | isInterscroller = ${ht.a.isEnabled} | isTopFrame = ${h} | player left = ${o.left} | iframe left = ${d} right = ${c} diff = ${l}`,gt.info(ft(i)),mt.info(i)}catch(e){!function(e){gt.error(ft(e)),mt.error(e)}("Failure | "+e)}var i},500)}function vt(e,t){!function(e){null!=gt||(gt=new pt.c("https://s8t.teads.tv/logs/format/http-source",1e3,"1160",a.b.of(e.placement.pid),{getSamplingThreshold:pt.d,sendLog:pt.e,getFullContext:p.getFullContext,isHeaderBiddingTag:()=>!1})),null!=mt||(mt=new c.a("Scroller"))}(e);const i=e.getVpaidAd();i.status===nt.a.STARTED?bt(e,t):i.subscribe(()=>{bt(e,t)},$.a.AdStarted)}var At,yt,wt;!function(e){e[e.InreadCarouselLandscape=15]="InreadCarouselLandscape",e[e.InreadCarouselSquare=16]="InreadCarouselSquare",e[e.SingleImagePerformanceLandscape=43]="SingleImagePerformanceLandscape",e[e.SingleImagePerformanceSquare=56]="SingleImagePerformanceSquare",e[e.SingleImagePerformanceVertical=57]="SingleImagePerformanceVertical",e[e.CarouselPerformanceLandscape=58]="CarouselPerformanceLandscape",e[e.CarouselPerformanceSquare=59]="CarouselPerformanceSquare",e[e.CarouselPerformanceVertical=60]="CarouselPerformanceVertical",e[e.SingleVideoPerformanceLandscape=65]="SingleVideoPerformanceLandscape",e[e.SingleVideoPerformanceSquare=66]="SingleVideoPerformanceSquare",e[e.SingleVideoPerformanceVertical=67]="SingleVideoPerformanceVertical",e[e.SingleImagePerformanceBanner=68]="SingleImagePerformanceBanner",e[e.CarouselPerformanceBanner=71]="CarouselPerformanceBanner",e[e.SingleVideoPerformanceBanner=72]="SingleVideoPerformanceBanner"}(At||(At={})),function(e){e[e.InreadSocialVideoLandscape=44]="InreadSocialVideoLandscape",e[e.InreadSocialVideoSquare=45]="InreadSocialVideoSquare",e[e.InreadSocialVideoVertical=46]="InreadSocialVideoVertical",e[e.InreadSocialImageLandscape=47]="InreadSocialImageLandscape",e[e.InreadSocialImageSquare=48]="InreadSocialImageSquare",e[e.InreadSocialImageVertical=49]="InreadSocialImageVertical",e[e.InreadSocialVideo=50]="InreadSocialVideo",e[e.InreadSocialImage=51]="InreadSocialImage"}(yt||(yt={})),function(e){e[e.BannerVideo=70]="BannerVideo"}(wt||(wt={}));class Et{constructor(e,t,i){this.placement=e,this.format=t,this.gdprIab=i,this.adMetadata=a.a,this.logger=new c.a("VPAIDApi"),this.fixedBackgroundImage=new at,this.fixedBackgroundVideo=new at,this.allowedSafeFrameHeight=null;const n=this.placement.getPlayerContainer(),s=b.getWindow(n);this.communicationBridge=new st.a(this,s),this.communicationBridge.startListening()}close(){this.communicationBridge&&this.communicationBridge.stopListening()}setStudioData(e){const t=this.format.getVpaidAd();this.studioData=e,t.status>=nt.a.STARTED?this.applyStudioDataOnUI():t.subscribe(Object(S.a)(this.applyStudioDataOnUI,this),$.a.AdStarted)}applyStudioDataOnUI(){if(this.studioData)try{ve.b.vast.setStudioCreativeId(this.format.placement.key)(this.studioData.studio_cid);const e=this.format.getVpaidAd(),t=e.getComponent("soundbutton");t&&t.setShowOnVideoStart(!this.studioData.display);const i=e.getComponent("progressbar");i&&(i.setShowOnVideoProgress(!this.studioData.display),i.setShowOnVideoStart(!this.studioData.display)),this.setSoundControlVisibility(!this.studioData.display),this.setProgressControlVisibility(!this.studioData.display)}catch(e){this.logger.error("setStudioData error "+e.message)}else this.logger.error("applyStudioDataOnUI error","studioData needed to apply them on UI")}getSumologicOption(){return{enabled:h.b.isSumologicLogsEnabled,pid:this.placement.pid,formatVersion:"1160"}}isStudioDisplay(){return this.studioData&&this.studioData.display}getStudioData(){try{this.studioData=this.studioData||tt.b(this.format.linearAd)}catch(e){this.logger.error("getStudioData error","format has not been instantiated yet",e)}return this.studioData}getContextData(){return e=this.format.linearAd,t=this.gdprIab,Object.assign(Object.assign({},dt.a(e)),{gdpr:{applies:Object(lt.b)(Object(lt.a)(t.status)),consent:t.consent}});var e,t}isReplay(){return this.format.states.isReplay}activateTapMode(e=!0){}performTapMode(e){let t=this.format.getBrandingMode();t&&(void 0===e&&(e=!t.isActive()),e?t.isInitialized()?t.isActive()||t.start():(t.init(),t.start()):t.isActive()?(t.stop(),t.deinit()):t.isInitialized()&&t.deinit())}isFullscreen(){return this.format.getFullscreenHelper().isActive()}requestFullscreen(){try{this.format.getVpaidAd().dispatchCustomEvent("FullscreenRequest")}catch(e){this.logger.error("requestFullscreen error "+e.message)}}setSoundControlVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("soundbutton"):t.hideComponent("soundbutton")}catch(e){this.logger.error("setSoundControlVisibility error "+e.message)}}setFullscreenButtonVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("fullscreenbutton"):t.hideComponent("fullscreenbutton")}catch(e){this.logger.error("setFullscreenButtonVisibility error "+e.message)}}setProgressControlVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("progressbar"):t.hideComponent("progressbar")}catch(e){this.logger.error("setProgressControlVisibility error "+e.message)}}setStartScreenVisibility(e){var t,i;try{const n=this.format.getVpaidAd(),s="startscreen";if(n.isRendered)e?n.showComponent(s):n.hideComponent(s);else{const r=n.getConfig();null!==(t=(i=r.components)[s])&&void 0!==t||(i[s]={}),r.components[s].disable=!e}}catch(e){this.logger.error("setStartScreenVisibility error "+e.message)}}isVideoBanner(){return this.format.formatConfig.portfolioItemId in wt}getCreativeSize(){return this.format.formatConfig.creativeSize}getSlotBounds(){var e;const t=!(null!==(e=window.FORCE_DEMO)&&void 0!==e&&e);return Ie.a.tryCatch(()=>{var e,i,n,s;const r=this.placement.getPlayerContainer(),o=b.getWindow(r),d=g.getBoundingClientRect(r,t);if(Object(l.isNull)(this.allowedSafeFrameHeight)&&(Object(p.isIABSafeFrame)()||Object(p.isAmpSF)())){const t=a.b.fromNullable(null===(e=this.format.components.getComponent("label"))||void 0===e?void 0:e.getElement()).map(e=>g.getBoundingClientRect(e).height).getOrValue(0);this.allowedSafeFrameHeight=(null===(i=null===me.b||void 0===me.b?void 0:me.b.exp)||void 0===i?void 0:i.b)-t}const c=null!==(s=null===(n=this.format.responsive)||void 0===n?void 0:n.getContainerWidth())&&void 0!==s?s:d.width,h=this.allowedSafeFrameHeight?this.allowedSafeFrameHeight:Math.max(d.height,o.innerHeight);return Object.assign(Object.assign({},d),{viewportHeight:o.innerHeight,viewportWidth:o.innerWidth,maxWidth:c,maxHeight:h})}).orElse(e=>(this.logger.error("getSlotBounds error "+e.message),Object(Ie.b)(e))).toOption().getOrNull()}sendAdClickThru(e){Ie.a.tryCatch(()=>{this.format.getVpaidAd().dispatchCustomEvent($.a.AdClickThru,e)}).tapLeft(e=>this.logger.error("sendAdClickThru error "+e.message))}sendVideoMetadata(e){var t;((t=this.format.formatConfig.portfolioItemId)in At||t in yt)&&(this.adMetadata=a.b.fromNullable(e)),Ie.a.tryCatch(()=>{this.format.getVpaidAd().dispatchCustomEvent(Oe.a.AdVideoMetadata,e)}).tapLeft(e=>this.logger.error("sendVideoMetadata error "+e.message))}hideCredits(){Ie.a.tryCatch(()=>{var e;return a.b.fromNullable(null===(e=this.format.components.getComponent("credits"))||void 0===e?void 0:e.getElement()).forEach(e=>{e.style.display="none"})}).tapLeft(e=>this.logger.error("Something went wrong when trying to hide the credits",e))}sendReplayRequest(){Ie.a.tryCatch(()=>{this.format.getVpaidAd().dispatchCustomEvent(B.a.ReplayRequest)}).tapLeft(e=>this.logger.error("sendReplayRequest error "+e.message))}setFixedBackgroundImage(e,t=l.noop){vt(this.format,"image"),this.fixedBackgroundImage.init(this.placement.getPlayerContainer(),this.placement.getParentContainer());const i=this.format.getVpaidAd();this.setBackgroundColor("transparent"),this.hideVideoContainer(),p.isUIWebview()||i.subscribe(()=>this.fixedBackgroundImage.resize(),$.a.AdSizeChange),i.subscribe(()=>this.fixedBackgroundImage.resize(),$.a.AdStarted),i.subscribe(()=>this.fixedBackgroundImage.destroy(),$.a.AdStopped),i.subscribe(()=>this.fixedBackgroundImage.destroy(),$.a.AdError),this.fixedBackgroundImage.loadImage(e,()=>{this.fixedBackgroundImage.initContainer(),this.logger.debug("background image ready !"),i.status>=nt.a.LOADED?(this.fixedBackgroundImage.append(),this.checkTouchOverflow(this.fixedBackgroundImage)):i.subscribe(()=>{this.fixedBackgroundImage.append(),this.checkTouchOverflow(this.fixedBackgroundImage)},$.a.AdLoaded),t()})}setFixedBackgroundVideo(e,t=l.noop){vt(this.format,"video"),this.fixedBackgroundVideo.init(this.placement.getPlayerContainer(),this.placement.getParentContainer());const i=this.format.getVpaidAd();this.setBackgroundColor("transparent"),this.hideVideoContainer(),p.isUIWebview()||i.subscribe(()=>this.fixedBackgroundVideo.resize(),$.a.AdSizeChange),i.subscribe(()=>this.fixedBackgroundVideo.resize(),$.a.AdStarted),i.subscribe(()=>this.fixedBackgroundVideo.destroy(),$.a.AdStopped),i.subscribe(()=>this.fixedBackgroundVideo.destroy(),$.a.AdError),this.fixedBackgroundVideo.loadVideo(e,this.format.getEnvironmentVars(),e=>{e&&(this.fixedBackgroundVideo.initVideoContainer(i),this.logger.debug("background video ready !"),i.status>=nt.a.LOADED?(this.fixedBackgroundVideo.append(),this.checkTouchOverflow(this.fixedBackgroundVideo)):i.subscribe(()=>{this.fixedBackgroundVideo.append(),this.checkTouchOverflow(this.fixedBackgroundVideo)},$.a.AdLoaded)),t()})}hideVideoContainer(){(e=>(Object(p.isAmp)()||Object(p.isIABSafeFrame)())&&"IFRAME"!==e.tagName?e.ownerDocument:e.contentDocument)(this.format.getVpaidAd().getCreativeContainer()).getElementById("video-container").style.setProperty("display","none")}setBackgroundColor(e){try{this.format.getVpaidAd().getVPAIDContainer().style.setProperty("background-color",e)}catch(e){this.logger.error("setBackgroundColor error "+e.message)}}addDeviceOrientationListener(){ct.a(this,this.communicationBridge,b.getWindow(this.placement.getPlayerContainer()))}getUserLocation(e,t){ct.c(b.getWindow(this.placement.getPlayerContainer()),e,t)}customizeUI(e){a.b.fromNullable(this.placement).match({some:t=>a.b.fromNullable(this.format).match({some:t=>a.b.fromNullable(t.getVpaidAd()).match({some:t=>{const i=b.getWindow(t.getMainComponentsContainer());var n,s;n="vpaid-ui-custom-css",s=i,a.b.fromNullable(null==s?void 0:s.document).flatMap(e=>a.b.fromNullable(e.getElementById(n))).forEach(e=>a.b.fromNullable(e.parentNode).forEach(t=>t.removeChild(e))),ae(e,i,"vpaid-ui-custom-css")},none:()=>this.logger.error("customizeUI: getVpaidAd() returned undefined or null")}),none:()=>this.logger.error("customizeUI: getFormat() returned undefined or null")}),none:()=>this.logger.error("customizeUI: this.placement is undefined or null")})}getTeadsInfo(){return{placementId:this.format.formatConfig.placementId||null,connectionId:this.format.formatConfig.connectionId||null,insertionId:this.format.formatConfig.insertionId||null,creativeId:parseInt(this.format.linearAd.creativeId,10)||null,clickPixels:Object(o.map)(this.format.linearAd.tracking.click,({url:e})=>e),slotType:this.format.slotType,environment:p.getEnv()}}triggerViewabilityTag(e){try{this.format.viewabilityTagsHelper.onceThresholdReached(e)}catch(e){this.logger.error("triggerViewabilityTag error "+e.message)}}isMobile(){return p.isMobile()||p.isTablet()}isSDK(){return Object(p.isSDK)()}getCreativeTag(e){var t,i;try{return this.format.viewabilityTagsHelper.getCreativeTag(e,a.b.fromNullable(null===(i=null===(t=this.format)||void 0===t?void 0:t.formatConfig)||void 0===i?void 0:i.portfolioItemId))}catch(t){return this.logger.error(`"Unable to get creative tag: "${t}"`),e}}requestInterscroller(){Object(ut.a)()&&(this.interscroller||(this.logger.info("[Interscroller] Enable behavior"),this.interscroller=new ht.a(this.format),this.interscroller.enableBehavior(),this.setStartScreenVisibility(!1)))}checkTouchOverflow(e){const t=(e,i)=>e===i||!(!i||!i.parentElement)&&t(e,i.parentElement);try{const i=this.placement.getParentContainer(),n=e.getBaseContainer();((e,i)=>{const n=g.getBoundingClientRect(e),s=b.getDocument(e).elementFromPoint(n.left+n.width/2,n.top+i);return s===e||t(e,s)})(i,-10)&&n.style.setProperty("z-index","-1")}catch(e){}}}Et.STUDIO_CID_MACRO_METADATA="[STUDIO_CID]";var Ot=i(139),Ct=i(16);class It{constructor(e){this.ui=e}init(e,t,i,n){this.closeButton=a.b.fromNullable(this.ui.getComponent("closebutton")),this.closeButtonMode=this.closeButton.map(e=>e.mode).getOrNull(),this.soundButton=a.b.fromNullable(this.ui.getComponent("soundbutton")),this.clickButton=a.b.fromNullable(this.ui.getComponent("clickbutton")),this.adChoicesButton=a.b.fromNullable(this.ui.getComponent("adchoices")),this.hourglass=a.b.fromNullable(this.ui.getComponent("hourglass")),this.labelIsEnabled=i,Object(p.isDesktop)()&&this.hourglass.forEach(e=>e.center(this.labelIsEnabled)),!this.closeButton||2===this.closeButtonMode||e||t||this.ui.subscribe(n,$.a.AdVideoMidpoint)}setCornerPositionPlayerComponents(e){this.clickButton.forEach(e=>{e.hide(),e.getConfig().disable=!0}),this.soundButton.forEach(e=>e.hide()),this.closeButton.forEach(e=>e.hide()),this.adChoicesButton.forEach(e=>e.hide()),this.hourglass.forEach(e=>e.center(this.labelIsEnabled)),2===this.closeButtonMode&&this.closeButton.forEach(t=>t.changeOnCountdownEnded(()=>{t.show(),e.showHeaderCloseButton()})),e.shouldShowCloseButton&&e.showHeaderCloseButton()}setTopPositionPlayerComponents(e){this.clickButton.forEach(e=>{e.hide(),e.getConfig().disable=!0}),this.closeButton.forEach(t=>t.onClickAction=Object(a.c)(e.onCloseButtonClick)),this.adChoicesButton.forEach(e=>e.show()),1===this.closeButtonMode&&e.shouldShowCloseButton&&this.closeButton.forEach(e=>e.show())}cleanupCornerPositionSpecificUI(e){this.clickButton.forEach(e=>{e.show(),e.getConfig().disable=!1}),this.adChoicesButton.forEach(e=>e.show()),this.soundButton.forEach(e=>e.show()),1!==this.closeButtonMode&&this.closeButton.forEach(e=>e.show()),this.hourglass.forEach(e=>e.center(this.labelIsEnabled)),2===this.closeButtonMode&&this.closeButton.forEach(t=>t.changeOnCountdownEnded(()=>{t.show(),e()}))}cleanupTopPositionSpecificUI(){this.clickButton.forEach(e=>{e.show(),e.getConfig().disable=!1}),this.closeButton.forEach(e=>e.restoreOnClickAction()),1===this.closeButtonMode&&this.closeButton.forEach(e=>e.hide())}isCloseButtonMode(e){return e===this.closeButtonMode}showCloseButton(){this.closeButton.forEach(e=>e.show())}hideCloseButton(){this.closeButton.forEach(e=>e.hide())}showHourglass(){this.hourglass.forEach(e=>e.show())}}var St=i(72),Tt=i(53),kt=i(76),Pt=i(147),jt=i(159),Lt=i.n(jt);const xt=Lt.a;function Vt(e){var t=[];return t.length>0&&(e=e.replace('id="main-container"','id="main-container" class="'+t.join(" ")+'"')),e}const Nt=Vt(Lt.a);var Dt=i(77);function Rt(e,t,i=!0){const n=e[t];n&&n.isEnabled()&&(i?n.show():n.hide())}function _t(e,t=!0){o.forEach(e,(function(e){e.isEnabled()&&(t?e.show():e.hide())}))}var Mt=i(177),Ft=i.n(Mt);class Ut extends Q{constructor(){super(...arguments),this.timerClass="countdown-timer"}initAutoCountdown(e=0){this.initTimer(!0,e)}initManualCountdown(){this.initTimer(!1,0)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}setCountdown(e){this.countdown=e,this.updateDisplay()}resume(){this.paused=!1}pause(){this.paused=!0}isPaused(){return this.paused}isEnded(){return this.ended}setEndedCallback(e){this.callback=e}removeEndedCallback(){this.callback=null}initTimer(e,t){if(super.init(),this.countdown=t,!Object(l.isNumber)(this.countdown)||e&&t<=0)return void this.onEnded();const i=ie.a(Ut.TEMPLATE,{"countdown-duration":e?this.countdown.toString():"","countdown-id":"countdown-"+A.rand(10)});if(this.getElement().innerHTML=i,this.countdownTextElement=this.getElement().querySelector("."+this.timerClass),e){const e=()=>{this.isPaused()||this.countdown--,this.countdown<=0?(this.hide(),this.onEnded()):this.updateDisplay()};this.timerInterval=setInterval(e,1e3)}}updateDisplay(){this.countdownTextElement&&this.countdownTextElement.setAttribute&&this.countdownTextElement.setAttribute("data-countdown",this.countdown.toString())}onEnded(){if(this.timerInterval&&clearInterval(this.timerInterval),this.ended=!0,this.hide(),this.callback&&"function"==typeof this.callback)try{this.callback()}catch(e){this.logger.error("countdown ended callback failled",e)}}}Ut.TEMPLATE=Ft.a;function Bt(e){var t="00";e>60&&(t=Math.floor(e/60)<10?"0":"");return t+=":"+(e<10?"0":"")+e}class Wt extends Q{constructor(){super(...arguments),this.placeholders=["currentTime","totalTime","remainingTime","countdown"]}init(){this.setText(this.config.text)}setText(e=""){this.renderText(e),this.havePlaceholder(e)&&!this.haveProgressCallback&&(this.haveProgressCallback=!0,this.vpaid.subscribe(()=>{this.renderText(e)},$.a.AdRemainingTimeChange))}renderText(e){this.textNode&&this.getElement().removeChild(this.textNode),this.textNode=document.createElement("span"),this.textNode.innerHTML=this.havePlaceholder(e)?this.replacePlaceholders(e):e,this.getElement().appendChild(this.textNode)}replacePlaceholders(e){const t={};return Object(o.forEach)(this.placeholders,e=>{t[e]=this.getPlaceholderValue(e)}),ie.a(e,t)}havePlaceholder(e){const t=new RegExp("({{"+this.placeholders.join("}}|{{")+"}})","g");return!!e.match(t)}getPlaceholderValue(e){let t=K(this.vpaid);t=t<0||isNaN(t)?0:Math.floor(t);const i=Math.floor(this.vpaid.getAdRemainingTime());switch(e){case"currentTime":return Bt(t);case"totalTime":return Bt(Math.floor(this.vpaid.getAdDuration()));case"remainingTime":return Bt(i);case"countdown":return String((this.config.countdown||0)-t)}}}var Ht=i(178),zt=i.n(Ht);class Gt extends Q{init(){this.logger.debug("init endscreen"),this.showOnVideoStart=!1;var e=this.element.getAttribute("style");this.element.setAttribute("style",(e?e+";":"")+" opacity: 0.8!important; background-color: #ffffff;"),this.getElement().innerHTML=Gt.TEMPLATE,this.vpaid.subscribe(()=>{if(this.logger.debug("video complete"),this.videoComplete=!0,this.dispatchVpaidEvent($.a.AdVideoComplete),this.ui.getConfig().noAutoStop){this.show(),this.initLayout();let e=this.ui.getVPAIDContainer();e.style.setProperty("filter","blur(3px)"),e.style.setProperty("webkit-filter","blur(3px)"),this.dispatchVpaidEvent(B.a.EndscreenInit)}},$.a.AdVideoComplete),this.vpaid.subscribe(()=>{this.videoComplete&&!this.ui.getConfig().noAutoStop&&(this.show(),this.initLayout(),this.dispatchVpaidEvent(B.a.EndscreenInit))},$.a.AdStopped),this.hide()}getOverridenEvents(){return this.videoComplete?[$.a.AdStopped]:[$.a.AdVideoComplete]}getOverridenMethods(){return this.isVisible()?["pauseAd","resumeAd"]:[]}onOverridenMethod(e,t){this.countdown&&("pauseAd"===e?this.countdown.pause():"resumeAd"===e&&this.countdown.resume())}onMethod(e,t=[]){"resizeAd"===e&&this.videoComplete&&(this.logger.debug("resizeAd from endscreen",t),this.resize(t[0],t[1]),this.dispatchVpaidEvent($.a.AdSizeChange))}initLayout(){var e;if(this.replayButton=g.getElementsByClassName("replay-button",this.getElement(),this.ui.getContentWindow())[0],this.replayButton){g.addEventListener("click",this.replayButton,()=>{this.onReplayClick()});try{a.b.fromNullable(null===(e=this.config.replayButton)||void 0===e?void 0:e.text).forEach(e=>{g.getElementsByClassName("text",this.replayButton,this.ui.getContentWindow())[0].innerHTML=e})}catch(e){this.logger.error("No text on replay button")}p.isEdgeTouchScreen()&&(this.replayButton.className="button edge-touch-screen replay-button")}else this.logger.debug("No replayButton on endscreen !");if(this.callButton=g.getElementsByClassName("call-button",this.getElement(),this.ui.getContentWindow())[0],this.callButton&&this.config.callButton&&this.ui.getConfig().clickthrough){if(g.addEventListener("click",this.callButton,()=>{this.dispatchUiEvent(B.a.ClickRequest),this.onActionClick()}),this.config.callButton.text){var t=this.callButton.querySelector(".icon span");if(t){let e=Gt.CSSClassMapping[this.config.callButton.type]||(()=>{for(let e in Gt.CSSClassMapping)return Gt.CSSClassMapping[e]})();b.addClass(t,e)}try{g.getElementsByClassName("text",this.callButton,this.ui.getContentWindow())[0].innerHTML=this.config.callButton.text}catch(e){this.logger.error("No text on callButton")}p.isEdgeTouchScreen()&&(this.callButton.className="button edge-touch-screen call-button")}}else this.callButton&&this.callButton.parentNode&&this.callButton.parentNode.removeChild(this.callButton),this.logger.debug("No callButton on endscreen !");this.adChoicesButton=g.getElementsByClassName("adchoices",this.getElement(),this.ui.getContentWindow())[0],this.adChoicesButton?this.ui.getConfig().showAdChoicesIcon?(p.isMobile()||(g.addEventListener("mouseover",this.adChoicesButton,()=>{b.addClass(this.adChoicesButton,"expanded"),this.adChoicesButton.style.setProperty("width","auto"),this.adChoicesButton.style.setProperty("height","15px"),this.adChoicesButton.style.setProperty("padding","0px 17px 1px 4px")}),g.addEventListener("mouseout",this.adChoicesButton,()=>{b.removeClass(this.adChoicesButton,"expanded")})),g.addEventListener("click",this.adChoicesButton,()=>{this.dispatchUiEvent(B.a.AdChoicesClickRequest)})):(b.removeClass(this.adChoicesButton,"show"),b.addClass(this.adChoicesButton,"hide")):this.logger.debug("No adChoicesButton on endscreen !"),this.closeButton=g.getElementsByClassName("close-button",this.getElement(),this.ui.getContentWindow())[0],this.closeButton?!this.config.closeButton||this.config.closeButton.disable||this.config.closeButton.listenSkippableState&&!this.vpaid.getAdSkippableState()?(b.removeClass(this.closeButton,"show"),b.addClass(this.closeButton,"hide")):g.addEventListener("click",this.closeButton,()=>{this.dispatchVpaidEvent($.a.AdUserClose),this.closeAd()}):this.logger.debug("No closeButton on endscreen !");var i=g.getElementsByClassName("countdown",this.getElement(),this.ui.getContentWindow())[0];i?(this.countdown=new Ut(this.ui,i,this.vpaid,{}),this.config.autoClose&&this.countdown.setEndedCallback(()=>{this.logger.debug("Countdown ended and autoClose on, close ad"),this.closeAd()}),this.countdown.initAutoCountdown(this.config.countdown),this.countdown.show()):this.logger.debug("No countdown on endscreen"),this.resize(this.ui.getAdWidth(),this.ui.getAdHeight())}resize(e,t){}onClick(e){}onReplayClick(){this.clearCloseInterval(),this.ui.getConfig().noAutoStop&&this.vpaid.stopAd(),this.videoComplete=!1,this.dispatchUiEvent(B.a.ReplayRequest)}onActionClick(){var e=this.ui.getConfig().clickthrough||null;this.dispatchVpaidEvent($.a.AdClickThru,{url:e,id:null,playerHandles:!0})}clearCloseInterval(){this.countdown&&(this.countdown.removeEndedCallback(),this.countdown.stopTimer())}closeAd(){this.clearCloseInterval(),this.ui.stopAd()}}Gt.CSSClassMapping={learnMore:"icon-learnmore",shopNow:"icon-shop",contactUs:"icon-contact",signUp:"icon-signup"},Gt.TEMPLATE=zt.a;const qt={fullscreenbutton:class extends Q{init(){this.eventName=B.a.FullscreenRequest,this.showOnVideoStart=!1,super.init(),this.show()}bindClick(){g.addEventListener("mousedown",this.getElement(),e=>{this.onClick(e)})}},earlyclickoverlay:class extends Q{constructor(){super(...arguments),this.startTimer=()=>{setTimeout(()=>this.hide(),this.config.displayTime),this.vpaid.unsubscribe(this.startTimer,$.a.AdStarted)}}init(){this.config.displayTime>0&&(this.eventName=B.a.EarlyClickRequest,this.vpaid.subscribe(this.startTimer,$.a.AdStarted),super.init(),this.show())}onVideoStart(){}},mutebutton:J,progressbar:class extends Q{constructor(){super(...arguments),this.showOnVideoProgress=!0}init(){if(this.progressbar=g.getElementsByClassName("progress",this.getElement(),this.ui.getContentWindow())[0],this.progressBarContainer=this.getElement(),this.progressBarContainer.style.setProperty("width","100%"),!this.progressbar)return this.hide();this.vpaid.subscribe(()=>{this.onProgress()},$.a.AdRemainingTimeChange),this.vpaid.subscribe(()=>{this.hide()},$.a.AdVideoComplete),super.init()}setShowOnVideoProgress(e){this.showOnVideoProgress=e}getShowOnVideoProgress(){return this.showOnVideoProgress}onProgress(){var e=K(this.vpaid);this.vpaid.getAdDuration()>0&&e>0?(!this.isVisible()&&this.showOnVideoProgress&&this.show(),this.progressbar.style.setProperty("width",e/this.vpaid.getAdDuration()*100+"%")):this.hide()}},hourglass:class extends Q{init(){this.createCountdown(),super.init()}show(){void 0!==this.countdown&&this.countdown.show(),this.vpaid.subscribe(()=>{this.onAdRemainingTimeChange()},$.a.AdRemainingTimeChange),this.vpaid.subscribe(()=>{this.onAdVideoComplete()},$.a.AdVideoComplete),super.show()}hide(){void 0!==this.countdown&&this.countdown.hide(),this.vpaid.unsubscribe(()=>{this.onAdRemainingTimeChange()},$.a.AdRemainingTimeChange),this.vpaid.unsubscribe(()=>{this.onAdVideoComplete()},$.a.AdVideoComplete),super.hide()}center(e){const t=this.getElement().classList;e?t.add("center"):t.remove("center")}createCountdown(){const e=document.createElement("div");e.className="countdown",this.getElement().appendChild(e),this.countdown=new Ut(this.ui,e,this.vpaid,{}),this.countdown.initManualCountdown()}onAdRemainingTimeChange(){this.isVisible()&&Object(l.isNumber)(this.vpaid.getAdRemainingTime())&&this.countdown.setCountdown(Math.ceil(this.vpaid.getAdRemainingTime()))}onAdVideoComplete(){this.hide()}},playpausebutton:class extends Q{init(){this.eventName=B.a.PlayPauseRequest,this.vpaid.subscribe(()=>{this.onPause()},$.a.AdPaused),this.vpaid.subscribe(()=>{this.onPause()},$.a.AdVideoComplete),this.vpaid.subscribe(()=>{this.onPlay()},$.a.AdPlaying),this.vpaid.subscribe(()=>{this.onPlay()},$.a.AdVideoStart),super.init()}onClick(e){super.onClick(e),this.isPlaying?this.vpaid.pauseAd():this.vpaid.resumeAd()}onPlay(){this.isPlaying=!0,b.addClass(this.getElement(),"playing")}onPause(){this.isPlaying=!1,b.removeClass(this.getElement(),"playing")}},progresstext:class extends Q{init(){this.vpaid.subscribe(()=>{var e=this.vpaid.getAdRemainingTime();isNaN(e)&&(e=this.vpaid.getAdDuration()),this.getElement().innerHTML="Your video in "+Math.ceil(e)+" sec"},$.a.AdRemainingTimeChange)}},skipbutton:class extends Q{init(){const e=a.b.fromNullable(this.ui.getConfig().skipoffset);if(this.eventName=B.a.SkipRequest,this.config.listenSkippableState)return void this.hide();const t=setInterval(()=>{this.vpaid.getAdSkippableState()?this.vpaid.getAdSkippableState()&&(clearInterval(t),this.getElement().style.setProperty("cursor","pointer"),this.getElement().innerHTML="Skip Ad >>",this.show()):e.filter(e=>e>0).forEach(e=>{const t=Math.floor(e-K(this.vpaid));this.getElement().innerHTML="Skip in "+(isNaN(t)?e:t<0?0:t)+" sec",this.show()})},1e3);super.init()}onClick(e){super.onClick(e),this.vpaid.getAdSkippableState()&&this.vpaid.skipAd()}},closebutton:class extends Q{constructor(){super(...arguments),this.onClickAction=a.a}init(){if(this.countdownValue=a.b.fromNullable(this.config.countdown).filter(e=>e>=0).getOrElse(()=>this.ui.getConfig().skipoffset),this.eventName=B.a.CollapseRequest,this.vpaid.subscribe(()=>{this.videoEnded=!0},$.a.AdVideoComplete),this.config.listenSkippableState)this.mode=1,this.vpaid.subscribe(()=>{this.vpaid.getAdSkippableState()?this.show():this.hide()},$.a.AdSkippableStateChange);else if(Object(l.isNumber)(this.countdownValue)&&this.countdownValue>0){this.mode=2;const e=this.insertCountDownElement();this.countdown=new Ut(this.ui,e,this.vpaid,{}),this.countdown.setEndedCallback(()=>this.onCountdownEnded())}else 0===this.countdownValue&&(this.mode=3,this.countdownEnded=!0,this.show())}onMethod(e,t){this.countdown&&this.countdownInitiated&&!this.countdownEnded&&a.b.fromNullable({pauseAd:()=>this.countdown.pause(),resumeAd:()=>this.countdown.resume()}[e]).forEach(e=>e())}show(){super.show();const e=this.getElement().getElementsByClassName("close-button icon-close")[0];this.countdown&&!this.countdownEnded||b.removeClass(e,"hide")}restoreOnClickAction(){this.onClickAction=a.a}changeOnCountdownEnded(e){this.countdown.setEndedCallback(()=>{this.countdown.hide(),this.countdownEnded=!0,e()})}onVideoStart(){this.countdownInitiated||this.config.listenSkippableState||(super.onVideoStart(),this.countdown.initAutoCountdown(this.countdownValue),this.countdown.show(),this.countdownInitiated=!0)}onClick(e){this.onClickAction.match({some:e=>{e()},none:()=>{this.countdownEnded&&(this.videoEnded?super.onClick(e):(this.dispatchUiEvent(B.a.CollapseRequest),this.vpaid.skipAd()))}})}insertCountDownElement(){const e=document.createElement("div");return e.className="countdown",this.getElement().appendChild(e),e}onCountdownEnded(){this.countdown.hide(),this.countdownEnded=!0,this.show()}},uibutton:class extends Q{init(){var e=!0;this.eventName=B.a.UIButtonRequest,g.addEventListener("click",this.getElement(),t=>{this.onClick(t),e?this.ui.hideAllComponents():this.ui.showAllComponents(),this.ui.showComponent("uibutton"),e=!e,b.toggleClass(this.getElement(),"ui-invisible")})}},textfield:Wt,clicktoplay:class extends Q{init(){this.showOnVideoStart=!1,this.eventName=B.a.ClickToPlayRequest}onMethod(e,t=[]){"startAd"===e&&(this.show(),this.dispatchVpaidEvent($.a.AdStarted))}getOverridenEvents(){return[$.a.AdStarted]}getOverridenMethods(){return["startAd"]}onClick(e){super.onClick(e),b.addClass(this.getElement(),"loading"),this.vpaid.subscribe(()=>{this.remove()},$.a.AdStarted),this.remove(),this.vpaid.startAd()}},clickbutton:class extends Wt{init(){if(this.clickthrough=this.ui.getConfig().clickthrough,this.eventName=B.a.ClickRequest,this.config.text&&this.clickthrough){const e=document.createElement("div");e.className="text",e.innerHTML=this.config.text,this.getElement().appendChild(e)}else this.hide();this.vpaid.subscribe(()=>{this.hide()},$.a.AdVideoComplete)}onVideoStart(){this.showOnVideoStart&&this.config.text&&this.clickthrough&&this.show()}onClick(e){super.onClick(e),this.dispatchVpaidEvent($.a.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})}},soundbutton:class extends J{init(){super.init(),this.eventName=B.a.SoundToggleRequest;const e=document.createElement("div");e.className=Z.OFF,this.getElement().appendChild(e);const t=()=>{Object(b.replaceClass)(e,this.vpaid.getAdVolume()>0?Z.ON:Z.OFF,this.vpaid.getAdVolume()>0?Z.OFF:Z.ON)};this.vpaid.subscribe(t,$.a.AdVolumeChange),this.vpaid.subscribe(t,$.a.AdStarted)}setAdVolume(){}onClick(e){super.onClick(e)}},label:class extends Q{constructor(){super(...arguments),this.defaultText="Advertising"}init(){let e=this.config.html&&""!==this.config.html?this.config.html:this.config.text||this.defaultText;this.getElement().innerHTML=e,this.getElement().setAttribute("style",this.config.style||""),this.show()}},credits:class extends Q{constructor(){super(...arguments),this.defaultLink="https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads"}init(){this.config.text=this.config.text||"Ads by [Teads]";const e=this.config.text.replace(/\[([^\]]*)\]/g,'<span class="teads-ui-component-credits-blue">$1</span>'),t=this.config.url||this.defaultLink;this.getElement().innerHTML='<a href="'+t+'" target="_blank">'+e+"</a>",this.show()}},endscreen:Gt,brandlogo:class extends Q{init(){this.clickthrough=a.b.fromNullable(this.ui.getConfig().clickthrough),this.eventName=B.a.ClickRequest;this.load(()=>{this.getElement().style.setProperty("background-image","url("+this.config.url+")")})}load(e){a.b.fromNullable(this.config.url).forEach(t=>{const i=new Image;i.onload=()=>e(),i.onerror=e=>this.hide(),i.src=t})}onVideoStart(){this.showOnVideoStart&&this.show()}onClick(e){super.onClick(e),this.clickthrough.forEach(e=>{this.dispatchVpaidEvent($.a.AdClickThru,{url:e,id:this.config.id,playerHandles:!0})})}},countdown:Ut,startscreen:class extends Q{init(){this.showOnVideoStart=!1,this.element.style.setProperty("z-index","2"),this.show(),this.vpaid.subscribe(()=>this.hide(),$.a.AdStarted)}},adchoices:class extends Q{init(){if(this.ui.getConfig().showAdChoicesIcon){this.eventName=B.a.AdChoicesClickRequest,p.isMobile()||(g.addEventListener("mouseover",this.getElement(),Object(S.a)(this.onMouseOver,this)),g.addEventListener("mouseout",this.getElement(),Object(S.a)(this.onMouseOut,this)));const e=this.getElement().style;e.setProperty("width","auto"),e.setProperty("height","15px"),e.setProperty("padding","1px 17px 1px 4px"),this.vpaid.subscribe(()=>{this.hide()},$.a.AdVideoComplete)}else this.remove()}onMouseOver(){b.addClass(this.getElement(),"expanded")}onMouseOut(){b.removeClass(this.getElement(),"expanded")}},bannervideobottom:class extends Wt{init(){if(this.clickthrough=this.ui.getConfig().clickthrough,this.config.text&&this.clickthrough){const e=document.createElement("div");e.className="container";const t=document.createElement("a");t.className="cta",t.innerHTML=this.config.text,e.appendChild(t),this.getElement().appendChild(e),this.show()}else this.hide()}onClick(e){super.onClick(e),this.dispatchVpaidEvent($.a.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})}}};var $t=i(111);class Kt extends Ee.a{constructor(e,t,i,n){if(super(),this.mainContainer=e,this.config=i,this.loaderConfig=n,this.isFullscreen=!1,this.components=[],this.componentsByName={},this.logger=new c.a("ui.VPAIDUI"),this.initAdStartTime=0,this.logger.debug("Init Layout",e,i),this.config.container){this.container=this.config.container;let e=this.mainContainer.firstElementChild;e&&"main-container"===e.id&&this.mainContainer.removeChild(e)}else this.container=b.createIframe("vpaid-ui");this.container.parentNode||this.mainContainer.appendChild(this.container),a.b.fromNullable(this.container.contentWindow).forEach(e=>{e.document.write(t),e.document.close(),this.initHeavyAdInterventionListener(e),p.isAmp()||p.isIABSafeFrame()||g.addEventListener("resize",e,()=>{this.logger.debug("resize on player Iframe detected, trigger an AdSizeChange VPAID event"),this.dispatchEvent($.a.AdSizeChange)}),this.mainComponentsContainer=e.document.getElementById("main-container")}),(p.isAmp()||p.isIABSafeFrame())&&(this.mainContainer.appendChild(this.mainComponentsContainer),this.mainContainer.removeChild(this.container)),a.b.fromNullable(this.mainComponentsContainer.ownerDocument).forEach(e=>{this.videoComponentsContainer=e.getElementById("layout-video-component")})}get isRendered(){return this.rendered}initAd(e,t,i,n,s="",r={}){if(this.vpaid)return this.resize(e,t,i),this.initAdStartTime=Object(u.f)(),this.logger.debug("initAd"),super.initAd(e,t,i,n,s,r);this.logger.error("You must register vpaid creative to be wrapped using setVPAID() method")}startAd(){this.status<nt.a.LOADED?this.dispatchEvent($.a.AdLog,"VPAID not started, use initAd(), and wait for AdLoaded event before call startAd() method"):this.status>=nt.a.STARTING?this.dispatchEvent($.a.AdLog,"cannot call startAd() twice, already started"):(this.render(this.getVPAID()),this.logger.debug("startAd"),super.startAd())}resizeAd(e,t,i="normal"){e<=0||t<=0||(this.resize(e,t,i),super.resizeAd(e,t,i))}stopAd(){const e=()=>{y.d(()=>{this.container.parentNode&&this.container.parentNode.removeChild(this.container)},2e3),this.dispatchedEvents[$.a.AdStopped]||this.dispatchEvent($.a.AdStopped)};this.isStopped?(this.logger.debug("Wrapped vpaid already stopped, remove UI"),e()):(this.logger.debug("Wrapped vpaid not stopped, try to stop it"),this.vpaid.subscribe(e,$.a.AdStopped),super.stopAd())}pauseAd(){this.callVPAIDMethod("pauseAd")}resumeAd(){this.callVPAIDMethod("resumeAd")}getAdWidth(){return this.isRendered&&!this.isStopped&&super.getAdWidth()?super.getAdWidth():g.getBoundingClientRect(this.getMainComponentsContainer()).width}getAdHeight(){return this.isRendered&&!this.isStopped&&super.getAdHeight()?super.getAdHeight():g.getBoundingClientRect(this.getMainComponentsContainer()).height}setAdVolume(e){return isNaN(e)?(this.logger.warn("setAdVolume: volume argument is NaN"),this.getAdVolume()):super.setAdVolume(e)}getAdExpanded(){return this.isFullscreen}setVPAID(e){if(this.vpaid)this.logger.warn("setVPAID() : vpaid ad already register, can't use twice");else{this.logger.debug("setVPAID() : Register vpaid ad"),super.setVPAID(e),e.subscribe(()=>{this.isStopped=!0},$.a.AdStopped);var t=e=>{0===function(e,t){return o.filter(e,(function(e){return e.isEnabled()&&-1!==o.indexOf(e.getOverridenEvents(),t)}))}(this.components,e.type).length&&this.handleVpaidEvent(e)};for(var i in $.a)if($.a.hasOwnProperty(i)){var n=$.a[i];e.subscribe(Dt.b(t,n),n)}for(var i in Oe.a)if(Oe.a.hasOwnProperty(i)){n=Oe.a[i];e.subscribe(Dt.b(t,n),n)}}}getVPAID(){return this.vpaid}getVPAIDContainer(){return this.mainComponentsContainer.ownerDocument.getElementById("vpaid-container")}getMainContainer(){return this.mainContainer}getMainComponentsContainer(){return this.mainComponentsContainer.ownerDocument.getElementById("main-container")}getCreativeContainer(){return this.getVPAID().container.getCreativeContainer()}getVideoComponentsContainer(){return this.videoComponentsContainer=this.videoComponentsContainer||this.mainComponentsContainer.ownerDocument.getElementById("layout-video-component")}getComponent(e){return this.componentsByName[e]}getConfig(){return this.config}getContainer(){return this.container}getContentWindow(){return this.getContainer().contentWindow||window}render(e){var t,i,n,s;if(!this.isRendered){this.rendered=!0,this.show(),this.resize(e.getAdWidth(),e.getAdHeight());var r=e=>{this.handleVpaidEvent(e)};for(var o in this.logger.debug("init components:",this.config.components),qt)if(qt.hasOwnProperty(o)&&qt[o])for(var d="teads-ui-component-"+o,c=g.getElementsByClassName(d,this.getMainComponentsContainer(),this.getContentWindow()),l=0,h=c.length;l<h;l++)if(this.config.components&&this.config.components[o]&&this.config.components[o].disable||this.config.disableAllComponents&&this.config.components&&!1!==this.config.components[o].disable)a.b.fromNullable(c[l]).forEach(e=>a.b.fromNullable(e.parentNode).forEach(t=>t.removeChild(e))),this.logger.debug("disable component "+o);else{var u=new qt[o](this,c[l],e,this.config.components&&this.config.components[o]?this.config.components[o]:{},r);if(this.components.push(u),this.componentsByName[o]=u,null===(i=null===(t=this.loaderConfig)||void 0===t?void 0:t.api)||void 0===i?void 0:i.isVideoBanner()){const e=null===(s=null===(n=this.loaderConfig)||void 0===n?void 0:n.api)||void 0===s?void 0:s.getCreativeSize();this.config.clickthrough||this.getVPAIDContainer().style.setProperty("background-color","transparent"),"soundbutton"===o&&u.getElement().style.setProperty("bottom",$t.b(e)+"px"),"endscreen"===o&&u.getElement().style.setProperty("height",$t.a(e.width)+"px")}try{u.init(),this.logger.debug("init component "+o,this.config.components&&this.config.components[o]?this.config.components[o]:null)}catch(e){this.logger.error('error init component "'+o+'"',e.toString())}}}}showAllComponents(){_t(this.components,!0)}hideAllComponents(){_t(this.components,!1)}showComponent(e){Rt(this.componentsByName,e,!0)}hideComponent(e){Rt(this.componentsByName,e,!1)}dispatchCustomEvent(e,t){this.dispatchEvent(e,t)}getProperties(){return{adLinear:this.getAdLinear(),adWidth:this.getAdWidth(),adHeight:this.getAdHeight(),adExpanded:this.getAdExpanded(),adSkippableState:this.getAdSkippableState(),adRemainingTime:this.getAdRemainingTime(),adDuration:this.getAdDuration(),adVolume:this.getAdVolume()}}toJSON(){return JSON.stringify(this.getProperties())}handleVpaidEvent(e){switch(e.type){case $.a.AdSizeChange:this.getAdWidth()&&this.getAdHeight()&&this.isStopped&&(this.logger.debug("resize with AdSizeChange event"),this.resize(this.getAdWidth(),this.getAdHeight(),this.isFullscreen?"fullscreen":"normal"));break;case $.a.AdLoaded:if(this.initAdStartTime>0)try{const e=a.b.fromNullable(this.config.vpaidUrl).map(e=>w.p(e).hostname).getOrNull(),t=Object(u.f)()-this.initAdStartTime,i=Object(u.e)(/t.teads.tv\/track\?action=adCall/).map(e=>e.startTime).map(Math.round).getOrValue(0);this.logger.info("initAd response time",t,e,i)}catch(e){}}super.handleVpaidEvent(e)}callVPAIDMethod(e,t=[]){o.forEach(this.components,i=>{i.onMethod(e,t)});var i,n=function(e,t){return o.filter(e,(function(e){return e.isEnabled()&&-1!==o.indexOf(e.getOverridenMethods(),t)}))}(this.components,e);return 0===n.length?super.callVPAIDMethod(e,t):(o.forEach(n,n=>{i=n.onOverridenMethod(e,t)}),i)}resize(e,t,i="normal"){if(e<=0||t<=0)return;let n=e+"px",s=t+"px";this.getVideoComponentsContainer().style.getPropertyValue("width")===n&&this.getVideoComponentsContainer().style.getPropertyValue("height")===s&&this.container.style.getPropertyValue("width")===n&&this.container.style.getPropertyValue("height")===s||(this.getVideoComponentsContainer().style.setProperty("width",n),this.getVideoComponentsContainer().style.setProperty("height",s),this.container.style.setProperty("width",n,"important"),this.container.style.setProperty("height",s,"important"),this.container.style.setProperty("max-height",s,"important"),this.logger.debug("vpaidui resize",e,t,i),!this.isFullscreen&&"fullscreen"===i||this.isFullscreen&&"normal"===i?(this.isFullscreen="fullscreen"===i,this.dispatchEvent($.a.AdExpandedChange)):this.logger.debug("no fullscreen exit or enter"));let r=this.getVPAIDContainer();r.style.setProperty("width",n),r.style.setProperty("height",s);let a="l-screen";e<=480?a="xs-screen":e<=640&&(a="sm-screen"),o.forEach(["l-screen","xs-screen","sm-screen"],e=>{e!==a&&b.removeClass(this.mainComponentsContainer,e)}),b.addClass(this.mainComponentsContainer,a)}show(){this.container.style.setProperty("display","block")}hide(){this.container.style.setProperty("display","none")}initHeavyAdInterventionListener(e){window.addEventListener("message",e=>{a.b.of(e).map(({data:e})=>e).filter(({event:e})=>"heavyAdIntervention"===e).forEach(({report:e})=>{this.logger.error("Fetched a heavy ad intervention event",e),Ie.a.tryCatch(()=>a.b.of(JSON.parse(e)).map(({body:e})=>e).filter(({id:e})=>"HeavyAdIntervention"===e).map(({message:e})=>e)).fold(e=>this.logger.error("Something went wrong during the parsing of the intervention report:",e),e=>e.forEach(e=>{const t=e.indexOf("Ad was removed")>-1?Oe.a.AdRemovedHeavyAdIntervention:Oe.a.AdWarningHeavyAdIntervention,i=e.indexOf("CPU")>-1?"CPU":"Network";this.dispatchCustomEvent(t,{id:Ct.b.GENERAL_LINEAR.id,message:"HeavyAdIntervention "+i})}))})},!0),e.postMessage({event:"reportingObserverSource"},"*")}}var Yt=i(57),Xt=i(35),Qt=i(61),Jt=i(56);class Zt{constructor(e,t,i,n,s,r){this.container=e,this.config=t,this.vpaidAd=i,this.bufferingTimer=null,this.bufferingDone=!1,this.elapseTime=0,this.logger=new c.a("player.plugin.Bench");try{let e=b.findTopWindow(this.container);this.visibility=E.listenWindow(e,()=>{this.elapseTime>1e3&&0===this.getCurrentTime()&&(this.clearBufferingTimer(!0),this.visibility.destroy())},()=>{})}catch(e){this.logger.error("Error with visibility init",e)}Object(o.forEach)([$.a.AdStopped,$.a.AdSkipped,$.a.AdError],e=>{this.vpaidAd.subscribe(()=>this.visibility.destroy(),e)}),this.vpaidAd.subscribe(()=>{this.getBuffering()},$.a.AdStarted),this.vpaidAd.subscribe(()=>{this.clearBufferingTimer()},$.a.AdPaused),this.vpaidAd.subscribe(()=>{this.getBuffering()},$.a.AdPlaying)}init(){}deinit(){}getBuffering(e=500){this.bufferingDone||(this.bufferingTimer=setTimeout(()=>{try{this.elapseTime=e;let t=this.getCurrentTime();if(t>0){let i=e-1e3*t>0?e-1e3*t:0;"number"==typeof i&&i>=0&&this.logger.debug("Buffering: "+i+"ms"),this.bufferingDone=!0,this.visibility.destroy()}else this.getBuffering(e+=500)}catch(e){this.logger.error("Error with buffering method",e)}},500))}clearBufferingTimer(e=!1){try{this.bufferingTimer&&(clearTimeout(this.bufferingTimer),this.bufferingTimer=null,e&&(this.logger.warn("Stop buffering calculation"),this.bufferingDone=!0))}catch(e){this.logger.error("An error occured while cleaning the buffering timer",e)}}getCurrentTime(){return this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()?this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime():0}}var ei=i(141);class ti{constructor(e,t,i,n,s,r){this.config=t,this.vpaidAd=i,this.linearAd=s,this.dependenciesFromPlayer=r}init(){this.vpaidAd.subscribe(this.onClickThrough,$.a.AdClickThru,this)}deinit(){this.vpaidAd.unsubscribe(this.onClickThrough,$.a.AdClickThru)}onClickThrough(e,t,i){const n=Object(ei.a)(e)||this.linearAd.clickThrough[0],s=this.config.auctionId;if(o.includes(ke.d,this.config.formatConfig.adSourceId)){let e=null;window.addEventListener("message",t=>{var i,n;const r=!e||e===(null===(i=t.data)||void 0===i?void 0:i.host);t.source&&"TEADS_PIXEL_LOADED"===(null===(n=t.data)||void 0===n?void 0:n.type)&&r&&(e=t.data.host,t.source.postMessage({type:"TEADS_SDK_PARAMETERS",teadsClickId:s},t.origin))})}i&&n&&Ie.a.tryCatch(()=>{const e=Object(Xt.a)([Object(Xt.h)(this.dependenciesFromPlayer.gdprIab.status),...Object(Xt.g)(this.dependenciesFromPlayer.gdprIab.consent)])(n),t=Object(p.isChromeIos)()&&Object(w.k)(e)?"_parent":"_blank",i=this.linearAd.creativeId,r=this.config.insertionId;if(s&&i&&r&&Ye()){const n=encodeURIComponent(Ke($e.Navigation,s,i,r));window.open(e,t,"attributionsrc="+n)}else window.open(e,t)}).tapLeft(e=>{this.dependenciesFromPlayer.sumologicLogger.error("plugin-onclickthrough "+Object(ge.a)(e))})}}var ii=i(31);class ni{constructor(e,t,i,n,s){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=n,this.linearAd=s,this.logger=new c.a("player.plugin.Extensions"),this.getVastMacros=()=>{var e;const t=a.b.fromNullable(We.a(this.linearAd.duration,this.vpaidAd.getAdRemainingTime())),i=We.d(a.b.fromNullable(this.mediaFile)),n=We.c(a.b.fromNullable(this.mediaFile)),s=Object(g.getBoundingClientRect)(this.container).height,r=a.b.fromNullable(null===(e=this.config.formatConfig)||void 0===e?void 0:e.threshold).map(e=>e.get()).getOrValue(100),o=a.b.fromNullable(We.f(this.container,s,r));return We.e({currentTime:t,assetUrl:i,mediaFileType:n,viewability:o})},this.getFunnelMacros=()=>{var e;return a.b.fromNullable(null===(e=this.config)||void 0===e?void 0:e.formatConfig).match({some:e=>{const t=a.b.fromNullable(e.pageId),i=a.b.fromNullable(e.placementId),n=a.b.fromNullable(e.insertionId),s=a.b.fromNullable(p.getEnv());return We.b({pageId:t,pid:i,insertionId:n,env:s})},none:()=>We.b()})}}init(){o.forEach(this.linearAd.extensions,e=>{switch(e.type){case tt.a:const t=tt.d(e.content);t&&t.width&&t.height&&(this.mediaFile.width=t.width,this.mediaFile.height=t.height);break;case we.a.AD_VERIFICATIONS:if(Object(r.c)(this.linearAd.adParameters,this.mediaFile.url)){const t=o.map(this.retrieveCreativePrefetchAdVerificationScriptUrls(e),({url:e})=>e);this.prefetchAdVerificationScripts(t)}break;case we.a.MOAT_JS:this.initMoatTracking(e);break;case we.a.VISIBILITY:case we.a.HTML:case we.a.IFRAME:this.injectIframe(e.content);break;case we.a.SCRIPT:case we.a.ALENTY:this.injectJs(e.content);break;default:this.logger.warn("Unhandled extension type",e)}})}deinit(){}getExtension(e){return a.b.fromNullable(o.find(this.linearAd.extensions,t=>t.type===e))}retrieveCreativePrefetchAdVerificationScriptUrls(e){const t=o.fromNodeList(e.xml.querySelectorAll("Verification")),i=o.map(t,e=>[e.getAttribute("vendor"),e.querySelector("JavaScriptResource")]),n=o.filter(i,([,e])=>"creative-prefetch"===e.getAttribute("apiFramework")),s=/src="([^"]+)/gi,r=Object(ii.a)((e,t)=>o.map(t,({vendor:t,url:i})=>({vendor:t,url:We.h(e)(i)}))),d=e=>r(this.getVastMacros())(r(this.getFunnelMacros())(e)),c=o.map(n,([e,t])=>a.b.fromNullable(t.textContent).map(A.trim).map(t=>{let i;const n=[];for(;null!==(i=s.exec(t));)n.push(i[1]);const r="DoubleVerify"===e?o.map(n,e=>w.r(e,"btreg",this.container.getAttribute("id"))):n;return o.map(r,t=>({vendor:e,url:t}))}).map(d));return o.reduce(c,(e,t)=>t.map(t=>e.concat(t)).getOrValue(e),[])}prefetchAdVerificationScripts(e){o.forEach(e,e=>(new Image).src=e)}initMoatTracking(e){let t=this.vpaidAd.getAdDuration();t<=0&&(t=this.linearAd.duration);const i=JSON.parse(e.content);let n=[];const s={adData:{ids:i,duration:t,url:this.mediaFile.url},dispatchEvent(e){if(this.sendEvent){let t=e;n&&(n.push(e),t=n,n=null),this.sendEvent(t)}else n.push(e)}};this.logger.debug("intialized MOAT with",s.adData);o.forEach(["AdStarted","AdImpression","AdStopped","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdPaused","AdPlaying","AdVolumeChange"],e=>{this.vpaidAd.subscribe(()=>{let t={type:e,adVolume:this.vpaidAd.getAdVolume()};this.logger.debug("sending MOAT event",t),s.dispatchEvent(t)},e)});let r="_moatApi"+A.rand(8);b.getWindow(this.container)[r]=s;let a=b.getDocument(this.container).createElement("script");const d=Object(l.getProtocol)();let c="https:"===d?"z":"js";a.src=d+"//"+c+".moatads.com/"+ni.MOAT_PARTNER_CODE+"/moatvideo.js#"+r,this.container.insertBefore(a,this.container.childNodes[0])}injectJs(e){let t=document.createElement("script");t.async=!0,t.src=e,this.container.appendChild(t)}injectIframe(e){const t=b.createIframe("extension");t.srcdoc=e,document.body.appendChild(t)}}ni.MOAT_PARTNER_CODE="teads245638586802";class si{constructor(e,t,i,n){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=n,this.logger=new c.a("player.plugin.Responsive")}init(){this.logger.debug("init plugin"),this.vpaidAd.subscribe(this.onVideoMetadata,Oe.a.AdVideoMetadata,this),this.vpaidAd.subscribe(this.onVpaidStart,$.a.AdStarted,this)}deinit(){this.logger.debug("deinit plugin"),this.vpaidAd.unsubscribe(this.onVpaidStart,$.a.AdStarted),this.vpaidAd.unsubscribe(this.onVideoMetadata,Oe.a.AdVideoMetadata),this.unsetResponsive()}resize(e){if(!b.isFullscreen())try{let s=g.getBoundingClientRect(this.container).width;if(s!==this.vpaidAd.getAdWidth()||e){let e=this.config.vpaidApi&&this.config.vpaidApi.getStudioData();var t=ye.a.getOptimalHeight(this.mediaFile,s,!!this.metadata||!!e),i=this.vpaidAd.getAdWidth(),n=this.vpaidAd.getAdHeight();i===s&&n===t||(this.vpaidAd.resizeAd(s,t,"normal"),this.logger.debug("container width change, resize from "+i+"x"+n+" to "+s+"x"+t))}}catch(e){this.logger.error("resize throw an Exception",e),this.unsetResponsive()}}setResponsive(){return!this.iframe&&(this.vpaidAd.subscribe(()=>{this.unsetResponsive()},$.a.AdError),this.vpaidAd.subscribe(()=>{this.unsetResponsive()},$.a.AdStopped),this.resize(),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("title","responsive plugin"),this.iframe.style.setProperty("height","0"),this.iframe.style.setProperty("width","100%"),this.iframe.style.setProperty("border","none"),this.iframe.style.setProperty("margin","0"),this.iframe.style.setProperty("padding","0"),this.container.appendChild(this.iframe),this.iframe.contentWindow.document.write("<html><body></body></html>"),this.iframe.contentWindow.document.close(),this.resizeCallback=()=>this.resize(),g.addEventListener("resize",this.iframe.contentWindow,this.resizeCallback),!0)}unsetResponsive(){try{return!!this.iframe&&(g.removeEventListener("resize",this.iframe.contentWindow,this.resizeCallback),this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,!0)}catch(e){return!1}}onVideoMetadata(e){this.logger.debug("Receive metadata from video",e),e.width&&e.height&&(this.metadata=e,this.mediaFile.width=e.width,this.mediaFile.height=e.height,Math.ceil(this.vpaidAd.getAdWidth()/this.vpaidAd.getAdHeight())!==Math.ceil(e.width/e.height)&&(this.logger.debug("vpaid ratio differ from mediafile ratio, force resize !"),this.resize(!0)))}onVpaidStart(){if(!this.config.width)try{this.logger.debug("set player responsive !"),this.setResponsive()}catch(e){this.logger.error("Exception raised while trying to initialize",e)}}}var ri=i(20),oi=i(128);class ai{constructor(e,t,i,n,s,r){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=n,this.linearAd=s,this.trackVastEventDependencies=r,this.logger=new c.a("player.plugin.Tracker"),this.tracked={},this.trackedProgress=[],this.trackOnce=[ri.a.Skip,ri.a.CreativeView,ri.a.Start,ri.a.Impression,ri.a.FirstQuartile,ri.a.Midpoint,ri.a.ThirdQuartile,ri.a.Complete,ri.a.Error],this.isMuted=!1;const d=[$.a.AdLoaded,$.a.AdStarted,$.a.AdSkipped,$.a.AdImpression,$.a.AdVideoStart,$.a.AdVideoFirstQuartile,$.a.AdVideoMidpoint,$.a.AdVideoThirdQuartile,$.a.AdVideoComplete,$.a.AdClickThru,$.a.AdUserClose],h=[$.a.AdDurationChange,$.a.AdRemainingTimeChange],u=Object.keys($.a);for(const e in Oe.a)u.push(e);this.vpaidAd.subscribe((...e)=>{this.trackError(e)},Oe.a.AdRemovedHeavyAdIntervention);o.forEach(u,e=>{o.indexOf(d,e)>-1&&this.vpaidAd.subscribe(t=>{e===$.a.AdImpression?this.trackVastEventDependencies.sumologicLogger.info(e+"|classic",40):this.trackVastEventDependencies.sumologicLogger.info(`${e}|${a.b.fromNullable(t).filter(l.isString).getOrValue("")}`,40)},e),-1===o.indexOf(h,e)&&this.vpaidAd.subscribe((t="")=>{this.logger.info(`${e} ${t}`)},e)})}init(){this.logger.debug("init");try{this.previousRemainingTime=this.vpaidAd.getAdRemainingTime(),this.vpaidAd.subscribe(()=>this.onTimeChange(),$.a.AdDurationChange),this.vpaidAd.subscribe(()=>this.onTimeChange(),$.a.AdRemainingTimeChange);for(let e in this.linearAd.tracking)this.addTrackingCallback(e);let e;this.vpaidAd.subscribe(()=>this.onAdStarted(),$.a.AdStarted),this.vpaidAd.subscribe(()=>this.onVolumeChange(),$.a.AdVolumeChange),this.vpaidAd.subscribe(()=>{const t=this.vpaidAd.getAdExpanded();!e&&t?(this.trackVastEvent(ri.a.Fullscreen),this.trackVastEvent(ri.a.Expand)):e&&!t&&(this.trackVastEvent(ri.a.ExitFullscreen),this.trackVastEvent(ri.a.Collapse)),e=t},$.a.AdExpandedChange)}catch(e){const{placementKey:t,sumologicLogger:i,wigo:n,logger:s,slotType:r,creativeSize:o}=this.trackVastEventDependencies,d=a.b.fromNullable(this.adDuration),c=d.flatMap(e=>a.b.fromNullable(this.adRemainingTime).map(t=>e-t));Object(Ae.n)({placementKey:t,wigo:n,sumologicLogger:i,logger:s,durationPlayed:c,totalDuration:d,errorCode:Yt.a.Undefined,errorCause:"plugin tracker exception init",slotType:r,creativeSize:o,macros:[Object(Xt.d)(c.getOrValue(0)),Object(Xt.c)(),Object(Xt.b)(a.b.fromNullable(this.mediaFile)),Object(Xt.i)(a.b.fromNullable(this.mediaFile)),Object(Xt.j)(0),Object(Xt.h)(this.trackVastEventDependencies.gdprIab.status),...Object(Xt.g)(this.trackVastEventDependencies.gdprIab.consent)]})}}deinit(){this.logger.debug("deinit")}onTimeChange(){this.adDuration=this.vpaidAd.getAdDuration(),this.adRemainingTime=this.vpaidAd.getAdRemainingTime(),this.previousRemainingTime<0&&(this.previousRemainingTime=this.adRemainingTime)}onVolumeChange(){this.isMuted&&this.vpaidAd.getAdVolume()>0?this.trackVpaidEvent(ri.a.Unmute):this.isMuted||0!==this.vpaidAd.getAdVolume()||this.trackVpaidEvent(ri.a.Mute),this.isMuted=!this.vpaidAd.getAdVolume()}onAdStarted(){this.isMuted=!this.vpaidAd.getAdVolume()}addTrackingCallback(e){const t=oi.a[e]||oi.b[e];this.vpaidAd.subscribe((...t)=>{e===ri.a.Error?this.trackError(t):this.trackVpaidEvent(e)},t)}buildTrackingDependencies(e){var t;const i=Object(g.getBoundingClientRect)(this.container).height,n=a.b.fromNullable(null===(t=this.config.formatConfig)||void 0===t?void 0:t.threshold).map(e=>e.get()).getOrValue(100),s=Object(We.f)(this.container,i,n),{placementKey:r,wigo:o,logger:d}=this.trackVastEventDependencies,c=[Object(Xt.d)(e),Object(Xt.c)(),Object(Xt.b)(a.b.fromNullable(this.mediaFile)),Object(Xt.i)(a.b.fromNullable(this.mediaFile)),Object(Xt.j)(s),Object(Xt.e)(this.trackVastEventDependencies.sumologicLogger),Object(Xt.h)(this.trackVastEventDependencies.gdprIab.status),...Object(Xt.g)(this.trackVastEventDependencies.gdprIab.consent)];return{trackOpts:{referer:Object(Ae.b)(this.trackVastEventDependencies.sumologicLogger),slotType:this.trackVastEventDependencies.slotType,creativeSize:this.trackVastEventDependencies.creativeSize,macros:c},trackingsDependencies:{placementKey:r,wigo:o,logger:d,durationPlayed:Object(a.c)(e),totalDuration:a.b.fromNullable(this.adDuration),sumologicLogger:this.trackVastEventDependencies.sumologicLogger}}}trackEvent(e,t){const i=t.filter(e=>!isNaN(e)).getOrValue(this.adDuration-this.adRemainingTime||0),n=Math.floor(i);if(e===ri.a.Progress){if(this.trackedProgress[n])return;if(this.previousRemainingTime===this.adRemainingTime)return;this.previousRemainingTime=this.adRemainingTime}switch(e){case ri.a.Start:this.tracked[ri.a.Impression]||this.trackVastEvent(ri.a.Impression);break;case ri.a.Complete:this.trackProgress(n+1);case ri.a.FirstQuartile:case ri.a.Midpoint:case ri.a.ThirdQuartile:this.tracked[ri.a.Start]||this.trackVastEvent(ri.a.Start);break;case ri.a.Progress:this.trackedProgress[n]=!0;const e=n-1;e>0&&!this.trackedProgress[e]&&(this.logger.debug("track missing previous progress "+e),this.trackProgress(e));break;case ri.a.Mute:if(!this.tracked[ri.a.Impression])return}if(!o.includes(this.trackOnce,e)||!this.tracked[e]){if(Object(o.isMemberOf)(ri.b)(e)&&e!==ri.a.Billable){const{placementKey:t}=this.trackVastEventDependencies,{trackOpts:s,trackingsDependencies:r}=this.buildTrackingDependencies(i);if(e===ri.a.Progress)n>0&&Object(Ae.x)(r)(e,()=>ve.b.vast.trackProgress(t)(n,s));else{const i=e;Object(Ae.x)(r)(i,()=>ve.b.vast.track(t)(i,s))}}else this.logger.error(`Could not track unsupported VAST event: ${e}. Supported names: ${ri.b.join(", ")}.`),this.trackVastEventDependencies.sumologicLogger.error("cant-track-vast-event "+e);this.tracked[e]=!0}}trackVastEvent(e){this.trackEvent(e,a.b.empty())}trackVpaidEvent(e){this.trackEvent(e,a.b.empty())}trackProgress(e){this.trackEvent(ri.a.Progress,a.b.fromNullable(e))}trackError(e){if(this.tracked[ri.a.Error])return;const t=e&&e[1]&&"number"==typeof e[1]&&!isNaN(e[1])?e[1]:Ct.b.GENERAL.id,i=Object(o.isMemberOf)(Yt.b)(t)?t:Yt.a.Undefined,n=e[0],s=this.adDuration-this.adRemainingTime||0,{trackOpts:r,trackingsDependencies:a}=this.buildTrackingDependencies(s);Object(Ae.n)(Object.assign(Object.assign(Object.assign({},a),{errorCode:i,errorCause:n}),r))}}var di=i(151);class ci{constructor(e,t,i,n,s,r){this.config=t,this.vpaidAd=i,this.linearAd=s,this.trackVastEventDependencies=r}init(){this.vpaidAd.subscribe(this.onClickAdChoices,B.a.AdChoicesClickRequest,this)}deinit(){this.vpaidAd.unsubscribe(this.onClickAdChoices,B.a.AdChoicesClickRequest)}onClickAdChoices(){Object(Ae.x)({placementKey:this.trackVastEventDependencies.placementKey,sumologicLogger:this.trackVastEventDependencies.sumologicLogger,wigo:this.trackVastEventDependencies.wigo,logger:this.trackVastEventDependencies.logger,durationPlayed:a.a,totalDuration:a.a})(ri.a.ClickIcon,()=>ve.b.vast.track(this.trackVastEventDependencies.placementKey)(ri.a.ClickIcon,{referer:Object(Ae.b)(this.trackVastEventDependencies.sumologicLogger),slotType:this.trackVastEventDependencies.slotType,creativeSize:this.trackVastEventDependencies.creativeSize,macros:Object(Xt.f)()})),window.open(Object(di.b)(this.linearAd),"_blank")}}class li{constructor(e,t,i,n,s,r,o){this.container=e,this.config=t,this.slotType=i,this.wigo=n,this.gdprIab=s,this.placementKey=r,this.logger=new c.a("player.VASTPlayer"),this.plugins={},this.logger.info("new VASTPlayer",this.container,this.config),this.sumologicLogger=o.copy({collectorUrl:"https://s8t.teads.tv/logs/player/http-source"}),this.wigo.valid(2,0),this.wigo.setPlayerContainer(this.container),this.wigo.elementToFollow=this.container}setLinearAd(e){this.linearAd=e,this.logger.info("setLinearAd",e),this.wigo.valid(2,1,e,"modal")}setVpaidApi(e){this.config.vpaidApi=e}getLinearAd(){return this.linearAd}getMediafile(){return this.mediafile}getConfig(){return this.config}showCloseButton(){this.ui.showComponent("closebutton")}setConfigUI(e){this.config.ui=e}getOptimalMediaFile(e,t,i=(e=>!0)){return ye.a.getOptimalMediaFile(this.linearAd.duration,this.linearAd.mediaFiles,(n,s)=>{const r=a.b.fromNullable(n);r.match({some:n=>{r.filter(i).match({some:t=>{e(t),this.wigo.valid(2,2,t.url+s,"string")},none:()=>{this.onVastError(t,Ct.a.get(Ct.b.MEDIAFILE_DISPLAY.id,"Mediafile filtered by the custom filter"),this.linearAd),this.wigo.valid(2,2,"405 - Mediafile filtered by the custom filter","error")}})},none:()=>{const e=Ct.a.get(Ct.b.UNSUPPORTED_MEDIAFILE.id,"VASTPlayer.getOptimalMediaFile didn't find mediafile");this.wigo.valid(2,2,s,"error"),this.onVastError(t,e,this.linearAd)}}),ye.a.sendMediasToSumologic(this.linearAd,n?1:0,this.sumologicLogger)},this.config,this.sumologicLogger)}playOptimalMediaFile(e,t,i){this.getOptimalMediaFile(i=>{this.playMediaFile(i,e,t)},t,i)}loadOptimalMediaFile(e,t,i){this.getOptimalMediaFile(i=>{this.loadMediaFile(i,e,t)},t,i)}playMediaFile(e,t,i){if(!e){let e=Ct.a.get(Ct.b.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.playMediaFile");return this.onVastError(i,e,this.linearAd)}this.loadMediaFile(e,(function(e,i){t(e,i),e.subscribe((function(){e.startAd()}),$.a.AdLoaded),e.initAd(i.width,i.height,i.mode,i.bitrate,i.parameters)}),i)}loadMediaFile(e,t,i){let r=e=>{this.onVastError(i,e,this.linearAd)};if(!e)return r(Ct.a.get(Ct.b.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.loadMediaFile"));this.mediafile=e;const o=ye.a.getMediaProvider(e);let a=e.url;const d=this.config.creativeSize.map(e=>e.width).getOrValue(this.container.offsetWidth);var c={width:d,height:this.config.creativeSize.map(e=>e.height).getOrValue(ye.a.getOptimalHeight(e,d)),mode:"normal",bitrate:e.bitrate||512,parameters:this.linearAd.adParameters},l=this.linearAd.clickThrough.length?this.linearAd.clickThrough[0]:null;let h=this.config.useCustomVideo||!1;var u,g=!1;switch(o){case Jt.a.VPAID:if(l=null,"display"===this.config.adType||"native"===this.config.adType)break;"vpaid"===e.api&&e.type.indexOf("javascript")>-1&&(this.config.type===Qt.a.CANVAS&&(h=!0),p.cacheCanvasUsed(h));break;case Jt.a.JS:case Jt.a.CANVAS:a=this.config.path+"/"+ye.a.getAssetFromMediaProvider(o),o===Jt.a.JS?a=kt.a.VIDEO:o===Jt.a.CANVAS&&(a=kt.a.CANVAS);var m=this.config.path.match("/dist")||0===this.config.path.indexOf("http")?this.config.path.match("/dist")&&0!==this.config.path.indexOf("http")?window.location.protocol+window.location.host+this.config.path:this.config.path:window.location.protocol+this.config.path;g=(()=>{try{return!this.config.ui.config.components.endscreen.disable}catch(e){return this.logger.error(`Couldn't autostop: "${e}"`),!1}})(),c.parameters={url:e.url,debug:this.config.debug,clickThrough:l,skippable:this.linearAd.skippable,skipoffset:this.linearAd.skipDelay,assetsPath:m,type:Qt.a[this.config.type],pid:this.sumologicLogger.placementId.getOrNull(),noAutoStop:g,timeout:li.MEDIAFILE_TIMEOUT_DELAY},c.parameters={AdParameters:JSON.stringify(c.parameters)},Tt.d(li.MEDIAFILE_TIMEOUT_DELAY+2e3);break;case Jt.a.UNSUPPORTED:default:return u="media not supported "+e.type,void r(Ct.a.get(Ct.b.UNSUPPORTED_MEDIAFILE.id,u))}var f={path:this.config.path,useCustomVideo:h,api:this.config.vpaidApi};Tt.e(li.MEDIAFILE_TIMEOUT_DELAY),this.config.background&&(f.background=this.config.background);var b=this.container;if(this.config.ui){var v;if(this.config.ui.template)v=this.config.ui.template;else{if(!n[this.config.ui.name]){let e=Ct.a.get(Ct.b.UNDEFINED.id,"VASTPlayer: cannot find template for VPAID-UI");return r(e)}v=ie.a(n[this.config.ui.name],{assetsPath:this.config.path+"/assets"})}this.config.ui.config.showAdChoicesIcon=0===this.config.adChoicesIconLocation,this.config.ui.config=this.config.ui.config||{},this.config.ui.config.clickthrough=l,o===Jt.a.VPAID&&(this.config.ui.config.vpaidUrl=e.url),this.config.ui.config.noAutoStop=g,this.ui&&this.ui.getContainer()&&(this.config.ui.config.container=this.ui.getContainer()),this.ui=new Kt(this.container,v,this.config.ui.config,f),b=this.ui.getVPAIDContainer(),this.smartPosition=new It(this.ui)}var A=new Pt.a(b,f);A.setWigo(this.wigo);A.load(a,i=>{for(var n in this.wigo.valid(3,0),this.config.ui?(this.ui.setVPAID(i),this.vpaidAd=this.ui):this.vpaidAd=i,this.vpaidAd.setWigo(this.wigo),s)try{var a=s[n];this.plugins[n]&&this.plugins[n].deinit(),this.plugins[n]=new a(this.container,this.config,this.vpaidAd,e,this.linearAd,{placementKey:this.placementKey,sumologicLogger:this.sumologicLogger,wigo:this.wigo,slotType:this.slotType,logger:this.logger,gdprIab:this.gdprIab,creativeSize:this.config.creativeSize}),this.plugins[n].init()}catch(e){this.logger.error("Could not initialize plugin "+n,e)}try{t(this.vpaidAd,c)}catch(e){let t=Ct.a.get(Ct.b.UNDEFINED.id,"loadMediaFile success callback failled "+e,e);r(t)}this.logger.info("loadMediaFile",Jt.a[o]),this.wigo.valid(2,3,Jt.a[o],"string")},e=>{let t=Ct.b.UNDEFINED.id;switch(e.id){case St.b.id:t=Ct.b.GENERAL.id;break;case St.c.id:t=Ct.b.FILE_NOT_FOUND.id;break;case St.d.id:t=Ct.b.MEDIAFILE_TIMEOUT.id}let i=e.message||"vpaidloader error";r(Ct.a.get(t,i))})}getPlugin(e){return this.plugins[e]}getPlugins(){return this.plugins}hasMoatExtension(e=this.linearAd){return!!e&&o.filter(e.extensions||[],e=>"MoatJs"===e.type).length>0}onVastError(e,t,i){const n=t.getId(),s=Object(o.isMemberOf)(Yt.b)(n)?n:Yt.a.Undefined;Object(Ae.n)({placementKey:this.placementKey,sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,errorCode:s,errorCause:t.getMessage(),slotType:this.slotType,creativeSize:this.config.creativeSize,macros:[Object(Xt.d)(0),Object(Xt.c)(),Object(Xt.b)(a.b.fromNullable(this.mediafile)),Object(Xt.i)(a.b.fromNullable(this.mediafile)),Object(Xt.j)(0)]}),e(t,i)}}li.MEDIAFILE_TIMEOUT_DELAY=15e3;var hi=i(32);const ui=new c.a("FunnelFormatSync"),pi=window.teads.tagManagerResourcesList||[];function gi(e,t){return a.b.fromNullable(Object(o.find)(t,t=>t.tagManager===e))}function mi(e){return gi(e,pi).flatMap(({vastPlayer:e})=>e.flatMap(e=>a.b.fromNullable(e.getMediafile()))).map(()=>fi(e)).getOrValue(!0)}function fi(e){return Object(Ot.b)(e,pi)}function bi({sumologicLogger:e,placementAd:t,linearAdWithFormatConfig:{linearAd:i,formatConfig:n},tagIsCampaignTag:s,tagManagerPackage:o,adCallTrackOpts:c,auctionId:u,viewerId:p,gdprIab:m}){const{placement:f}=t;if(f){f.getElectedSlot()&&function(e){if(!b.getDocument(e).getElementById("teads-format-css")){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id","teads-format-css"),t.innerText=se.a+oe.a,g.inject(t,b.getWindow(e))}}(f.getElectedSlot().getElement());const v=new li(f.getPlayerContainer(),function(e,t){const i=a.b.fromNullable(e).filter(e=>!e.adType.isVideo()).flatMap(Object(d.a)(Object(l.prop)("creativeSize"),a.b.fromNullable));return{path:h.b.basePathUrl,type:e.allowedPlayer.getValue(),formatConfig:e,background:"transparent",vpaidApi:null,pageId:e.pageId,adType:e.adType.get(),auctionId:t,creativeSize:i,width:i.map(e=>e.width).getOrNull(),height:i.map(e=>e.height).getOrNull(),insertionId:e.insertionId}}(n,u.getOrNull()),f.slotType,f.wigo,m,f.key,e);v.setLinearAd(i);const A=function(e,t,i){return{name:"inread",config:{components:Ze(e,i,t,tt.b(t))}}}(n,i,f);v.setConfigUI(A),e.log(`Early-click: ${A.config.components.earlyclickoverlay.displayTime}, Ad-source-id: ${n.adSourceId}, Connection-id: ${n.connectionId}, Insertion-id: ${n.insertionId}, Auction-id: ${u}`,1e3);const{portfolioItemId:y,adType:w}=n;if(y&&(Object(C.a)(y)||w.isDisplay())){const e=v.getLinearAd();e.adParameters=r.a(e.adParameters).map(e=>r.b(Object.assign(Object.assign({},e),{portfolioItemId:y}))).getOrElse(()=>e.adParameters)}o.match({some:i=>function({sumologicLogger:e,placementAd:t,formatConfig:i,vastPlayer:n,tagIsCampaignTag:s,tagManagerPackage:r,adCallTrackOpts:o,auctionId:d,viewerId:c,gdprIab:l}){const{tagManagerInstance:h,onFormatLoaded:u,done:p}=r;(function(e,t,i,n){pi.push({tagManager:e,placementAd:t,vastPlayer:Object(a.c)(i),tagIsCampaignTag:n})})(h,t,n,s),h.logger.debug("load -> loadAd","ok"),h.wigo.setStatus(!0,"Ready to serve"),t.placement.initDom(t.placement.electedSlot),h.formatInstance=Object(a.c)(it({instancesStore:window.teads.instances,placement:t.placement,formatConfig:i,vastPlayer:n,sumologicLogger:e,adCallTrackOpts:o,auctionId:d,viewerId:c})),h.formatInstance.forEach(s=>{const r=new Et(t.placement,s,l);n.setVpaidApi(r),s.vpaidApi=r,s.load(()=>{fi(h)?(h.logger.error("same ad detected"),Object(Ae.d)({placementKey:t.placement.key,sumologicLogger:e,logger:ui,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:d,viewerId:c,slotType:t.placement.slotType,portfolioItemId:a.b.fromNullable(i.portfolioItemId),insertionId:a.b.fromNullable(i.insertionId),connectionId:a.b.fromNullable(i.connectionId)}),s.close(5),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:a.b.fromNullable(i.portfolioItemId),adCallTrackOpts:o,auctionId:d,viewerId:c})):Object(Ae.h)({placementKey:t.placement.key,sumologicLogger:e,logger:ui,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:d,viewerId:c,slotType:t.placement.slotType,portfolioItemId:a.b.fromNullable(i.portfolioItemId),insertionId:a.b.fromNullable(i.insertionId),connectionId:a.b.fromNullable(i.connectionId)}),u(!0),p()},n=>{u(!1),vi({sumologicLogger:e,formatConfig:i,placement:t.placement,auctionId:d,viewerId:c,vastExceptionId:n.getId()}),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:a.b.fromNullable(i.portfolioItemId),adCallTrackOpts:o,auctionId:d,viewerId:c}),p()})})}({sumologicLogger:e,placementAd:t,formatConfig:n,vastPlayer:v,tagIsCampaignTag:s,tagManagerPackage:i,adCallTrackOpts:c,auctionId:u,viewerId:p,gdprIab:m}),none:()=>function({sumologicLogger:e,placementAd:t,formatConfig:i,vastPlayer:n,adCallTrackOpts:s,auctionId:r,viewerId:o,gdprIab:d}){t.placement.initDom(t.placement.electedSlot);const c=it({instancesStore:window.teads.instances,placement:t.placement,formatConfig:i,vastPlayer:n,sumologicLogger:e,adCallTrackOpts:s,auctionId:r,viewerId:o}),l=new Et(t.placement,c,d);n.setVpaidApi(l),c.vpaidApi=l,c.load(()=>{Object(Ae.h)({placementKey:t.placement.key,sumologicLogger:e,logger:ui,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:r,viewerId:o,slotType:t.placement.slotType,portfolioItemId:a.b.fromNullable(i.portfolioItemId),insertionId:a.b.fromNullable(i.insertionId),connectionId:a.b.fromNullable(i.connectionId)}),c.start()},n=>{vi({sumologicLogger:e,formatConfig:i,placement:t.placement,auctionId:r,viewerId:o,vastExceptionId:n.getId()}),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:a.b.fromNullable(i.portfolioItemId),adCallTrackOpts:s,auctionId:r,viewerId:o})})}({sumologicLogger:e,placementAd:t,formatConfig:n,vastPlayer:v,adCallTrackOpts:c,auctionId:u,viewerId:p,gdprIab:m})})}else ui.warn("Placement object is empty in placementAd, cannot loadAd",t)}const vi=({sumologicLogger:e,formatConfig:t,placement:i,auctionId:n,viewerId:s,vastExceptionId:r})=>{const{pageId:a,pid:c,key:h,slotType:u,wigo:p,placementConfig:{headerBiddingProvider:g}}=i;Object(Ae.f)({placementKey:h,sumologicLogger:e,wigo:p,logger:ui,headerBiddingProvider:g,code:Object(o.isMemberOf)(Yt.b)(r)?r:Yt.a.Undefined,pageId:a,placementId:c,auctionId:n,viewerId:s,slotType:u,portfolioItemId:Object(d.b)(t,Object(l.prop)("portfolioItemId"),hi.a),insertionId:Object(d.b)(t,Object(l.prop)("insertionId"),hi.a),connectionId:Object(d.b)(t,Object(l.prop)("connectionId"),hi.a)})}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i(1),s=i(16),r=i(0),o=i(11),a=i(84),d=i(53),c=i(12),l=i(82),h=i(3),u=i(77);const p=new o.a("VPAIDJSGuard");class g extends class{getVPAID(){return this.vpaid}initAd(e,t,i,n,s,r){this.vpaidguard("initAd",[e,t,i,n,s,r])}skipAd(){this.vpaidguard("skipAd")}resizeAd(e,t,i="normal"){this.vpaidguard("resizeAd",[e,t,i])}handshakeVersion(e){return this.vpaidguard("handshakeVersion",[e])}startAd(){this.vpaidguard("startAd",[])}stopAd(){this.vpaidguard("stopAd",[])}pauseAd(){this.vpaidguard("pauseAd",[])}resumeAd(){this.vpaidguard("resumeAd",[])}expandAd(){this.vpaidguard("expandAd",[])}collapseAd(){this.vpaidguard("collapseAd",[])}getAdLinear(){return this.vpaidguard("getAdLinear",[])}getAdWidth(){return this.vpaidguard("getAdWidth",[])}getAdHeight(){return this.vpaidguard("getAdHeight",[])}getAdExpanded(){return this.vpaidguard("getAdExpanded",[])}getAdSkippableState(){return this.vpaidguard("getAdSkippableState",[])}getAdRemainingTime(){return this.vpaidguard("getAdRemainingTime",[])}getAdDuration(){return this.vpaidguard("getAdDuration",[])}getAdVolume(){return this.vpaidguard("getAdVolume",[])}getAdCompanions(){return this.vpaidguard("getAdCompanions",[])}getAdIcons(){return this.vpaidguard("getAdIcons",[])}setAdVolume(e){return this.vpaidguard("setAdVolume",[e])}subscribe(e,t,i){this.vpaidguard("subscribe",[e,t,i])}unsubscribe(e,t){this.vpaidguard("unsubscribe",[e,t])}setVPAID(e){this.vpaid=e}vpaidguard(e,t=[]){try{return this.callVPAIDMethod(e,t)}catch(e){p.error(`VPAID method guard error: "${e}"`)}}callVPAIDMethod(e,t=[]){return this.vpaid[e].apply(this.vpaid,t)}}{constructor(){super(...arguments),this.status=c.a.READY,this.type=a.a.JS,this.environmentVars=r.b.empty(),this.timeoutId={},this.dispatchedEvents={},this.wigo=r.b.empty(),this.eventHandler=new l.a}static log(e){n.indexOf(g.hasLogged,e)<0&&(g.logger.info(e),g.hasLogged.push(e))}initAd(e,t,i,n,s="",o){try{Object(u.a)("initAd",this.status)}catch(e){return this.dispatchEvent(h.a.AdLog,e)}this.status=c.a.LOADING,this.environmentVars=r.b.fromNullable(o),super.initAd(e,t,i,n,s,o)}handleAdCallTimeout(e){const t=d.b-e,i=()=>{this.dispatchedEvents[h.a.AdLoaded]||this.dispatchEvent(h.a.AdError,{message:"Creative did not initiated after "+d.b+"ms (current status "+this.status+")",id:s.b.GENERAL.id})};!this.timeoutId.initAd&&t>0?this.timeoutId.initAd=setTimeout(i,t):t<0&&i()}startAd(){try{Object(u.a)("startAd",this.status)}catch(e){return this.dispatchEvent(h.a.AdLog,e)}this.status=c.a.STARTING,this.timeoutId.startAd=setTimeout(()=>{this.dispatchedEvents[h.a.AdStarted]||this.dispatchEvent(h.a.AdError,{message:"Creative did not start after "+d.g+"ms",id:s.b.GENERAL.id})},d.g),super.startAd()}stopAd(){this.status>c.a.STOPPING&&(this.status=c.a.STOPPING,this.clearAllTimeout(),this.timeoutId.stopAd=setTimeout(()=>{this.dispatchedEvents[h.a.AdStopped]||(this.dispatchEvent(h.a.AdLog,"Creative did not stop after "+d.h+"ms, force stop !"),this.dispatchEvent(h.a.AdStopped))},d.h),this.environmentVars.forEach(e=>r.b.fromNullable(e.videoSlot).forEach(e=>e.volume=0)),super.stopAd())}skipAd(){if(this.status>c.a.SKIPPING){this.status=c.a.SKIPPING,this.timeoutId.skipAd=setTimeout(()=>{this.status>=c.a.SKIPPING&&(this.dispatchEvent(h.a.AdLog,"Creative did not skip after "+d.f+"ms, force skip !"),this.dispatchEvent(h.a.AdSkipped),this.stopAd())},d.f);try{super.skipAd()}catch(e){this.dispatchEvent(h.a.AdLog,"SkipAd throw an exception "+e)}}}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}getAdWidth(){const e=this.vpaid.getAdWidth(),t=this.environmentVars.flatMap(e=>r.b.fromNullable(e.slot).map(e=>e.offsetWidth));return String(e).indexOf("%")>-1&&t.nonEmpty()?t.getOrValue(0):String(e).indexOf("px")?parseInt(String(e).replace("px",""),10):e}getAdHeight(){const e=this.vpaid.getAdHeight(),t=this.environmentVars.flatMap(e=>r.b.fromNullable(e.slot).map(e=>e.offsetHeight));return(String(e).indexOf("%")>-1||parseInt(String(e),10)<=0)&&t.nonEmpty()?t.getOrValue(0):String(e).indexOf("px")?parseInt(String(e).replace("px",""),10):e}setWigo(e){this.wigo=r.b.fromNullable(e)}getTeadsEnvironmentVars(){return this.vpaid.getTeadsEnvironmentVars?this.vpaid.getTeadsEnvironmentVars():this.environmentVars}vpaidguard(e,t=[]){try{if(this.status!==c.a.REMOVED)return this.callVPAIDMethod(e,t)}catch(t){switch(e){case"initAd":case"startAd":this.dispatchEvent(h.a.AdError,{message:"error call "+e+": "+t,id:s.b.GENERAL.id});break;default:this.dispatchEvent(h.a.AdLog,"error call "+e+": "+t)}g.logger.error("vpaidguard -> vpaid creative threw an error for "+e,t)}}dispatchEvent(e,t){return this.handleVpaidEvent(new h.a(e,t))}handleVpaidEvent(e){if(this.status===c.a.REMOVED)return;let t=[h.a.AdLoaded,h.a.AdStarted,h.a.AdVideoStart,h.a.AdVideoComplete,h.a.AdSkipped,h.a.AdStopped,h.a.AdError];if(!(n.indexOf(t,e.type)>-1&&this.dispatchedEvents[e.type])){if(this.status>c.a.STOPPED)switch(e.type){case h.a.AdLoaded:this.status=c.a.LOADED,this.clearTimeout("initAd"),g.log("AdLoaded - Response from initAd"),this.wigo.forEach(e=>e.valid(3,2));break;case h.a.AdStarted:this.status=this.status<c.a.STARTED?c.a.STARTED:this.status,this.clearTimeout("startAd"),g.log("AdStarted - Response from startAd"),this.wigo.forEach(e=>e.valid(3,3));break;case h.a.AdVideoStart:case h.a.AdPlaying:this.status=c.a.PLAYING;break;case h.a.AdPaused:this.status=c.a.PAUSED;break;case h.a.AdVideoComplete:this.status=c.a.COMPLETE;break;case h.a.AdSkipped:this.status=c.a.SKIPPED,this.clearAllTimeout();break;case h.a.AdStopped:this.status=c.a.STOPPED,this.clearAllTimeout();break;case h.a.AdError:g.logger.info("AdError - ",e.data),this.wigo.forEach(t=>t.valid(3,4,e.data,"error"))}this.dispatchedEvents[e.type]||(this.dispatchedEvents[e.type]=0),this.dispatchedEvents[e.type]++,this.eventHandler.handleEvent(e),e.type===h.a.AdError&&this.stopAd()}}clearTimeout(e){this.timeoutId[e]&&clearTimeout(this.timeoutId[e])}clearAllTimeout(){for(let e in this.timeoutId)this.timeoutId.hasOwnProperty(this.timeoutId[e])&&this.clearTimeout(this.timeoutId[e])}}g.logger=new o.a("vpaid.BaseVPAIDJSWrapper"),g.hasLogged=[]},function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return c}));var n=i(6),s=i(5),r=i(126);let o=!1;function a(e,t,i){return n.a.tryCatch(()=>{e.navigator.geolocation.getCurrentPosition(t,i)}).orElse(e=>(i({code:1,message:e.message,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3}),Object(n.b)(e)))}function d({coords:{accuracy:e,latitude:t,longitude:i}}){return{accuracy:e,latitude:t,longitude:i}}function c(e,t,i){i&&i.DeviceOrientationEvent&&!o&&(o=!0,s.addEventListener("deviceorientation",i,e=>{t.sendMessage({method:r.a.SENSOR_UPDATE,methodReturn:{alpha:e.alpha,beta:e.beta,gamma:e.gamma,absolute:e.absolute}})}))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(0),s=i(157);class r{constructor(){this.version=2,this.tracking=new s.a,this.clickThrough=[],this.adChoicesIconClickThrough=n.a,this.mediaFiles=[],this.title="",this.wrappers=[],this.skippable=!1,this.skipDelay=0,this.extensions=[]}merge(e){var t,i;for(var n in e.version&&this.version<e.version&&(this.version=e.version),!this.url&&e.url&&(this.url=e.url),!this.title&&e.title&&(this.title=e.title),!this.adSystem&&e.adSystem&&(this.adSystem=e.adSystem),!this.id&&e.id&&(this.id=e.id),!this.creativeId&&e.creativeId&&(this.creativeId=e.creativeId),!this.duration&&e.duration&&(this.duration=e.duration),!this.adParameters&&e.adParameters&&(this.adParameters=e.adParameters),e.adTagUri&&this.wrappers.push(e.adTagUri),e.tracking)for(t=0,i=e.tracking[n].length;t<i;t++)"clickIcon"!==n&&this.tracking[n].push(e.tracking[n][t]);for(this.adChoicesIconClickThrough.isEmpty()&&!e.adChoicesIconClickThrough.isEmpty()&&(this.adChoicesIconClickThrough=e.adChoicesIconClickThrough,this.tracking.clickIcon=e.tracking.clickIcon),t=0,i=e.mediaFiles.length;t<i;t++)this.mediaFiles.push(e.mediaFiles[t]);for(t=0,i=e.clickThrough.length;t<i;t++)this.clickThrough.push(e.clickThrough[t]);for(t=0,i=e.extensions.length;t<i;t++)this.extensions.push(e.extensions[t]);!this.skippable&&e.skippable&&(this.skippable=!0,this.skipDelay=e.skipDelay)}}},,function(e,t,i){"use strict";i.d(t,"c",(function(){return p})),i.d(t,"b",(function(){return g})),i.d(t,"e",(function(){return m})),i.d(t,"d",(function(){return f}));var n=i(1),s=i(0),r=(i(20),i(133)),o=i(27),a=i(9),d=i(92),c=(i(114),i(47));const l=e=>Object(n.filter)(Object.keys(e),e=>!Object(n.includes)(["cs","revenue_advertising","revenue_fee","hb_bid_response_price_usd"],e)&&!/(e|s|c|_|rpm_)?(cost|revenue|hb_bid_response_price)(_fp)?(_curr)?/.test(e)&&!/publisher_platform_fee(_curr|_waived)?/.test(e)),h={track:(e,t,i)=>{const{trackStrategy:n,trackingUrl:s,timestamp:r=Object(o.a)()}=t,a=(e=>Object(c.e)(Object(c.d)(e),l))(s);return n([a]),Object.assign(Object.assign({},i),{trackedEvents:[...i.trackedEvents,{event:e,time:r,trackingUrl:a}]})}},u=(e,t,i,s)=>Object(a.b)(e,n.cArray.foldLeft(t,(e,{event:t,trackingUrl:n})=>h.track(t,Object.assign(Object.assign({},i),{trackingUrl:Object(c.g)(n,s)}),e))),p=(e,t,i,r=s.a)=>(s,o)=>{const a=d.b.track(e,i,s);return[a,u(Object(n.difference)(s.trackedEvents)(a.trackedEvents),o,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),r)]},g=(e,t,i,r=s.a)=>(s,o)=>{const a=d.b.trackFormatError(e,i,s);return[a,u(Object(n.difference)(s.trackedEvents)(a.trackedEvents),o,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),r)]},m=(e,t,i,o=s.a)=>(s,a)=>{const d=r.a.track(e,i,s);return[d,u(Object(n.difference)(s.trackedEvents)(d.trackedEvents),a,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),o)]},f=(e,t,i,o=s.a)=>(s,a)=>{const d=r.a.trackFormatError(e,i,s);return[d,u(Object(n.difference)(s.trackedEvents)(d.trackedEvents),a,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),o)]};t.a=h},function(e,t){e.exports="<div class=\"loader\"> <style> .loader:before, .loader:after, .loader { border-radius: 50%; width: 1.5em; height: 1.5em; -webkit-animation-fill-mode: both; animation-fill-mode: both; -webkit-animation: load7 1.8s infinite ease-in-out; animation: load7 1.8s infinite ease-in-out; } .loader { font-size: 8px; margin-left: -8px; position: absolute; left: 50%; top: 30%; z-index: 10; text-indent: -9999em; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation-delay: -0.16s; animation-delay: -0.16s; } .loader:before { left: -2em; -webkit-animation-delay: -0.32s; animation-delay: -0.32s; } .loader:after { left: 2em; } .loader:before, .loader:after { content: ''; position: absolute; top: 0; } @-webkit-keyframes load7 { 0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em #ffffff; } 40% { box-shadow: 0 2.5em 0 0 #ffffff; } } @keyframes load7 { 0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em #ffffff; } 40% { box-shadow: 0 2.5em 0 0 #ffffff; } } </style> loading...</div> "},function(e,t){e.exports="<style> /* This used to work for parent element of button divs */ /* But it is not enough now, below dont hide play button parent div */ *::-webkit-media-controls-panel { display: none!important; -webkit-appearance: none; } /* Old shadow dom for play button */ *::--webkit-media-controls-play-button { display: none!important; -webkit-appearance: none; } /* New shadow dom for play button */ /* This one works */ *::-webkit-media-controls-start-playback-button { display: none!important; -webkit-appearance: none } </style> "},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(4),s=i(6);function r(e){return"video/mp4"===e}function o(e){return Object(n.isSDK)()?Object(n.isIos)()?r(e):!!Object(n.isAndroid)()&&(r(e)||function(e){return"video/webm"===e}(e)):function(e){return s.a.tryCatch(()=>!!document.createElement("video").canPlayType(e)).getOrElse(()=>!1)}(e)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(119),s=i(50),r=i(2);class o{constructor(e,t){this.api=e,this.playerWindow=t,this.eventListenerManager=new s.a}startListening(){this.eventListenerManager.add("message",this.playerWindow,e=>{if(Object(r.isObject)(e.data)){const t=e.data;if(!t.method)return;switch(t.method){case o.INIT_MESSAGE:this.pairedAdWindow=e.source,this.sendMessage({method:o.INIT_MESSAGE});break;default:try{if(Object(r.isFunction)(this.api[t.method]))if("getUserLocation"===t.method)this.handleGetUserLocationRequest(t);else{const e=this.api[t.method](...t.methodArgs);this.sendMessage({method:t.method,methodReturn:e})}else this.sendMessage({method:t.method,error:`Method ${t.method} does not exist on api`})}catch(e){this.sendMessage({method:t.method,error:e.toString()})}}}})}stopListening(){this.eventListenerManager.remove("message")}sendMessage(e){this.pairedAdWindow&&this.pairedAdWindow.postMessage(e,"*")}handleGetUserLocationRequest(e){this.api[e.method](t=>{this.sendMessage({method:e.method,methodReturn:n.b(t)})},t=>{this.sendMessage({method:e.method,methodReturn:t.message||t.toString()})})}}o.INIT_MESSAGE="studio-ad--format-RPC",o.SENSOR_UPDATE="-studio-ad--sensors-update"},function(e,t,i){"use strict";i.d(t,"a",(function(){return H}));var n=i(4),s=i(11),r=i(2),o=i(28),a=i(1),d=i(43),c=i(38),l=i(14),h=i(80),u=i(81);class p extends o.a{constructor(){super(...arguments),this.status=u.a.UNSTARTED}static getFileExtension(e){return l.p(e).pathname.split(".").pop()}getStatus(){return this.status}getVideoUrl(){return this.videoUrl}load(e,t){if(a.indexOf(p.alreadyEncoded,p.getFileExtension(e))>-1)return this.videoUrl=e,this.status=u.a.READY,void this.dispatch(h.a.READY,{errorCode:200});this.status=u.a.WAITING,this.dispatch(h.a.WAITING);const i=location.hostname.match(/.+\.sandbox\.teads\.net|localdocker/),n="https://[HOST]/transcode?url=[URL]&bitrate=[BITRATE]".replace(/\[HOST\]/,i?i[0]+":18088":"mp.teads.tv").replace(/\[URL\]/,encodeURIComponent(e)).replace(/\[BITRATE\]/,t.toString()),s=c.a();let r=!1;s.open("GET",n,!0),s.onreadystatechange=()=>{if(4===s.readyState&&!r){switch(s.status){case 200:this.videoUrl=s.responseText,this.status=u.a.READY,this.dispatch(h.a.READY,{errorCode:s.status}),r=!0;break;case 416:case 202:case 201:default:this.status=u.a.ERROR,this.dispatch(h.a.ERROR,{errorCode:s.status}),r=!0}d.a.info("proxy resp "+s.status)}},s.send(),d.a.info("proxy call")}}p.alreadyEncoded=["tv","mpg","mpeg"];var g,m=i(98);!function(e){e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(g||(g={}));var f=g,b=i(13),v=i(10);function A(e,t,i,n){Object.defineProperty(e,t,function(){let e={enumerable:!0,configurable:!0,get:function(){return i.call(this)},set:function(e){}};return n&&(e.set=function(e){n.call(this,e)}),e}())}function y(e,t){const i=e.getAttribute(t);switch(t){case"width":case"height":e.style[t]=i+(function(e){return String(e).indexOf("%")>-1}(i)||function(e){return String(e).indexOf("px")>-1}(i)?"":"px");break;case"src":case"preload":e[t]=i;break;case"autoplay":case"loop":e[t]=function(e){return"true"===e||"false"!==e&&!!e}(i)}}var w=i(45);const E={poster:!0,width:!0,height:!0,videoHeight:!1,videoWidth:!1,buffered:!1,duration:!1,ended:!1,error:!1,networkState:!1,paused:!1,played:!1,readyState:!1,seekable:!1,seeking:!1,currentSrc:!1,autoplay:!0,controls:!0,currentTime:!0,loop:!0,muted:!1,defaultMuted:!0,playbackRate:!1,defaultPlaybackRate:!1,preload:!1,src:!0,volume:!0,audioTracks:!1,textTracks:!1,videoTracks:!1},O=function(e){this._wrappedVideo=e};O.prototype=Object.create(HTMLElement.prototype);let C=function(e,t){A(O.prototype,e,(function(){return this._wrappedVideo[e]}),(function(i){t&&(this._wrappedVideo[e]=i)}))};for(var I in E)E.hasOwnProperty(I)&&C(I,E[I]);O.prototype.addEventListener=function(e,t,i=!1){this._wrappedVideo.addEventListener(e,t,i)},O.prototype.canPlayType=function(e){return this._wrappedVideo.canPlayType()},O.prototype.load=function(){this._wrappedVideo.load()},O.prototype.pause=function(){this._wrappedVideo.pause()},O.prototype.play=function(){this._wrappedVideo.play()},O.prototype.getVideoPlaybackQuality=function(){return this._wrappedVideo.getVideoPlaybackQuality()},O.prototype.webkitEnterFullscreen=function(){return this._wrappedVideo.webkitEnterFullscreen()},O.prototype.webkitExitFullscreen=function(){this._wrappedVideo.webkitExitFullscreen()},O.prototype.webkitEnterFullScreen=function(){this.webkitEnterFullscreen()},O.prototype.webkitExitFullScreen=function(){this.webkitExitFullscreen()};class S{constructor(){this.ranges=[]}get length(){return this.ranges.length}addRange(e,t){this.ranges.push({start:e,end:t})}start(e){return this.ranges[e].start}end(e){return this.ranges[e].end}}var T=i(125);function k(){this.logger=new s.a("HTMLVideoCanvas"),this._mainContainer=document.createElement("div"),this._mainContainer.style.backgroundColor="black",this._mainContainer.style.position="relative",this._mainContainer.style.width="100%",this._mainContainer.style.height="100%",this._mainContainer.style.zIndex=1,this.appendChild(this._mainContainer),this._videoContainer=document.createElement("div"),this._videoContainer.style.position="absolute",this._videoContainer.style.top=0,this._videoContainer.style.left=0,this._videoContainer.style.zIndex=2,this._videoContainer.style.width="100%",this._videoContainer.style.height="100%",this._mainContainer.appendChild(this._videoContainer),this.canvasPlayer=new m.a(this._videoContainer,1,1,{type:"CANVAS"}),this.mediaProxy=new p,this.mediaProxy.listen(h.a.READY,()=>{this.logger.debug("MediaProxy return video url",this.mediaProxy.getVideoUrl()),this.canvasPlayer.src=this.mediaProxy.getVideoUrl(),this.autoplay&&this.canvasPlayer.play(),this.volume=this._volume}),this.mediaProxy.listen(h.a.ERROR,()=>{this.logger.debug("MediaProxy didn't return video url"),this._error={code:f.MEDIA_ERR_NETWORK},this.canvasPlayer.dispatch(w.error)}),this.canvasPlayer.canvas.style.position="absolute",this.canvasPlayer.canvas.style.maxHeight="none",this.canvasPlayer.canvas.style.maxWidth="none",this.canvasPlayer.canvas.style.top="0",this.canvasPlayer.canvas.style.left="0",O.call(this,this.canvasPlayer),this.listeners={};let e=t=>{if(this.listeners[t.type]&&this.listeners[t.type].length){for(let e=0,i=this.listeners[t.type].length;e<i;e++)try{this.listeners[t.type][e].call(this,t)}catch(e){this.logger.error(`Error in Canvas event handler: "${e}"`)}"loadedmetadata"===t.type&&e(new CustomEvent("durationchange")),"playing"!==t.type||this.attachedCallbackCalled||this.attachedCallback()}};for(var t in w){let i=w[t];this.canvasPlayer.addEventListener(i,t=>{e(t)})}this.canvasPlayer.addEventListener(w.loadedmetadata,e=>{this._handleResize()}),this.canvasPlayer.addEventListener(w.durationchange,e=>{void 0!==this._volume&&(this.canvasPlayer.volume=this._volume)}),this.canvasPlayer.addEventListener(w.playing,t=>{let i=()=>{this._width&&this._height||(this.logger.debug("component got no width/height, try to adapt to container"),this._width=this._mainContainer.offsetWidth,this._height=this._mainContainer.offsetHeight),this._width&&this._height?(this.logger.debug("component have dimensions, force resize",this._width,this._height),this._handleResize()):setTimeout(i,100)};i(),e(new CustomEvent("timeupdate"))}),this._ended=!1,this.canvasPlayer.addEventListener(w.ended,t=>{this._ended=!0,this._paused=!0,e(new CustomEvent("timeupdate")),e(new CustomEvent("ended")),this.loop&&(this.currentTime=0,this.play())}),this._paused=!0,this.canvasPlayer.addEventListener(w.pause,e=>{this._paused=!0}),this.canvasPlayer.addEventListener(w.timeupdate,e=>{this._paused=!1}),this._seeking=!1,this.canvasPlayer.addEventListener(w.seeking,e=>{this._seeking=!0}),this.canvasPlayer.addEventListener(w.seeked,e=>{this._seeking=!1}),this.canvasPlayer.addEventListener(w.error,e=>{this._error=e.error})}k.prototype=Object.create(O.prototype),A(k.prototype,"src",(function(){return this._src}),(function(e){if(this.logger.debug("set src",e),(this.src||e)&&e!==this.src&&""!==e){if(Object(b.isURL)(e)){let l=a.indexOf(p.alreadyEncoded,p.getFileExtension(e))>-1;if(!T.a("video/mp4")&&"mp4"!==p.getFileExtension(e)&&!l&&(this.error=4,this.logger.error("only mp4,"+p.alreadyEncoded.join(",")+" files are supported, try to set "+e+" as src"),this.listeners.error))return void a.forEach(this.listeners.error,e=>e());l?this.mediaProxy.load(e,512):(t=e,i=(t,i)=>{this.mediaProxy.load(e,i)},r=c.a(),o=Date.now(),d=e=>{n||(clearTimeout(s),n=Date.now()-o,i(n,n<=100?1e3:n<200?700:n<400?500:300))},s=setTimeout(()=>d(),500),r.open("HEAD",t+(t.indexOf("?")>-1?"&":"?")+o,!0),r.addEventListener("load",()=>d()),r.addEventListener("error",()=>d()),r.send())}var t,i,n,s,r,o,d;this._src=e,this.setAttribute("src",String(e))}})),a.forEach(["width","height"],(function(e){A(k.prototype,e,(function(){return this["_"+e]||0}),(function(t){this.logger.debug("set property "+e,t),isNaN(t)||this["_"+e]===t||(this["_"+e]=t,"width"===e&&!this.height&&this.videoWidth&&this.videoHeight?this._height=t*(this.videoHeight/this.videoWidth):"height"===e&&!this.width&&this.videoWidth&&this.videoHeight&&(this._width=t*(this.videoWidth/this.videoHeight))),this._handleResize()}))})),A(k.prototype,"volume",(function(){return void 0!==this._volume?this._volume:0}),(function(e){this._volume=e,this.canvasPlayer.audio&&this.canvasPlayer.audio.authorizeAudio(()=>{this.canvasPlayer.volume=this._volume}),this.canvasPlayer.volume=this._volume})),A(k.prototype,"currentTime",(function(){return this._ended?this.canvasPlayer.duration:isNaN(this.canvasPlayer.currentTime)?0:this.canvasPlayer.currentTime}),(function(e){this.canvasPlayer.currentTime=e})),A(k.prototype,"seekable",(function(){return!0})),A(k.prototype,"readyState",(function(){return 4})),A(k.prototype,"networkState",(function(){return 1})),A(k.prototype,"autoplay",(function(){return void 0!==this._autoplay&&this._autoplay}),(function(e){this._autoplay=e})),A(k.prototype,"videoWidth",(function(){return this.canvasPlayer.videoWidth||0})),A(k.prototype,"videoHeight",(function(){return this.canvasPlayer.videoHeight||0})),A(k.prototype,"preload",(function(){return!0}),(function(e){})),A(k.prototype,"seeking",(function(){return this._seeking})),A(k.prototype,"muted",(function(){return 0===this._volume})),A(k.prototype,"ended",(function(){return this._ended})),A(k.prototype,"error",(function(){return this._error})),A(k.prototype,"paused",(function(){return this._paused})),A(k.prototype,"currentSrc",(function(){return this._src})),A(k.prototype,"played",(function(){let e=new S;return e.addRange(0,this.currentTime),e})),A(k.prototype,"buffered",(function(){let e=new S;return e.addRange(0,this.currentTime),e})),A(k.prototype,"loop",(function(){return void 0!==this._loop&&this._loop}),(function(e){this._loop=e,this.setAttribute("loop",String(e))})),A(k.prototype,"controls",(function(){return!1}),(function(e){})),k.prototype.load=r.noop,k.prototype.canPlayType=function(e){return"video/mp4"===e?"probably":""},k.prototype.addEventListener=function(e,t,i=!1){w[e]&&r.isObject(this.listeners)?(this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)):HTMLElement.prototype.addEventListener.call(this,e,t,i)},k.prototype.removeEventListener=function(e,t,i){if(w[e]){let i=this.listeners[e].indexOf(t);i>=0&&(this.listeners[e][i]=()=>{})}else HTMLElement.prototype.removeEventListener.call(this,e,t,i)},k.prototype._handleResize=function(){this.canvasPlayer.width=this.width,this.canvasPlayer.height=this.height,this.style.backgroundColor="black"},k.prototype.createdCallback=function(){k.call(this)},k.prototype.attributeChangedCallback=function(e,t,i){this.logger.debug("attributeChangedCallback",e,t,i),y(this,e)},k.prototype.detachedCallback=function(){this.logger.debug("detached callback called"),this.canvasPlayer.pause()},k.prototype.attachedCallback=function(){this.logger.debug("attachedCallback called"),this.attachedCallbackCalled=!0;try{this.style.display="block",this.style.overflow="hidden",this.style.objectFit="contain";let e=["width","height","position","top","left"],t=window.originalCreateElement?window.originalCreateElement.call(this.ownerDocument,"video"):this.ownerDocument.createElement("video");this.parentNode.appendChild(t),v.copyCSSRules(t,this,e),t.parentNode.removeChild(t),this.style.width&&"auto"!==this.style.width||(this.style.width="100%"),this.style.height&&"auto"!==this.style.height||(this.style.height="100%"),this._handleResize(),this._iframeResizer=document.createElement("iframe"),this._iframeResizer.style.zIndex=0,this._iframeResizer.style.width="100%",this._iframeResizer.style.height="100%",this._iframeResizer.style.border="none",this._iframeResizer.style.margin="0",this._iframeResizer.style.padding="0",this._mainContainer.appendChild(this._iframeResizer),this._iframeResizer.contentWindow.document.write("<html><body></body></html>"),this._iframeResizer.contentWindow.document.close();let i=()=>{this._width=this._iframeResizer.contentWindow.innerWidth,this._height=this._iframeResizer.contentWindow.innerHeight,this.logger.debug("component resized",this.width,this.height),this._handleResize()};this._iframeResizer.contentWindow.addEventListener("resize",i,!1),this._handleResize(),this.style.backgroundColor="black"}catch(e){this.logger.debug("attachedCallback throw an exception",e)}};i(161);const P=window.teads||{},j=window.teads.video||{};j.HTMLVideoCanvas=(()=>{if(!Object(n.isDesktop)())try{const e=j.HTMLVideoCanvas;return new e,e}catch(e){try{return document.registerElement("video-canvas",{prototype:k.prototype})}catch(e){new s.a("Video globals").warn(e)}}})(),j.HTMLVideoCanvas&&j.HTMLVideoCanvas.prototype&&(j.HTMLVideoCanvas.prototype.addEventListener=k.prototype.addEventListener),P.video=j,window.teads=P;const L=window.teads||{};window.teads=L;var x=i(16),V=i(0),N=i(58),D=i(52),R=i(72);var _=i(53),M=i(84),F=i(3),U=i(77),B=i(29),W=i(111);class H extends class{constructor(e,t){this.container=e,this.config=t,this.logger=new s.a("vpaid.BaseVPAIDContainer"),this.backgroundColor="#000000",this.id=t.id||Object(b.rand)(20,!1)}setBackground(e){this.backgroundColor=e}destroy(){try{!this.isDetroyed&&this.creativeContainer?(this.isDetroyed=!0,V.b.fromNullable(this.creativeContainer.parentNode).forEach(e=>e.removeChild(this.creativeContainer)),this.creativeContainer=null,this.vpaid=null):this.isDetroyed&&this.logger.error("Cannot call destroy twice !")}catch(e){this.logger.error("unable to remove VPAID creative container: "+e)}}getVPAID(){return this.logger.info("getVPAIDAd - Retrieve ad from creative"),this.vpaid}getCreativeContainer(){return this.creativeContainer}}{constructor(){super(...arguments),this.getCreativeWindow=e=>e.contentWindow||v.getWindow(e)}loadVpaid(e,t,i){this.url=e;const n=V.b.fromNullable(v.getWindow(this.container));let s=!1;const o=e=>{n.forEach(e=>e[this.callbackName]=r.noop),i(e),this.destroy()};this.callbackName="vpaidjsload_"+this.id,n.forEach(e=>e[this.callbackName]=i=>{if(s=!0,clearTimeout(this.loadTimeoutId),e[this.callbackName]=r.noop,i){const e=this.getCreativeWindow(this.creativeContainer);try{this.vpaid=e.getVPAIDAd()}catch(e){let t=R.b;return t.message+=" "+e,o(t)}this.logger.info("getVPAIDAd - Retrieve ad from creative"),t(this.vpaid)}else o(R.c)}),this.setUpCreativeContainers(this.container,e),this.loadTimeoutId=setTimeout(()=>{s||o(R.d)},_.c)}setUpCreativeContainers(e,t){this.mainContainer=document.createElement("div"),this.mainContainer.style.setProperty("position","relative"),e.appendChild(this.mainContainer);const i=v.createIframe("vpaid-container-"+this.id);n.isIosOrMacOs16_3()&&(i.srcdoc=""),this.creativeContainer=i,this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer),V.b.fromNullable(this.getCreativeWindow(this.creativeContainer)).forEach(e=>{e.teads=Object.assign(Object.assign({},window.teads),{api:this.config.api}),e.document.write(this.getCreativeTemplate(t,this.callbackName,this.backgroundColor)),e.document.close(),this.vpaidContainer=e.document.getElementById("vpaid-container"),this.videoContainer=e.document.getElementById("video-container")})}getCreativeTemplate(e,t,i){return`\n      <!DOCTYPE html>\n      <html>\n        <body style="margin:0px;padding:0px;overflow:hidden">\n          <script type="text/javascript">\n            var target = window.parent;\n            var script = document.createElement("script");\n            script.onload = function() {\n              target["${t}"](true)\n            };\n            script.onerror = function() {\n              target["${t}"](false)\n            };\n            script.async = true;\n            script.src = "${e}";\n            document.body.appendChild(script);\n          <\/script>\n          <div id="video-container"\n            style="position:absolute;top:0px;left:0px;z-index:1;background-color:${i}">\n          </div>\n          <div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div>\n        </body>\n      </html>\n    `}getEnvironmentVars(e={}){return V.b.fromNullable(this.environmentVars).getOrElse(()=>(this.environmentVars=Object.assign(Object.assign({},Object(D.a)({slot:this.vpaidContainer,videoSlot:this.initVideo(this.getCreativeWindow(this.creativeContainer)||window,this.config.useCustomVideo&&window.teads.video.HTMLVideoCanvas),videoSlotCanAutoPlay:!0},Object(r.not)(r.isNull))),e),this.environmentVars))}destroy(){super.destroy(),this.mainContainer&&this.mainContainer.parentNode&&(this.mainContainer.parentNode.removeChild(this.mainContainer),this.mainContainer=null,this.videoContainer=null)}resize(e,t){var i,n;this.currentWidth=e,this.currentHeight=t;const s=(null===(n=null===(i=this.config)||void 0===i?void 0:i.api)||void 0===n?void 0:n.isVideoBanner())?W.a(e):t;if(this.mainContainer&&(this.mainContainer.style.setProperty("width",e+"px"),this.mainContainer.style.setProperty("height",t+"px")),this.creativeContainer&&(this.creativeContainer.style.setProperty("width",e+"px","important"),this.creativeContainer.style.setProperty("height",t+"px","important")),this.videoContainer){this.videoContainer.style.setProperty("width",e+"px"),this.videoContainer.style.setProperty("height",s+"px");var r=this.videoContainer.getElementsByTagName("video")[0];r&&(r.width=e,r.height=t,r.style.setProperty("width",e+"px"),r.style.setProperty("height",s+"px"))}this.vpaidContainer&&(this.vpaidContainer.style.setProperty("width",e+"px"),this.vpaidContainer.style.setProperty("height",s+"px"))}setBackground(e){var t;super.setBackground(e),null===(t=this.videoContainer)||void 0===t||t.style.setProperty("background-color",this.backgroundColor)}getType(){return M.a.JS}registerVPAIDEventHandler(e){this.callback=e;const t=D.c(t=>V.b.fromNullable(this.vpaid).forEach(i=>i.subscribe(Object(U.b)(e,t),t,this)));t(F.a),t(B.a)}overrideCreateElement(e){const t=V.b.fromNullable(this.creativeContainer.contentDocument||this.creativeContainer.ownerDocument);window.originalCreateElement=window.originalCreateElement||t.map(e=>e.createElement).getOrNull();const i=this;t.forEach(t=>{t.createElement=function(n){return"video"===n.toLowerCase()?(i.logger.debug("createElement overriden for",n),e):window.originalCreateElement.call(t,n)}})}initVideo(e,t){const i=t?this.initCustomVideo(e):this.initClassicVideo(e);return t&&this.overrideCreateElement(i),V.b.fromNullable(this.videoContainer).forEach(e=>e.appendChild(i)),this.resize(this.currentWidth,this.currentHeight),i}initCustomVideo(e){e.document.registerElement=e.document.registerElement||document.registerElement,e.teads=e.teads||window.teads,e.teads.video=window.teads.video;const t=new e.teads.video.HTMLVideoCanvas;return t.addEventListener(w.error,e=>{if(this.logger.error("receive video error event",e,t.error),this.callback){this.logger.debug("callback ready to handle video error");const e=t.error&&t.error.code===f.MEDIA_ERR_NETWORK?"MediaProxy not ready":"unknow video error";this.logger.error(e),this.callback(new F.a(F.a.AdError,{message:e,id:x.b.UNSUPPORTED_MEDIAFILE.id}))}else this.logger.error("callback not ready to handle video error")},!1),t}initClassicVideo(e){const t=e.document.createElement("video");return t.setAttribute("webkit-playsinline","true"),t.setAttribute("playsinline","true"),t.setAttribute("muted","true"),n.isAndroid()&&n.isChromeWebView()&&t.setAttribute("poster",N.b),t}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o}));var n=i(3),s=i(26);const r={error:n.a.AdError,click:n.a.AdClickThru,pause:n.a.AdPaused,resume:n.a.AdPlaying,skip:n.a.AdSkipped,creativeView:n.a.AdStarted,start:n.a.AdVideoStart,firstQuartile:n.a.AdVideoFirstQuartile,midpoint:n.a.AdVideoMidpoint,thirdQuartile:n.a.AdVideoThirdQuartile,complete:n.a.AdVideoComplete,impression:n.a.AdImpression,close:n.a.AdUserClose,closeLinear:n.a.AdUserClose,progress:n.a.AdRemainingTimeChange,otherAdInteraction:n.a.AdInteraction},o={adChoices:s.a.AdChoicesClickRequest}},,function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r}));var n=i(2);const s=e=>e,r=e=>Object(n.isNumber)(e)&&e>=0},function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i(11),s=i(78);const r=e=>((e,t,i)=>Math.min(Math.max(e,t),i))(e,0,1),o=(e,t,i=1e-4)=>Math.abs(e-t)<i;class a{constructor(e){this.config=e,this.lastInViewPercent=0,this.targetScrollY=0,this.targetTop=0,this.timeoutStartedAt=null,this.animationStartedAt=null,this.animationStarted=!1,this.update=()=>{this.slotTop=this.config.slot.getBoundingClientRect().top,this.inViewPercent=this.calculatePercent(),this.updateTarget(),this.canAnimate()&&(this.animationStarted||this.startAnimation(),this.animate())}}calculatePercent(){const e=Object(s.b)(this.config.win),t=Math.abs(this.slotTop);return r((e-t)/e)}canAnimate(){if(this.animationStarted)return!0;const e=this.inViewPercent>=this.config.triggerAt&&this.inViewPercent<1,t=this.timeoutStartedAt&&Date.now()-this.timeoutStartedAt>=this.config.timeout;return e&&t}animate(){let e=r((Date.now()-this.animationStartedAt)/this.config.duration);o(e,1)&&(e=1,this.stopAnimation());const t=this.targetScrollY+e*this.targetTop;this.config.win.scrollTo({top:t,behavior:"auto"})}startAnimation(){this.animationStarted=!0,this.animationStartedAt=Date.now()}stopAnimation(){this.animationStarted=!1,this.timeoutStartedAt=null}updateTarget(){this.animationStarted||o(this.inViewPercent,this.lastInViewPercent)||(this.timeoutStartedAt=Date.now(),this.targetScrollY=this.config.win.scrollY,this.targetTop=this.slotTop),this.lastInViewPercent=this.inViewPercent}}var d=i(5),c=i(33),l=i(3),h=i(46),u=i(0),p=i(4);const g=e=>e+"px";class m{constructor(e){this.format=e,this.logger=new n.a(`Interscroller[${Math.floor(1e3*Math.random())}]`),this.isLandscape=!1,this.onResize=()=>{const e=Object(s.e)(this.win);this.isLandscape!==e&&(this.isLandscape=e,Object(s.f)()),this.format.responsive.resize(!0),this.setupPlayerContainer()},this.setupPlayerContainer=()=>{const e=this.format.playerContainer,t=e.querySelector(":scope > iframe");Object.assign(e.style,{left:g(-this.horizontalOffset),maxWidth:"none"}),t&&Object.assign(t.style,{maxWidth:"none"})},this.win=this.format.placement.placementConfig.parentWindow.getWindow()}static get isEnabled(){return m.enabled}enableBehavior(){this.logger.info("enableBehavior"),m.enabled=!0,this.magnet=new a({timeout:400,duration:200,triggerAt:.85,slot:this.format.playerContainer,win:this.win}),this.isLandscape=Object(s.e)(this.win),this.startLoop(),d.addEventListener("resize",this.win,this.onResize);const e=this.format.getVpaidAd();e.subscribe(this.setupPlayerContainer,l.a.AdSizeChange),e.subscribe(this.setupPlayerContainer,l.a.AdStarted),this.setupFixedBackgroundImage(),this.setupFixedBackgroundVideo(),this.setupParentContainer(),this.setupPlayerContainer(),this.format.responsive.resize(!0),this.validateIntegration()}startLoop(){const e=()=>{window.requestAnimationFrame(e),this.isLandscapeWithVerticalAd||this.magnet.update()};e()}get isLandscapeWithVerticalAd(){const e=this.format.player.getMediafile();return e.width/e.height<.8&&Object(s.e)(this.win)}get screenWidth(){return Object(s.d)(this.win)}get screenHeight(){return Object(s.b)(this.win)}get horizontalOffset(){return this.format.parentContainer.querySelector(":scope > div").getBoundingClientRect().left}setupFixedBackgroundImage(){const e=this.format.vpaidApi.fixedBackgroundImage;e.onLoad(()=>{e.resize=()=>{const t=e.getBaseContainer(),i=e.getFixedContainer(),n=e.getImage(),s=this.isLandscapeWithVerticalAd,r=s?0:this.screenWidth,o=s?0:this.screenHeight,a=r*(n.naturalHeight/n.naturalWidth);Object.assign(i.style,{width:g(r),height:g(o),top:"unset",bottom:g(0),left:g(0),backgroundSize:`${g(r)} ${g(a)}`,backgroundPosition:"center center"}),i.style.setProperty("background-repeat","no-repeat","important"),this.setupFixedBackgroundContainer(r,o,t)},e.resize()})}setupFixedBackgroundVideo(){const e=this.format.vpaidApi.fixedBackgroundVideo;e.onLoad(()=>{e.resize=()=>{const t=e.getBaseContainer(),i=e.getVideo(),n=this.isLandscapeWithVerticalAd,s=n?0:this.screenWidth,r=n?0:this.screenHeight,o=s*(i.videoHeight/i.videoWidth);Object.assign(i.style,{width:g(s),height:g(o),top:"unset",bottom:g(r/2),left:g(0),transform:`translateY(${g(o/2)})`}),i.width=s,i.height=o,this.setupFixedBackgroundContainer(s,r,t)},e.resize()})}setupFixedBackgroundContainer(e,t,i){Object.assign(i.style,{width:g(e),height:g(t),left:g(-this.horizontalOffset),maxWidth:"none"}),i.style.setProperty("-webkit-clip-path","inset(-1px 0px)","important"),i.style.setProperty("clip-path","inset(-1px 0px)","important")}setupParentContainer(){this.format.parentContainer.style.setProperty("overflow","visible")}validateIntegration(){const e=new h.c("https://s8t.teads.tv/logs/format/http-source",10,"1160",u.b.of(this.format.placement.pid),{getSamplingThreshold:h.d,sendLog:h.e,getFullContext:p.getFullContext,isHeaderBiddingTag:()=>!1}),t=t=>{this.logger.info(t),e.info("Interscroller: validateIntegration | "+t)},i=t=>{this.logger.error(t),e.error("Interscroller: validateIntegration | "+t)},n=(e,t)=>Math.abs(e-t)<1,s=()=>{const e=this.screenHeight,t=this.format.playerContainer.getBoundingClientRect();n(t.left,0)||i("playerBounds.left | expected 0 | actual "+t.left),n(t.height,e)||i(`playerBounds.height | expected ${e} | actual ${t.height}`)},r=()=>{const e=this.screenHeight,t=this.format.parentContainer.getBoundingClientRect();t.height<e&&i(`parentBounds.height | expected ${e} | actual ${t.height}`)},o=(e,t)=>{e.onLoad(()=>{const s=this.screenWidth,r=this.screenHeight,o=e.getBaseContainer().getBoundingClientRect();n(o.left,0)||i(`${t}Bounds.left | expected 0 | actual ${o.left}`),n(o.width,s)||i(`${t}Bounds.width | expected ${s} | actual ${o.width}`),n(o.height,r)||i(`${t}Bounds.height | expected ${r} | actual ${o.height}`)})};this.format.getVpaidAd().subscribe(()=>{c.d(()=>{t("Impression"),this.isLandscapeWithVerticalAd?t("Skip validation because the device is in landscape"):(s(),r(),o(this.format.vpaidApi.fixedBackgroundImage,"fixedBackgroundImage"),o(this.format.vpaidApi.fixedBackgroundVideo,"fixedBackgroundVideo"))},500)},l.a.AdStarted)}}m.enabled=!1},function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return y}));var n=i(0),s=i(11),r=i(2),o=i(1),a=i(16),d=i(13),c=i(120),l=i(40),h=i(35);const u=e=>e;var p=i(141),g=i(14),m=i(43),f=i(54);const b=e=>e.includes("[PAGEURL]")?Object(f.g)(e)(["[PAGEURL]",Object(g.g)(m.a)]):e,v=new s.a("vast.VASTParser"),A=["acceptInvitation","acceptInvitationLinear","billable","click","clickIcon","close","closeLinear","collapse","complete","creativeView","customClicks","error","exitFullscreen","expand","firstQuartile","fullscreen","impression","midpoint","mute","noAd","noLinearAd","otherAdInteraction","pause","progress","resume","rewind","skip","start","thirdQuartile","unmute"];function y(e,t,i,s){const g=new c.a;try{const c=l.c(e).documentElement;if("VAST"!==c.tagName)return i(new a.b(a.b.XML_PARSE),g);g.tracking.error=g.tracking.error.concat(function(e){const t=o.map(o.fromArrayLike(e.getElementsByTagName("Error")),e=>({url:l.b(e),data:null}));return o.filter(t,e=>!!e.url)}(c)),function(e){return n.b.fromNullable(e.getElementsByTagName("Ad")[0])}(c).match({none:()=>{i(new a.b(a.b.NO_ADS),g)},some:e=>{if(g.version=function(e){return parseInt(l.a(e,"version"),10)}(c),g.version<2)return i(new a.b(a.b.UNSUPPORTED_VERSION),g);g.creativeId=function(e){return n.b.fromNullable(e.getElementsByTagName("Creative")[0]).flatMap(e=>n.b.fromNullable(l.a(e,"id")).orElse(()=>n.b.fromNullable(l.a(e,"adID"))))}(e).getOrValue("");const m=function(e){return n.b.fromNullable(e.getElementsByTagName("Linear")[0])}(e);if(!function(e){return!!e.getElementsByTagName("Wrapper").length}(e)&&m.isEmpty())return i(new a.b(a.b.LINEARITY),g);g.id=function(e){return l.a(e,"id")}(e),g.adTagUri=function(e){return n.b.fromNullable(e.getElementsByTagName("VASTAdTagURI")[0]).flatMap(e=>n.b.fromNullable(l.b(e)).map(u))}(e).map(e=>s.map(t=>(({status:e,consent:t})=>{const i=[Object(h.h)(e),...Object(h.g)(t)];return Object(h.a)(i)})(t)(e)).map(b).getOrValue(e)).getOrValue(void 0),g.title=function(e){return l.b(e.getElementsByTagName("AdTitle")[0])}(e),g.adSystem=function(e){return l.b(e.getElementsByTagName("AdSystem")[0])}(e);const f=o.map(w("ClickThrough",e),e=>Object(p.a)(e.url));g.clickThrough=g.clickThrough.concat(f),g.tracking.impression=g.tracking.impression.concat(w("Impression",e)),g.tracking.click=g.tracking.click.concat(w("ClickTracking",e)),m.forEach(e=>{const t=function(e){return n.b.fromNullable(e.getElementsByTagName("Icon")[0]).flatMap(e=>n.b.fromNullable(e.getElementsByTagName("IconClicks")[0])).map(e=>({iconClick:e,iconClickThrough:e.getElementsByTagName("IconClickThrough")[0]})).map(({iconClick:e,iconClickThrough:t})=>({clickThrough:n.b.fromNullable(l.b(t)),trackings:o.map(o.fromArrayLike(e.getElementsByTagName("IconClickTracking")),e=>({url:l.b(e),data:null}))})).getOrValue({clickThrough:n.a,trackings:[]})}(e);g.adChoicesIconClickThrough=t.clickThrough,g.tracking.clickIcon=g.tracking.clickIcon.concat(t.trackings);const i=function(e){return r.seconds(l.a(e,"skipoffset"))}(e);g.skippable=function(e){return!isNaN(e)}(i),g.skipDelay=function(e){return e||0}(i),g.duration=function(e){return r.seconds(l.b(e.getElementsByTagName("Duration")[0]))}(e),g.adParameters=function(e){return l.b(e.getElementsByTagName("AdParameters")[0])}(e);const s=function(e,t){const i=o.fromArrayLike(e.getElementsByTagName("Tracking")),s=o.filter(o.map(i,e=>{const i=l.a(e,"event");return"progress"===i?function(e,t){const i=l.a(e,"offset");return function(e,t){return Object(r.isString)(e)?e.indexOf(":")>0?n.b.fromNullable(r.seconds(e)):n.b.fromNullable(d.trim(e).match(/^([0-9\.]+)%$/)).map(e=>t*parseInt(e[1],10)/100):n.a}(i,t).map(t=>({event:"progress",tracking:{url:l.b(e),data:t}})).orElse(()=>(v.error("Wrong offset for progress tracking: "+i),n.a))}(e,t):Object(n.c)({event:i,tracking:{url:l.b(e),data:null}})}),e=>e.nonEmpty());return o.reduce(s,(e,t)=>(t.forEach(t=>{e[t.event]||(e[t.event]=[]),e[t.event].push(t.tracking)}),e),{})}(e,g.duration);for(const e in s)s.hasOwnProperty(e)&&(E(e)&&g.tracking.hasOwnProperty(e)?g.tracking[e]=g.tracking[e].concat(s[e]):v.warn(`Could not add tracking resource as the VAST event "${e}" is not supported.`));g.mediaFiles=function(e,t){const i=o.fromArrayLike(e.getElementsByTagName("MediaFile"));return o.map(i,e=>{const i=l.a(e,"type");return{type:i,id:l.a(e,"id"),url:l.b(e),width:parseInt(l.a(e,"width"),10),height:parseInt(l.a(e,"height"),10),delivery:l.a(e,"delivery"),bitrate:parseInt(l.a(e,"bitrate"),10),api:l.a(e,"apiFramework"),scalable:!!l.a(e,"scalable"),minBitrate:parseInt(l.a(e,"minBitrate"),10),maxBitrate:parseInt(l.a(e,"maxBitrate"),10),maintainAspectRatio:!!l.a(e,"maintainAspectRatio"),codec:l.a(e,"codec"),adParameters:/javascript/g.test(i)?t:null}})}(e,g.adParameters)}),g.extensions=function(e,t){const i=JSON.parse(JSON.stringify(t)),n=o.fromArrayLike(e.getElementsByTagName("Extension"));return o.map(n,e=>({type:l.a(e,"type"),content:l.b(e),xml:e,definition:i}))}(e,g),t(g)}})}catch(e){const t=a.a.get(a.b.UNDEFINED.id,"VASTParser.parse error",e);i(t,g)}}function w(e,t){const i=o.fromArrayLike(t.getElementsByTagName(e));return o.map(i,e=>({url:l.b(e),data:null}))}function E(e){return o.includes(A,e)}},function(e,t,i){"use strict";var n=i(55),s=i(9),r=i(92);const o={track:(e,t,i)=>Object(r.d)(e,e,o.canTrack,t,i,Object(r.c)(e,t)),trackFormatError:(e,t,i)=>Object(s.b)(Object(n.createFormatErrorAction)([n.FormatEvent.AdAvailableErrorVast,e]),e=>Object(r.d)(e,n.FormatEvent.AdAvailableErrorVast,o.canTrack,t,i,Object(r.c)(e,t))),canTrack:r.a};t.a=o},,function(e,t,i){"use strict";i(68);var n=i(1),s=i(4),r=i(5),o=i(10),a=i(83),d=i(13),c=i(2),l=i(99);s.init();const h=window.teads||{};h.ArrayHelper=n,h.Context=s,h.Dom=r,h.HTMLHelper=o,h.Random=a,h.StringHelper=d,h.Utils=c,h.Uuid=l,window.teads=h},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(19),s=i(2);class r extends n.a{constructor(e=r.DEFAULT){super("VideoStart"),this.value=e,this.checkValue()}checkValue(){Object(s.isString)(this.value)&&r.VALUES[this.value.toUpperCase()]||(this.value=r.DEFAULT)}isThreshold(){return this.value===r.VALUES.THRESHOLD}isClick(){return this.value===r.VALUES.CLICK}getValue(){return this.value}}r.VALUES={THRESHOLD:"threshold",CLICK:"click"},r.DEFAULT=r.VALUES.THRESHOLD},function(e,t,i){"use strict";i.d(t,"d",(function(){return f})),i.d(t,"a",(function(){return b})),i.d(t,"e",(function(){return w})),i.d(t,"b",(function(){return E})),i.d(t,"c",(function(){return O}));var n=i(1),s=i(9),r=i(2),o=i(20),a=i(32),d=i(27),c=i(13),l=i(47),h=i(0),u=i(37),p=i(30);const g=(e,t=d.a)=>Object(s.b)(e,Object(c.replaceStringsWithValue)(p.b.timestampMacroNames,t())),m=Object(n.reduce)(a.d,(e,t)=>Object.assign(Object.assign({},e),{[t.toLowerCase()]:t}),{}),f=Object(s.a)(Object(r.prop)("event"),Object(n.isMemberOf)(Object.keys(m))),b=n.cArray.map(({event:e,url:t})=>({event:m[e],trackingUrl:Object(l.i)(g(t))})),v=Object(n.reduce)(Object(s.b)(o.b,n.cArray.filter(Object(r.not)(Object(r.equals)(o.a.Progress)))),(e,t)=>Object.assign(Object.assign({},e),{[t.toLowerCase()]:t}),{}),A=/progress-(\d+)/i,y=e=>A.test(e),w=Object(s.a)(Object(r.prop)("event"),e=>y(e)||Object(n.isMemberOf)(Object.keys(v))(e)),E=Object(s.a)(Object(n.partition)(Object(s.a)(Object(r.prop)("event"),y)),u.a.bimap(Object(s.a)(n.cArray.map(({event:e,url:t})=>Object(s.b)(e,e=>e.match(A),h.b.fromNullable,h.d.map(([,e])=>parseInt(e,10)),h.d.filter(r.isNumber),h.d.map(e=>({offset:e,trackingUrl:g(t)})))),n.flattenOptions),n.cArray.map(({url:e,event:t})=>({event:v[t],trackingUrl:g(e)})))),O=Object(s.a)(n.cArray.filter(e=>Object(n.isMemberOf)(o.b)(e.event)&&Object(r.not)(y)(e.event)),n.cArray.map(({event:e,url:t})=>({event:e,trackingUrl:g(t)})))},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(5),s=i(58),r=i(185);class o{constructor(e,t=0){this.isSizeResolved=!1,this.scoreValues={WIDTH:20,HEIGTH:20,LENGTH:20,HIGH_MIN_SLOT:-5,LOW_MIN_SLOT:500,EQUAL_MIN_SLOT:1e3},this.element=e,this.index=t;const i=n.getSize(e);this.width=i.width,this.height=i.height}resolveSize(){if(!this.isSizeResolved){let e=this.element.style.overflow;this.element.style.setProperty("overflow","hidden");const t=n.getSize(this.element);this.element.style.setProperty("overflow",e),this.width=t.width,this.height=t.width/s.a,this.isSizeResolved=!0}}getElement(){return this.element}getElementRect(){return this.elementRect||(this.elementRect=n.getBoundingClientRect(this.element)),this.elementRect}getWidth(){return this.width}getHeight(){return this.height}getScore(){return this.score}getIndex(){return this.index}computeScore(e){let t=r.c,i=0,s=e.minimum.get(),o=e.parentWindow.getWindow();this.width>e.minimumWidth.get()+t.WIDTH_MARGIN&&(i+=this.scoreValues.WIDTH),this.height>t.MIN_LONG_HEIGHT+t.HEIGHT_MARGIN&&(i+=this.scoreValues.HEIGTH),this.height>e.minimumTextLength.get()+t.LENGTH_MARGIN&&(i+=this.scoreValues.LENGTH),this.index>s+t.LENGTH_MARGIN?i+=this.scoreValues.EQUAL_MIN_SLOT:this.index>=0&&s?i+=this.scoreValues.HIGH_MIN_SLOT:i+=this.scoreValues.LOW_MIN_SLOT;let a=n.getBoundingClientRect(this.getElement()),d=o.document.body||o.document.documentElement;i-=(a.top+(o.pageYOffset||d.scrollTop))/20,this.score=i}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return u}));var n=i(0),s=i(1),r=i(11),o=i(116),a=i(94);const d=new r.a("SameAd"),c={playedMediaFileUIDs:[]},l=[129559,129560,23257,47533,126642,129524,23264,66128,129544,129545,29456,66125,129541,129542,47531,47532];function h(e,t){c.playedMediaFileUIDs=c.playedMediaFileUIDs.concat({tagManager:e,uid:g(t)})}function u(e,t){return!(l.indexOf(e.getPid())>-1)&&Object(o.a)(e,t).match({some:p,none:()=>(d.warn("Could not find a matching TagManagerResources for this TagManager",e),!1)})}function p({tagIsCampaignTag:e,vastPlayer:t,tagManager:i}){const r=Object(s.map)(Object(s.filter)(c.playedMediaFileUIDs,(o=i,e=>e.tagManager!==o&&o.pageId===e.tagManager.pageId)),e=>e.uid);var o;return t.flatMap(e=>{var t;return n.b.fromNullable(null===(t=e.getLinearAd())||void 0===t?void 0:t.mediaFiles)}).match({some:t=>!e&&Object(s.some)(t,e=>function(e,t){return Object(s.some)(t,t=>t===g(e))}(e,r)),none:()=>(d.debug("No player, or if any, no elected media file was found for this TagManager",i),!1)})}function g(e){var t;return function(e){var t,i;return null!==(i=null===(t=e.match(a.a))||void 0===t?void 0:t[1])&&void 0!==i?i:e}(e.url)+(null!==(t=e.adParameters)&&void 0!==t?t:"")}},function(e,t){e.exports="<script type='text/javascript'> var source; window.addEventListener('message', function(event) { if (event.data && event.data.event === 'reportingObserverSource') { source = event.source; } }, true); if (\"ReportingObserver\" in window) { try { const observer = new ReportingObserver(function (reports) { reports.forEach(function (report) { if (source) { source.postMessage({ event: 'heavyAdIntervention', report: JSON.stringify(report) }, '*'); } }) }, {buffered: true}); observer.observe(); } catch (e) { } } <\/script> "},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=e=>e},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i(154);var n=i(11);class s{static updateTeadsGDPRPayload(e){s.payload=e,window.teads.gdprPayload.status=e.status,window.teads.gdprPayload.consent=e.consent,window.teads.gdprPayload.reason=e.reason,window.teads.gdprPayload.apiVersion=e.apiVersion.getOrValue(""),window.teads.gdprPayload.cmpId=e.cmpId.getOrValue(""),s.logger.info(`payload: { status: ${e.status}, consent: ${e.consent}, reason: ${e.reason}}, apiVersion: ${e.apiVersion}, cmpId: ${e.cmpId}`)}}s.logger=new n.a("GDPR")},function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return p}));var n=i(87),s=i(1),r=i(5),o=i(11),a=i(10),d=i(30),c=i(6);const l=new o.a("helper.WigoIframe");let h;function u(){return c.a.tryCatch(()=>Object(a.findTopWindow)(window.document.body)).orElse(e=>(l.warn("Cannot get top window",e),Object(c.e)(window))).forEach(e=>{h=Object(a.createIframe)("wigo-helper"),h.id="wigoiframe",h.src=d.b.wigoIframeUrl,h.style.setProperty("display","none","important"),e.document.body.appendChild(h)}),h}function p(){const e=n.b.getInstances();e.sort((e,t)=>r.getBoundingClientRect(e.elementToFollow).top-r.getBoundingClientRect(t.elementToFollow).top);let t=e.length;s.forEach(e,e=>{e.moveButton(t),t--})}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(49),s=i(19),r=i(2),o=i(4);class a extends s.a{constructor(e=a.DEFAULT){super("Format"),this.value=e,this.checkValue()}checkValue(){if(!Object(r.isString)(this.value)||!a.VALUES[this.value.toUpperCase()]||Object(o.isAmp)()&&!this.isInRead())throw new n.a(n.a.OPTION_FORMAT_INVALID)}get(){return this.value}isInRead(){return this.value===a.VALUES.INREAD}isInterstitial(){return this.value===a.VALUES.INTERSTITIAL}isRewarded(){return this.value===a.VALUES.REWARDED}}a.VALUES={INREAD:"inread",INTERSTITIAL:"interstitial",REWARDED:"rewarded"},a.DEFAULT=null},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n="Teadstv"},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o}));var n=i(0),s=i(2);function r({gdprIab:e}){return n.b.fromNullable(e).filter(e=>Object(s.isObject)(e)&&Object(s.hasOwnProperties)(e,["status","consent"])&&Object(s.isNumber)(e.status)&&Object(s.isString)(e.consent)).map(({status:e,consent:t,reason:i,apiVersion:s,cmpId:r})=>({status:e,consent:t,reason:n.b.fromNullable(i),apiVersion:n.b.fromNullable(s),cmpId:n.b.fromNullable(r)}))}const o=({reason:e,status:t,consent:i,apiVersion:n,cmpId:s})=>({reason:e,status:t,consent:i,apiVersion:n.getOrNull(),cmpId:s.getOrNull()})},function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n,s=i(4),r=i(0),o=i(11),a=i(14),d=i(12),c=i(84),l=i(72);!function(e){e[e.UNLOADED=-1]="UNLOADED",e[e.READY=0]="READY",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(n||(n={}));var h=n,u=i(76),p=i(1),g=i(10);class m extends u.a{setUpCreativeContainers(e,t){if(window.teads.api=this.config.api,this.mainContainer=document.createElement("div"),this.mainContainer.style.setProperty("position","relative"),e.appendChild(this.mainContainer),this.creativeContainer=document.createElement("div"),this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer),this.creativeContainer.innerHTML=this.getCreativeTemplate(t,this.callbackName,this.backgroundColor),this.vpaidContainer=r.b.fromNullable(Object(g.getDocument)(this.creativeContainer)).flatMap(e=>r.b.fromNullable(e.getElementById("vpaidjs-container"))).getOrNull(),this.videoContainer=r.b.fromNullable(Object(g.getDocument)(this.creativeContainer)).flatMap(e=>r.b.fromNullable(e.getElementById("video-container"))).getOrNull(),!Object(p.includes)([u.a.CANVAS,u.a.VIDEO],t)){const e=document.createElement("script");r.b.fromNullable(Object(g.getWindow)(this.container)).forEach(t=>{e.onload=()=>t[this.callbackName](!0),e.onerror=()=>t[this.callbackName](!1)}),e.src=t,this.creativeContainer.appendChild(e)}}getCreativeTemplate(e,t,i){return`\n      <div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color:${i}"></div>\n      <div id="vpaidjs-container" style="position:absolute;top:0px;left:0px;z-index:2"></div>\n    `}}var f=i(127),b=i(77),v=i(5),A=i(45),y=i(3),w=i(118),E=i(53),O=i(2),C=i(111);class I extends w.a{constructor(e,t){super(),this.config=t,this.lastAdRemainingTime=-1,r.b.fromNullable(e.getVPAID()).forEach(e=>this.setVPAID(e)),this.type=e.getType(),this.container=e,this.container.registerVPAIDEventHandler(e=>{switch(e.type){case y.a.AdRemainingTimeChange:case y.a.AdDurationChange:return}this.handleVpaidEvent(e)})}initAd(e,t,i,n,s,r){this.container.resize(e,t),this.type===c.a.JS&&"string"==typeof s&&(s={AdParameters:s}),super.initAd(e,t,i,n,s,this.type===c.a.JS?this.getEnvironmentVars(r):null)}setAdVolume(e){return this.environmentVars.forEach(t=>{r.b.fromNullable(t.videoSlot).forEach(t=>{let i=e=>{e.type===A.volumechange&&this.dispatchEvent(y.a.AdVolumeChange),v.removeEventListener(A.volumechange,t,i)};v.addEventListener(A.volumechange,t,i),t.volume=e,t.muted=!e})}),super.setAdVolume(e),this.dispatchEvent(y.a.AdVolumeChange),e}getAdVolume(){return this.environmentVars.flatMap(e=>r.b.fromNullable(e.videoSlot)).filter(e=>!Object(O.isUndefined)(e.volume)).match({some:e=>e.muted?0:e.volume,none:()=>super.getAdVolume()})}resizeAd(e,t,i){var n,s;const r=(null===(s=null===(n=this.config)||void 0===n?void 0:n.api)||void 0===s?void 0:s.isVideoBanner())?C.a(e):t;this.isResizing=!0,this.container.resize(e,t),super.resizeAd(e,r,i)}getEnvironmentVars(e){return this.container.getEnvironmentVars(e)}handleVpaidEvent(e){switch(e.type){case y.a.AdSizeChange:this.isResizing||this.container.resize(this.getAdWidth(),this.getAdHeight()),this.isResizing=!1;break;case y.a.AdStarted:this.startTimer();break;case y.a.AdStopped:this.stopTimer()}super.handleVpaidEvent(e),this.status===d.a.STOPPED&&(this.status=d.a.REMOVING,setTimeout(()=>{this.status=d.a.REMOVED,this.container.destroy()},E.a))}startTimer(){this.timerId||(this.timerId=setInterval(()=>{let e=this.getAdRemainingTime();this.status<d.a.COMPLETE&&e>=0&&this.lastAdRemainingTime!==e&&(this.lastAdRemainingTime=e,this.dispatchEvent(y.a.AdRemainingTimeChange),this.dispatchEvent(y.a.AdDurationChange))},250))}stopTimer(){this.timerId&&clearInterval(this.timerId)}}class S{constructor(e,t){this.container=e,this.config=t,this.status=h.READY,this.wigo=r.b.empty()}load(e,t,i){if(!(this.status>h.READY)){var n,s;e=Object(a.s)(e),s=this.findContainerConstructor(e),this.creativeType=c.a.JS,this.container.innerHTML="",this.status=h.LOADING;n=new s(this.container,this.config),this.config.background&&n.setBackground(this.config.background),n.loadVpaid(e,e=>{this.status=d.a.LOADED,this.wrapperClass||(this.wrapperClass=I);const s=new this.wrapperClass(n,this.config);try{t(s)}catch(e){let t=l.e;t.message+=e,i(t)}let r=Object(b.c)(e)?"2.0":"1.0";S.logger.info("handshakeVersion - Creative vpaid version "+r),this.wigo.forEach(e=>e.valid(3,1,r,"string"))},i)}}findContainerConstructor(e){return Object(s.isAmp)()||Object(s.isIABSafeFrame)()?m:e===u.a.VIDEO||e===u.a.CANVAS?u.a:f.a}setWigo(e){this.wigo=r.b.fromNullable(e)}}S.logger=new o.a("vpaid.VPAIDLoader")},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(1);const s=(e,t)=>t&&Object(n.includes)([42,6],e)},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(43);function s(){new PerformanceObserver(e=>{e.getEntriesByType("resource").filter(e=>e.name.startsWith("https://be-ms.teads.tv/nurl")).forEach(e=>{!function(e){const t=Intl.DateTimeFormat().resolvedOptions().timeZone,i=e.responseStart-e.startTime,s=e.responseEnd-e.responseStart,r=e.responseEnd-e.requestStart,o=e.responseEnd-e.startTime,a=e.domainLookupEnd-e.domainLookupStart,d=e.secureConnectionStart-e.connectStart,c=e.connectEnd-e.secureConnectionStart;n.a.info(`[BeMeasurement] TimeZone: ${t} TTFB:  ${i} DownloadTime: ${s} FullRequest: ${r} FullTime: ${o} domainLookupTime: ${a} tcpTime: ${d} tlsTime: ${c}`,1e3)}(e)})}).observe({entryTypes:["resource"]})}},function(e,t){e.exports='<div class="teads-wigo-btn"><div style="position: absolute; left:0;top:0;padding: 0 4%; border: 1px solid white; color: white; font-size: 10px; text-align: center; font-family: Arial; line-height:16px;"></div><div style="border: 6px solid #f3f3f3; border-top: 6px solid #3498db; border-radius: 50%; position: absolute; left: 60%; width: 32%; height: 32%; -webkit-animation: wigospin 2s linear infinite; animation: wigospin 2s linear infinite"></div> <style type="text/css"> .teads-wigo-btn { position: fixed; bottom: 10px; right: 10px; z-index: 2147483647; width: 75px; height: 75px; cursor: pointer; background-image: url(\'https://a.teads.tv/media/format/v3/assets/default/img/wigo.png?v2\'); transition: right ease 0.2s; } @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) { /* Retina */ .teads-wigo-btn { background-size: 75px 75px; background-image: url(\'https://a.teads.tv/media/format/v3/assets/default/img/wigo-2x.png\'); } } @-webkit-keyframes wigospin { 0% { -webkit-transform: rotate(0deg);} 100% { -webkit-transform: rotate(360deg);} } @keyframes wigospin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } </style> </div> '},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));var n=i(0);const s="https://privacy-policy.teads.tv?utm_source=inread&utm_medium=icon&utm_campaign=adchoices";function r(e){return n.b.fromNullable(e).flatMap(e=>e.adChoicesIconClickThrough).getOrValue(s)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(11),s=i(1),r=i(59);function o(e){let t;return e&&e.extensions&&e.extensions.length>0&&s.forEach(e.extensions,e=>{e.type===r.a.TEADS_CONTEXT&&(t=function(e){try{return JSON.parse(e)}catch(e){new n.a("ITeadsContextExtension").error(r.a.TEADS_CONTEXT+" extension throw an exception",e)}}(e.content))}),t}},function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i(5),s=i(1),r=i(10),o=i(0);const a=[{name:"DoubleVerify",domain:/cdn\.doubleverify\.com/,appendRule:(e,{playerContainer:t})=>{t.parentElement.appendChild(e)}},{name:"ComScore",domain:/sb\.voicefive\.com/,appendRule:(e,{playerContainer:t})=>{t.insertBefore(e,t.firstChild)}},{name:"IAS",domain:/pixel\.adsafeprotected\.com/,appendRule:(e,{parentContainer:t})=>{t.insertBefore(e,t.firstChild)}},{name:"MOAT",domain:/\.moatads\.com/,appendRule:(e,{playerContainer:t})=>{t.insertBefore(e,t.firstChild)}},{name:"TeadsQA",domain:/(amp\.localhost|localhost):18100\/track\?action=prefetch/,appendRule:(e,{playerContainer:t})=>{t.insertBefore(e,t.firstChild)}}];let d;const c=()=>{if(void 0!==d)return d;if("undefined"==typeof DOMParser||"function"!=typeof DOMParser)d=!1;else{const e=new DOMParser;try{const t=e.parseFromString("<div>Hello</div>","text/html");d="DIV"===t.body.firstElementChild.nodeName&&"Hello"===t.body.firstElementChild.innerHTML}catch(e){d=!1}}return d},l=(e,{onEnterElement:t})=>{if(!0!==t(e))for(let i=e.firstElementChild;i;i=i.nextElementSibling)l(i,{onEnterElement:t})},h=e=>{const t=e.getAttribute("src");return!("SCRIPT"!==e.nodeName||!t||!s.some(a,e=>e.domain.test(t)))},u=e=>{const t=new DOMParser,i=g(t)(e),n=s.map(((e,t)=>{const i=[];return l(e,{onEnterElement:e=>{if(t(e))return i.push(e),!0}}),s.forEach(i,e=>{e.parentElement&&e.parentElement.removeChild(e)}),i})(i,h),e=>{const t=e.getAttribute("src");return{provider:(e=>s.find(a,t=>t.domain.test(e)))(t).name,source:t,script:e}});return{creative:i.innerHTML,viewabilityTags:n}},p=e=>{const t=new DOMParser,i=g(t)(e);s.forEach(((e,t)=>{const i=[];return l(e,{onEnterElement:e=>{if(t(e))return i.push(e),!0}}),i})(i,h),e=>{(new Image).src=e.getAttribute("src")})},g=e=>t=>e.parseFromString((e=>`<div>${e}</div>`)(t),"text/html").body.firstElementChild;class m{constructor(e,t,i,n=o.a){this.sumologicLogger=e,this.connectionType=t,this.win=i,this.containers=n,this.thresholdReached=!1,this.thresholdReachedCallbacks=[],c()}appendViewabilityTags(e,t){s.forEach(e,e=>{this.containers.match({some:t=>{var i;(i=e.provider,s.find(a,e=>e.name===i)).appendRule((e=>{const t=document.createElement("script");for(let i=0;i<e.attributes.length;i++){const{name:n,value:s}=e.attributes[i];t.setAttribute(n,s)}return t})(e.script),t)},none:()=>this.sumologicLogger.error("ViewabilityTags.appendViewabilityTags called with no containers")})})}getCreativeTag(e,t=o.a){if(c()&&this.connectionType.isDisplay()){p(e);const{creative:i,viewabilityTags:n}=u(e);return this.onceThresholdReached(()=>this.appendViewabilityTags(n,t)),i}return e}onceThresholdReached(e){this.thresholdReached?e():this.thresholdReachedCallbacks.push(e)}onPercentageVisibilityChange(e){this.thresholdReached||.25<=e&&this.resolveThresholdReach()}onScroll(){this.thresholdReached||this.containers.match({some:({playerContainer:e})=>{const t=Object(r.getPercentageInView)({element:e,elementAncestors:Object(r.findParentElements)(e),elementClientRect:Object(n.getBoundingClientRect)(e),mainWindow:this.win,elementHeight:Object(n.getSize)(e).height,allowNegative:!0});this.onPercentageVisibilityChange(t)},none:()=>this.sumologicLogger.error("ViewabilityTags.onScroll called with no containers")})}resolveThresholdReach(){!0!==this.thresholdReached&&(this.thresholdReached=!0,s.forEach(this.thresholdReachedCallbacks,e=>e()),this.thresholdReachedCallbacks=[])}}},function(e,t,i){},function(e,t,i){var n=i(186);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){var n=i(187);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));class n{constructor(){this.error=[],this.click=[],this.pause=[],this.resume=[],this.skip=[],this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.impression=[],this.close=[],this.progress=[],this.mute=[],this.unmute=[],this.rewind=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.closeLinear=[],this.noAd=[],this.noLinearAd=[],this.customClicks=[],this.billable=[],this.otherAdInteraction=[],this.clickIcon=[]}}class s{}s.error="error",s.click="click",s.pause="pause",s.resume="resume",s.skip="skip",s.creativeView="creativeView",s.start="start",s.firstQuartile="firstQuartile",s.midpoint="midpoint",s.thirdQuartile="thirdQuartile",s.complete="complete",s.impression="impression",s.close="close",s.progress="progress",s.mute="mute",s.unmute="unmute",s.rewind="rewind",s.fullscreen="fullscreen",s.exitFullscreen="exitFullscreen",s.expand="expand",s.collapse="collapse",s.acceptInvitationLinear="acceptInvitationLinear",s.acceptInvitation="acceptInvitation",s.closeLinear="closeLinear",s.noAd="noAd",s.noLinearAd="noLinearAd",s.customClicks="customClicks",s.billable="billable",s.otherAdInteraction="otherAdInteraction",s.clickIcon="clickIcon"},function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var n=i(9),s=i(10),r=i(58),o=i(52),a=i(88),d=i(4),c=i(2),l=i(11),h=i(94),u=i(0),p=i(1),g=i(5),m=i(29),f=i(73),b=i(3),v=i(78),A=i(131);const y=Object(d.isDesktop)()?.08:.15,w=(e,t,i,n,s,r)=>{const o=e.orElse(()=>((e,t,i)=>{if(!t||e<=t)return u.a;const n=t/e;return Object(u.c)({width:n*i,height:t})})(i,n.height,s)).orElse(()=>((e,t,i,n,s)=>u.b.fromNullable(n).filter(t=>t.width!==i||t.height!==e).map(n=>({width:i,height:s?t.height:e})))(i,n,s,t,r)).getOrValue(t);return Object.assign(Object.assign({},o),{width:Math.round(o.width),height:Math.round(o.height)})};class E{constructor(e){if(this.abstractFormat=e,this.isLandscape=!1,this.logger=new l.a("Format.Responsive"),this.orientationChangeListeners=[],this.manualMaxWidth=!1,this.vpaidAd=e.getVpaidAd(),this.mainContainer=e.parentContainer,this.formatContainer=e.placement.getInnerContainer(),this.mediafile=e.player.getMediafile(),this.win=e.placement.placementConfig.parentWindow.getWindow(),this.linearAd=e.linearAd,this.portfolioItemId=e.formatConfig.portfolioItemId,this.resizeCallback=()=>{this.resize(),this.setResponsiveCssClass(this.mainContainer)},this.vpaidAd.subscribe(()=>{this.unsetResponsive()},b.a.AdError),this.vpaidAd.subscribe(()=>{this.unsetResponsive()},b.a.AdStopped),Object(d.isMobile)()||Object(d.isTablet)()){const e=e=>{const t=g.getWindowSize(this.win);this.isLandscape=t.width>t.height};e(),this.addOrientationChangeListener(e),this.setResponsiveCssClass(this.mainContainer),this.addOrientationChangeListener(()=>{this.isNativeFullscreen()&&this.resize()});const t=e=>{this.win.setTimeout(()=>{this.onOrientationChange(e)},200)};g.addEventListener("orientationchange",this.win,t),this.vpaidAd.subscribe(()=>{g.removeEventListener("orientationchange",this.win,t)},b.a.AdStopped)}}static findOptimalCreativeSizeBasedOnWindowSurface(e,t){const i=t.width*t.height*y,n=e.map(f.a.getRatio).getOrValue(r.a),s=Math.sqrt(i/n);return{width:n*s,height:s}}updateAndResizeWithAdVideoMetadata(e){e.width&&e.height&&(this.mediafile.width!==e.width||this.mediafile.height!==e.height)&&(this.logger.debug("video size is different from VAST mediafile, force resize to good dimensions"),this.mediafile.width=e.width,this.mediafile.height=e.height,this.resize(!0))}resizeOnStart(){this.vpaidAd.subscribe(e=>{this.logger.debug("Receive metadata from video",e),this.updateAndResizeWithAdVideoMetadata(e)},m.a.AdVideoMetadata),this.vpaidAd.subscribe(()=>this.resize(!0),b.a.AdVideoStart),this.vpaidAd.subscribe(()=>this.resize(!0),b.a.AdStarted)}setResponsive(e=this.resizeCallback){if(!this.iframeForSlotWidth&&(this.iframeForSlotWidth=document.createElement("iframe"),this.iframeForSlotWidth.className="teads-resize",this.iframeForSlotWidth.setAttribute("title","teads-resize"),this.iframeForSlotWidth.style.setProperty("height","0","important"),this.iframeForSlotWidth.style.setProperty("min-height","0","important"),this.iframeForSlotWidth.style.setProperty("width","100%","important"),this.iframeForSlotWidth.style.setProperty("border","none","important"),this.iframeForSlotWidth.style.setProperty("margin","0","important"),this.iframeForSlotWidth.style.setProperty("padding","0","important"),this.iframeForSlotWidth.style.setProperty("display","block","important"),Object(a.a)(this.portfolioItemId))){this.logger.debug("Third party display detected, adding iframe for height detection"),this.iframeForCreativeHeight=Object(s.createIframe)("teads-resize"),this.iframeForCreativeHeight.className="teads-resize-for-height",this.iframeForCreativeHeight.style.setProperty("position","absolute","important"),this.iframeForCreativeHeight.style.setProperty("top","0","important"),this.iframeForCreativeHeight.style.setProperty("bottom","0","important"),this.iframeForCreativeHeight.style.setProperty("left","0","important"),this.iframeForCreativeHeight.style.setProperty("right","0","important"),this.iframeForCreativeHeight.style.setProperty("background-color","transparent","important"),this.iframeForCreativeHeight.style.setProperty("z-index","-1","important"),this.iframeForCreativeHeight.style.setProperty("opacity","0","important"),this.iframeForCreativeHeight.style.setProperty("height","100%","important"),this.iframeForCreativeHeight.style.setProperty("width","100%","important"),this.iframeForCreativeHeight.style.setProperty("border","none","important"),this.iframeForCreativeHeight.style.setProperty("margin","0","important"),this.iframeForCreativeHeight.style.setProperty("padding","0","important"),this.iframeForCreativeHeight.style.setProperty("display","block","important");this.abstractFormat.placement.getPlayerContainer().appendChild(this.iframeForCreativeHeight),g.addEventListener("resize",this.iframeForCreativeHeight.contentWindow,()=>e())}this.abstractFormat.placement.getElectedSlot().getElement().appendChild(this.iframeForSlotWidth),g.addEventListener("resize",this.iframeForSlotWidth.contentWindow,()=>e()),e()}unsetResponsive(){return!(!this.iframeForSlotWidth||!this.iframeForSlotWidth.parentNode)&&(g.removeEventListener("resize",this.iframeForSlotWidth.contentWindow,this.resizeCallback),this.iframeForSlotWidth.parentNode.removeChild(this.iframeForSlotWidth),!0)}addOrientationChangeListener(e){p.indexOf(this.orientationChangeListeners,e)<0&&this.orientationChangeListeners.push(e)}getOptimalDimension(e=this.mainContainer){if(A.a.isEnabled)return Object(v.c)(this.win);const t=!!this.abstractFormat.vpaidApi.getStudioData(),i={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()},s=g.getWindowSize(this.win),r=this.getContainerWidth(e),o=p.includes([25],this.portfolioItemId),a=t||o,d=f.a.getOptimalHeight(this.mediafile,r,a),l=u.b.fromNullable(this.abstractFormat.formatConfig).flatMap(Object(n.a)(Object(c.prop)("creativeSize"),u.b.fromNullable));return w(l,i,d,s,r,this.isFullscreen())}getOptimalDimensionBasedOnSurface(){const e=g.getWindowSize(this.win),t=E.findOptimalCreativeSizeBasedOnWindowSurface(u.b.fromNullable(this.mediafile),e),i={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()};return i.width===t.width&&i.height===t.height||(i.width=t.width,i.height=this.isFullscreen()?e.height:t.height),{width:Math.round(i.width),height:Math.round(i.height)}}resize(e=!1,t=this.mainContainer){const i=this.vpaidAd.getAdWidth(),n=this.vpaidAd.getAdHeight();this.setMaxWidth(t);const s=this.getOptimalDimension(t);if(p.includes([37,39],this.portfolioItemId)&&this.handleMaxHeight(t,this.formatContainer,s),this.isNativeFullscreen()||this.isFullscreen()&&e){const t=g.getWindowSize(this.win);n===t.height&&i===t.width||(this.logger.debug(`fullscreen resize from ${i}x${n} to ${t.width}x${t.height}  (forced: ${e})`),this.vpaidAd.resizeAd(t.width,t.height,"fullscreen"))}else(e||n!==s.height||i!==s.width)&&(this.repositionFormatContainer(s,t),this.logger.debug(`resize from ${i}x${n} to ${s.width}x${s.height} (forced: ${e})`),this.vpaidAd.resizeAd(s.width,s.height,this.isFullscreen()?"fullscreen":"normal"))}repositionFormatContainer(e,t=this.mainContainer){const i=this.getContainerWidth(t),n=e.width>=i?0:(i-e.width)/2;this.formatContainer.style.marginLeft=n+"px",this.formatContainer.style.marginRight=n+"px"}isFullscreen(){return Object(s.hasClass)(this.vpaidAd.getMainComponentsContainer(),"fullscreen")}isNativeFullscreen(){return Object(s.isFullscreen)(this.win.document)}handleMaxHeight(e,t,i){const n=g.getBoundingClientRect(t).height;if(this.isFullscreen())e.style.setProperty("max-height","none");else{const t=n>=i.width?i.height:n;this.logger.debug(`Celtra miniscroller detected, setting max-height property on teads-inread to ${t}px`),e.style.setProperty("max-height",Math.round(t)+"px"),e.style.setProperty("clip-path","inset(0)")}}getContainerWidth(e=this.mainContainer){if(this.isFullscreen())return g.getWindowSize(this.win).width;{const t=this.win.getComputedStyle(e),i=t.getPropertyValue("width");if(Object(c.isSizeInPx)(i))return Math.round(parseFloat(i));{const i=parseFloat(t.getPropertyValue("padding-left"))||0,n=parseFloat(t.getPropertyValue("padding-right"))||0;return Math.round(g.getBoundingClientRect(e).width-(i+n))}}}onOrientationChange(e){p.forEach(this.orientationChangeListeners,t=>{t(e)})}setMaxWidth(e=this.mainContainer){var t;if(this.isFullscreen())e.style.setProperty("max-width","none");else if(!e.style.getPropertyValue("max-width")||this.manualMaxWidth){const i=g.getBoundingClientRect(e),n=g.getBoundingClientRect(null===(t=this.iframeForSlotWidth)||void 0===t?void 0:t.parentElement);e.style.setProperty("max-width",Math.round(n.width-Math.max(i.left-n.left,i.right-n.right))+"px"),this.manualMaxWidth=!0}}setResponsiveCssClass(e){const t=g.getBoundingClientRect(e).width;let i;Object(o.c)((n,r)=>{var o,a;Object(s.removeClass)(e,r.className),t<=r.size&&(o=i,a=r.size,!o||o.size>a)&&(i=r)})(h.e),i&&Object(s.addClass)(e,i.className)}}},function(e,t,i){e.exports="<!DOCTYPE html> <html> <head> "+i(140)+' </head> <body> <div id="main-container"> <style> '+i(194)+' </style> <div id="layout-video-component"> <div class="teads-ui-component-startscreen"></div> <div id="vpaid-container"></div> <div class="teads-ui-component-fullscreenbutton"> <div class="icon-collapse"></div> </div> <div class="teads-ui-component-earlyclickoverlay"></div> <div class="teads-ui-component-progressbar"> <div class="progress"></div> </div> <div class="teads-ui-component-hourglass"></div> <div class="teads-ui-component-soundbutton"></div> <div class="teads-ui-component-closebutton"> <div class="close-button icon-close hide"></div> </div> <div class="teads-ui-component-adchoices adchoices-icon"> <span>AdChoices</span> </div> <div class="teads-ui-component-clickbutton"></div> <div class="teads-ui-component-brandlogo"></div> <div class="teads-ui-component-clicktoplay gradient"> <div class="icon-watchmore"></div> </div> <div class="teads-ui-component-bannervideobottom"></div> <div class="teads-ui-component-endscreen"></div> </div> </div> </body> </html> '},,function(e,t){!function(e,t,i,n){"use strict";if(!("registerElement"in t)){var s,r,o,a,d,c,l,h="__registerElement"+(1e5*Math.random()>>0),u=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,p=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],g=[],m=[],f="",b=t.documentElement,v=g.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},A=i.prototype,y=A.hasOwnProperty,w=A.isPrototypeOf,E=i.defineProperty,O=i.getOwnPropertyDescriptor,C=i.getOwnPropertyNames,I=i.getPrototypeOf,S=i.setPrototypeOf,T=!!i.__proto__,k=i.create||function e(t){return t?(e.prototype=t,new e):this},P=S||(T?function(e,t){return e.__proto__=t,e}:C&&O?function(){function e(e,t){for(var i,n=C(t),s=0,r=n.length;s<r;s++)i=n[s],y.call(e,i)||E(e,i,O(t,i))}return function(t,i){do{e(t,i)}while((i=I(i))&&!w.call(i,t));return t}}():function(e,t){for(var i in t)e[i]=t[i];return e}),j=e.MutationObserver||e.WebKitMutationObserver,L=(e.HTMLElement||e.Element||e.Node).prototype,x=function(e){return w.call(L,e)},V=L.cloneNode,N=L.setAttribute,D=(L.removeAttribute,t.createElement),R=j&&{attributes:!0,characterData:!0,attributeOldValue:!0},_=j||function(e){U=!1,b.removeEventListener("DOMAttrModified",_)},M=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,10)},F=!1,U=!0,B=!0,W=!0;S||T?(c=function(e,t){w.call(t,e)||Q(e,t)},l=Q):l=c=function(e,t){e[h]||(e[h]=i(!0),Q(e,t))},j||(b.addEventListener("DOMAttrModified",_),b.setAttribute(h,1),b.removeAttribute(h),U&&(r=function(e){var t,i,n;if(this===e.target){for(n in t=this[h],this[h]=i=a(this),i){if(!(n in t))return o(0,this,n,t[n],i[n],"ADDITION");if(i[n]!==t[n])return o(1,this,n,t[n],i[n],"MODIFICATION")}for(n in t)if(!(n in i))return o(2,this,n,t[n],i[n],"REMOVAL")}},o=function(e,t,i,n,s,r){var o={attrChange:e,currentTarget:t,attrName:i,prevValue:n,newValue:s};o[r]=e,$(o)},a=function(e){for(var t,i,n={},s=e.attributes,r=0,o=s.length;r<o;r++)"setAttribute"!==(i=(t=s[r]).name)&&(n[i]=t.value);return n})),t.registerElement=function(e,i){if(n=e.toUpperCase(),F||(F=!0,j?(d=function(e,t){function i(e,t){for(var i=0,n=e.length;i<n;t(e[i++]));}return new j((function(n){for(var s,r,o,a=0,d=n.length;a<d;a++)"childList"===(s=n[a]).type?(i(s.addedNodes,e),i(s.removedNodes,t)):(r=s.target,W&&r.attributeChangedCallback&&"style"!==s.attributeName&&(o=r.getAttribute(s.attributeName))!==s.oldValue&&r.attributeChangedCallback(s.attributeName,s.oldValue,o))}))}(z("attached"),z("detached"))).observe(t,{childList:!0,subtree:!0}):(s=[],M((function e(){for(;s.length;)s.shift().call(null,s.shift());M(e)})),t.addEventListener("DOMNodeInserted",K("attached")),t.addEventListener("DOMNodeRemoved",K("detached"))),t.addEventListener("DOMContentLoaded",Y),t.addEventListener("readystatechange",Y),t.createElement=function(e,i){var n=D.apply(t,arguments),s=""+e,r=v.call(g,(i?"=":"<")+(i||s).toUpperCase()),o=-1<r;return i&&(n.setAttribute("is",i=i.toLowerCase()),o&&(o=q(s.toUpperCase(),i))),W=!t.createElement.innerHTMLHelper,o&&l(n,m[r]),n},L.cloneNode=function(e){var t=V.call(this,!!e),i=G(t);return-1<i&&l(t,m[i]),e&&function(e){for(var t,i=0,n=e.length;i<n;i++)t=e[i],l(t,m[G(t)])}(t.querySelectorAll(f)),t}),-2<v.call(g,"="+n)+v.call(g,"<"+n)&&J(e),!u.test(n)||-1<v.call(p,n))throw new Error("The type "+e+" is invalid");var n,r,o=function(){return c?t.createElement(h,n):t.createElement(h)},a=i||A,c=y.call(a,"extends"),h=c?i.extends.toUpperCase():n;return c&&-1<v.call(g,"<"+h)&&J(h),r=g.push((c?"=":"<")+n)-1,f=f.concat(f.length?",":"",c?h+'[is="'+e.toLowerCase()+'"]':h),o.prototype=m[r]=y.call(a,"prototype")?a.prototype:k(L),H(t.querySelectorAll(f),"attached"),o}}function H(e,t){for(var i=0,n=e.length;i<n;i++)Z(e[i],t)}function z(e){return function(t){x(t)&&(Z(t,e),H(t.querySelectorAll(f),e))}}function G(e){var t=e.getAttribute("is"),i=e.nodeName.toUpperCase(),n=v.call(g,t?"="+t.toUpperCase():"<"+i);return t&&-1<n&&!q(i,t)?-1:n}function q(e,t){return-1<f.indexOf(e+'[is="'+t+'"]')}function $(e){var t=e.currentTarget,i=e.attrChange,n=e.attrName,s=e.target;!W||s&&s!==t||!t.attributeChangedCallback||"style"===n||e.prevValue===e.newValue||t.attributeChangedCallback(n,i===e.ADDITION?null:e.prevValue,i===e.REMOVAL?null:e.newValue)}function K(e){var t=z(e);return function(e){s.push(t,e.target)}}function Y(e){B&&(B=!1,e.currentTarget.removeEventListener("DOMContentLoaded",Y)),H((e.target||t).querySelectorAll(f),"detached"===e.detail?"detached":"attached")}function X(e,t){N.call(this,e,t),r.call(this,{target:this})}function Q(e,t){P(e,t),d?d.observe(e,R):(U&&(e.setAttribute=X,e[h]=a(e),e.addEventListener("DOMSubtreeModified",r)),e.addEventListener("DOMAttrModified",$)),e.createdCallback&&W&&(e.created=!0,e.createdCallback(),e.created=!1)}function J(e){throw new Error("A "+e+" type is already registered")}function Z(e,t){var i,n=G(e);-1<n&&(c(e,m[n]),n=0,"attached"!==t||e.attached?"detached"!==t||e.detached||(e.attached=!1,e.detached=!0,n=1):(e.detached=!1,e.attached=!0,n=1),n&&(i=e[t+"Callback"])&&i.call(e))}}(window,document,Object)},function(e,t,i){var n=i(188);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){e.exports="/** This will include vpaid-ui assets */ "+i(156)+" "+i(155)+" .teads-expand { position: relative; } .teads-expand-closebutton { padding: 5px; text-align:center; color:white; cursor:pointer; position:absolute; z-index: 2147483646; top:5px; right:5px; width: 15px; height: 15px; padding: 0px; } .teads-expand-iframe { width: 100%; height: 100%; } .teads-expand-iframe iframe { border: 0px; width: 100%; height: 100%; background: #FFFFFF url({{assetsPath}}/default/img/loading.gif) no-repeat center center } .teads-expand-overlay { position: fixed; opacity: 0; background: #000000; border: 0; top: 0; left: 0; z-index: 2147483646; overflow: hidden; width: 100%; height: 100%; transition-property: opacity; -webkit-transition-property: opacity; -moz-transition-property: opacity; -o-transition-property: opacity; -ms-transition-property: opacity; transition-duration: {{transitionDuration}}ms; -webkit-transition-duration: {{transitionDuration}}ms; -moz-transition-duration: {{transitionDuration}}ms; -o-transition-duration: {{transitionDuration}}ms; -ms-transition-duration: {{transitionDuration}}ms; } .teads-expand-overlay.opened { opacity: 0.6 } .teads-expand-container.opened { opacity: 1 } .teads-expand-container { opacity: 0; position: fixed; background: #FFFFFF; border: 0; left: 0px; top: 0px; z-index: 2147483647; transition-property: opacity width height left top; -webkit-transition-property: opacity width height left top; -moz-transition-property: opacity width height left top; -o-transition-property: opacity width height left top; -ms-transition-property: opacity width height left top; transition-duration: {{transitionDuration}}ms; -webkit-transition-duration: {{transitionDuration}}ms; -moz-transition-duration: {{transitionDuration}}ms; -o-transition-duration: {{transitionDuration}}ms; -ms-transition-duration: {{transitionDuration}}ms; } body.noscroll { overflow:hidden; } "},function(e,t,i){var n=i(189);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){var n=i(190);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports='<div class="teads-expand"> <div class="teads-expand-label"></div> <div class="teads-expand-iframe"> <iframe src="{{iframeurl}}"></iframe> </div> <div class="teads-expand-closebutton"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 15 15" style="enable-background:new 0 0 15 15;" xml:space="preserve"> <g> <path style="fill:#000000;" d="M8.883,7.5l5.83-5.83c0.382-0.382,0.382-1.001,0-1.383c-0.382-0.382-1.002-0.382-1.383,0L7.5,6.117 l-5.83-5.83c-0.382-0.382-1.002-0.382-1.383,0c-0.382,0.382-0.382,1.001,0,1.383l5.83,5.83l-5.83,5.83 c-0.382,0.382-0.382,1.001,0,1.383C0.478,14.904,0.728,15,0.978,15c0.25,0,0.501-0.096,0.692-0.287l5.83-5.83l5.83,5.83 C13.521,14.904,13.771,15,14.022,15c0.25,0,0.501-0.096,0.692-0.287c0.382-0.382,0.382-1.001,0-1.383L8.883,7.5z"/> </g> </svg> </div> </div> '},function(e,t,i){var n=i(191);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports='<div class="smart-header-content"> <div class="close-button-smart"></div> <div class="adChoices-button-smart"></div> <div class="sound-button-smart"> <div class="icon-muteon"></div> </div> </div> '},function(e,t,i){"use strict";i.r(t);i(135);var n=i(98),s=i(102),r=i(106),o=i(101),a=i(28),d=i(104),c=i(105),l=i(107),h=i(108),u=i(109),p=i(110),g=i(42),m=i(103),f=i(23),b=i(8),v=i(70),A=i(89),y=i(7);const w=window.teads||{};w.canvas=w.canvas||{},w.canvas.player={CanvasPlayer:n.a,components:{Audio:s.a,Buffering:r.a,Canvas:o.a,EventDispatcher:a.a,File:d.a,HtmlAudioElement:c.a,JpegVideo:l.a,Mp4CTVideo:h.a,Mp4Video:u.a,MpegVideo:p.a,Video:g.b,WebAudioApi:m.a,PLAYERS:g.a},helper:{Utils:f},model:{MediaState:b.a,Shader:v,StreamType:A.a,mediaEvents:y.a}},window.teads=w;var E,O,C=i(63),I=i(12),S=i(3),T=i(5),k=i(1),P=i(16),j=i(29);!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(E||(E={})),function(e){e[e.NETWORK_EMPTY=0]="NETWORK_EMPTY",e[e.NETWORK_IDLE=1]="NETWORK_IDLE",e[e.NETWORK_LOADING=2]="NETWORK_LOADING",e[e.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(O||(O={}));var L=i(4),x=i(58),V=i(10),N=i(82);let D;class R{constructor(e,t,i){this.id=i,this.layer=document.createElement("div"),this.layer.className+="vpaid-clickthrough",this.layer.style.setProperty("cursor","pointer"),this.layer.style.setProperty("opacity","0"),this.layer.style.setProperty("background-color","#FFFFFF"),this.layer.style.setProperty("position","absolute"),this.layer.style.setProperty("z-index","65000"),this.layer.addEventListener("click",(function(n){e(t,i,!0)}),!1)}resize(e,t){this.layer.style.setProperty("width",e+"px"),this.layer.style.setProperty("height",t+"px")}remove(){this.layer.parentNode&&this.layer.parentNode.removeChild(this.layer)}append(e){e.firstChild?e.insertBefore(this.layer,e.firstChild):e.appendChild(this.layer)}}var _=i(14);class M extends class{constructor(){this.status=I.a.READY,this.eventHandler=new N.a,this.trackingRaised={AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1},this.parameters={},this.skippable=!1,this.expanded=!1}getVPAID(){return this}handshakeVersion(e){return"2.0"}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}initAd(e,t,i,n,s,r){this.status=I.a.LOADING,this.width=e,this.height=t,this.viewMode=i,C.a(s).fold(e=>{this.dispatchVpaidEvent(S.a.AdError,"invalid creative data: "+s)},e=>{for(let t in e)e.hasOwnProperty(t)&&(this.parameters[t]=e[t]);this.environmentVars=r,this.environmentVars.videoSlot||(this.environmentVars.videoSlot=D=D||document.createElement("video")),this.environmentVars.videoSlot.setAttribute&&(this.environmentVars.videoSlot.setAttribute("webkit-playsinline","true"),this.environmentVars.videoSlot.setAttribute("playsinline","true"),L.isAndroid()&&L.isChromeWebView()&&this.environmentVars.videoSlot.getAttribute&&null===this.environmentVars.videoSlot.getAttribute("poster")&&this.environmentVars.videoSlot.setAttribute("poster",x.b),this.environmentVars.videoSlot.getAttribute&&null===this.environmentVars.videoSlot.getAttribute("muted")&&this.environmentVars.videoSlot.setAttribute("muted","true")),this.environmentVars.slot?(this.video=this.environmentVars.videoSlot,this.createContainer(this.environmentVars.slot)):this.dispatchVpaidEvent(S.a.AdError,"no slot provided in environmentVars")})}startAd(){this.status=I.a.STARTING}skipAd(){this.status=I.a.SKIPPING}stopAd(){this.status=I.a.STOPPING}resizeAd(e,t,i){this.width=e,this.height=t,this.viewMode=i}expandAd(){return!1}collapseAd(){return!1}getAdLinear(){return!0}getAdWidth(){return this.width}getAdHeight(){return this.height}getAdExpanded(){return V.isFullscreen()||this.expanded}getAdSkippableState(){return this.skippable}getAdCompanions(){return""}getAdIcons(){return!1}getAdDuration(){throw"not implemented"}getAdRemainingTime(){throw"not implemented"}getStatus(){return this.status}createContainer(e){this.container||(this.container=document.createElement("div"),this.container.style.setProperty("position","relative"),e.appendChild(this.container))}onAdVideoCompleteDispatched(){this.parameters.noAutoStop?(this.video.addEventListener("seeked",()=>{this.video.pause()},!1),this.video.currentTime=1):this.stopAd()}dispatchVpaidEvent(e,t){this.handleVPAIDEvent(new S.a(e,t))}handleVPAIDEvent(e){if(!(this.status===I.a.SKIPPING&&e.type!==S.a.AdSkipped||this.status===I.a.STOPPING&&e.type!==S.a.AdStopped||this.status<=I.a.STOPPED||this.status===I.a.STOPPING&&e.type!==S.a.AdStopped)){switch(e.type){case S.a.AdLoaded:this.status=I.a.LOADED;break;case S.a.AdStarted:this.status=I.a.STARTED;break;case S.a.AdVideoStart:case S.a.AdPlaying:this.status=I.a.PLAYING;break;case S.a.AdPaused:this.status=I.a.PAUSED;break;case S.a.AdVideoComplete:this.status=I.a.COMPLETE;break;case S.a.AdSkipped:this.status=I.a.SKIPPED;break;case S.a.AdStopped:this.status=I.a.STOPPED;break;case S.a.AdDurationChange:case S.a.AdRemainingTimeChange:var t=this.getAdDuration(),i=t-this.getAdRemainingTime();t>0&&i>=.25*t&&!this.trackingRaised.AdVideoFirstQuartile?this.dispatchVpaidEvent(S.a.AdVideoFirstQuartile):t>0&&i>=.5*t&&!this.trackingRaised.AdVideoMidpoint?this.dispatchVpaidEvent(S.a.AdVideoMidpoint):t>0&&i>=.75*t&&!this.trackingRaised.AdVideoThirdQuartile&&this.dispatchVpaidEvent(S.a.AdVideoThirdQuartile);break;case S.a.AdVideoFirstQuartile:case S.a.AdVideoMidpoint:case S.a.AdVideoThirdQuartile:case S.a.AdError:if(this.trackingRaised[e.type])return;this.trackingRaised[e.type]=!0}this.eventHandler.handleEvent(e),this.status===I.a.SKIPPED&&this.stopAd(),e.type===S.a.AdVideoComplete&&this.onAdVideoCompleteDispatched()}}handleException(e,t){var i='method "'+t+'" threw an exception: '+e.toString();this.dispatchVpaidEvent(S.a.AdLog,i),this.dispatchVpaidEvent(S.a.AdError,i)}}{constructor(){super(...arguments),this.config={url:"",skippable:!0,skipoffset:0,gradients:!0},this.eventMap={durationchange:"AdDurationChange",resize:"AdSizeChange",volumechange:"AdVolumeChange",ended:"AdVideoComplete",play:"AdPlaying",playing:"AdPlaying",pause:"AdPaused",timeupdate:"AdRemainingTimeChange",error:"AdError"}}initAd(e,t,i,n,s,r){if(this.status===I.a.READY)try{this.parameters=this.config,super.initAd(e,t,i,n,s,r),T.addEventListener("error",this.video,e=>{this.handleVideoError(e)}),T.addEventListener("loadedmetadata",this.video,e=>this.dispatchVpaidEvent(j.a.AdVideoMetadata,{width:this.video.videoWidth,height:this.video.videoHeight})),this.beginingTimestamp=Date.now(),this.video.preload="metadata",this.video.src=Object(_.s)(this.parameters.url),this.appendVideo(),this.dispatchVpaidEvent(S.a.AdLoaded)}catch(e){this.handleException(e,"initAd")}else this.dispatchVpaidEvent(S.a.AdLog,"creative is not in ready state, cannot call initAd")}startAd(){if(this.status>I.a.LOADED)this.dispatchVpaidEvent(S.a.AdLog,"try to call startAd but ad is starting or is already started");else if(this.status<I.a.LOADED)this.dispatchVpaidEvent(S.a.AdLog,"Ad is not loaded, use initAd first");else try{super.startAd(),this.parameters.gradients&&this.appendGradients(),this.clickThrough=new R((e,t,i)=>{this.dispatchVpaidEvent(S.a.AdClickThru,{url:e,id:t,playerHandles:i})},this.parameters.clickThrough),this.clickThrough.append(this.container),this.clickThrough.resize(this.width,this.height),this.setSize(this.width,this.height),this.initListeners(),this.video.play(),this.dispatchVpaidEvent(S.a.AdStarted),this.dispatchVpaidEvent(S.a.AdImpression)}catch(e){this.handleException(e,"startAd")}}skipAd(){if(this.status<=I.a.SKIPPING)this.dispatchVpaidEvent(S.a.AdLog,"Ad is already stopped or is skipping");else try{this.skippable?(super.skipAd(),this.video.pause(),this.video.style.setProperty("display","none"),this.dispatchVpaidEvent(S.a.AdSkipped)):this.dispatchVpaidEvent(S.a.AdLog,"skipAd() called, but creative is not skippable")}catch(e){this.handleException(e,"skipAd")}}resizeAd(e,t,i){try{this.setSize(e,t),this.dispatchVpaidEvent(S.a.AdSizeChange)}catch(e){this.handleException(e,"resizeAd")}}stopAd(){if(this.status<=I.a.STOPPING)this.dispatchVpaidEvent(S.a.AdLog,"Ad is already stopped");else try{super.stopAd(),this.removeVideo(),this.clickThrough.remove(),this.dispatchVpaidEvent(S.a.AdStopped),this.eventHandler.clearListeners()}catch(e){this.handleException(e,"stopAd")}}pauseAd(){try{this.video.pause()}catch(e){this.handleException(e,"pauseAd")}}resumeAd(){try{this.video.play()}catch(e){this.handleException(e,"resumeAd")}}getAdRemainingTime(){return this.video?this.video.duration-this.video.currentTime:0}getAdDuration(){return this.video?this.video.duration:0}getAdVolume(){return this.video?this.video.muted?0:this.video.volume:0}setAdVolume(e){return this.video?(this.video.muted=0===e,this.video.volume=e,this.video.muted?0:this.video.volume):0}appendGradients(){k.forEach(["top","bottom"],e=>{let t=document.createElement("div");t.style.setProperty("background","transparent url(data:image/png;base64,"+M["GRADIENT_"+e.toUpperCase()]+")"),t.style.setProperty("position","absolute"),t.style.setProperty("left","0"),t.style[e]="0",t.style.setProperty("z-index","2"),t.style.setProperty("height","30px"),t.style.setProperty("width","100%"),this.container.appendChild(t)})}appendVideo(){this.video.parentNode||(this.dispatchVpaidEvent(S.a.AdLog,"Video slot got no parent node, appending to container"),this.container.appendChild(this.video))}removeVideo(){try{this.video.parentNode.removeChild(this.video)}catch(e){this.dispatchVpaidEvent(S.a.AdLog,"teads-vpaid-video, cannot remove video from DOM")}}sendAdVideoStartEvent(){this.videoHasStarted||(this.videoHasStarted=!0,this.dispatchVpaidEvent(S.a.AdVideoStart))}setSize(e,t){this.width=e,this.height=t,this.video&&(this.video.width=this.width,this.video.height=this.height),this.clickThrough&&this.clickThrough.resize(e,t),this.container.style.setProperty("width",e+"px"),this.container.style.setProperty("height",t+"px")}initListeners(){for(var e in this.eventMap)this.video.addEventListener(e,e=>{this.handleVideoEvent(e)},!1)}handleVideoError(e){if("error"===e.type){let e=this.video.error;if(e)switch(e.code){case 1:break;case 2:this.dispatchVpaidEvent(S.a.AdError,{message:"video error : A network error caused the ressource to stop being fetched",id:P.b.MEDIAFILE_TIMEOUT.id});break;case 3:this.dispatchVpaidEvent(S.a.AdError,{message:"video error : A decoding error caused the ressource to stop being fetched",id:P.b.MEDIAFILE_DISPLAY.id});break;case 4:let e={message:"video error : The associated ressource has been detected to be not suitable",id:P.b.GENERAL_LINEAR.id};this.video.readyState===E.HAVE_NOTHING&&(e.id=P.b.FILE_NOT_FOUND.id),this.dispatchVpaidEvent(S.a.AdError,e)}else this.dispatchVpaidEvent(S.a.AdError,{message:"video error : unkown error",id:P.b.GENERAL.id})}}handleVideoEvent(e){try{var t=this.eventMap[e.type];switch(e.type){case"pause":if(this.video.currentTime===this.video.duration||this.status<=I.a.SKIPPING||this.status===I.a.COMPLETE)return;break;case"play":case"playing":if(this.status===I.a.STARTED)return this.sendAdVideoStartEvent();if(this.status!==I.a.PAUSED)return;break;case"timeupdate":this.parameters.skippable&&!this.skippable&&this.video.currentTime>=Number(this.parameters.skipoffset)&&(this.skippable=!0,this.dispatchVpaidEvent(S.a.AdSkippableStateChange)),(this.status===I.a.STARTED||this.video.currentTime>0)&&this.sendAdVideoStartEvent()}this.dispatchVpaidEvent(t)}catch(t){var i='Creative threw an exception when handling "'+e.type+'" HTML5 video event: '+t.toString();this.dispatchVpaidEvent(S.a.AdLog,i),this.dispatchVpaidEvent(S.a.AdError,{message:i,id:P.b.GENERAL.id})}}}M.GRADIENT="iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM0ODU0RjM1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM0ODU0RjQ1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzQ4NTRGMTVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzQ4NTRGMjVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/",M.GRADIENT_TOP=M.GRADIENT+"Psk0S98AAAAgSURBVHjaYmBgYJBiAhIMIOI/nEDj0oNgYGaAAYAAAwAH4xg8FtOkrgAAAABJRU5ErkJggg==",M.GRADIENT_BOTTOM=M.GRADIENT+"PkIta+gAAAAaSURBVHjaYmBABoxMMIKBCYVLDwLJSoAAAwAWTwBRQ43+sgAAAABJRU5ErkJggg==";const F=window.teads||{};F.video=F.video||{},F.video.VPAIDCanvas=class extends M{initAd(e,t,i,s,r,o){o.videoSlot&&o.videoSlot.parentNode&&o.videoSlot.parentNode.removeChild(o.videoSlot),o.slot&&this.createContainer(o.slot),C.a(r).fold(e=>this.handleException(e,"initAd"),r=>{o.videoSlot=new n.a(this.container,e,t,r),o.videoSlot.addEventListener(y.a.ERROR,e=>this.dispatchVpaidEvent(this.eventMap[e.type])),super.initAd(e,t,i,s,r,o)})}startAd(){if(this.status>I.a.LOADED)this.dispatchVpaidEvent(S.a.AdLog,"try to call startAd but ad is starting or is already started");else if(this.status<I.a.LOADED)this.dispatchVpaidEvent(S.a.AdLog,"Ad is not loaded, use initAd first");else try{super.startAd(),this.dispatchVpaidEvent(S.a.AdDurationChange)}catch(e){this.handleException(e,"startAd")}}appendVideo(){}removeVideo(){this.video.pause(),this.video.html5video&&this.container.removeChild(this.video.html5video),this.video.canvas&&this.container.removeChild(this.video.canvas)}},F.video.VPAIDVideo=M,window.teads=F},,,,,,function(e,t,i){var n=i(192);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){var n=i(193);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports='<style> #{{countdown-id}} svg:nth-child(2) path { -webkit-animation: load {{countdown-duration}}s linear; -moz-animation: load {{countdown-duration}}s linear; -o-animation: load {{countdown-duration}}s linear; animation: load {{countdown-duration}}s linear; } </style> \x3c!-- Container --\x3e <ul class="countdown-circle" id="{{countdown-id}}"> \x3c!-- Item --\x3e <li data-countdown="{{countdown-duration}}" class="countdown-timer"> <svg viewBox="-10 -10 220 220"> <g fill="none" stroke-width="20" transform="translate(100,100)"> <path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#cl1)"/> <path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#cl1)"/> <path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#cl1)"/> <path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cl1)"/> <path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#cl1)"/> <path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#cl1)"/> </g> </svg> <svg viewBox="-10 -10 220 220"> <path d="M200,100 C200,44.771525 155.228475,0 100,0 C44.771525,0 0,44.771525 0,100 C0,155.228475 44.771525,200 100,200 C155.228475,200 200,155.228475 200,100 Z" stroke-dashoffset="629"></path> </svg> </li> </ul> \x3c!-- Defining Angle Gradient Colors --\x3e <svg width="0" height="0"> <defs> <linearGradient id="cl1" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1"> <stop stop-color="#FFFFFF"/> <stop offset="100%" stop-color="#FFFFFF"/> </linearGradient> </defs> </svg> '},function(e,t){e.exports='<div class="button-container"> <div class="button replay-button"> <div class="icon"> <span class="icon-replay"></span> </div> <div class="text"></div> </div> <div class="button call-button"> <div class="icon"> <span></span> </div> <div class="text"></div> </div> </div> <div class="close-button"> <div class="icon-closeendscreen"></div> </div> <div class="adchoices adchoices-icon"> <span>AdChoices</span> </div> <div class="countdown"></div> '},,function(e,t,i){"use strict";i.d(t,"a",(function(){return X}));var n=i(130),s=i(144),r=i(49),o=i(0),a=i(19),d=i(14),c=i(2);class l extends a.a{constructor(e,t){super("Vast"),this.type=e.type,this.content=e.content,this.pid=t,this.appendPID(),this.checkValue()}checkValue(){if(!Object(c.isString)(this.type)||!l.VALUES[this.type.toUpperCase()])throw new r.a(r.a.OPTION_VAST_INVALID);if(!Object(c.isString)(this.content))throw new r.a(r.a.OPTION_VAST_INVALID)}isVastUrl(){return this.type===l.VALUES.VASTURL}isVastXml(){return this.type===l.VALUES.VASTXML}getContent(){return this.content}appendPID(){var e=Object(d.p)(this.content);this.isVastUrl()&&"a.teads.tv"===e.hostname&&this.pid&&(this.content+=-1===this.content.indexOf("?")?"?":"&",this.content+="pid="+this.pid)}}l.VALUES={VASTURL:"VastUrl",VASTXML:"VastXml"};class h extends a.a{constructor(e=h.DEFAULT){super("Threshold"),this.value=e,this.checkValue()}checkValue(){if(!Object(c.isNumber)(this.value)||this.value<=0||this.value>100)throw new r.a(r.a.OPTION_THRESHOLD_MISSING)}get(){return this.value}percentage(){return this.value/100}}h.DEFAULT=null;var u=i(4),p=i(18);class g extends a.a{constructor(e=g.DEFAULT){super("Volume"),p.a(Object(u.getIosVersion)(),"10")?this.value=g.DEFAULT_IOS10:this.value=Object.assign(Object.assign({},g.DEFAULT),e),this.checkValue()}checkValue(){Object(c.containsKeys)(g.VALUES,this.value)||(this.value=g.DEFAULT)}getMain(){return this.value.main}}g.VALUES={MAIN:"main"},g.DEFAULT={main:.35},g.DEFAULT_IOS10={main:1};var m=i(1);class f extends a.a{constructor(e=f.DEFAULT){super("Animations"),this.value=Object.assign(Object.assign({},f.DEFAULT),e),this.checkValue()}checkValue(){Object(c.containsKeys)(f.VALUES,this.value)||(this.value=f.DEFAULT)}setExpandDuration(e){m.forEach(f.PROPERTIES,t=>{e.style.setProperty(t,this.value.expand+"s")})}setCollapseDuration(e){m.forEach(f.PROPERTIES,t=>{e.style.setProperty(t,this.value.collapse+"s")})}getExpandDuration(){return this.value.expand}getCollapseDuration(){return this.value.collapse}}f.PROPERTIES=["-webkit-transition-duration","-o-transition-duration","-moz-transition-duration","transition-duration"],f.VALUES={EXPAND:"expand",COLLAPSE:"collapse"},f.DEFAULT={expand:0,collapse:.5};class b extends a.a{constructor(e=b.DEFAULT){super("AdType"),this.value=e,this.checkValue()}checkValue(){Object(c.isString)(this.value)&&b.VALUES[this.value]||(this.value=b.DEFAULT)}get(){return this.value}isVideo(){return this.value===b.VALUES.video}isDisplay(){return this.value===b.VALUES.display}isNative(){return this.value===b.VALUES.native}}b.VALUES={video:"video",display:"display",native:"native"},b.DEFAULT=b.VALUES.video;var v=i(3),A=i(128);class y extends a.a{constructor(e=""){if(super("VtpEvent"),this.event=y.DEFAULT_EVENT,this.offset=y.DEFAULT_OFFSET,Object(c.isString)(e)){const[t,i]=e.split("-");t&&A.a[t]&&(this.event=A.a[t]),this.event===v.a.AdRemainingTimeChange&&(this.offset=parseInt(i,10))}this.checkValue()}checkValue(){Object(c.isString)(this.event)&&Object(c.isNumber)(this.offset)&&!isNaN(this.offset)||(this.event=y.DEFAULT_EVENT,this.offset=y.DEFAULT_OFFSET)}getEvent(){return this.event}getOffset(){return this.offset}}y.DEFAULT_EVENT=null,y.DEFAULT_OFFSET=0;class w extends a.a{constructor(e,t=null){super("SmartPosition"),this.formatName=t,this.value=Object.assign(Object.assign({},w.DEFAULT),e),(p.c(u.getIosVersion(),w.MIN_IOS_VERSION)||u.isAmp()||u.isIABSafeFrame())&&(this.value.top=!1,this.value.corner=!1),this.checkValue()}checkValue(){Object(c.containsKeys)(w.VALUES,this.value)||(this.value=w.DEFAULT)}isEnabled(){var e;return window.DO_BYPASS_DO_FORCE_SMART&&(null===(e=this.formatName)||void 0===e?void 0:e.isInRead())||this.value.mustBypassWhitelist&&(this.value.corner||this.value.top)}isCorner(){return this.value.corner&&this.isEnabled()}isTop(){return this.value.top&&this.isEnabled()&&!u.isDesktop()}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}w.MIN_IOS_VERSION="7",w.VALUES={top:"top",corner:"corner"},w.DEFAULT={top:!1,corner:!1,mustBypassWhitelist:!1};class E extends a.a{constructor(e){super("SliderBehavior"),this.value=Object.assign(Object.assign({},E.DEFAULT),e),this.checkValue()}checkValue(){Object(c.containsKeys)(E.VALUES,this.value)||(this.value=E.DEFAULT)}isEnabled(){return this.value.enable}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}E.VALUES={enable:"enable"},E.DEFAULT={enable:!1};class O extends a.a{constructor(e){super("Smart6Behavior"),this.value=Object.assign(Object.assign({},O.DEFAULT),e),this.checkValue()}checkValue(){Object(c.containsKeys)(O.VALUES,this.value)||(this.value=O.DEFAULT)}isEnabled(){return this.value.corner||this.value.top}isTop(){return this.value.top&&this.isEnabled()&&!u.isDesktop()}isCorner(){return this.value.corner&&this.isEnabled()&&u.isDesktop()}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}O.VALUES={top:"top",corner:"corner"},O.DEFAULT={top:!1,corner:!1};var C=i(52);class I extends a.a{constructor(e){super("CloseButton"),this.getValueFromVast=!e||Object(c.isUndefined)(e.display),this.value=Object.assign(Object.assign({},I.DEFAULT),Object(C.a)(e,Object(c.not)(c.isUndefined))),this.checkValue()}checkValue(){Object(c.containsKeys)(I.VALUES,this.value)?(this.value.countdown=+this.value.countdown,Object(c.isNumber)(this.value.countdown)||(this.value.countdown=0)):this.value=I.DEFAULT}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}hasToGetValueFromVast(){return this.getValueFromVast}}I.VALUES={DISPLAY:"display",COUNTDOWN:"countdown"},I.DEFAULT={display:!0,countdown:0};class S extends a.a{constructor(e){super("SoundButton");const{display:t,countdown:i,type:n}=S.sanitize(e);this.isEnabled=t,this.countdown=i,this.type=n}static sanitize(e){return o.b.fromNullable(e).map(e=>Object.assign(Object.assign({},S.defaultValues),Object(C.a)(e,Object(c.not)(c.isNull)))).filter(c.matchesCheckers(S.checkers)).getOrValue(S.defaultValues)}checkValue(){}toString(){return`SoundButton(${this.isEnabled}, ${this.countdown}, ${this.type})`}}S.defaultValues={display:!0,countdown:0,type:"mute"},S.checkers={display:c.isBoolean,countdown:c.isNumber,type:e=>"mute"===e};class T extends a.a{constructor(e=T.DEFAULT){super("CallButton"),this.value=Object.assign(Object.assign({},T.DEFAULT),e),this.checkValue()}checkValue(){Object(c.containsKeys)(T.VALUES,this.value)||(this.value=T.DEFAULT)}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}getText(){return this.value.text}}T.VALUES={DISPLAY:"display",COUNTDOWN:"countdown",TEXT:"text"},T.DEFAULT={display:!0,countdown:3,text:"Learn More"};class k extends a.a{constructor(e=k.DEFAULT){super("Timer"),this.value=e,this.checkValue()}checkValue(){Object(c.isBoolean)(this.value)||(this.value=k.DEFAULT)}isEnabled(){return this.value}}k.DEFAULT=!1;class P extends a.a{constructor(e=P.DEFAULT){super("ProgressBar"),this.value=e,this.checkValue()}checkValue(){Object(c.isBoolean)(this.value)||(this.value=P.DEFAULT)}isEnabled(){return this.value}}P.DEFAULT=!0;class j{constructor(e){this.lang=e,this.translations={ar:{label:""},cs:{label:"REKLAMA"},de:{label:"WERBUNG"},da:{label:"ANNONCE"},en:{label:"ADVERTISING"},es:{label:"PUBLICIDAD"},fr:{label:"PUBLICIT"},fi:{label:"MAINONTA"},hr:{label:"OGLAS"},hu:{label:"HIRDETS"},id:{label:"Iklan"},it:{label:"PUBBLICIT"},ja:{label:""},jamobile:{label:""},jamobilePR:{label:"[PR]"},ko:{label:""},kr:{label:""},mo:{label:"ADVERTISING"},nl:{label:"ADVERTENTIE"},no:{label:"ANNONSERING"},pl:{label:"REKLAMA"},pt:{label:"PUBLICIDADE"},ro:{label:"PUBLICITATE"},ru:{label:""},sr:{label:""},sk:{label:"REKLAMA"},sl:{label:"OGLAAVANJE"},sv:{label:"ANNONS"},sw:{label:"REKLAM"},tr:{label:"ILAN"},zh:{label:""},"zh-hk":{label:""},"zh-tw":{label:""},vi:{label:"ADVERTISING"},"fil-ph":{label:"ADVERTISING"},ms:{label:"ADVERTISING"},"hi-in":{label:""}}}translate(e){return(this.translations[this.lang]||{})[e]}}class L extends a.a{constructor(e=L.DEFAULT){super("Label"),this.value=Object.assign(Object.assign({},L.DEFAULT),e),this.checkValue()}static getTranslation(){const e=u.getLanguage().toLowerCase();let t=new j(e).translate("label");return t||5!==e.length||(t=new j(e.substr(0,2)).translate("label")),t||(t=new j("en").translate("label")),t}checkValue(){Object(c.containsKeys)(L.VALUES,this.value)||(this.value=L.DEFAULT)}getHTML(){return this.value.html}getText(){return this.value.text}isEnabled(){return this.value.display}}L.VALUES={DISPLAY:"display",TEXT:"text",HTML:"html"},L.TEXT=L.getTranslation(),L.DEFAULT={display:!0,text:L.TEXT,html:L.TEXT};var x=i(30);class V extends a.a{constructor(e,t){var i;super("Credits"),this.value=Object.assign(Object.assign({},V.DEFAULT_INREAD),e),t.isEnabled()&&(this.value.display=!1),this.checkValue(),this.value.display=(i=this.value.display,!!x.b.isQA&&i)}checkValue(){Object(c.containsKeys)(V.VALUES,this.value)||(this.value=V.DEFAULT_INREAD)}isEnabled(){return this.value.display}getText(){return this.value.text}getLink(){return this.value.link}}V.VALUES={DISPLAY:"display",TEXT:"text",LINK:"link"},V.DEFAULT_INREAD={display:!0,text:"Ads by [Teads]",link:"https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads"};class N extends a.a{constructor(e=N.DEFAULT){super("EndScreen"),this.value=Object.assign(Object.assign(Object.assign({},N.DEFAULT),Object(C.a)(e,Object(c.not)(c.isUndefined))),{callButton:Object.assign(Object.assign({},N.DEFAULT.callButton),Object(C.a)(null==e?void 0:e.callButton,Object(c.not)(c.isUndefined))),replayButton:Object.assign(Object.assign({},N.DEFAULT.replayButton),Object(C.a)(null==e?void 0:e.replayButton,Object(c.not)(c.isUndefined)))}),Object(u.isAmp)()&&(this.value.display=!0,this.value.autoClose=!1),!1===this.value.autoClose&&(this.value.countdown=0),this.checkValue()}checkValue(){Object(c.containsKeys)(N.VALUES,this.value)||(this.value=N.DEFAULT)}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}getCallButton(){return this.value.callButton}getReplayButton(){return this.value.replayButton}getAutoClose(){return this.value.autoClose}}N.VALUES={DISPLAY:"display",CALLBUTTON:"callButton",REPLAYBUTTON:"replayButton",AUTOCLOSE:"autoClose",COUNTDOWN:"countdown",TYPE:"type"},N.DEFAULT={display:!0,callButton:{text:"Learn More",type:"learnMore"},replayButton:{text:"Replay"},autoClose:!1,countdown:0,type:"simple"};class D extends a.a{constructor(e=null,t=""){super("BrandLogo");let i={display:!!e&&e.display,url:t};this.value=Object.assign(Object.assign({},D.DEFAULT),i),this.checkValue()}checkValue(){Object(c.containsKeys)(D.VALUES,this.value)||(this.value=D.DEFAULT)}getUrl(){return this.value.url}isEnabled(){return this.value.display}}D.VALUES={DISPLAY:"display",URL:"url"},D.DEFAULT={display:!1,url:""};class R extends a.a{constructor(e){super("SmartPosition"),this.value=e,this.checkValue()}checkValue(){c.containsKeys(R.VALUES,this.value)||(this.value=R.DEFAULT)}closeButtonEnabled(){return this.value.closeButtonDisplay}}R.VALUES={closeButtonDisplay:"closeButtonDisplay"},R.DEFAULT={closeButtonDisplay:!1};class _ extends a.a{constructor(e=_.DEFAULT){super("Launch"),Object(u.isAmp)()?this.value=_.VALUES.AUTO:this.value=e,this.checkValue()}checkValue(){Object(c.isString)(this.value)&&_.VALUES[this.value.toUpperCase()]||(this.value=_.DEFAULT)}isAuto(){return this.value===_.VALUES.AUTO}isThreshold(){return this.value===_.VALUES.THRESHOLD}}_.VALUES={AUTO:"auto",THRESHOLD:"threshold"},_.DEFAULT=_.VALUES.AUTO;var M=i(136);class F extends a.a{constructor(e=F.DEFAULT){super("SoundStart"),this.value=Object.assign(Object.assign({},F.DEFAULT),e),!Object(u.isMobile)()&&!Object(u.isTablet)()||Object(u.isSDK)()||(this.value.type="mute"),this.checkValue()}checkValue(){Object(c.containsKeys)(F.VALUES,this.value)||(this.value=F.DEFAULT)}isMute(){return this.value.type===F.VALUES_TYPE.MUTE}isUnmute(){return this.value.type===F.VALUES_TYPE.UNMUTE}isCountdown(){return this.value.type===F.VALUES_TYPE.COUNTDOWN}getCountdown(){return this.value.countdown}getType(){return this.value.type}}F.VALUES={TYPE:"type",COUNTDOWN:"countdown"},F.VALUES_TYPE={MUTE:"mute",UNMUTE:"unmute",COUNTDOWN:"countdown"},F.DEFAULT={type:"mute",countdown:0};class U extends a.a{constructor(e=U.VALUES.THRESHOLD){super("VideoPause"),this.value=e,this.checkValue()}checkValue(){Object(c.isString)(this.value)&&U.VALUES[this.value.toUpperCase()]||(this.value=U.DEFAULT)}isNo(){return this.value===U.VALUES.NO}isThreshold(){return this.value===U.VALUES.THRESHOLD}getValue(){return this.value}setToNo(){return this.value=U.VALUES.NO}}U.VALUES={NO:"no",THRESHOLD:"threshold"},U.DEFAULT=U.VALUES.THRESHOLD;class B extends a.a{constructor(e=B.DEFAULT){super("SoundMute"),this.value=e,this.checkValue()}checkValue(){Object(c.isString)(this.value)&&B.VALUES[this.value.toUpperCase()]||(this.value=B.DEFAULT)}isNo(){return this.value===B.VALUES.NO}isThreshold(){return this.value===B.VALUES.THRESHOLD}}B.VALUES={NO:"no",THRESHOLD:"threshold"},B.DEFAULT=B.VALUES.THRESHOLD;class W extends a.a{constructor(e=W.DEFAULT){super("PlayerClick"),this.value=e,Object(u.isDesktop)()&&(this.value=W.VALUES.CLICK),this.checkValue()}checkValue(){Object(c.isString)(this.value)&&W.VALUES[this.value.toUpperCase()]||(this.value=W.DEFAULT)}isClick(){return this.value===W.VALUES.CLICK}isFullscreen(){return this.value===W.VALUES.FULLSCREEN}}W.VALUES={CLICK:"click",FULLSCREEN:"fullscreen"},W.DEFAULT=Object(u.isDesktop)()?W.VALUES.CLICK:W.VALUES.FULLSCREEN;class H extends a.a{constructor(e=H.DEFAULT){super("End"),this.value=Object(u.isAmp)()?H.VALUES.ENDSCREEN:e,this.checkValue()}checkValue(){Object(c.isString)(this.value)&&H.VALUES[this.value.toUpperCase()]||(this.value=H.DEFAULT)}isCollapse(){return this.value===H.VALUES.COLLAPSE}isEndScreen(){return this.value===H.VALUES.ENDSCREEN}}H.VALUES={COLLAPSE:"collapse",ENDSCREEN:"endscreen"},H.DEFAULT=H.VALUES.ENDSCREEN;var z=i(43),G=i(71);class q extends a.a{constructor(e=q.DEFAULT,t){super("Callbacks"),this.callbacks=e,this.volume=t,this.checkValue()}checkValue(){c.isObject(this.callbacks)||(this.callbacks=q.DEFAULT)}trigger(e,t,i){if(this.last===e)return this.logger.debug("Callbacks already triggered",e),!1;if(e===v.a.AdVolumeChange&&t&&(t.getVolume()===this.volume.getMain()?this.trigger("unmute"):t.isMuted()&&this.trigger("mute")),e===v.a.AdExpandedChange&&i&&(i.isActive()?this.trigger("enterFullscreen"):this.trigger("exitFullscreen")),c.isFunction(this.callbacks[e]))try{return this.callbacks[e](),this.last=e,!0}catch(t){z.a.error(`cb-threw-err ${e} ${Object(G.a)(t)}`),this.logger.error('the "'+e+'" callback threw an error:',t)}else this.callbacks[e]&&this.logger.error('the "'+e+'" callback is not a function:',this.callbacks[e]);return!1}}q.DEFAULT={};var $=i(61);class K extends a.a{constructor(e){super("AllowedPlayer"),this.setValue(K.VALUES[e]),this.checkValue()}checkValue(){let e=!1;for(let t in K.VALUES)K.VALUES.hasOwnProperty(t)&&(e=e||this.value===K.VALUES[t]);e||(this.value=K.DEFAULT)}getValue(){return this.value}setValue(e){this.value=e,u.cacheCanvasUsed(this.value===$.a.CANVAS)}}K.VALUES={html5:$.a.HTML5,canvas:$.a.CANVAS,any:$.a.ANY},K.DEFAULT=$.a.ANY;class Y extends a.a{constructor(e=Y.DEFAULT_VALUE){super("BannerVideoBottom"),this.value=Object.assign(Object.assign({},Y.DEFAULT_VALUE),e)}checkValue(){}isEnabled(){return this.value.display}getText(){return this.value.text}}Y.DEFAULT_VALUE={display:!1,text:"Learn more"};class X{constructor(e){if(!e.settings)throw new r.a(r.a.INCOMPLETE_OBJECT);const t={type:e.type,content:e.content};this.vast=new l(t,e.settings.values.placementId),e.settings.values=e.settings.values||{placementFormat:null,pageId:null,placementId:null,threshold:null},e.settings.components=e.settings.components||{},e.settings.behaviors=e.settings.behaviors||{},this.adSourceId=e.ad_source_id,this.connectionId=e.connection_id,this.insertionId=e.insertion_id,this.dspCampaignId=e.dsp_campaign_id,this.dspCreativeId=e.dsp_creative_id,this.earlyClickProtectionDuration=e.early_click_protection_duration,this.scenarioId=e.scenario_id,this.portfolioItemId=e.portfolio_item_id,this.creativeSize=e.creativeSize,this.formatName=new s.a(e.settings.values.placementFormat),this.pageId=Object(n.b)(e.settings.values.pageId),this.placementId=e.settings.values.placementId,this.threshold=new h(e.settings.values.threshold),this.volume=new g(e.settings.values.volume),this.animations=new f(e.settings.values.animations),this.adType=new b(e.settings.values.adType),this.vtpEvent=new y(e.settings.values.vtpEvent),this.smartPosition=new w(e.settings.behaviors.smartPosition,this.formatName),this.sliderBehavior=new E(e.settings.behaviors.slider),this.smart6Behavior=new O(e.settings.behaviors.smart6Position),this.friendly=o.b.fromNullable(e.settings.behaviors.friendly).getOrValue(!1),this.closeButton=new I(e.settings.components.closeButton),this.soundButton=new S(e.settings.components.soundButton),this.callButton=new T(e.settings.components.callButton),this.timer=new k(e.settings.components.timer),this.progressBar=new P(e.settings.components.progressBar),this.label=new L(e.settings.components.label),this.credits=new V(e.settings.components.credits,this.smartPosition),this.endScreen=new N(e.settings.components.endScreen),this.brandLogo=new D(e.settings.components.brandLogo,e.settings.values.brandLogoUrl),this.slider=new R(e.settings.components.slider),this.bannerVideoBottom=new Y(e.settings.components.bannerVideoBottom),this.launch=new _(e.settings.behaviors.launch),this.videoStart=new M.a(e.settings.behaviors.videoStart),this.soundStart=new F(e.settings.behaviors.soundStart),this.videoPause=new U(e.settings.behaviors.videoPause),this.soundMute=new B(e.settings.behaviors.soundMute),this.playerClick=new W(W.VALUES.CLICK),this.end=new H(e.settings.behaviors.end),this.callbacks=new q(e.callbacks,this.volume),this.allowedPlayer=new K(e.settings.values.allowedPlayer)}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(11),s=i(120),r=i(16),o=i(6),a=i(2),d=i(13),c=i(38);const l=[1,2];var h=i(145),u=i(149);const p=new n.a("vast.VASTLoader");function g(e,t,i,n,m=!0){const b=(e=function(e){return o.a.tryCatch(()=>decodeURIComponent(e)).fold(()=>function(e){return e.replace(/%/g,"")}(e),()=>e)}(e=function(e,t=l,i=h.a){try{let n=d.rand(8);return e.replace(/\[timestamp\]/gi,String(Date.now())).replace(/\[(random|cachebusting|random_number|TTD_CACHEBUSTER)\]/gi,n).replace(/ord=(%n|\{RANDOMNUM\}|%25%25TTD_CACHEBUSTER%25%25)/gi,"ord="+n).replace(/\[APIFRAMEWORKS\]/gi,t.join(",")).replace(/%APIFRAMEWORKS%/gi,t.join(",")).replace(/\[OMIDPARTNER\]/gi,i).replace(/%OMIDPARTNER%/gi,i)}catch(e){p.warn("updateUrlPlaceholder threw an exception: "+e)}return e}(e,t.apiFrameworkList))).match(/\/\/.*/);b&&(e=t.forceHTTPS?"https:"+b[0]:a.getProtocol()+b[0]),p.debug("Loading VAST file URL:",e," - credentials:",m);let v,A=!1;var y=r=>{if(clearTimeout(v),!A&&m)return p.warn("load file with credentials failed, try without credentials"),void g(e,t,i,n,!1);p.warn("load file with javascript failed",e),n(r,new s.a)};try{const n=c.a();n.open("GET",e,!0),n.withCredentials=m;var w=()=>{if(clearTimeout(v),!A){var e;if(w=a.noop,"string"==typeof n.responseXML)e=n.responseXML;else if("string"==typeof n.responseText)e=n.responseText;else{if("string"!=typeof n.response)return void y(r.a.get(r.b.WRAPPER_TIMEOUT.id,"empty xhr response"));e=n.response}i(d.trim(e))}};c.b(n)?n.onreadystatechange=()=>{if(4===n.readyState){if(n.status<200||n.status>=400){let e=r.a.get(r.b.WRAPPER_TIMEOUT.id,"invalid XHR status code "+n.status);return p.warn("server return an invalid status code : "+e.toString()),404===n.status&&(A=!0),y(e)}w()}}:(n.onerror=()=>y(r.a.get(r.b.WRAPPER_TIMEOUT.id,"XHR onerror")),n.onprogress=()=>{},n.onload=()=>w()),Object(u.a)(),o.a.tryCatch(()=>n.send()).fold(e=>{y(r.a.get(r.b.WRAPPER.id,"Error on XHR send method",e))},()=>{const e=t.timeout||f.TIMEOUT;v=setTimeout(()=>{A=!0,y(r.a.get(r.b.WRAPPER_TIMEOUT.id,"no response after "+e+"ms"))},e)})}catch(e){p.warn("Could not load XML file directly",e),A=!0,y(r.a.get(r.b.UNDEFINED.id,"VASTLoader.load error "+e,e))}}var m=i(132);class f{constructor(e,t,i){this.config=e,this.gdprIab=t,this.wigo=i,this.logger=new n.a("vast.VASTLib"),this.logger.debug("new",this),this.wrappersLimit=this.config.wrappersLimit||f.WRAPPERS_LIMIT}load(e,t,i){this.processVast(!0,e,t,i)}parse(e,t,i){this.processVast(!1,e,t,i)}processVast(e,t,i,n){let r=e=>{i(e)},o=(e,t)=>{n(e,t)};e?this.loadXml(new s.a,t,r,o):this.parseXml(new s.a,t,r,o)}loadXml(e,t,i,n){e.url||(e.url=t),this.wigo.filter(e=>!!e.report).forEach(e=>t=e.getVastUrl(t)),g(t,this.config,s=>{this.wigo.forEach(e=>e.setVast(t,s)),this.parseXml(e,s,i,n)},n)}parseXml(e,t,i,n){Object(m.b)(t,t=>{if(e.merge(t),t.adTagUri)e.wrappers.length>this.wrappersLimit?n(new r.b(r.b.WRAPPER_LIMIT),e):(this.logger.info("load wrapper",t.adTagUri),this.loadXml(e,t.adTagUri,i,(t,i)=>{n(t,e)}));else if(0===e.mediaFiles.length){let t=r.a.get(r.b.WRAPPER.id,"empty mediafiles in VAST definition");this.logger.error(t.getFullMessage()),n(t,e)}else i(e)},(t,i)=>{e.merge(i),n(t,e)},this.gdprIab)}}f.TIMEOUT=7e3,f.WRAPPERS_LIMIT=10},,function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(19),s=i(2);class r extends n.a{constructor(e=r.DEFAULT){super("VideoFilter"),this.value=e,this.checkValue()}checkValue(){Object(s.isString)(this.value)||(this.value=r.DEFAULT)}get(){return this.value}}r.VALUES={DISABLED:"disabled",ARTICLE:"article",SLOT:"slot"},r.DEFAULT=r.VALUES.DISABLED},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(19),s=i(2);class r extends n.a{constructor(e=r.DEFAULT){super("ImageFilter"),this.value=e,this.checkValue()}checkValue(){Object(s.isString)(this.value)||(this.value=r.DEFAULT)}get(){return this.value}}r.VALUES={DISABLED:"disabled",SLOT:"slot"},r.DEFAULT=r.VALUES.DISABLED},function(e,t,i){"use strict";i.d(t,"b",(function(){return W})),i.d(t,"a",(function(){return H})),i.d(t,"c",(function(){return q})),i.d(t,"d",(function(){return Y}));var n=i(1),s=i(5),r=i(31),o=i(6),a=i(11),d=i(24);class c{constructor(e){this.win=e,this.logger=new a.a("helper.SmartSlot")}static findArticle(e,t,i,n){i.length=0,i.currentScore=0,i.childrenScore=0,i.isOverMinimumWidth=!1;const r=e.innerText||e.textContent||e.nodeValue,o=e.nodeName.toUpperCase();if(r&&(3===e.nodeType||c.textNodes[o]))i.length=r.replace(/\s+/g," ").length;else if(e===t.document.body||1===e.nodeType&&c.nodeScores[o]){let n=0,r=0;for(let o=0,a=e.childNodes.length;o<a;o++){const a=c.findArticle(e.childNodes[o],t,i);n+=a.length,r+=a.currentScore,(a.isOverMinimumWidth||s.getSize(e).width>=c.MINIMUM_WIDTH)&&(i.isOverMinimumWidth=!0)}i.currentScore=n,i.childrenScore=r}if(i.childrenScore&&i.isOverMinimumWidth&&i.childrenScore>c.MINIMUM_CHARS){const t=c.nodeScores[o]||0,s=e.className.split(" ");let r,a=1;for(let e=0,t=s.length;e<t;e++)r=s[e].replace(/^\s+|\s+$/g,""),a+=c.classBonuses[r]||0;let d=1;for(let t in c.attributeBonuses)if(c.attributeBonuses.hasOwnProperty(t)){const i=c.attributeBonuses[t],n=void 0===i.value&&void 0!==e.getAttribute(t),s=i.value===e.getAttribute(t);(n||s)&&(d+=i.bonus||0)}const l=i.childrenScore*t*a*d;l>i.article.score&&(i.article.score=l,i.article.node=e,n&&n.debug("found a better node scoring ",i.article.score,i.article.node))}return i}find(){this.logger.info("Auto slot is finding a slot");const e=c.findArticle(this.win.document.body,this.win,{length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}},this.logger);return e.article&&e.article.node?this.findParagraph(e.article.node):null}findParagraph(e){let t;const i=["P","DIV"];for(let n=0;n<i.length&&(t=e.getElementsByTagName(i[n]),!t.length);n++);return t}}c.MINIMUM_SCORE=5e3,c.MINIMUM_CHARS=500,c.MINIMUM_WIDTH=200,c.nodeScores={DIV:10,P:4,ARTICLE:20,SECTION:5,SPAN:2,FORM:4,STRONG:2,EM:3,B:1,I:1,U:1,MAIN:2},c.textNodes={SPAN:!0,STRONG:!0,EM:!0,B:!0,I:!0,U:!0},c.classBonuses={article:4,"ob-text":6,"ob-section-html":4,contenuArticle:6},c.attributeBonuses={itemprop:{value:"articleBody",bonus:1e3}};var l=i(138),h=i(62);function u(e,t,i){if(h.a("teadsDebugInPage").toOption().existsIf(e=>"true"===e)){var n=document.createElement("div");n.setAttribute("id","teadsGhostAvoid"),n.style.position="absolute",n.style.top=t.top+"px",n.style.bottom=t.bottom+"px",n.style.left=t.left+"px",n.style.right=t.right+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.background="rgba(255, 0, 0, 0.10)",n.style.pointerEvents="none",n.style.color="#F79C9C",n.style.zIndex="9999",n.style.padding="10px",n.innerText="avoidSlot",i.document.body.appendChild(n),e.style.backgroundColor="rgba(255, 0, 0, 0.20)"}}const p=e=>H(d.c.noSlot.avoid,e);var g=Object(r.a)((e,t,i)=>{const n=e.avoid.getSlots();if(n){const t=i.getElementRect();let s=0;for(const r of n){if(i.getElement()===r.getElement())return p("AvoidSlot === Slot");const n=r.getElementRect(),o=e.avoid.getDistance(),a={top:n.top-o,left:n.left-o,bottom:n.bottom+o,right:n.right+o,height:n.height+2*o,width:n.width+2*o};if(u(r.getElement(),a,e.parentWindow.getWindow()),t.top!==t.bottom){const e={x:Math.max(0,Math.min(t.right,a.right)-Math.max(t.left,a.left)),y:Math.max(0,Math.min(t.bottom,a.bottom)-Math.max(t.top,a.top))};if(s=e.x*e.y,s)return p(`Avoid - ${Math.ceil(s)}px2`)}else if(t.top>a.top&&t.top<a.bottom)return p("Avoid - slot inside avoid area")}}return W(i)});var m=Object(r.a)((e,{scrollTop:t,waterline:i},n)=>{if(!e.btf.isEnabled())return W(n);const s=n.getElementRect();if(e.belowSelector.get()){e.belowSelector.getFirstElement()&&(i=Math.max(i,e.belowSelector.getFirstElementRect().bottom))}const r=t+(e.insertBefore.isEnabled()?s.top:s.bottom);return r>=i?W(n):H(d.c.noSlot.btf,`lineToCheck: ${Math.round(r)}px >= waterline: ${i}px`)}),f=i(0);const b=["P","DIV","BR"];var v=Object(r.a)((e,t,i)=>{const s=i.getElement();return f.b.fromNullable(s.children).orElse(()=>f.b.fromNullable(s.childNodes)).map(n.fromArrayLike).filter(n.isNotEmpty).match({some:e=>{const t=n.find(e,e=>n.includes(b,e.nodeName));return t?H(d.c.noSlot.content,t.nodeName):W(i)},none:()=>W(i)})});var A=Object(r.a)((e,{elements:t},i)=>{i.resolveSize();const s={i:i.getIndex(),elt:i.getElement(),elts:Object(n.map)(t,e=>e.getElement()),wrappedSizes:{width:i.getWidth(),height:i.getWidth()/16*9}};return e.filter.trigger(s)?W(i):H(d.c.noSlot.filter)}),y=i(58);var w=Object(r.a)((e,{beforeHeightCheck:t,afterHeightCheck:i},n)=>{const r=650/y.a,o=t(n);if(!s.isHTMLElement(o))return H(d.c.noSlot.position);o.style.setProperty("height","0"),o.style.setProperty("text-align","center"),""===o.style.getPropertyValue("max-width")&&o.style.setProperty("max-width","100%");o.offsetLeft;const a=o.offsetTop;o.style.setProperty("overflow","hidden");o.offsetLeft;const c=o.offsetTop;o.style.setProperty("margin-top",.33*r+"px");o.offsetLeft;const l=o.offsetTop;o.style.setProperty("margin-top","0");const h=Math.abs(a-c)<8&&Math.abs(a-l)<.33*r+8;return i(o),h?W(n):H(d.c.noSlot.position,"Check height failed")});function E(e,t=window){let i=n.includes(["video","embed"],e.tagName.toLowerCase());if(!i){const t=e.getAttribute("src");i=t&&C(t)}if(i||(i=s.querySelectorAll("video",t,e).length>0),!i){const r=s.querySelectorAll("[src]",t,e),o=n.map(r,e=>e.getAttribute("src")),a=e=>C(e);i=n.filter(o,a).length>0}return i}function O(e,t=window){let i=null;const n=c.findArticle(t.document.body,t,{length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}});return n&&n.article&&n.article.node&&(i=function e(t,i,n){if(!t||10===n)return;const s=t.parentElement;return s===i?s:e(s,i,n+1)}(e,n.article.node,0)),i||(i=e.parentElement),E(i,t)}function C(e){return/youtube|youtu\.be|dailymotion|day\.ly|vimeo|instagram|vine-videos/i.test(e)}function I(e=[]){const t=n.map(e,e=>s.getSize(e).width);return n.filter(t,e=>e>75).length>0}function S(e,t=0){if(!e||3===t)return e;const i=e.previousElementSibling;return i&&!s.isEmpty(i)?i:S(i,t+1)}function T(e,t=0){if(!e||3===t)return e;const i=e.nextElementSibling;return i&&!s.isEmpty(i)?i:T(i,t+1)}var k=i(184);var P=Object(r.a)((e,t,i)=>{const n=e.parentWindow.getWindow();return e.imageFilter.get()===k.a.VALUES.SLOT&&function(e,t=window){if(!e)return!1;let i,n=!1;if("img"===e.tagName.toLowerCase()?n=I([e]):(i=s.querySelectorAll("img",t,e),n=I(i)),!n){const r=S(e);r&&("img"===r.tagName.toLowerCase()?n=I([r]):(i=s.querySelectorAll("img",t,r),n=i.length>0&&I(i)))}if(!n){const r=T(e);r&&("img"===r.tagName.toLowerCase()?n=I([r]):(i=s.querySelectorAll("img",t,r),n=i.length>0&&I(i)))}return n}(i.getElement(),n)?H(d.c.noSlot.imageSlot,"slot is too close to an image"):W(i)});var j=Object(r.a)((e,t,i)=>{const n=i.getIndex()+1,s=e.minimum.get();return n>=s?W(i):H(d.c.noSlot.minimum,`slot: ${n} < config: ${s}`)});var L=Object(r.a)((e,{elements:t},i)=>{if(!e.belowSelector.get()||null===e.minimumBelow.get())return W(i);const n=e.belowSelector.getFirstNodeBelowIndex(t),s=i.getIndex();return s>=e.minimumBelow.get()+n-1?W(i):H(d.c.noSlot.minimumBelow,`slot: ${s} < config: ${e.minimumBelow.get()}`)});var x=Object(r.a)((e,{scrollTop:t},i)=>{if(!e.selector.get())return W(i);const n=i.getElementRect().top;return n+t>=q.MIN_POSITION_TOP&&n+t<=q.MAX_POSITION_TOP?W(i):H(d.c.noSlot.position,`positionTop: ${q.MIN_POSITION_TOP} <= ${n+t} <= ${q.MAX_POSITION_TOP}`)}),V=i(4),N=i(91);var D=Object(r.a)((e,t,i)=>{if(Object(V.isIABSafeFrame)()){const e=N.c();return e?H(d.c.noSlot.safeFrame,e):W(i)}return W(i)});var R=Object(r.a)((e,t,i)=>{if(i.resolveSize(),s.isSelfClosingTag(i.getElement()))return W(i);const r={">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t},o=[{name:"minimumHeight",property:i.getHeight(),score:q.MIN_LONG_HEIGHT,operator:">="},{name:"minimumWidth",property:i.getWidth(),score:e.minimumWidth.get(),operator:">="},{name:"maximumHeight",property:i.getHeight(),score:q.MAX_LONG_HEIGHT,operator:"<="},{name:"maximumWidth",property:i.getWidth(),score:e.maximumWidth.get(),operator:"<="}],a=({name:e,property:t,score:n,operator:s})=>r[s](t,n)?W(i):H(d.c.noSlot.size,`${e}: ${t} ${s} ${n}`),c=(e,t)=>e.flatMap(()=>t.length>0?c(a(Object(n.head)(t)),Object(n.tail)(t)):e);return c(a(Object(n.head)(o)),Object(n.tail)(o))});var _=Object(r.a)((e,t,i)=>{const n=i.getElement(),r=[];s.getTextContent(n,r);const o=r.join("");if(!s.isSelfClosingTag(n)){return o.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").length>=e.minimumTextLength.get()?W(i):H(d.c.noSlot.content)}return W(i)}),M=i(183);var F=Object(r.a)((e,t,i)=>{const n=e.parentWindow.getWindow();if(e.videoFilter.get()===M.a.VALUES.SLOT){if(function(e,t=window){if(!e)return!1;let i=E(e,t);if(!i){const n=S(e);n&&(i=E(n,t))}if(!i){const n=T(e);n&&(i=E(n,t))}return i}(i.getElement(),n))return H(d.c.noSlot.videoSlot,"slot is too close to a video")}else if(e.videoFilter.get()===M.a.VALUES.ARTICLE&&O(i.getElement(),n))return H(d.c.noSlot.videoSlot,"slot container (article) has a video");return W(i)});class U extends o.a{constructor(e){super(e,"right")}}class B extends o.a{constructor(e){super(e,"left")}}function W(e){return new U({slot:e})}function H(e,t){return new B({reason:e,information:t})}const z=new a.a("SlotChecker"),G={btf:m,minimum:j,minimumBelow:L,height:w,avoid:g,size:R,filter:A,positionTop:x,textLength:_,children:v,video:F,image:P,safeFrame:D},q={MIN_POSITION_TOP:100,MAX_POSITION_TOP:18e3,MIN_LONG_HEIGHT:30,MAX_LONG_HEIGHT:2e3,WIDTH_MARGIN:40,HEIGHT_MARGIN:20,LENGTH_MARGIN:150,LEVEL_POSITION:200};function $(e,t,i){return"inread"===e&&t?[i.safeFrame,i.image,i.video,i.minimum,i.btf,i.positionTop,i.height,i.avoid,i.textLength,i.children,i.size,i.filter]:[i.safeFrame,i.image,i.video,i.minimum,i.btf,i.avoid,i.filter]}function K(e,t,i){const s=(s,r)=>function(e,t){const i=(t,s)=>t.flatMap(()=>s.length>0?i(Object(n.head)(s)(e),Object(n.tail)(s)):t);return i(Object(n.head)(t)(e),Object(n.tail)(t))}(s,t).fold(((t,i)=>({reason:n,information:s})=>(z.info(`Invalid slot [${i} / ${e.length}] ${n} => ${s}`,t),H(n,s)))(s,r),((t,n)=>({slot:t})=>(z.info(`Elected slot [${n} / ${e.length}]`,t),i.valid(1,1),W(t)))(0,r)),r=(e,t,i)=>e.orElse(()=>t.length>0?r(s(Object(n.head)(t),i),Object(n.tail)(t),i+1):e);return e.length>0?r(s(Object(n.head)(e),0),Object(n.tail)(e),1):H(d.c.noSlot.selector)}function Y(e,t,i=K,s=K){const{placementConfig:r}=e,o=function(e,t,i=G){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=t(s,i[s](e)));return n}(r,X(e)),a=r.selector.getSlots();return i(a,$(e.name,!1,o),t).orElse(i=>(({reason:i,information:a})=>{if("inread"===e.name&&r.auto.isEnabled()){const i=new c(r.parentWindow.getWindow()).find(),a=Object(n.map)(i?Object(n.fromArrayLike)(i):[],(e,t)=>{const i=new l.a(e,t);return i.computeScore(r),i});return a.sort((e,t)=>t.getScore()-e.getScore()),s(a,$(e.name,!0,o),t)}return H(i,a)})(i)).fold(({reason:e,information:i})=>(z.info("No slot available"),Object(n.isEmpty)(a)&&!r.auto.isEnabled()?(t.valid(1,1,d.c.noSlot.selector,"error"),H(r.headerBiddingProvider.nonEmpty()?d.c.noSlot.hbSelector:d.c.noSlot.selector)):(t.valid(1,1,e,"error"),H(e,i))),({slot:e})=>(z.info("Slot available",e),W(e)))}const X=Object(r.a)((e,t,i)=>{const{placementConfig:n}=e,r=s.getScrollTop(n.parentWindow.getWindow());switch(t){case"btf":return i({scrollTop:r,waterline:s.getWindowSize(n.parentWindow.getWindow()).height});case"height":return i({beforeHeightCheck:t=>e.initDom(t),afterHeightCheck:e=>{e&&e.parentNode&&e.parentNode.removeChild(e)}});case"positionTop":return i({scrollTop:r});case"minimumBelow":case"filter":return i({elements:n.selector.getSlots()});default:return i({})}})},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,"div.teads-expand div.teads-ui-components-credits,div.teads-inread div.teads-ui-components-credits{font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;color:#585858!important;text-align:right!important;padding:1px 0!important;height:26px!important;line-height:26px!important;padding-right:4px!important;letter-spacing:.3px!important}div.teads-expand div.teads-ui-components-credits a span,div.teads-inread div.teads-ui-components-credits a span{display:inline!important}div.teads-expand div.teads-ui-components-credits a,div.teads-expand div.teads-ui-components-credits a span,div.teads-inread div.teads-ui-components-credits a,div.teads-inread div.teads-ui-components-credits a span{font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;box-shadow:none!important;letter-spacing:.3px!important}div.teads-expand.sm-screen div.teads-ui-components-credits a,div.teads-expand.sm-screen div.teads-ui-components-credits a span,div.teads-expand.xs-screen div.teads-ui-components-credits a,div.teads-expand.xs-screen div.teads-ui-components-credits a span,div.teads-inread.sm-screen div.teads-ui-components-credits a,div.teads-inread.sm-screen div.teads-ui-components-credits a span,div.teads-inread.xs-screen div.teads-ui-components-credits a,div.teads-inread.xs-screen div.teads-ui-components-credits a span{font-family:Helvetica,Arial,sans-serif!important;font-size:9px!important;box-shadow:none!important;letter-spacing:.3px!important}div.teads-inread.sm-screen div.teads-ui-components-credits{font-size:9px!important;letter-spacing:.3px!important}div.teads-expand .teads-ui-components-credits a,div.teads-inread .teads-ui-components-credits a{color:#585858!important;text-decoration:none!important;font-weight:300!important;border:none!important;letter-spacing:.3px!important;background:none!important;padding:0!important}div.teads-expand.sm-screen .teads-ui-components-credits a,div.teads-expand.xs-screen .teads-ui-components-credits a,div.teads-inread.sm-screen .teads-ui-components-credits a,div.teads-inread.xs-screen .teads-ui-components-credits a{font-size:9px!important;letter-spacing:.3px!important}div.teads-expand div.teads-ui-components-credits span.teads-ui-components-credits-colored,div.teads-inread div.teads-ui-components-credits span.teads-ui-components-credits-colored{color:#025c9a!important}div.teads-inread div.teads-ui-components-credits a:after,div.teads-inread div.teads-ui-components-credits a:before,div.teads-inread div.teads-ui-components-credits span:after,div.teads-inread div.teads-ui-components-credits span:before{display:none!important}",""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,"div.teads-expand div.teads-ui-components-label,div.teads-inread div.teads-ui-components-label{font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;color:#585858;text-align:center!important;text-transform:uppercase!important;height:21px!important;line-height:21px!important;letter-spacing:.3px!important;font-weight:300!important}div.teads-inread div.teads-ui-components-label:after,div.teads-inread div.teads-ui-components-label:before{display:none!important}div.teads-inread.sm-screen div.teads-ui-components-label,div.teads-inread.xs-screen div.teads-ui-components-label{font-size:10px!important}",""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,'.teads-expand .teads-ui-components-adchoices,.teads-inread .teads-ui-components-adchoices{color:#000;font-family:arial;font-size:11px;cursor:pointer;position:absolute;top:3px;right:5px;width:15px;height:15px;line-height:15px;padding:1px;background:url("data:image/svg+xml;base64,PHN2Zw0KICB2ZXJzaW9uPSIxLjEiDQogIGJhc2VQcm9maWxlPSJmdWxsIg0KICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8c3R5bGU+DQogICAgLyogPCFbQ0RBVEFbICovDQogICAgLmFkY2hvaWNlcyB7DQogICAgICB0ZXh0LXJlbmRlcmluZzogZ2VvbWV0cmljUHJlY2lzaW9uOw0KICAgICAgZmlsbC1vcGFjaXR5OiAxLjA7DQogICAgICBmaWxsOiAjMDBhZWNkOw0KICAgICAgc3Ryb2tlOiBub25lOw0KICAgIH0NCiAgICAvKiBdXT4gKi8NCiAgPC9zdHlsZT4NCiAgPHN2ZyBjbGFzcz0iYWRjaG9pY2VzIiB4PSIwcHgiPg0KICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiByPSIwLjY3Ij48L2NpcmNsZT4NCiAgICA8cGF0aCBkPSJNNC4yLDExLjNRMy4zLDExLjgsMy4zLDEwLjc1TDMuMyw0LjFRMy4zLDMuMSw0LjMsMy41TDEwLjQsNy4wUTEyLjAsNy41LDEwLjQsOC4wTDYuNjUsMTAuMEw2LjY1LDcuNzVhMC42NSwwLjY1LDAsMSwwLC0xLjMsMEw1LjM1LDEwLjc1YTAuOSwwLjksMCwwLDAsMS4zLDAuOEwxMi43LDguMlExMy43LDcuNSwxMi43LDYuN0wzLjMsMS42UTIuMiwxLjMsMS44LDIuNUwxLjgsMTIuNVEyLjIsMTMuOSwzLjMsMTMuM0w0LjgsMTIuNUEwLjMsMC4zLDAsMSwwLDQuMiwxMS4zWiI+PC9wYXRoPg0KICA8L3N2Zz4NCjwvc3ZnPg0K");background-size:15px 15px;background-repeat:no-repeat;background-position:100%;z-index:1}.teads-expand .teads-ui-components-adchoices.expanded:first-child,.teads-inread .teads-ui-components-adchoices.expanded:first-child{border-bottom-left-radius:8px;padding:1px 17px 1px 4px;background-color:hsla(0,0%,100%,.8)}.teads-expand .teads-ui-components-adchoices.expanded,.teads-inread .teads-ui-components-adchoices.expanded{width:auto;padding-right:19px}.teads-expand .teads-ui-components-adchoices span,.teads-inread .teads-ui-components-adchoices span{display:none!important}.teads-expand .teads-ui-components-adchoices.expanded span,.teads-inread .teads-ui-components-adchoices.expanded span{display:inline!important}',""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,".teads-inread .teads-ui-components-hpl{position:absolute;left:-1000px;display:none;z-index:-100}",""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,'div.teads-display-absolute{position:absolute!important;overflow:hidden!important;z-index:99!important;pointer-events:none!important;background-repeat:repeat-y;background-attachment:fixed}.teads-display-fixed{position:fixed!important;background-repeat:repeat-y!important}.teads-display-clickzone{display:block!important;position:absolute!important;top:0!important;width:100%!important;height:100%!important}.teads-video-scroller{position:fixed;top:50%;transform:translateY(-50%)}div.teads-display-format{position:sticky;-webkit-position:sticky}div.teads-display-format .icon-close{background-size:650px 40px!important;background-image:url("{{assetsPath}}/default/player-sprite.svg")!important}div.teads-display-format .icon-close,div.teads-display-format .sm-screen .icon-close,div.teads-display-format .xs-screen .icon-close{width:11px!important;height:11px!important;background-position:-80px 0!important}div.teads-display-format .teads-ui-component-closebutton svg{display:none!important}div.teads-ui-component-closebutton .components-countdown{display:none!important;position:absolute!important;left:2px!important;bottom:20px!important}div.teads-display-format .teads-ui-component-closebutton .components-countdown .countdown-circle>li{color:#fff!important}div.teads-display-format .teads-ui-component-closebutton .components-countdown .show,div.teads-display-format .teads-ui-component-closebutton .show{display:block!important}div.teads-display-format .teads-ui-component-closebutton .show .close-button{opacity:.8!important}div.teads-display-format .teads-ui-component-closebutton .show:hover .close-button.show{opacity:1!important}div.teads-display-format .sm-screen .teads-ui-component-closebutton .closebutton,div.teads-display-format .xs-screen .teads-ui-component-closebutton .closebutton{padding:10px 10px 15px 15px!important}',""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,'.teads-inread .teads-ui-components-smart-header{margin-bottom:2px!important;height:21px}.teads-inread .teads-ui-components-smart-header .smart-header-content{position:absolute!important;right:0!important;background-color:#434343!important;padding:1px 6px 0;line-height:21px}.smart-header-content .close-button-smart .icon-close{transition:.1s;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;-ms-transition:.1s}.smart-header-content .adChoices-button-smart,.smart-header-content .close-button-smart,.smart-header-content .sound-button-smart{display:inline-block;cursor:pointer}.smart-header-content .adChoices-button-smart,.smart-header-content .close-button-smart{margin-right:5px}.smart-header-content .close-button-smart .icon-close{width:11px;height:11px;background-position:-80px 0;background-image:url("{{assetsPath}}/default/player-sprite.svg")}.smart-header-content .adChoices-button-smart{width:13px;height:13px;background:url("data:image/svg+xml;base64,PHN2Zw0KICB2ZXJzaW9uPSIxLjEiDQogIGJhc2VQcm9maWxlPSJmdWxsIg0KICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8c3R5bGU+DQogICAgLyogPCFbQ0RBVEFbICovDQogICAgLmFkY2hvaWNlcyB7DQogICAgICB0ZXh0LXJlbmRlcmluZzogZ2VvbWV0cmljUHJlY2lzaW9uOw0KICAgICAgZmlsbC1vcGFjaXR5OiAxLjA7DQogICAgICBmaWxsOiAjRkZGOw0KICAgICAgc3Ryb2tlOiBub25lOw0KICAgIH0NCiAgICAvKiBdXT4gKi8NCiAgPC9zdHlsZT4NCiAgPHN2ZyBjbGFzcz0iYWRjaG9pY2VzIiB4PSIwcHgiPg0KICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiByPSIwLjY3Ij48L2NpcmNsZT4NCiAgICA8cGF0aCBkPSJNNC4yLDExLjNRMy4zLDExLjgsMy4zLDEwLjc1TDMuMyw0LjFRMy4zLDMuMSw0LjMsMy41TDEwLjQsNy4wUTEyLjAsNy41LDEwLjQsOC4wTDYuNjUsMTAuMEw2LjY1LDcuNzVhMC42NSwwLjY1LDAsMSwwLC0xLjMsMEw1LjM1LDEwLjc1YTAuOSwwLjksMCwwLDAsMS4zLDAuOEwxMi43LDguMlExMy43LDcuNSwxMi43LDYuN0wzLjMsMS42UTIuMiwxLjMsMS44LDIuNUwxLjgsMTIuNVEyLjIsMTMuOSwzLjMsMTMuM0w0LjgsMTIuNUEwLjMsMC4zLDAsMSwwLDQuMiwxMS4zWiI+PC9wYXRoPg0KICA8L3N2Zz4NCjwvc3ZnPg==")}.icon-muteoff{background-position:-390px 0}.icon-muteon{background-position:-445px 0}.icon-muteoff,.icon-muteon{width:16px;height:11px;background-image:url("{{assetsPath}}/default/player-sprite.svg")}',""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,".teads-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:0;cursor:pointer}",""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,".teads-inread{overflow:hidden;height:0;-webkit-transition:height .5s;-moz-transition:height .5s;-o-transition:height .5s;-ms-transition:height .5s;transition:height .5s;box-sizing:content-box}.teads-inread.no-transition{-webkit-transition:none;-moz-transition:none;-o-transition:none;-ms-transition:none;transition:none}div.teads-inread div:after,div.teads-inread div:before{display:none!important}div.teads-inread.teads-display{margin-bottom:10px!important}div.teads-inread.teads-third-party-display{height:auto!important}",""])},function(e,t,i){var n=i(195);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){(t=e.exports=i(65)(void 0)).i(i(196),""),t.i(i(197),""),t.push([e.i,".teads-ui-component-earlyclickoverlay,.teads-ui-component-fullscreenbutton{position:absolute;top:0;right:0;width:100%;height:100%;background:none}.fullscreen .teads-ui-component-fullscreenbutton,.fullscreen .teads-ui-component-fullscreenbutton .show{width:45px;height:45px;z-index:10!important}.teads-ui-component-fullscreenbutton .icon-collapse{display:none;margin-top:10px;margin-left:20px}.fullscreen .teads-ui-component-fullscreenbutton .icon-collapse{display:block}.fullscreen .teads-ui-component-closebutton .icon-close{display:none}",""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,'body{margin:0;padding:0;border:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:Helvetica,Arial,sans-serif!important;font-weight:300}#layout-video-component{width:100%;height:100%;position:relative}#vpaid-container{z-index:1;background-color:#000;position:relative}.teads-ui-component-progressbar{position:absolute;bottom:0;left:0}.teads-ui-component-progressbar .progress{height:3px;width:0;background-color:#86c3f7;transition:all .4s linear}.teads-ui-component-playpausebutton{position:absolute;bottom:10px;left:10px;width:20px;height:20px;background-image:url("{{assetsPath}}/default/img/play.png");background-position:0 0;background-repeat:no-repeat;background-size:contain;cursor:pointer}.teads-ui-component-playpausebutton.playing{background-image:url("{{assetsPath}}/default/img/pause.png")}.teads-ui-component-fullscreenbutton{position:absolute;bottom:5px;right:30px;width:16px;height:16px;background-image:url("{{assetsPath}}/default/img/fullscreen.png");background-position:0 0;background-repeat:no-repeat;background-size:contain;cursor:pointer}.teads-ui-component-progresstext{height:30px;margin:0 40px 0 60px;text-align:center;padding:4px}.teads-ui-component-skipbutton{position:absolute;bottom:40px;right:4px;width:100px;height:20px;font-family:Helvetica,Arial,sans-serif!important;background-color:#ccc;text-align:center;padding:4px;border:1px solid #000}.adchoices-icon{background:url("data:image/svg+xml;base64,PHN2Zw0KICB2ZXJzaW9uPSIxLjEiDQogIGJhc2VQcm9maWxlPSJmdWxsIg0KICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8c3R5bGU+DQogICAgLyogPCFbQ0RBVEFbICovDQogICAgLmFkY2hvaWNlcyB7DQogICAgICB0ZXh0LXJlbmRlcmluZzogZ2VvbWV0cmljUHJlY2lzaW9uOw0KICAgICAgZmlsbC1vcGFjaXR5OiAxLjA7DQogICAgICBmaWxsOiAjMDBhZWNkOw0KICAgICAgc3Ryb2tlOiBub25lOw0KICAgIH0NCiAgICAvKiBdXT4gKi8NCiAgPC9zdHlsZT4NCiAgPHN2ZyBjbGFzcz0iYWRjaG9pY2VzIiB4PSIwcHgiPg0KICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiByPSIwLjY3Ij48L2NpcmNsZT4NCiAgICA8cGF0aCBkPSJNNC4yLDExLjNRMy4zLDExLjgsMy4zLDEwLjc1TDMuMyw0LjFRMy4zLDMuMSw0LjMsMy41TDEwLjQsNy4wUTEyLjAsNy41LDEwLjQsOC4wTDYuNjUsMTAuMEw2LjY1LDcuNzVhMC42NSwwLjY1LDAsMSwwLC0xLjMsMEw1LjM1LDEwLjc1YTAuOSwwLjksMCwwLDAsMS4zLDAuOEwxMi43LDguMlExMy43LDcuNSwxMi43LDYuN0wzLjMsMS42UTIuMiwxLjMsMS44LDIuNUwxLjgsMTIuNVEyLjIsMTMuOSwzLjMsMTMuM0w0LjgsMTIuNUEwLjMsMC4zLDAsMSwwLDQuMiwxMS4zWiI+PC9wYXRoPg0KICA8L3N2Zz4NCjwvc3ZnPg0K")}.teads-ui-component-label{font-family:Helvetica,Arial,sans-serif!important;font-size:12px;color:#999;text-align:center;padding:3px 0;text-transform:uppercase;height:21px;line-height:21px;display:none}.fullscreen .teads-ui-component-label,.fullscreen .teads-ui-component-label.show{display:none!important}.teads-ui-component-credits{font-size:12px;color:#999;text-align:right;padding:3px 0;height:26px;line-height:26px;display:none}.fullscreen .teads-ui-component-credits,.fullscreen .teads-ui-component-credits.show{display:none!important}.sm-screen .teads-ui-component-label,.xs-screen .teads-ui-component-label{font-size:10px}.teads-ui-component-credits a{color:#999;text-decoration:none}.teads-ui-component-credits-blue{color:#79bbe9}.teads-ui-component-soundbutton{position:absolute;bottom:0;right:0;padding:13px 18px 18px 6px;cursor:pointer;display:none;opacity:0;transition:opacity 175ms linear}.teads-ui-component-soundbutton.show{display:block;opacity:.8}.teads-ui-component-soundbutton:hover{opacity:1}.teads-ui-component-closebutton{position:absolute;top:0;right:0;padding:15px;cursor:pointer;display:none;transition:opacity 175ms linear}.teads-ui-component-closebutton.show{display:block}.teads-ui-component-closebutton svg{display:none}.teads-ui-component-closebutton .countdown{display:none;position:absolute;left:2px;bottom:20px}.teads-ui-component-closebutton .countdown.show{display:block}.teads-ui-component-closebutton .countdown .countdown-circle>li{color:#fff}.fullscreen .teads-ui-component-closebutton .countdown.show{display:none!important}.teads-ui-component-closebutton.show .close-button{opacity:.8}.teads-ui-component-closebutton.show:hover .close-button.show{opacity:1}.sm-screen .teads-ui-component-closebutton .closebutton,.xs-screen .teads-ui-component-closebutton .closebutton{padding:10px 10px 15px 15px}.teads-ui-component-hourglass{display:none;position:absolute;top:0;right:16px;width:18px;height:18px;transition:opacity 175ms linear}.teads-ui-component-hourglass.center{top:11px;right:11px}.teads-ui-component-hourglass.show{display:flex!important}.teads-ui-component-hourglass svg{display:none}.teads-ui-component-hourglass .countdown{display:none;flex-direction:row;justify-content:center;align-items:center;flex:1;height:100%}.teads-ui-component-hourglass .countdown.show{display:flex!important}.teads-ui-component-hourglass .countdown .countdown-circle,.teads-ui-component-hourglass .countdown .countdown-circle>li{display:flex!important;flex-direction:row;justify-content:center;align-items:center;flex:1;height:100%}.teads-ui-component-hourglass .countdown .countdown-circle>li{color:#fff}.teads-ui-component-hourglass .countdown .countdown-circle>li:after{position:relative;top:0;font-size:.7rem}.teads-ui-component-clickbutton{display:none;position:absolute;top:0;left:0;cursor:pointer;-webkit-transition:background-color .25s;transition:background-color .25s}.teads-ui-component-clickbutton .text{font-size:12px;white-space:nowrap;max-height:30px;text-align:center;background-color:rgba(0,0,0,.1);border:1px solid #fff;color:#fff;margin:10px;padding:6px 10px}.teads-ui-component-clickbutton .text:hover{background-color:rgba(0,0,0,.25)}.sm-screen .teads-ui-component-clickbutton .text,.xs-screen .teads-ui-component-clickbutton .text{margin:5px;padding:5px}.teads-ui-component-clicktoplay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;cursor:pointer;display:none;z-index:10!important}.teads-ui-component-clicktoplay .icon-watchmore{position:absolute;top:50%;left:50%;margin-left:-8px;margin-right:-10px;opacity:.8;transition:opacity 175ms linear}.sm-screen .teads-ui-component-clicktoplay .icon-watchmore,.xs-screen .teads-ui-component-clicktoplay .icon-watchmore{margin-left:-5px;margin-right:-7px}.teads-ui-component-clicktoplay:hover .icon-watchmore{opacity:1}.teads-ui-component-endscreen{position:absolute;width:100%;height:100%;top:0;left:0;z-index:10!important;background-color:#000;text-align:center;word-spacing:nowrap;opacity:0;display:none;justify-content:center;align-items:center;transition:opacity 175ms ease}.teads-ui-component-endscreen.show{display:flex!important;opacity:1!important}.teads-ui-component-endscreen .adchoices{font-family:arial;font-size:11px;cursor:pointer;position:absolute;top:0;right:0;width:15px;height:15px;line-height:15px;padding:1px;border-bottom-left-radius:8px;background-size:15px 15px;background-repeat:no-repeat;background-position:100%}.teads-ui-component-endscreen .close-button:not(.hide)~.sm-screen .teads-ui-component-endscreen .adchoices,.teads-ui-component-endscreen .close-button:not(.hide)~.xs-screen .teads-ui-component-endscreen .adchoices{top:12px;right:30px}.teads-ui-component-endscreen .close-button:not(.hide)~.adchoices{top:14px;right:35px}.teads-ui-component-endscreen .adchoices.expanded{background-color:hsla(0,0%,100%,.8)!important}.teads-ui-component-endscreen .adchoices span{display:none}.teads-ui-component-endscreen .adchoices.expanded span{display:inline}.tea .teads-ui-component-endscreen .countdown .countdown-timer svg{opacity:0}.teads-ui-component-endscreen .countdown{position:absolute;bottom:18px;left:18px;color:#fff}.sm-screen .teads-ui-component-endscreen .countdown,.xs-screen .teads-ui-component-endscreen .countdown{bottom:5px;left:5px}.teads-ui-component-endscreen .close-button{position:absolute;top:0;right:0;padding:15px;cursor:pointer}.teads-ui-component-endscreen .button-container{position:absolute}.teads-ui-component-endscreen .button{display:block;width:100%;height:70px;margin-bottom:40px;cursor:pointer;transition:opacity 175ms ease}.sm-screen .teads-ui-component-endscreen .button{margin-bottom:15px!important;height:40px}.xs-screen .teads-ui-component-endscreen .button{margin-bottom:15px!important;height:32px}.xs-screen .teads-ui-component-endscreen .button.replay-button{margin-bottom:15px!important}.teads-ui-component-endscreen .button:last-child{margin-bottom:0!important}.teads-ui-component-endscreen.show .button{opacity:.8!important}.teads-ui-component-endscreen.show .button:hover{opacity:1!important}.teads-ui-component-endscreen.show .button.edge-touch-screen,.teads-ui-component-endscreen.show .button.edge-touch-screen:hover{opacity:.8!important}.teads-ui-component-endscreen .button .icon{float:left;border-radius:35px;border:2px solid #fff;border-color:#294355;height:66px;width:66px}.sm-screen .teads-ui-component-endscreen .button .icon{height:36px;width:36px}.xs-screen .teads-ui-component-endscreen .button .icon{display:flex;justify-content:center;align-items:center;border-width:1px;height:30px;width:30px}.teads-ui-component-endscreen .button .icon span{display:block;margin:18px 22px;height:30px;width:30px}.sm-screen .teads-ui-component-endscreen .button .icon span{margin:7px 10px;height:20px;width:16px}.xs-screen .teads-ui-component-endscreen .button .icon span{margin:0;height:20px;width:16px}.teads-ui-component-endscreen .button .text{float:left;line-height:70px;height:70px;font-size:23px;color:#294355;padding-left:25px}.sm-screen .teads-ui-component-endscreen .button .text{line-height:40px;height:40px;padding-left:20px;font-size:17px}.xs-screen .teads-ui-component-endscreen .button .text{line-height:30px;height:30px;font-size:14px;padding-left:15px}.teads-ui-component-endscreen .countdown{display:none;color:#294355}.teads-ui-component-uibutton.ui-invisible{text-decoration:line-through}.teads-ui-component-uibutton{position:absolute;bottom:5px;right:5px;width:16px;height:16px;text-align:center;vertical-align:middle;border:1px solid #000;color:#000;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:pointer;text-decoration:none;background-color:#fff;font-size:12px}@-webkit-keyframes load{0%{stroke-dashoffset:0}}@keyframes load{0%{stroke-dashoffset:0}}.countdown-circle{position:relative;display:inline-block;padding:0;margin:0;text-align:center}.countdown-circle>li:after{content:attr(data-countdown);position:absolute;width:100%;top:.4rem;left:0;font-size:1rem;text-align:center}.countdown-circle>li{display:inline-block;position:relative;text-align:center;color:#93a2ac;font-family:Helvetica,Arial,sans-serif!important;font-weight:100}.countdown-circle svg{width:30px;height:30px}.countdown-circle svg:nth-child(2){position:absolute;left:0;top:0;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}.countdown-circle svg:nth-child(2) path{fill:none;stroke-width:20;stroke-dasharray:629;stroke:#999;opacity:.9}.teads-ui-component-brandlogo{display:none;opacity:.8;cursor:pointer;position:absolute;bottom:0;left:0;margin-left:10px;margin-bottom:18px;webkit-transition:background-color .25s;transition:background-color .25s;width:20%;height:10%;max-height:50px;background-repeat:no-repeat;background-position-x:left;background-position-y:bottom;background-size:contain}.sm-screen .teads-ui-component-brandlogo,.xs-screen .teads-ui-component-brandlogo{margin-left:5px;width:30%;height:15%}.teads-ui-component-adchoices{font-family:arial;font-size:11px;cursor:pointer;position:absolute;top:0;right:0;line-height:15px;border-bottom-left-radius:8px;background-size:15px 15px;background-repeat:no-repeat;background-position:100%}.teads-ui-component-adchoices.expanded{width:auto;padding:1px 17px 1px 4px;background-color:hsla(0,0%,100%,.8)}.teads-ui-component-adchoices span{display:none}.teads-ui-component-adchoices.expanded span{display:inline}.teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices{top:14px;right:35px}.sm-screen .teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices,.xs-screen .teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices{top:12px;right:30px}.fullscreen .teads-ui-component-adchoices,.fullscreen .teads-ui-component-adchoices.show{display:none!important}.teads-ui-component-startscreen{width:100%;height:100%;position:absolute;-webkit-box-shadow:inset 0 0 85px rgba(0,0,0,.1);-moz-box-shadow:inset 0 0 85px rgba(0,0,0,.1);box-shadow:inset 0 0 85px rgba(0,0,0,.1);background-color:#fff}.teads-ui-component-bannervideobottom .container{z-index:1000;position:absolute;bottom:0;width:100%;height:81px;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border:1px solid #dfe6e9;border-width:0 1px 1px;background-color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;cursor:pointer}.teads-ui-component-bannervideobottom .cta{overflow:hidden;text-decoration:none;display:block;background-color:#03a9f4;white-space:nowrap;text-align:center;color:#fff;padding:12px;border-radius:4px;transition:.4s}.teads-ui-component-bannervideobottom .cta:hover{background-color:#027fb7}.show{display:block!important}.show:hover{opacity:1!important}.hide{display:none;opacity:0}',""])},function(e,t,i){(e.exports=i(65)(void 0)).push([e.i,'.icon-book{width:26px;height:29px;background-position:0 0}.sm-screen .icon-book,.xs-screen .icon-book{width:18px;height:20px;background-position:-35px 0}.icon-close{width:15px;height:15px;background-position:-60px 0}.sm-screen .icon-close,.xs-screen .icon-close{width:11px;height:11px;background-position:-80px 0}.icon-closeendscreen{width:15px;height:15px;background-position:-100px 0}.sm-screen .icon-closeendscreen,.xs-screen .icon-closeendscreen{width:11px;height:11px;background-position:-120px 0}.icon-collapse{width:15px;height:15px;background-position:-140px 0}.icon-contact{width:28px;height:23px;background-position:-160px 0}.sm-screen .icon-contact,.xs-screen .icon-contact{width:20px;height:16px;background-position:-195px 0}.icon-download{width:20px;height:25px;background-position:-220px 0}.sm-screen .icon-download,.xs-screen .icon-download{width:14px;height:17px;background-position:-245px 0}.icon-learnmore{width:23px;height:28px;background-position:-305px 0}.sm-screen .icon-learnmore,.xs-screen .icon-learnmore{width:17px;height:20px;background-position:-335px 0}.icon-muteoff{width:22px;height:15px;background-position:-360px 0}.sm-screen .icon-muteoff,.xs-screen .icon-muteoff{width:16px;height:11px;background-position:-390px 0}.icon-muteon{width:22px;height:15px;background-position:-415px 0}.sm-screen .icon-muteon,.xs-screen .icon-muteon{width:16px;height:11px;background-position:-445px 0}.icon-replay{width:23px;height:29px;background-position:-470px 0}.sm-screen .icon-replay,.xs-screen .icon-replay{width:16px;height:20px;background-position:-500px 0}.icon-shop{width:29px;height:29px;background-position:-525px 0}.sm-screen .icon-shop,.xs-screen .icon-shop{width:20px;height:20px;background-position:-560px 0}.icon-signup{width:26px;height:31px;background-position:-585px 0}.sm-screen .icon-signup,.xs-screen .icon-signup{width:18px;height:22px;background-position:-620px 0}.icon-watchmore{width:16px;height:20px;background-position:-645px 0}.sm-screen .icon-watchmore,.xs-screen .icon-watchmore{width:11px;height:14px;background-position:-670px 0}.icon-book,.icon-close,.icon-closeendscreen,.icon-collapse,.icon-contact,.icon-download,.icon-learnmore,.icon-muteoff,.icon-muteon,.icon-replay,.icon-shop,.icon-signup,.icon-watchmore{background-size:690px 40px}.no-svg .icon-book,.no-svg .icon-close,.no-svg .icon-closeendscreen,.no-svg .icon-collapse,.no-svg .icon-contact,.no-svg .icon-download,.no-svg .icon-learnmore,.no-svg .icon-muteoff,.no-svg .icon-muteon,.no-svg .icon-replay,.no-svg .icon-shop,.no-svg .icon-signup,.no-svg .icon-watchmore{background-image:url("{{assetsPath}}/default/player-sprite.png")}.icon-book,.icon-close,.icon-closeendscreen,.icon-collapse,.icon-contact,.icon-download,.icon-learnmore,.icon-muteoff,.icon-muteon,.icon-replay,.icon-shop,.icon-signup,.icon-watchmore{background-image:url("{{assetsPath}}/default/player-sprite.svg")}',""])},function(e,t,i){"use strict";i.r(t);i(169);const n=window.teads||{};n.vpaid=n.vpaid||{},window.teads=n},function(e,t,i){"use strict";i.r(t);var n=i(116),s=i(139),r=i(113);const o=window.teads||{};o.instances=o.instances||r.e,o.tagManagerResourcesList=n.e,o.clearInstances=r.b,o.destroyPageRelatedVariables=r.c,o.loadAd=n.d,o.isNoAd=n.b,o.isSameAd=s.b,o.cleanup=r.a;const a=window.teads||{};a.helper=a.helper||{},window.teads=a,Object(r.d)()},,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Selector}));var funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),common_FormatException__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(49),common_Context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),common_Dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),common_ArrayHelper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),common_HTMLHelper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),common_Utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(138);class Selector extends funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__.a{constructor(e,t){if(super("Selector"),this.value=e,this.win=t,this.default=null,this.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"},!t)throw new common_FormatException__WEBPACK_IMPORTED_MODULE_1__.a(common_FormatException__WEBPACK_IMPORTED_MODULE_1__.a.OPTION_PARENTWINDOW_INVALID);this.checkValue()}checkValue(){Object(common_Utils__WEBPACK_IMPORTED_MODULE_6__.isString)(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isNodeList(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isISlotSelector(this.value,this.screenSizes)||(this.value=this.default)}get(){return this.value}getSlots(){const e=[];let t=this.value;if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isISlotSelector(this.value,this.screenSizes)){let e;for(const i in this.value)if(this.value.hasOwnProperty(i)&&(e=this.checkScreenSelector(i,this.win),e)){t=this.value[i];break}e?this.logger.debug("Slot",e,"selected:",t):this.logger.warn("Slots by device not found: ",this.value)}if(Object(common_Utils__WEBPACK_IMPORTED_MODULE_6__.isString)(t)&&t){let i=[];const n=common_HTMLHelper__WEBPACK_IMPORTED_MODULE_5__.findAllWindows(document.body);common_ArrayHelper__WEBPACK_IMPORTED_MODULE_4__.forEach(n,e=>{Object(common_Utils__WEBPACK_IMPORTED_MODULE_6__.isString)(t)&&(i=i.concat(common_Dom__WEBPACK_IMPORTED_MODULE_3__.querySelectorAll(t,e)))});for(let t=0;t<i.length;t++)e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.a(i[t],t))}else if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement(t))e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.a(t));else if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isNodeList(t))for(let i=0;i<t.length;i++)e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.a(t[i],i));return e.length||!Object(common_Context__WEBPACK_IMPORTED_MODULE_2__.isAmp)()&&!Object(common_Context__WEBPACK_IMPORTED_MODULE_2__.isIABSafeFrame)()||e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.a(this.win.document.body)),e}checkScreenSelector(screen,win){let selectedScreenSelector=null;const currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return common_ArrayHelper__WEBPACK_IMPORTED_MODULE_4__.forEach(screen.split("+"),screenSelector=>{if(this.screenSizes[screenSelector])try{const screenSelectorPattern=this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(e){this.logger.warn("screenSelector eval has failed")}}),selectedScreenSelector}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractSelector}));var funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),common_ArrayHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);class AbstractSelector extends funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__.a{constructor(e){super(e),this.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"}}checkScreenSelector(screen,win){var selectedScreenSelector=null,currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return common_ArrayHelper__WEBPACK_IMPORTED_MODULE_1__.forEach(screen.split("+"),screenSelector=>{if(this.screenSizes[screenSelector])try{var screenSelectorPattern=this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,""+currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(e){this.logger.warn("screenSelector eval has failed")}}),selectedScreenSelector}}},,,,,,,,,,,,,,,,,,,function(e,t,i){e.exports=i(241)},function(e,t){const i=window.teads||{};i.vastDomains=[],i.gdprPayload={},window.teads=i},,,,,function(e,t,i){"use strict";i.r(t);i(236),i(135),i(199),i(198);const n=window.teads||{};n.player=n.player||{},window.teads=n;var s=i(43),r=i(130),o=i(1),a=i(58),d=i(4),c=i(5),l=i(90),h=i(67),u=i(49),p=i(6),g=i(0),m=i(9),f=i(37),b=i(11),v=i(13),A=i(46),y=i(14),w=i(2),E=i(116),O=i(158),C=i(30),I=i(24);function S({ccpaIab:e}){return g.b.fromNullable(e).filter(e=>Object(w.isObject)(e)&&Object(w.hasOwnProperty)(e,"consent")&&Object(w.isString)(e.consent))}var T=i(146),k=i(18);var P=i(71),j=i(142),L=i(10),x=i(38),V=i(44),N=i(87);function D(e){return g.b.fromNullable(null==e?void 0:e.headerBiddingProvider).filter(w.isString)}const R=e=>({type:"Timeout",reason:230,status:23,consent:null!=e?e:"",apiVersion:Object(g.c)(2),cmpId:g.a}),_=(e,t,i,n=Object(g.c)(2))=>({type:"Error",message:e,reason:t,status:i,consent:"",apiVersion:n,cmpId:g.a}),M=e=>e.map(e=>{switch(e){case"cmpuishown":return 121;case"tcloaded":return 126;case"useractioncomplete":return 125;default:return 120}}).getOrValue(120),F=new b.a("IAB TCF v2");function U(e,t,i,n,s){p.a.tryCatch(()=>e.call(null,t,i,n,s)).fold(e=>F.error("Calling __tcfapi function threw an exception",e),()=>F.debug("Successfully called __tcfapi function"))}const B=e=>Object(w.hasOwnProperty)(e,"cmpLoaded")&&Object(w.isBoolean)(e.cmpLoaded),W=e=>Object(w.hasOwnProperty)(e,"gdprApplies")&&(Object(w.isUndefined)(e.gdprApplies)||Object(w.isBoolean)(e.gdprApplies)),H=e=>Object(w.hasOwnProperty)(e,"cmpStatus")&&Object(w.isString)(e.cmpStatus)&&Object(o.includes)(["error","loaded","stub"],e.cmpStatus.toLowerCase());var z=e=>g.b.fromNullable(e).match({none:()=>Object(p.c)("Expected pingReturn to be an object but got null or undefined"),some:e=>Object(p.d)(e)}).filterOrElse(w.isObject,e=>"Expected pingReturn to be an object but got "+typeof e).filterOrElse(B,e=>"Expected pingReturn to have a valid cmpLoaded but got "+e.cmpLoaded).filterOrElse(W,e=>"Expected pingReturn to have a valid gpdrApplies but got "+e.gdprApplies).filterOrElse(H,()=>"Expected pingReturn to have a valid cmpStatus but got "+e.cmpStatus);const G=e=>Object(w.hasOwnProperty)(e,"gdprApplies")&&(Object(w.isUndefined)(e.gdprApplies)||Object(w.isBoolean)(e.gdprApplies)),q=e=>Object(w.hasOwnProperty)(e,"tcString")&&Object(w.isString)(e.tcString);var $=e=>g.b.fromNullable(e).match({none:()=>Object(p.c)("Expected tcData to be an object but got null or undefined"),some:e=>Object(p.d)(e)}).filterOrElse(w.isObject,e=>"Expected tcData to be an object but got "+typeof e).filterOrElse(G,e=>"Expected tcData to contain gdprApplies but got "+e.gdprApplies).flatMap(e=>e.gdprApplies?Object(p.d)(e).filterOrElse(q,e=>"Expected tcData to contain a valid tcString but got "+e.tcString):Object(p.d)(e));var K=i(33);const Y=(e,t)=>new Promise(i=>{var n;(n=e,n()?Object(p.d)(n()):Object(p.c)("Couldn't find tcfApi in given context")).fold(e=>i(_(e,220,22,g.a)),n=>(e=>Object(w.isFunction)(e)?Object(p.d)(e):Object(p.c)("Expected __tcfapi to be a valid function but got "+typeof e))(e()).fold(e=>i(_(e,240,21)),n=>{const s=Object(K.d)(()=>i(R()),t+10);U(e(),"ping",2,n=>{z(n).fold(n=>{s.clear(),t-10<=0?i(_(n,240,21)):Object(K.d)(()=>{i(Y(e,t-50))},50)},n=>{s.clear(),"stub"===n.cmpStatus?X(e,i,t):Q(e,i,t)})})}))}),X=(e,t,i,n)=>{const s=Object(K.d)(()=>t(R(n)),i);U(e(),"addEventListener",2,n=>$(n).flatMap(n=>(Object(K.d)(()=>{U(e(),"removeEventListener",2,w.noop,n.listenerId),t(R())},i),Object(p.d)(n))).fold(e=>{s.clear(),t(_(e,240,21))},e=>{switch(s.clear(),e.gdprApplies){case!0:return t((i=e.tcString,n=e.cmpId,r=e.eventStatus,{type:"AddEventListener",consent:i,reason:M(g.b.fromNullable(r)),status:12,apiVersion:Object(g.c)(2),cmpId:Object(g.c)(n)}));case!1:return t((e=>({type:"AddEventListenerDoesNotApply",reason:0,status:0,consent:"",apiVersion:Object(g.c)(2),cmpId:Object(g.c)(e)}))(e.cmpId));default:return t({type:"AddEventListenerUnknown",reason:250,status:25,consent:"",apiVersion:Object(g.c)(2),cmpId:g.a})}var i,n,r}))},Q=(e,t,i)=>U(e(),"getTCData",2,n=>$(n).fold(e=>t(_(e,240,21)),n=>{switch(n.gdprApplies){case!0:return t((s=n.tcString,r=n.cmpId,o=n.eventStatus,{type:"GetTCData",consent:s,reason:M(g.b.fromNullable(o)),status:12,apiVersion:Object(g.c)(2),cmpId:Object(g.c)(r)}));case!1:return t((e=>({type:"GetTCDataDoesNotApply",reason:0,status:0,consent:"",apiVersion:Object(g.c)(2),cmpId:Object(g.c)(e)}))(n.cmpId));default:return X(e,t,i,n.tcString)}var s,r,o})),J=(e,t)=>p.a.tryCatch(()=>e(t)).fold(e=>Object(p.c)("Error while trying to evaluate the predicate."),i=>i?Object(p.d)(t):Object(L.isChildWindow)(t)?J(e,t.parent):Object(p.c)("Could not find any window matching the predicate.")),Z=e=>Object(w.isObject)(e)&&Object(w.hasOwnProperty)(e,"__tcfapiReturn")&&Object(w.isObject)(e.__tcfapiReturn)&&Object(w.hasOwnProperty)(e.__tcfapiReturn,"returnValue")&&Object(w.hasOwnProperty)(e.__tcfapiReturn,"success")&&Object(w.hasOwnProperty)(e.__tcfapiReturn,"callId"),ee=(e,t,i)=>g.b.fromNullable(i).filter(t=>t.source===e).map(({data:e})=>e).filter(Z).map(({__tcfapiReturn:e})=>e).filter(({callId:e})=>e===t),te=(e,t,i,n)=>s=>ee(t,i,s).forEach(({success:s,returnValue:r})=>{n(s?r:void 0,s),Object(c.removeEventListener)("message",e,te(e,t,i,n))}),ie=(e,t,i,n)=>s=>ee(t,i,s).forEach(({success:s,returnValue:r})=>{(e=>Object(w.isUndefined)(e)||e)(s)?n(r):n(void 0),Object(c.removeEventListener)("message",e,ie(e,t,i,n))}),ne=(e,t,i,n)=>s=>ee(t,i,s).forEach(({success:s,returnValue:r})=>{n(s?r:void 0,s),Object(c.removeEventListener)("message",e,ne(e,t,i,n))}),se=(e,t,i,n)=>s=>ee(t,i,s).forEach(({success:s})=>{n(s),Object(c.removeEventListener)("message",e,se(e,t,i,n))});function re(e){return Object(w.isObject)(e)&&Object(w.hasOwnProperty)(e,"version")&&Object(w.hasOwnProperty)(e,"uspString")&&Object(w.isString)(e.uspString)}var oe=i(74);const ae=oe.d,de=({success:e,returnValue:t})=>({success:e,usPrivacyString:re(t)?g.b.of(t.uspString):Object(w.isString)(t)?g.b.of(t):g.a}),ce=e=>g.b.fromNullable(e.frames.__uspapiLocator).nonEmpty(),le=(e,t)=>p.a.tryCatch(()=>e(t)).fold(e=>Object(p.c)("Error while trying to evaluate the predicate."),i=>i?Object(p.d)(t):Object(L.isChildWindow)(t)?le(e,t.parent):Object(p.c)("Could not find any window matching the predicate.")),he=e=>Object(w.isObject)(e)&&Object(w.isObject)(e.__uspapiReturn)&&e.__uspapiReturn.hasOwnProperty("returnValue")&&e.__uspapiReturn.hasOwnProperty("success")&&e.__uspapiReturn.hasOwnProperty("callId"),ue={uspApi:{getUsPrivacyData:(e,t)=>new Promise(i=>{const n=Object(K.d)(()=>i({_tag:"timeout"}),t,K.a.Standard);g.b.fromNullable(e).filter(w.isFunction).match({none:()=>(n.clear(),i({_tag:"not-found"})),some:e=>e("getUSPData",1,(e,t)=>{n.clear(),t&&re(e)?i({_tag:"successful",usPrivacyString:e.uspString}):i({_tag:"unsuccessful"})})})}),matcher:({onLocatorNotFound:e,onUnsuccessful:t,onSuccessful:i,onTimeout:n})=>s=>{switch(s._tag){case"not-found":return e();case"timeout":return n();case"unsuccessful":return t();case"successful":return i(s.usPrivacyString);default:Object(w.exhaustive)(s)}}},amp:{getUsPrivacyData:ae},postMessageApi:{getUsPrivacyData:(e,t,i)=>p.a.tryCatch(()=>new Promise(n=>{le(ce,e).fold(e=>n({_tag:"not-found"}),s=>{const r=Object(v.rand)(10),o=({data:t,source:i})=>{i===s&&g.b.of(t).filter(he).map(({__uspapiReturn:e})=>e).filter(({callId:e})=>e===r).map(de).forEach(({success:t,usPrivacyString:i})=>{Object(c.removeEventListener)("message",e,o),t?i.match({some:e=>n({_tag:"successful",usPrivacyString:e}),none:()=>n({_tag:"malformed-response"})}):n({_tag:"unsuccessful"})})};Object(K.d)(()=>{p.a.tryCatch(()=>{Object(c.removeEventListener)("message",e,o),n({_tag:"timeout"})}).tapLeft(e=>i.forEach(t=>t.error("ccpa-error 1 "+e,1)))},t,K.a.Standard),Object(c.addEventListener)("message",e,o),s.postMessage({__uspapiCall:{command:"getUSPData",parameter:void 0,version:1,callId:r}},"*")})})).fold(e=>(i.forEach(t=>t.error("ccpa-error 2 "+e,1)),Promise.resolve({_tag:"unsuccessful"})),e=>e),matcher:({onLocatorNotFound:e,onTimeout:t,onUnsuccessful:i,onMalformedResponse:n,onSuccessful:s})=>r=>{switch(r._tag){case"not-found":return e();case"timeout":return t();case"unsuccessful":return i();case"malformed-response":return n();case"successful":return s(r.usPrivacyString);default:Object(w.exhaustive)(r)}}}};var pe=i(31);const ge=Object(pe.a)((e,t)=>{if(Object(w.hasOwnProperty)(t,"placementMetadata")){const i=t.placementMetadata;if(Object(w.isObject)(i)&&Object(w.isObject)(i[e])){const{adCallTrackingUrl:t,auctionId:n}=i[e];return Object(g.c)({adCallTrackingUrl:g.b.fromNullable(t).filter(w.isString),auctionId:g.b.fromNullable(n).filter(l.a)})}}return g.a}),me=e=>{if(Object(w.hasOwnProperty)(e,"wigo")){const t=e.wigo;if(Object(w.isObject)(t)&&Object(w.hasOwnProperty)(t,"reportEvent")&&Object(w.hasOwnProperty)(t,"reportName")){const{reportEvent:e,reportName:i}=t;if(Object(w.isString)(e)&&Object(w.isString)(i))return Object(g.c)({reportEvent:e,reportName:i})}}return g.a};var fe=i(34),be=i(22);const ve=e=>Object(w.isArray)(e)&&e.every(e=>Object(w.isString)(e)&&Object(w.isNumber)(parseInt(e,10))),Ae=e=>p.a.tryCatch(()=>e.localStorage.getItem("_pdfps")).toOption().flatMap(e=>p.a.tryCatch(()=>JSON.parse(e)).toOption()).filter(ve),ye=(e,t,i,n,s)=>((e,t)=>g.b.fromNullable(t.teadsPermutive).existsIf(t=>t[e]))(e,t)?Object(m.b)(n?Ae(t.top).orElse(()=>Ae(t)):Ae(t),g.d.fold(()=>(i.info(`permutive ${s} N/A`),g.a),e=>(i.info(`permutive ${s} ${e.length}`),Object(g.c)(e)))):g.a;var we=i(62);let Ee=g.a;const Oe=new b.a("helper.ViewerInfo"),Ce=e=>e&&e.hasOwnProperty("teadsViewerInfo"),Ie=()=>{const e=Object(L.findTopWindow)(document.body);p.a.tryCatch(()=>e.teads_analytics.getViewerInfo()).fold(()=>{var t;(t=e,Object(we.a)("_tfpvi",t).toOption().filter(v.isNotEmpty).map(e=>({teadsViewerInfo:{tfpvi:e,tcfv2:null,gdpr:null,ccpa:null,sharedIds:null}}))).match({some:e=>Ee=Object(g.c)(e),none:()=>Oe.debug("getViewerInfo cookie not accessible")}),new Promise((e,t)=>{const i=t=>p.a.tryCatch(()=>JSON.parse(t.data)).toOption().filter(Ce).match({some:t=>{e(t),window.removeEventListener("message",i)},none:()=>Oe.debug("not a valid ViewerInfo message",t)});window.addEventListener("message",i),p.a.tryCatch(()=>window.top.postMessage("teads-get-viewer-info","*")).tapLeft(e=>{window.removeEventListener("message",i),t(e)})}).then(e=>{Ee=Object(g.c)(e)})},e=>Ee=Object(g.c)(e))};var Se=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((n=n.apply(e,t||[])).next())}))};const Te=e=>e.match({some:e=>({us_privacy:e}),none:()=>({})}),ke=e=>{var t,i;return g.b.fromPredicate(null===(i=null===(t=null==e?void 0:e.settings)||void 0===t?void 0:t.values)||void 0===i?void 0:i.placementId,w.isNumber)};class Pe{constructor(e,t,i,n,s,r,o,a){this.placementAd=e,this.pageId=t,this.initialAuctionId=i,this.initialViewerId=n,this.sumologicLogger=r,this.done=a,this.logger=new b.a("helper.RASRequest"),this.timeoutFired=!1,this.requestIsSent=!1,this.rasRequestIsInitialized=!1,this.sendAfterInit=!1,this.gdprIabObject=g.a,this.uspString=g.a,this.fraudReason=g.b.empty(),this.adCallTrackingUrl=g.b.empty(),this.rasAuctionId=g.a,this.viewerId=g.a,this.mrgReason=g.a,D(e.ad).filter(e=>"debugFormat"!==e).match({some:()=>this.onHeaderBidding(),none:()=>this.onNonHeaderBidding(o,s,e.placement.pid)})}initRequest(e,t,i){if(this.rasRequestIsInitialized)this.logger.warn("Could not initialize RASRequest instance as it is already initialized.");else{if(!this.placementAd.ad&&C.b.isRichAdServerRequestEnabled){this.page=Object.assign(Object.assign({},t),{gdpr_iab:Object(T.b)(t.gdpr_iab)});const n=d.getClientSideDeviceProperties(),s=Object.assign(Object.assign(Object.assign(Object.assign({},this.initialAuctionId.map(e=>({auctid:e})).getOrValue({})),i?{hdlsb:""}:{}),{formatVersion:encodeURIComponent("1160"),env:d.getEnv()}),n.map(encodeURIComponent).map(e=>({clientSideDeviceProperties:e})).getOrValue({}));d.getNetworkBandwidthInMbps().forEach(e=>s.netBw=e),Object(V.d)().forEach(e=>s.ttfb=e),this.rasUrl=Object(y.c)(e,s),this.request=x.a(),this.request.open("POST",this.rasUrl,!0),this.request.withCredentials=!0,this.request.timeout=C.b.richAdServerRequestTimeout,this.request.setRequestHeader&&this.request.setRequestHeader("Accept","application/json; charset=UTF-8"),this.request.onload=()=>{this.onload()},this.request.onerror=(e={})=>{this.onerror(e)},this.request.ontimeout=()=>this.ontimeout(),this.timeoutLatencyRAS=setTimeout(()=>this.ontimeout(),C.b.richAdServerRequestTimeout+10)}this.rasRequestIsInitialized=!0}}send(){if(!this.rasRequestIsInitialized)return this.sendAfterInit=!0,void this.logger.debug("Could not send ad request as RASRequest instance is not initialized yet.");const e=()=>{if(this.placementAd.ad)this.next();else if(C.b.isRichAdServerRequestEnabled)this.requestIsSent||this.request.send(JSON.stringify(this.page)),this.requestIsSent=!0;else{let e;o.forEach(window._tta[this.pageId],t=>{ke(t).match({some:e=>{this.placementAd.placement.pid===e&&(this.placementAd.ad=t)},none:()=>{this.logger.warn(`Trying to process _tta object but could not find the related _ttp object (PID: ${e})`,this.placementAd.placement,t)}})}),this.next()}};this.getAdPromiseFromWigo().match({some:t=>t.then(e=>{this.logger.warn("ad has been successfully loaded from a WIGO report",e),this.placementAd.ad=e,N.b.isCeltraParameterSet(Object(y.i)())&&(this.placementAd.ad.portfolio_item_id=36),this.placementAd.placement.wigo.enableWigo("enableFromReport"),this.next()}).catch(t=>{this.logger.error("ad Promise from WIGO failed",t),e()}),none:e})}onHeaderBidding(){this.logger.debug("Header Bidding detected: did not try to retrieve CCPA US Privacy string and GDPR consent string as it's been done in the Prebid adapter."),this.rasRequestIsInitialized=!0,this.send()}onNonHeaderBidding(e,t,i){const n=this.fetchUSPrivacyString(50),s=this.fetchGdprConsent(),{userAgentData:r}=navigator,o=void 0===r?Promise.resolve(null):function(e){return Se(this,void 0,void 0,(function*(){return e.getHighEntropyValues(["architecture","bitness","model","platformVersion","fullVersionList"]).catch(t=>Object.assign(Object.assign({},e),{source:1})).then(e=>{var t;const{architecture:i,bitness:n,brands:s,fullVersionList:r,mobile:o,model:a,platform:d,platformVersion:c}=e;return{architecture:null!=i?i:null,bitness:null!=n?n:null,browsers:(null!==(t=null!=r?r:s)&&void 0!==t?t:[]).map(({brand:e,version:t})=>({brand:e,version:t.split(".")})),mobile:o?1:0,model:null!=a?a:null,platform:d&&c?{brand:d,version:c.split(".")}:null,source:"source"in e?e.source:2}})}))}(r),a=this.getPermutiveSegments(i);Promise.all([s,n,o]).then(([i,n,s])=>{this.makeAdRequest(e,t)(i,n,s,a,Ee)})}getPermutiveSegments(e){const t=this.sumologicLogger;return ye(e,window,t,Object(L.isChildWindow)(window)&&!Object(L.isInCrossDomainIframe)(window.document.body),(e=>Object(m.b)(Object(y.f)(e),g.d.flatMap(e=>g.b.fromNullable(e.windowReferrerUrl)),g.d.map(y.p),g.d.map(e=>e.hostname),g.d.getOrValue("N/A")))(t))}fetchUSPrivacyString(e){return p.a.tryCatch(()=>{const t=this.sumologicLogger,i=ue.postMessageApi.matcher({onLocatorNotFound:()=>(this.logger.debug("No parent window with a child iframe named __uspapiLocator was found"),g.a),onTimeout:()=>(this.logger.debug("Timeout reached when trying to retrieve US Privacy string via iframes"),g.a),onUnsuccessful:()=>(this.logger.debug("Could not successfully retrieve US Privacy string via iframes"),g.a),onMalformedResponse:()=>(this.logger.debug("Got a malformed response for US Privacy string via iframes"),g.a),onSuccessful:e=>(this.logger.debug("Got a US Privacy string via iframes: "+e),Object(g.c)(e))}),n=ue.uspApi.matcher({onTimeout:()=>(this.logger.debug("Timeout reached when trying to retrieve US Privacy string with __uspapi function"),g.a),onLocatorNotFound:()=>(this.logger.debug("__uspapi value provided is not a function, fallback to iframe mechanism",window.__uspapi),g.a),onUnsuccessful:()=>(this.logger.warn("Calling __uspapi with getUSPData command was unsuccessful"),g.a),onSuccessful:e=>(this.logger.debug("Got a US Privacy string by calling __upsapi: "+e),Object(g.c)(e))}),s=()=>ue.postMessageApi.getUsPrivacyData(window,e,Object(g.c)(t)).then(i),r=()=>ue.amp.getUsPrivacyData(g.b.fromNullable(window.context)).match({some:e=>(this.logger.debug("Got a US Privacy string using AMP context: "+e),Promise.resolve(Object(g.c)(e))),none:()=>(this.logger.warn("Could not retrieve US Privacy string using AMP context",window.context),s())}),o=Object(L.isInCrossDomainIframe)(document.body)||Object(L.isChildWindow)(window);return d.isAmp()?r():o?s():ue.uspApi.getUsPrivacyData(window.__uspapi,e).then(n)}).fold(e=>(this.sumologicLogger.error("ccpa-error 0 "+e,1),Promise.resolve(g.a)),e=>e)}fetchGdprConsent(){if(d.isAmp())return Promise.resolve(Object(oe.c)());const e=Object(L.isInCrossDomainIframe)(document.body)||Object(L.isChildWindow)(window);return(()=>{const t=({consent:e,status:t,reason:i,apiVersion:n,cmpId:s})=>({status:t,consent:e,reason:i,apiVersion:n,cmpId:s});return J(e?e=>g.b.fromNullable(e.frames.__tcfapiLocator).nonEmpty():e=>g.b.fromNullable(e.__tcfapi).nonEmpty(),window).fold(e=>new Promise(t=>t(_(e,220,22,g.a))).then(t),i=>{if(e){const e=(n=i,s=window,(e,t,i,r)=>{const o=Object(v.rand)(10),a={__tcfapiCall:{command:e,parameter:r,version:t,callId:o}};let d;switch(e){case"removeEventListener":d=se(s,n,o,i);break;case"ping":d=ie(s,n,o,i);break;case"getTCData":d=te(s,n,o,i);break;case"addEventListener":d=ne(s,n,o,i)}Object(c.addEventListener)("message",s,d),n.postMessage(a,"*")});return Y(()=>e,250).then(t)}return Y(()=>window.__tcfapi,250).then(t);var n,s})})().then(e=>(j.a.updateTeadsGDPRPayload(e),e))}makeAdRequest(e,t){return(i,n,s,r,o)=>{this.gdprIabObject=g.b.fromNullable(i),this.uspString=n;const a=Object.assign(Object.assign({id:this.pageId,placements:[this.placementAd.report],gdpr_iab:i},Te(n)),{segments:{permutive:r.getOrNull()},first_party_data:{firstPartyCookieTeadsId:o.map(e=>e.teadsViewerInfo.tfpvi).getOrNull(),sharedIds:o.map(e=>e.teadsViewerInfo.sharedIds).getOrNull()},ua_ch:s});this.initRequest(e,a,t),this.sendAfterInit&&!this.requestIsSent&&this.send()}}getAdPromiseFromWigo(){return g.b.fromNullable(N.b.reportPromise).map(e=>e.then(e=>this.getAdFromWigoReport(e).match({some:e=>Promise.resolve(e),none:()=>Promise.reject("ad not available in the report")})))}getAdFromWigoReport(e){return g.b.fromNullable(e.steps).map(e=>o.filter(e,e=>0===e.step&&1===e.substep)).filter(o.isNotEmpty).map(e=>e.pop()).flatMap(e=>p.a.tryCatch(()=>Object(w.isString)(e.info.store)?JSON.parse(e.info.store):e.info.store).toOption()).flatMap(e=>g.b.fromNullable(e.tta)).map(e=>(e[this.pageId]&&Object(w.isArray)(e[this.pageId])&&(e=e[this.pageId].shift()),e.handled=!1,e))}next(){this.timeoutLatencyRAS&&clearTimeout(this.timeoutLatencyRAS);const e={adCallTrackingUrl:this.adCallTrackingUrl,auctionId:this.rasAuctionId.orElse(()=>this.initialAuctionId),viewerId:this.viewerId.orElse(()=>this.initialViewerId),response:Object(m.b)(this.fraudReason,g.d.fold(()=>p.a.of(this.placementAd),p.c))};this.done(e,this.gdprIabObject,this.uspString,this.mrgReason)}ontimeout(){this.timeoutFired||(this.timeoutFired=!0,this.logger.warn("RAS request: timeout"),this.placementAd.placement&&this.placementAd.report.validity.status&&Object(fe.j)(be.a.AdNotAvailableNetworkError)({placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger,queryParameters:{env:d.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.rasAuctionId.getOrValue(Object(l.b)("")),vid:this.viewerId.getOrValue(Object(h.b)("")),slot:this.placementAd.placement.slotType}}),this.mrgReason=Object(g.c)("18"),this.next())}onload(){this.logger.info("Successful request",this.rasUrl);const e={placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger},t={env:d.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.rasAuctionId.getOrValue(Object(l.b)("")),vid:this.viewerId.getOrValue(Object(h.b)("")),slot:this.placementAd.placement.slotType};let i;try{i=k.c(d.getIEVersion(),"9")?this.request.responseText:this.request.response,Object(w.isString)(i)&&(i=JSON.parse(i)),this.logger.info("RAS response",i),Array.isArray(i.ads)||(this.sumologicLogger.error("ras-request-ads-not-array"),this.placementAd.placement&&this.placementAd.report.validity.status&&Object(fe.c)(Object.assign(Object.assign({},e),{queryParameters:t})),i.ads=[],this.mrgReason=Object(g.c)("18"),this.logger.debug("Ads property from ad response is not an array",i)),i.ads.length>1&&(this.logger.warn("Received more than one ad, WTF?"),i.ads=[i.ads[0]]),!0===i.wigoEnabled&&this.placementAd.placement.wigo.enableWigo(),this.placementAd.placement.wigo.settings=me(i);ge(this.placementAd.placement.pid,i).forEach(({auctionId:e,adCallTrackingUrl:t})=>{this.logger.debug(`PID ${this.placementAd.placement.pid} has auction id `,e),this.rasAuctionId=e,this.adCallTrackingUrl=t}),n=i,Object(w.hasOwnProperty)(n,"viewerId")&&Object(h.a)(n.viewerId)&&(this.logger.debug(`Setting viewerId for PID ${this.placementAd.placement.pid} to `,i.viewerId),this.viewerId=g.b.of(i.viewerId)),Object(o.isEmpty)(i.ads)?this.placementAd.placement&&this.placementAd.report.validity.status?Object(m.b)(g.b.fromNullable(i.noAdReason),g.d.fold(()=>{this.placementAd.placement.wigo.valid(1,2,"noAd-notFilled","error"),this.logger.debug("Ads list is empty and noAdReason is missing in ad response",i)},Object(m.a)(be.l,p.f.fold(e=>this.logger.warn("Error while parsing noAdReason from ad response",e),e=>{this.fraudReason=g.b.of(e),this.logger.debug("Ads list is empty and valid noAdReason was provided in ad response",i)})))):this.logger.debug("Ads list is empty and placement validity status is falsy",i.ads,this.placementAd.report.validity):ke(i.ads[0]).match({some:e=>{this.placementAd.placement.pid===e?(this.placementAd.ad?this.logger.debug(`The ad for the PID ${e} has already been loaded`,i.ads[0]):this.placementAd.ad=i.ads[0],this.logger.debug(`Found an ad for placement ${e} in response.ads`,i.ads)):(this.mrgReason=Object(g.c)("18"),this.logger.debug(`Could not find an ad for placement ${e} in response.ads`,i.ads))},none:()=>{this.mrgReason=Object(g.c)("18"),this.logger.warn("Placement from ad response does not exist in the tag",this.placementAd.placement,i.ads[0])}}),window._tta&&window._tta[this.pageId]&&o.forEach(window._tta[this.pageId],e=>{ke(e).match({some:t=>{this.placementAd.placement.pid===t&&(this.placementAd.ad?this.placementAd.ad=function(e,t){let i={settings:{}};return!(!t.type||!t.content)?(i.type=t.type,i.content=t.content):(i.type=e.type,i.content=e.content),i.settings=e.settings,i.insertion_id=e.insertion_id,i.connection_id=e.connection_id,i}(this.placementAd.ad,e):this.placementAd.ad=e)},none:()=>{this.logger.warn(`Trying to process _tta object but could not find the related _ttp object (PID: ${this.placementAd.placement.pid})`,this.placementAd.placement,e)}})})}catch(n){return this.sumologicLogger.error(`ras-request-invalid-response ${this.pageId} ${Object(P.a)(n)}`),this.placementAd.placement&&this.placementAd.report.validity.status&&Object(fe.c)(Object.assign(Object.assign({},e),{queryParameters:t})),this.logger.error("Invalid response",n,i),void(this.mrgReason=Object(g.c)("18"))}var n;this.next()}onerror(e){clearTimeout(this.timeoutLatencyRAS),this.sumologicLogger.error(`ras-request-error ${this.pageId} ${Object(P.a)(e)}`),this.logger.error("Request error - Status:",e.target.status);const t=0===(this.request.status||0)?be.a.AdNotAvailableNetworkError:be.a.AdNotAvailableServerError;this.placementAd.placement&&this.placementAd.report.validity.status&&Object(fe.j)(t)({placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger,queryParameters:{env:d.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.rasAuctionId.getOrValue(Object(l.b)("")),vid:this.viewerId.getOrValue(Object(h.b)("")),slot:this.placementAd.placement.slotType}}),this.mrgReason=Object(g.c)("18"),this.next()}}var je=i(27);const Le=new b.a("helper.UserSync");let xe;function Ve(e,t,i,n,s,r){let o;const a=i.match({some:e=>({env:"js-web",hb_provider:e}),none:()=>({env:d.getEnv()})});if(!xe){try{o=Object(L.findTopWindow)(window.document.body)}catch(e){Le.warn("Cannot get top window"),o=window}(i=>{const o={pid:e,gdprIab:JSON.stringify(Object(T.b)(t)),fromFormat:!0},d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),a),s.match({some:e=>({auctid:e}),none:()=>({})})),r.match({some:e=>({vid:e}),none:()=>({})})),Te(n));xe=Object(L.createIframe)("user-sync"),xe.id="teadsusersync",xe.src=Object(y.c)(C.b.userSyncUrl,d)+"&"+Object(je.a)(),xe.style.setProperty("display","none"),i.document.body.appendChild(xe)})(o)}return xe}var Ne=i(143),De=i(97);const Re=(e,t,i,n)=>{i?n&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t):n&&e.parentNode?e.parentNode.insertBefore(t,e):e.parentNode&&e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.appendChild(t)},_e=(e,t,i,n)=>{const s=((e,t,i)=>{const n=t.document.createElement("div");return n.className="teads-adCall",n.style.setProperty("height","Opx","important"),Re(e,n,i.insertInside.isEnabled(),i.insertBefore.isEnabled()),n})(e,t,n);return i.setElementToFollow(s),Object(De.a)(()=>i.followElement(),n.scrollSelector.getSlot(),t.context),new Promise(r=>{let o=Object(c.getClientRectRelativeToDocument)(Object(c.getBoundingClientRect)(s),{x:Object(c.getScrollLeft)(t),y:Object(c.getScrollTop)(t)});if(!Object(L.isDisplayNoneOverParents)(g.b.fromNullable(s)))if(Object(L.isInView)({element:s,elementAncestors:Object(L.findParentElements)(s),elementClientRect:Object(c.getClientRectFromClientRectRelativeToDocument)(o,{x:Object(c.getScrollLeft)(t),y:Object(c.getScrollTop)(t)}),mainWindow:Object(L.findTopWindow)(e),thresholdCoefficient:1,elementHeight:1})&&!Object(L.isRectZeroFilled)(o))r();else{const a=Object(De.a)(()=>{const n=Object(c.getBoundingClientRect)(s);o=Object(c.isEmptyBoundingClientRect)(n)?o:Object(c.getClientRectRelativeToDocument)(n,{x:Object(c.getScrollLeft)(t),y:Object(c.getScrollTop)(t)}),Object(L.isInView)({element:s,elementAncestors:Object(L.findParentElements)(s),elementClientRect:Object(c.getClientRectFromClientRectRelativeToDocument)(o,{x:Object(c.getScrollLeft)(t),y:Object(c.getScrollTop)(t)}),mainWindow:Object(L.findTopWindow)(e),thresholdCoefficient:1,elementHeight:1})&&!Object(L.isRectZeroFilled)(o)&&(Object(De.b)(a),i.isActivated()||(e=>{g.b.fromNullable(e.parentElement).forEach(t=>t.removeChild(e))})(s),r())},n.scrollSelector.getSlot(),t.context)}})};var Me=i(138);var Fe=i(185);class Ue extends class{constructor(e,t,i,n,s){this.pageId=e,this.key=t,this.placementConfig=i,this.placementSetting=n,this.wigo=s,this.slotType="native",this.logger=new b.a("placement"),this.sliderEnabled=!1,this.pid=i.pid.get(),this.win=i.parentWindow.getWindow(),this.initContainer(),g.b.fromNullable(window._ttp).forEach(t=>{var i,n,s,r,o,a,d,c;this.wigo.valid(0,1,{ttp:null!==(n=null===(i=t[e])||void 0===i?void 0:i[0])&&void 0!==n?n:null,tta:null!==(o=null===(r=null===(s=window._tta)||void 0===s?void 0:s[e])||void 0===r?void 0:r[0])&&void 0!==o?o:null,tts:null!==(c=null===(d=null===(a=window._tts)||void 0===a?void 0:a[e])||void 0===d?void 0:d[0])&&void 0!==c?c:null},"modal")}),this.wigo.valid(1,0)}canEnableSlider(){var e,t;return!!this.placementConfig.formatName.isInRead()&&(null===(t=null===(e=this.placementSetting)||void 0===e?void 0:e.slider)||void 0===t?void 0:t.allowCorner())}enableSlider(){this.sliderEnabled=!0,this.electedSlot=new Me.a(this.placementConfig.parentWindow.getWindow().document.body),this.placementConfig.btf.set(!1),this.placementConfig.minimum.set(0),this.placementConfig.auto.set(!1),this.placementConfig.insertBefore.set(!1),this.placementConfig.insertInside.set(!0)}handleNoAd({markId:e,sumologicLogger:t,headerBiddingProvider:i,portfolioItemId:n,adCallTrackOpts:s,auctionId:r,viewerId:o}){if(this.placementConfig.fallback.trigger()){const{key:e,logger:s,wigo:a,slotType:d,pageId:c,pid:l}=this;Object(fe.p)({placementKey:e,sumologicLogger:t,wigo:a,logger:s,headerBiddingProvider:i,pageId:c,placementId:l,slotType:d,portfolioItemId:n,auctionId:r,viewerId:o}),this.logger.info(I.c.fallback.noAd),this.wigo.valid(1,2,I.c.fallback.noAd,"error")}else d.isAmp()&&oe.b();this.sliderEnabled||_e(this.electedSlot.getElement(),this.win,this.wigo,this.placementConfig).then(()=>{Object(fe.i)({placementKey:this.key,sumologicLogger:t,wigo:this.wigo,logger:this.logger,headerBiddingProvider:i,baseUrlWithQueryParameters:s})})}getParentContainer(){return this.parentContainer}getPlayerContainer(){return this.playerContainer}getInnerContainer(){return this.innerContainer}isSliderEnabled(){return this.sliderEnabled}initContainer(){this.parentContainer=this.win.document.createElement("div"),this.parentContainer.className="teads-"+this.placementConfig.formatName.get(),this.innerContainer=this.win.document.createElement("div"),this.innerContainer.style.setProperty("position","relative"),this.innerContainer.style.setProperty("margin-bottom","0","important"),this.parentContainer.appendChild(this.innerContainer),this.playerContainer=this.win.document.createElement("div"),this.playerContainer.className="teads-player",this.playerContainer.style.setProperty("display","block","important"),this.playerContainer.style.setProperty("margin-bottom","0","important"),this.playerContainer.id="teads"+Yt++,this.innerContainer.appendChild(this.playerContainer)}}{constructor(){super(...arguments),this.name="inread"}checkSlot(){return Object(Fe.d)(this,this.wigo).fold(({reason:e})=>({status:!1,reasons:[e]}),({slot:e})=>(this.electedSlot=e,{status:!0,reasons:[]}))}getElectedSlot(){return this.electedSlot}initDom(e){const t=e.getElement(),i=this.parentContainer;return"PR"!==t.nodeName&&"BR"!==t.nodeName||i.style.setProperty("margin","10px 0"),Re(t,this.parentContainer,this.placementConfig.insertInside.isEnabled(),this.placementConfig.insertBefore.isEnabled()),i}}var Be=i(19);class We extends Be.a{constructor(e=We.DEFAULT){super("Pid"),this.value=e,this.checkValue()}checkValue(){if(!Object(w.isNumber)(this.value)||this.value<=0)throw new u.a(u.a.OPTION_PID_INVALID)}get(){return this.value}}We.DEFAULT=null;class He extends Be.a{constructor(e=He.DEFAULT){super("AllowedRatio"),this.value=e,this.checkValue()}static isInternalHostname(e){return/(teads\.(tv|net|com))|(ebuzzing\.(com|github\.io)|(localhost)|(\.pantheonsite\.io))$/i.test(e)}static forceValueIfNeeded(e){const t=p.a.tryCatch(()=>top.location.hostname).getOrValue(location.hostname);return Object(d.isDesktop)()&&!He.isInternalHostname(t)?["LANDSCAPE"]:e}static filterInvalidValues(e){return o.filter(e,e=>e in He.AvailableRatio)}checkValue(){this.value=g.b.fromNullable(this.value).map(He.forceValueIfNeeded).filter(w.isArray).map(He.filterInvalidValues).filter(o.isNotEmpty).getOrValue(He.DEFAULT)}get(){return this.value}getRatioFilters(){return o.map(this.value,e=>He.AvailableRatio[e])}mediafileRatioIsValid(e,t){return o.isNotEmpty(o.filter(this.getRatioFilters(),i=>i(t(e))))}}He.AvailableRatio={LANDSCAPE:e=>e>1,SQUARE:e=>1===e,VERTICAL:e=>e<1,ALL:e=>!0},He.DEFAULT=["ALL"];var ze=i(215);class Ge extends Be.a{constructor(e=Ge.DEFAULT){super("Desktop"),this.value=e,this.checkValue()}checkValue(){Object(w.isBoolean)(this.value)||(this.value=Ge.DEFAULT)}isEnabled(){return this.value}}Ge.DEFAULT=!0;class qe extends Be.a{constructor(e=qe.DEFAULT){super("Mobile"),this.value=e,this.checkValue()}checkValue(){Object(w.isBoolean)(this.value)||(this.value=qe.DEFAULT)}isEnabled(){return this.value}}qe.DEFAULT=!0;class $e extends Be.a{constructor(e=$e.DEFAULT){super("Tablet"),this.value=e,this.checkValue()}checkValue(){Object(w.isBoolean)(this.value)||(this.value=$e.DEFAULT)}isEnabled(){return this.value}}$e.DEFAULT=!0;var Ke=i(144);class Ye extends Be.a{constructor(e=Ye.DEFAULT){super("Btf"),this.value=e,(Object(d.isAmp)()||Object(d.isIABSafeFrame)())&&(this.value=!1),this.checkValue()}checkValue(){Object(w.isBoolean)(this.value)||(this.value=Ye.DEFAULT)}set(e){this.value=e}isEnabled(){return this.value}}Ye.DEFAULT=!0;class Xe extends Be.a{constructor(e=Xe.DEFAULT){super("Css"),this.originalRules=e,this.checkValue(),this.originalRules&&(this.rules=Xe.transformStringToObject(this.originalRules))}static transformStringToObject(e){let t={};if(!e)return t;let i=e.split(";");return o.forEach(i,e=>{let[i,n]=e.split(":");i&&n&&(i=v.trim(i),n=v.trim(n),t[i]=n,"float"===i&&(t.cssFloat=n,t.styleFloat=n))}),t}checkValue(){Object(w.isString)(this.originalRules)||(this.originalRules=Xe.DEFAULT)}getOriginal(){return this.originalRules}applyRulesOn(e){this.applyCssRulesOn(e,this.rules)}applyCssRulesOn(e,t){let i,n=!1;for(let s in t)t.hasOwnProperty(s)&&(n=Xe.IMPORTANT_REGEX.test(t[s]),i=t[s].replace(Xe.IMPORTANT_REGEX,"").trim(),e.style.setProperty(s,i,n?"important":null))}}Xe.DEFAULT=null,Xe.IMPORTANT_REGEX=/!\s*important/i;class Qe extends Be.a{constructor(e){super("Filter"),this.placement=e,this.func=e&&e.slot?e.slot.filter:null,this.checkValue()}checkValue(){Object(w.isFunction)(this.func)||(this.func=Qe.DEFAULT)}trigger(e){var t=!0;if("function"==typeof this.func){try{t=this.func.call(this.placement,e)}catch(e){s.a.error("filter-threw-err "+Object(P.a)(e)),this.logger.error("the filter function threw an error:",e,this.func)}"boolean"!=typeof t&&(t=!0)}return t}}Qe.DEFAULT=null;class Je extends Be.a{constructor(e=Je.DEFAULT){super("InsertBefore"),this.value=e,this.checkValue()}checkValue(){Object(w.isBoolean)(this.value)||(this.value=Je.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}Je.DEFAULT=!1;class Ze extends Be.a{constructor(e=Ze.DEFAULT){super("InsertInside"),this.value=e,this.checkValue()}checkValue(){Object(d.isAmp)()?this.value=Ze.DEFAULT_AMP:Object(w.isBoolean)(this.value)||(this.value=Ze.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}Ze.DEFAULT=!1,Ze.DEFAULT_AMP=!0;class et extends Be.a{constructor(e=et.DEFAULT){super("Minimum"),this.value=e,(Object(d.isAmp)()||Object(d.isIABSafeFrame)())&&(this.value=1),this.checkValue()}checkValue(){Object(w.isNumber)(this.value)||(this.value=et.DEFAULT)}set(e){this.value=e}get(){return this.value}}et.DEFAULT=1;class tt extends Be.a{constructor(e=tt.DEFAULT){super("MinimumBelow"),this.value=e,this.checkValue()}checkValue(){Object(w.isNumber)(this.value)||(this.value=tt.DEFAULT)}get(){return this.value}}tt.DEFAULT=null;class it extends Be.a{constructor(e=it.DEFAULT){if(super("ParentWindow"),this.value=e,this.win=window,this.checkValue(),this.value)try{window.top.document&&(this.win=window.top)}catch(e){this.logger.warn("parentWindow option is enabled but parent window is not accessible",e)}}checkValue(){Object(w.isBoolean)(this.value)||(this.value=it.DEFAULT)}getWindow(){return this.win}getValue(){return this.value}}it.DEFAULT=!0;class nt extends Be.a{constructor(e=nt.DEFAULT){super("Fallback"),this.value=e,this.called=!1,this.checkValue()}checkValue(){Object(w.isFunction)(this.value)||(this.value=nt.DEFAULT)}trigger(e){if(!this.value||this.called)return!1;try{let t=this.value.call(e);if(this.called=!0,t===I.b)return this.value=null,!1}catch(e){d.isAmp()&&oe.a(),this.logger.error("the fallback threw an error:",e)}return!0}hasValue(){return!!this.value}}nt.DEFAULT=null;class st extends Be.a{constructor(e=st.DEFAULT){super("RpmFallback"),this.value=e,this.called=!1,this.checkValue()}checkValue(){Object(w.isFunction)(this.value)||(this.value=st.DEFAULT)}trigger(e){if(!this.value||this.called)return!1;try{this.value.call(e),this.called=!0}catch(e){this.logger.error("the rpmFallback threw an error:",e)}return!0}}st.DEFAULT=null;var rt=i(183),ot=i(184);class at extends Be.a{constructor(e=at.DEFAULT){super("MinimumTextLength"),this.value=e,this.checkValue()}checkValue(){Object(w.isNumber)(this.value)||(this.value=at.DEFAULT)}get(){return this.value}}at.DEFAULT=100;class dt extends Be.a{constructor(e=dt.DEFAULT){super("MinimumWidth"),this.value=e,this.checkValue()}checkValue(){Object(w.isNumber)(this.value)||(this.value=dt.DEFAULT)}get(){return this.value}}dt.DEFAULT=100;class ct extends Be.a{constructor(e=ct.DEFAULT){super("MaximumWidth"),this.value=e,this.checkValue()}checkValue(){Object(w.isNumber)(this.value)||(this.value=ct.DEFAULT)}get(){return this.value}}ct.DEFAULT=2e3;var lt=i(216);class ht extends lt.a{constructor(e,t){if(super("BelowSelector"),void 0===t)throw new u.a(u.a.OPTION_PARENTWINDOW_INVALID);this.win=t,e||(e=ht.DEFAULT),this.value=e,this.checkValue()}checkValue(){this.value===ht.DEFAULT||Object(w.isString)(this.value)||c.isHTMLElement(this.value)||c.isNodeList(this.value)||(this.value=ht.DEFAULT)}get(){return this.value}getFirstElement(){if(!this.hasCachedElement){var e,t=this.value;if("object"==typeof this.value){var i;for(var n in this.value)if(this.value.hasOwnProperty(n)&&(i=this.checkScreenSelector(n,this.win),t=this.value[n],i))break;i?this.logger.debug("Below Selector",i,"selected:",t):this.logger.warn("Below Selector by device not found: ",this.value)}Object(w.isString)(t)&&t.length>0?e=c.querySelectorAll(t,this.win)[0]:c.isHTMLElement(t)?e=t:c.isNodeList(t)&&(e=t[0]),this.cacheElement(e)}return this.firstElement}getFirstElementRect(){return this.firstElementRect||(this.firstElementRect=c.getBoundingClientRect(this.getFirstElement())),this.firstElementRect}getFirstNodeBelowIndex(e){if(!this.firstNodeBelowIndex&&0!==this.firstNodeBelowIndex){for(var t=!1,i=0;!t&&e[i];)e[i++].getElementRect().top>=this.getFirstElementRect().bottom&&(t=!0);this.firstNodeBelowIndex=i-1}return this.firstNodeBelowIndex}cacheElement(e){this.firstElement=e,this.hasCachedElement=!0}}ht.DEFAULT=null;class ut extends Be.a{constructor(e=ut.DEFAULT,t=null){super("Auto"),this.value=e,t&&null!==t.get()&&(this.value=!1),this.checkValue()}checkValue(){Object(w.isBoolean)(this.value)||(this.value=ut.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}ut.DEFAULT=!0;class pt extends Be.a{constructor(e=pt.DEFAULT,t=window){super("Avoid"),this.value=e,this.win=t,this.checkValue()}checkValue(){Object(w.containsKeys)(pt.VALUES,this.value)||(this.value=pt.DEFAULT)}get(){return this.value}getSlots(){if(!this.value)return;const e=[],t=this.value.selector;if("string"==typeof t&&t.length>0){const n=c.querySelectorAll(t,this.win);for(var i=0;i<n.length;i++)e.push(new Me.a(n[i],i))}else c.isHTMLElement(t)&&e.push(new Me.a(t));return e}getDistance(){return this.value.distance}}pt.VALUES={SELECTOR:"selector",DISTANCE:"distance"},pt.DEFAULT=null;class gt extends Be.a{constructor(e,t){var i;super("ScrollSelector");const n=null!==(i=t.FORCE_DEMO)&&void 0!==i&&i;this.win=n?window:t,this.value=void 0===e?gt.DEFAULT:e,this.checkValue()}checkValue(){Object(w.isString)(this.value)||c.isHTMLElement(this.value)||(this.value=gt.DEFAULT)}getSlot(){let e=this.win;const t=this.value;if("string"==typeof t&&t.length>0){const i=c.querySelectorAll(t,this.win);i&&1===i.length?e=i[0]:this.logger.warn("Parameter must be a string (CSS Selector) or a DOM Element")}else c.isHTMLElement(t)&&(e=t);return e}}gt.DEFAULT=null;class mt{constructor(e,t=g.a){this.raw=e,this.headerBiddingProvider=t,e.slot||(e.slot={}),this.pid=new We(e.pid),this.formatName=new Ke.a(e.format),this.btf=new Ye(e.slot.btf),this.css=new Xe(e.css),this.filter=new Qe(e),this.insertBefore=new Je(e.slot.insertBefore),this.insertInside=new Ze(e.slot.insertInside),this.minimum=new et(e.slot.minimum),this.minimumBelow=new tt(e.slot.minimumBelow),this.parentWindow=new it(e.parentWindow),this.fallback=new nt(e.fallback),this.rpmFallback=new st(e.rpmFallback),this.videoFilter=new rt.a(e.slot.videoFilter),this.imageFilter=new ot.a(e.slot.imageFilter),this.minimumTextLength=new at(e.slot.minimumTextLength),this.minimumWidth=new dt(e.slot.minimumWidth),this.maximumWidth=new ct(e.slot.maximumWidth),this.belowSelector=new ht(e.slot.belowSelector,this.parentWindow.getWindow()),this.selector=new ze.a(e.slot.selector,this.parentWindow.getWindow()),this.auto=new ut(e.slot.auto,this.selector),this.avoid=new pt(e.slot.avoid,this.parentWindow.getWindow()),this.scrollSelector=new gt(e.slot.scrollSelector,this.parentWindow.getWindow()),this.callbacks=e.callbacks,this.mobile=new qe(e.mobile),this.tablet=new $e(e.tablet),this.desktop=new Ge(e.desktop),this.allowedRatio=new He}isMobile(){return this.mobile.isEnabled()}isTablet(){return this.tablet.isEnabled()}isDesktop(){return this.desktop.isEnabled()}}class ft extends Be.a{constructor(e){super("Slider"),this.value=Object.assign(Object.assign({},ft.DEFAULT),e),this.checkValue()}checkValue(){Object(w.containsKeys)(ft.VALUES,this.value)||(this.value=ft.DEFAULT)}allowCorner(){return this.value.allow_corner_position}}ft.VALUES={allow_top_position:"top",allow_corner_position:"corner"},ft.DEFAULT={allow_top_position:!1,allow_corner_position:!1};class bt{constructor(e){this.rawConfig=e,e&&(this.slider=new ft(e.slider))}static getPlacementSetting(e){if(window._tts&&window._tts[e.get()])return window._tts[e.get()]}}var vt=i(25),At=i(52),yt=i(99);const wt=({pageId:e,placementId:t,pageIndex:i,auctionId:n,headerBiddingProvider:s,sumologicLogger:r})=>{const o=Object(L.findTopWindow)(document.body);return!Object(y.n)(o.location.hostname)&&!Object(y.j)(o.location.href)&&Et().match({none:()=>!1,some:o=>(vt.b.debug.track(Object(vt.a)(e,t,i))(be.a.Bts,{baseUrl:C.b.trackingUrl,referer:Object(fe.b)(r),queryParameters:{env:d.getEnv(),pageId:e.toString(),pid:t.toString(),hb_provider:s.getOrValue(""),auctid:n.getOrValue(Object(l.b)(""))},trackingUrl:g.a},g.b.of(o)),!1)})},Et=()=>{if(document.$cdc_asdjflasutopfhvcZLmcfl_)return Object(g.c)("se");if(window.__nightmare)return Object(g.c)("ni");if(window.callPhantom||window._phantom||window.phantom)return Object(g.c)("ph");try{null[0]}catch(e){if(e.stack.match("e[ualv]{5}te[panh@]{5}t[josm]{4}"))return Object(g.c)("ph")}return navigator.webdriver?Object(g.c)("wb"):navigator.userAgent.match("PhantomJS")?Object(g.c)("ph"):navigator.userAgent.match("Headless")?Object(g.c)("wb"):g.a},Ot=new b.a("TtpHandler");function Ct({ttpObject:e,pageInstance:t}){return p.a.tryCatch(()=>e.filter(It).match({some:e=>At.c(St(t),e),none:()=>Ot.warn("The provided ttp object is not valid",e)}))}function It(e){return Object(w.isObject)(e)}const St=Object(pe.a)((e,t,i)=>{const n=function(e){return Object(r.b)(Object(w.isString)(e)?parseInt(e,10):e)}(t);if(!function(e){return $t===e||0===$t||0===e}(n))throw s.a.error(`multi-page ${$t} ${n} ${Object(o.map)(i,e=>e.pid).join(";")}`),new u.a(u.a.MULTIPLE_PAGE_PROCESS);o.forEach(i,Tt(e,n)),$t=$t||n}),Tt=Object(pe.a)((e,t,i)=>{p.a.tryCatch(()=>new We(i.pid)).map(e=>e.get()).fold(e=>{Ot.warn("Invalid placement ID value provided",i.pid,i,e)},n=>{const r=s.a.copy({collectorUrl:"https://s8t.teads.tv/logs/format/http-source",placementId:Object(g.c)(n)}),o=Object(yt.getUuid)(),a=o.toOption().map(l.b),d=new N.b,c=wt({pageId:t,placementId:i.pid,pageIndex:0,auctionId:a,headerBiddingProvider:g.a,sumologicLogger:r});o.tapLeft(e=>{r.error("limitedCapabilities "+Object(P.a)(e)),Object(fe.s)({placementKey:Object(vt.a)(t,n,0),sumologicLogger:r,wigo:d,logger:Ot,headerBiddingProvider:g.a,viewerId:g.a,pageId:t,placementId:n,auctionId:a})}),e.placementAd=e.checkPlacement({rawPlacement:i,pageId:t,placementId:n,pageIndex:0,auctionId:a,wigo:d,sumologicLogger:r,headerBiddingProvider:g.a,adSettings:g.a}),e.placementAd&&(e.placementAd=e.checkSlot({placementAd:e.placementAd,wigo:d,auctionId:a,sumologicLogger:r,headerBiddingInfo:g.a,placementIsFirst:!0,adSettings:g.a}),e.placementAd&&e.callRAS({placementAd:e.placementAd,auctionId:a,viewerId:g.a,sumologicLogger:r,browserIsHeadless:c,onRASResponse:()=>{},tagManagerPackage:g.a}))})});var kt=i(16),Pt=i(180),jt=i(57),Lt=i(32),xt=i(181),Vt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};const Nt=new b.a("VastHandler"),Dt=e=>Object(w.isString)(e.type)&&Object(w.isString)(e.content);function Rt(e){var t=e.adSettings,{vast:i}=t,n=Vt(t,["vast"]),{placement:s,gdprIab:r,sumologicLogger:a,auctionId:d,viewerId:c,regularVastHandler:l=_t}=e;const{pageId:h,wigo:u,slotType:p}=s;return l(i,h,r,u,a,p).catch(([e,t])=>{throw function(e,{insertionId:t,connectionId:i,portfolioItemId:n},s,r,a,d){const c="VASTParser.parse error"===d.getMessage()?Object(P.b)(d)+g.b.fromNullable(d.error).map(e=>"|"+e.message).getOrValue(""):Object(P.b)(d);s.error("loading-vast "+c.substr(0,120));const{key:l,pageId:h,pid:u,slotType:p,wigo:m,placementConfig:{headerBiddingProvider:f}}=e,b=d.getId()||0,v={placementKey:l,sumologicLogger:s,wigo:m,logger:Nt,headerBiddingProvider:f,pageId:h,placementId:u,auctionId:r,viewerId:a,slotType:p,portfolioItemId:Object(Lt.a)(n),insertionId:Object(Lt.a)(t),connectionId:Object(Lt.a)(i)};b===kt.b.WRAPPER_TIMEOUT.id?Object(fe.g)(v):Object(fe.f)(Object.assign(Object.assign({},v),{code:Object(o.isMemberOf)(jt.b)(b)?b:jt.a.Undefined}));Nt.error("VAST loading",d)}(s,n,a,d,c,e),[e,t]})}function _t(e,t,i,n,s,r){return new Promise((t,s)=>{const r=new xt.a({assetsUrl:C.b.basePathUrl},Object(g.c)(i),g.b.fromNullable(n)),o=e=>{!function(e,t){Nt.info("Ad is ready"),t.valid(1,2)}(0,n),t(e)},a=(e,t)=>s([e,t]),d=e.getContent();e.isVastUrl()?r.load(d,o,a):e.isVastXml()&&r.parse(d,o,a)})}var Mt=i(35),Ft=i(47);var Ut=i(86);class Bt{constructor(e,t,i,n,s,r,o,a){this.name=e,this.pageId=t,this.placementId=i,this.placementKey=n,this.sumologicLogger=s,this.logger=r,this.wigo=o,this.auctionId=a}}class Wt extends Bt{constructor(e,t,i,n,s,r,o){super("classic",e,t,i,n,s,r,o)}trackSlotAvailable(e){Object(fe.q)({sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,placementKey:this.placementKey})(be.a.SlotAvailable,this.name,t=>Object(Ut.d)(this.placementKey)(t,Object(fe.a)({pageId:this.pageId,placementId:this.placementId,auctionId:this.auctionId,sumologicLogger:this.sumologicLogger},{slot:e},t)))}}class Ht extends Bt{constructor(e,t,i,n,s,r,o,a,d){super("header-bidding",e,t,i,n,s,r,o),this.creativeSize=a,this.hbSlotAvailableTrackUrl=d}trackSlotAvailable(e){const t=Object(y.a)(this.hbSlotAvailableTrackUrl,"slot",e),i=this.creativeSize.match({some:e=>{const i=Object(y.a)(t,"hb_w",encodeURIComponent(e.width));return Object(y.a)(i,"hb_h",encodeURIComponent(e.height))},none:()=>t}),n={baseUrl:i,referer:Object(fe.b)(this.sumologicLogger),queryParameters:{slot:e,hb_w:this.creativeSize.map(e=>e.width.toString()).getOrValue(""),hb_h:this.creativeSize.map(e=>e.height.toString()).getOrValue("")},trackingUrl:Object(g.c)(i)};Object(fe.q)({sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,placementKey:this.placementKey})(be.a.HbSlotAvailable,this.name,e=>Object(Ut.j)(this.placementKey)(e,n))}}var zt=i(60);const Gt=(e,t)=>{const i=((e,t)=>e.flatMap(T.a).match({some:({status:e,consent:t,reason:i,apiVersion:n,cmpId:s})=>({status:e,consent:t,reason:i.getOrValue(240),apiVersion:n,cmpId:s}),none:()=>({status:24,consent:"",reason:240,apiVersion:g.a,cmpId:g.a})}))(e);return j.a.updateTeadsGDPRPayload(i),i};class qt{constructor(){this.logger=new b.a("Page"),this.hasSlider=!1}static getPlayerSize(e,t){let i={width:0,height:0};if(e){if(t.insertInside.isEnabled())i.width=e.getWidth();else if(e.getElement().parentNode){const t=c.getSize(e.getElement().parentNode);i.width=t.width}i.height=i.width/a.a}else{const e=O.a.findOptimalCreativeSizeBasedOnWindowSurface(g.a,c.getWindowSize(t.parentWindow.getWindow()));i.height=e.height,i.width=e.width}return i.width=Math.round(i.width),i.height=Math.round(i.height),i}checkPlacement({rawPlacement:e,pageId:t,placementId:i,pageIndex:n,auctionId:s,wigo:r,sumologicLogger:a,headerBiddingProvider:c,adSettings:l}){!function(e,t,i,n,s,r){var a,d;const c=null===(d=null===(a=document.featurePolicy)||void 0===a?void 0:a.allowedFeatures)||void 0===d?void 0:d.call(a);if(!c||!o.includes(c,"browsing-topics"))return;const l=new URL("https://p.teads.tv/topics.html");l.searchParams.append("pageId",e.toString()),l.searchParams.append("pid",t.toString()),l.searchParams.append("env",n),l.searchParams.append("fv",s),i.forEach(e=>l.searchParams.append("auctid",e)),r.forEach(e=>l.searchParams.append("hb_provider",e));const h=Object(L.createIframe)("browsing-topics");h.setAttribute("referrerpolicy","no-referrer-when-downgrade"),h.style.setProperty("display","none"),h.setAttribute("src",l.toString()),window.document.body.appendChild(h)}(t,i,s,d.getEnv(),zt.c,c);const h=Object(vt.a)(t,i,n);let p,m;if(e.launched)return void this.logger.warn("This format has already been launched");e.launched=!0;const f=Object(v.rand)(10,!1),b={pageId:t,placementId:i,placementKey:h,sumologicLogger:a,logger:this.logger,wigo:r,auctionId:s,randomString:f},A=l.map(Object(w.prop)("viewerId"));c.filter(e=>"debugFormat"!==e).match({none:()=>{Object(fe.u)(b)},some:e=>{Gt(l)}});try{var y,E=new mt(e,c),O=e.slider?{slider:e.slider}:bt.getPlacementSetting(E.pid);O&&(y=new bt(O)),m=new Ue(t,h,E,y,r)}catch(e){return this.logger.error(e.getMessage()),e.getId()===u.a.OPTION_FORMAT_INVALID.id&&Object(fe.r)(Object.assign(Object.assign({},b),{headerBiddingProvider:c,viewerId:A})),void a.error(`placement-config ${t} ${g.b.fromNullable(i).getOrNull()} ${Object(P.a)(e)}`)}if(window._ttc&&window._ttc[t]&&window._ttc[t].rpm)return a.info("ttc-rpm"),void m.placementConfig.rpmFallback.trigger();p={status:!0,reasons:[]};const C=function(e){const t={status:!0,reasons:[]},i=e.parentWindow.getWindow();d.videoSupport(i.document)||(t.status=!1,t.reasons.push(I.c.incompatibility.video));const n=d.isMobile()&&e.isMobile(),s=d.isTablet()&&e.isTablet(),r=d.isDesktop()&&e.isDesktop();return n||s||r||(t.status=!1,t.reasons.push(I.c.incompatibility.context)),k.c(d.getIEVersion(),"8")&&(t.status=!1,t.reasons.push(I.c.incompatibility.browser)),t}(m.placementConfig);if(this.logger.debug("Check environment",C),!C.status&&(p.status=!1,!d.isAmp()||d.isAmp()&&E.formatName.get()===I.a.inread)){const e=C.reasons[0];e&&Object(fe.v)(Object.assign(Object.assign({},b),{headerBiddingProvider:c,viewerId:A}),e),m.placementConfig.fallback.trigger()&&Object(fe.o)(Object.assign(Object.assign({},b),{headerBiddingProvider:c,viewerId:A}))}return{placement:m,report:{id:i,validity:p,player:null,slotType:"native"},ad:null}}checkSlot({placementAd:e,wigo:t,sumologicLogger:i,auctionId:n,headerBiddingInfo:s,placementIsFirst:r,adSettings:o}){if(e.report.validity.status){e.report.validity=e.placement.checkSlot(),this.logger.debug("Slot availability",e.report.validity);const t=e.placement.getElectedSlot();e.report.player=qt.getPlayerSize(t,e.placement.placementConfig)}const a=o.map(Object(w.prop)("viewerId"));return(e=>{const{adSettings:t,slotIsFound:i,cornerPositionIsAllowed:n,placementIsFirst:s}=e;return t.filter(()=>i||n).flatMap(e=>g.b.fromNullable(e.slotType)).orElse(()=>d.isAmp()||d.isIABSafeFrame()||d.isAmpSF()||i&&!n&&s?Object(g.c)("native"):i&&n&&s?Object(g.c)("polymorph"):!i&&n&&s?Object(g.c)("corner"):i&&!s?Object(g.c)("multislot"):g.a)})({adSettings:o,slotIsFound:(c=e.report.validity,!(!c.status&&c.reasons.length>0)),cornerPositionIsAllowed:e.placement.canEnableSlider(),placementIsFirst:r}).match({some:r=>{const a=o.flatMap(e=>g.b.fromNullable(e.creativeSize));"corner"===r&&(this.hasSlider=!0,e.placement.enableSlider(),e.report.validity.reasons=[],e.report.validity.status=!0),e.placement.slotType=r,e.report.slotType=r;return s.map(({provider:s,hbSlotAvailableTrackingUrl:r})=>new Ht(e.placement.pageId,e.placement.pid,e.placement.key,i,this.logger,t,n,a,r)).getOrElse(()=>new Wt(e.placement.pageId,e.placement.pid,e.placement.key,i,this.logger,t,n)).trackSlotAvailable(r),e},none:()=>{Object(fe.t)({pageId:e.placement.pageId,placementId:e.placement.pid,placementKey:e.placement.key,sumologicLogger:i,logger:this.logger,wigo:t,auctionId:n,headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider,viewerId:a},e.report.validity.reasons[0]),Ne.a()}});var c}callRAS({placementAd:e,auctionId:t,viewerId:i,sumologicLogger:n,browserIsHeadless:s,onRASResponse:r,tagManagerPackage:a}){const c=a.map(e=>e.tagManagerInstance).flatMap(e=>g.b.fromNullable(e.getAd)).match({some:e=>!e.headerBiddingProvider,none:()=>!1});const{pageId:u}=e.placement;new Pe(e,u,t,i,s,n,this.getAdRequestUrl(u,n),({adCallTrackingUrl:t,auctionId:i,viewerId:s,response:u},b,v,y)=>{const O=(t,r,o)=>{e.placement.handleNoAd({sumologicLogger:n,headerBiddingProvider:t,portfolioItemId:r,adCallTrackOpts:o,auctionId:i,viewerId:s}),a.forEach(({tagManagerInstance:t,onFormatLoaded:i,done:n})=>{g.b.fromNullable(window.teads.tagManagerResourcesList).filter(w.isArray).forEach(i=>{i.push({tagManager:t,placementAd:e,vastPlayer:g.a,tagIsCampaignTag:c})}),i(!1),n()})},T=b.getOrElse(()=>j.a.payload),k=n=>{const r=c?"17":y.getOrValue("19"),o=t.map(e=>Object(Ft.d)(e));return{baseUrl:Object(m.b)(o,g.d.map(Object(w.prop)("baseUrl")),g.d.getOrValue(C.b.trackingUrl)),businessIds:{insertionId:Object(m.b)(n,g.d.map(Object(w.prop)("insertionId")),g.d.filter(e=>e>0),Lt.b),connectionId:Object(m.b)(n,g.d.map(Object(w.prop)("connectionId")),Lt.b)},queryParameters:Object.assign({env:d.getEnv(),pageId:e.placement.pageId.toString(),pid:e.placement.pid.toString(),auctid:i.getOrValue(Object(l.b)("")),vid:s.getOrValue(Object(h.b)("")),slot:e.placement.slotType,pfid:Object(m.b)(n,g.d.map(Object(w.prop)("portfolioItemId")),Lt.b),gdpr_api_version:Object(Lt.b)(T.apiVersion),gdpr_cmp_id:Object(Lt.b)(T.cmpId),gdpr_consent:T.consent,gdpr_status:T.status.toString(),gdpr_reason:T.reason.toString(),rpm_reason:r},Object(m.b)(o,g.d.map(Object(w.prop)("queryParameters")),g.d.getOrValue({}))),trackingUrl:t.map(Object(Lt.e)({rpm_reason:"19"}))}},L={placementKey:e.placement.key,sumologicLogger:n,wigo:e.placement.wigo,logger:this.logger,headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider};u.fold(()=>{const{headerBiddingProvider:t}=e.placement.placementConfig;this.hasSlider&&Object(fe.i)(Object.assign(Object.assign({},L),{headerBiddingProvider:t,baseUrlWithQueryParameters:k(g.a)})),O(t,g.a,k(g.a))},e=>{r(e);const l=g.b.fromNullable(e.ad),h=v.orElse(()=>l.flatMap(S).map(({consent:e})=>e));if(this.userSync(e.placement,i,s,T,h),this.hasSlider&&Object(fe.i)(Object.assign(Object.assign({},L),{headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider,baseUrlWithQueryParameters:k(g.a)})),e.ad){if(e.ad.handled)return void this.logger.debug("Ad already handled for this placement");if(e.ad.handled=!0,e.ad.callbacks=e.placement.placementConfig.raw.callbacks,!e.placement.getElectedSlot())return void this.logger.debug("No elected slot -> not placing format");g.b.fromNullable(e.ad).filter(Dt).match({none:()=>{this.logger.warn("Will not be able to create a FormatConfig, invalid ad object",e),O(e.placement.placementConfig.headerBiddingProvider,g.d.map(Object(w.prop)("portfolio_item_id"))(l),k(g.a))},some:r=>{if(Object(fe.k)({placement:e.placement,sumologicLogger:n,logger:this.logger,auctionId:i,viewerId:s,headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider,portfolioItemId:g.b.fromNullable(r.portfolio_item_id)}),"NativeJson"!==r.type)(function(e,t,i){return p.a.tryCatch(()=>{const e=new Pt.a(i);return Nt.debug("FormatConfig instance",e),e})})(0,0,r).fold(t=>{this.logger.warn("Could not instantiate FormatConfig",t,e.ad),Object(fe.e)({placement:e.placement,sumologicLogger:n,logger:this.logger,auctionId:i,viewerId:s,headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider,portfolioItemId:g.b.fromNullable(r.portfolio_item_id),insertionId:g.b.fromNullable(r.insertion_id),connectionId:g.b.fromNullable(r.connection_id)}),n.error(`formatconfig ${be.a.AdAvailableErrorSettings}|${Object(P.a)(t)}`),O(e.placement.placementConfig.headerBiddingProvider,g.d.map(Object(w.prop)("portfolio_item_id"))(l),k(g.a))},t=>{const r=new A.a(t.adType.isDisplay()?"display":t.adType.isNative()?"native":"video",g.b.fromNullable(t.insertionId),g.b.fromNullable(t.connectionId),g.b.fromNullable(t.portfolioItemId),n);Rt({adSettings:t,placement:e.placement,gdprIab:T,sumologicLogger:r,auctionId:i,viewerId:s}).then(n=>{Object(m.b)(n.tracking,vt.b.vast.registerVastTrackings(L.placementKey),f.a.biforeach(({trackings:e,progressTrackings:t})=>{this.logger.debug("Trackings registered to Teads VAST trackings store",e),this.logger.debug("Progress trackings registered to Teads VAST trackings store",t)},({trackings:e,progressTrackings:t})=>{this.logger.debug("Trackings registered to Third-Party VAST trackings store",e),this.logger.debug("Progress trackings registered to Third-Party VAST trackings store",t)})),p.a.tryCatch(()=>{Object(E.d)({sumologicLogger:r,placementAd:e,linearAdWithFormatConfig:{linearAd:n,formatConfig:t},tagIsCampaignTag:c,tagManagerPackage:a,adCallTrackOpts:k(g.b.of(t)),auctionId:i,viewerId:s,gdprIab:T})}).tapLeft(n=>{this.logger.error("Succesfully parsed/loaded the VAST, but an uncaught error was thrown when loading the ad.",n),r.error("uncaught-error-loadvast "+Object(P.a)(n));const{pageId:o,pid:d,slotType:c}=e.placement;Object(fe.f)(Object.assign(Object.assign({},L),{code:jt.a.Undefined,pageId:o,placementId:d,auctionId:i,viewerId:s,slotType:c,portfolioItemId:Object(Lt.a)(t.portfolioItemId),insertionId:Object(Lt.a)(t.insertionId),connectionId:Object(Lt.a)(t.connectionId)})),Object(fe.n)({placementKey:L.placementKey,sumologicLogger:r,wigo:e.placement.wigo,logger:L.logger,errorCode:jt.a.Undefined,errorCause:"load-ad-exception",slotType:e.placement.slotType,creativeSize:g.b.fromNullable(t.creativeSize),macros:Object(Mt.f)()}),a.forEach(({tagManagerInstance:e})=>{e.logger.debug("load -> loadAd","noAd")}),O(e.placement.placementConfig.headerBiddingProvider,g.b.fromNullable(t.portfolioItemId),k(g.b.of(t)))})}).catch(([i,n])=>{this.logger.error("Error when loading the VAST",i,e);const s=i.getId(),d=Object(o.isMemberOf)(jt.b)(s)?s:jt.a.Undefined;vt.b.vast.registerVastTrackings(L.placementKey)(n.tracking),Object(fe.n)({placementKey:L.placementKey,sumologicLogger:r,wigo:e.placement.wigo,logger:L.logger,errorCode:d,errorCause:"load-vast-exception",slotType:e.placement.slotType,creativeSize:g.b.fromNullable(t.creativeSize),macros:Object(Mt.f)()}),a.forEach(({tagManagerInstance:e})=>{e.logger.debug("load -> loadAd","noAd")}),O(e.placement.placementConfig.headerBiddingProvider,g.b.fromNullable(t.portfolioItemId),k(g.b.of(t)))})});else{const o=Object.assign(Object.assign({},r),{slotType:e.placement.slotType,referrer:Object(fe.b)(n),placementMetadata:{[r.settings.values.placementId]:{adCallTrackingUrl:t.getOrNull(),auctionId:i.getOrNull()}},templateType:"default",viewerId:s.getOrNull(),ccpIab:h.getOrNull(),gdprIab:T}),a=e.placement.getElectedSlot().getElement(),{raw:c}=e.placement.placementConfig,l=Object.assign(Object.assign({},c),{slot:Object.assign(Object.assign({},c.slot),{selector:a})});(e=>(teads.TRACKING_URL=C.b.trackingUrl,new Promise((t,i)=>{var n;const s=document.createElement("script");s.src=null!==(n=window.teads.NATIVE_CLASSIC_URL)&&void 0!==n?n:I.e,s.async=!0,s.onload=t,s.onerror=i,document.getElementsByTagName("head")[0].appendChild(s),e.appendChild(s)})))(a).then(()=>teads.renderNativeCreative(d.getEnv(),o,l)).catch(e=>{n.error("Native classic flavor integration Failed : "+e)})}}})}else e.report.validity.status&&O(g.a,g.a,k(g.a))}),Ne.b()}).send()}reload(){g.b.fromNullable(window.teads.clearInstances).forEach(e=>e());const e=g.b.fromNullable(window._ttp);!function(e){e.forEach(e=>{for(const t in e)e.hasOwnProperty(t)&&Object(o.forEach)(e[t],e=>e.launched=!1)})}(e),g.b.fromNullable(window.teads.destroyPageRelatedVariables).forEach(e=>e()),Ct({ttpObject:e,pageInstance:this}).tapLeft(e=>this.logger.error(e))}userSync(e,t,i,n,s){if(e&&e.pid&&!this.isUserSyncIframeLoaded){const r=g.b.fromNullable(e.placementConfig).flatMap(e=>e.headerBiddingProvider);let o=Ve(e.pid,n,r,s,t,i);c.addEventListener("load",o,e=>{this.isUserSyncIframeLoaded=!0})}}getAdRequestUrl(e,t){const i=C.b.richAdServerUrl.replace("{id}",String(e));return this.getAdRequestMetadata(t).map(e=>Object(y.c)(i,e)).getOrValue(i)}getAdRequestMetadata(e){return Object(y.f)(e).map(({windowDepth:e,windowReferrerUrl:t})=>{const i=g.b.fromNullable(t).map(e=>({windowReferrerUrl:encodeURIComponent(e)})).getOrValue({});return Object.assign(Object.assign({windowWidth:window.innerWidth,windowHeight:window.innerHeight,windowDepth:e},function(e){const t=d.isAmp()||d.isAmpSF();return p.a.tryCatch(()=>{const e=t?window.context.referrer:window.top.document.referrer;return new URL(e).origin}).fold(t=>(e.warn("Cannot get referrer",t),{}),e=>({pageReferrerUrl:encodeURIComponent(e)}))}(this.logger)),i)})}}let $t=Object(r.b)(0);let Kt,Yt=0;const Xt=new b.a("Main");var Qt=i(17),Jt=i(139),Zt=i(137);const ei=new b.a("TagManager"),ti={},ii=(e,t)=>{const i=Object(o.fromStringToNumber)(Object.keys(ti));return 1===Object(o.flatten)(Object(o.map)(i,e=>{const t=Object.keys(ti[e]),i=Object(o.fromStringToNumber)(Object(o.filter)(t,e=>"placement"!==e)),n=Object(o.map)(i,t=>ti[e][t]);return Object(o.filter)(n,e=>Object(o.last)(e).state!==si.PASSBACKED)})).length&&0===t},ni={};var si;!function(e){e[e.INIT=0]="INIT",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.SERVED=3]="SERVED",e[e.ERRORED=4]="ERRORED",e[e.PASSBACKED=5]="PASSBACKED"}(si||(si={}));class ri{constructor(e,t,i,n=!1,r=0){this.pageId=e,this.pid=t,this.rawSettings=i,this.defer=n,this.pageIndex=r,this.doServe=!1,this.wigo=new N.b,this.formatInstance=g.a,this.doPassback=!1,this.passbacks={beforeServe:[],afterServe:[]},this.scripts=[],this.headerBiddingProvider=g.a,this.logger=new b.a(`TagManager (pageId: ${e}, placementId: ${t})`),this.logger.debug("new placement",i),this.headerBiddingProvider=D(ni[this.pid]),this.sumologicLogger=s.a.copy({collectorUrl:"https://s8t.teads.tv/logs/format/http-source",placementId:Object(g.c)(t),options:Object.assign(Object.assign({},s.a.options),{isHeaderBiddingTag:()=>this.headerBiddingProvider.nonEmpty()})}),this.settings=Object.assign({},i||ri.defaultRawPlacement),this.settings.pid=t,this.settings.format=this.settings.format||"inread",this.settings.fallback=()=>(this.logger.debug("no ad to serve so exec passback"),this.execPassback()),this.state=si.INIT,this.headerBiddingProvider.nonEmpty()&&this.handleHeaderBiddingAd(),C.b.refresh(window.teads),this.handleDataInsertion(t).forEach(e=>{Ne.a(),this.getAd=e})}static getRawAdFromScript(e,t,i,n){return e.match({some:e=>c.getAndRemoveAttributeValue(e,t).match({some:e=>{const t=n(Object(g.c)({type:"VastUrl",content:`${C.b.buyingEngineUrl}/${e}`,insertion_id:parseInt(e,10)}));return i.debug("data-insertion handled",t),Object(g.c)(t)},none:()=>(i.error(t+" detected but the value is empty"),g.b.empty())}),none:()=>g.b.empty()})}static page(e){if(Object(r.a)(e))return ti[e]||(ti[e]={placement:(t,i,n,s)=>ri.placement(e,t,i,n,s)});throw s.a.error("teads-page-invalid-pageid "+e),new Error("teads.page function called with invalid page ID: "+e)}static ad(e,t){return ni[e]&&new b.a("TagManager placementId: "+e).warn("ad settings already exist and will be overwritten",ni[e],t),ni[e]=t,{page:ri.page}}static placement(e,t,i,n,s){const r=ti[e],o=r[t]||(r[t]=[]);s=g.b.fromNullable(s).getOrValue(o.length?o.length-1:0),o[s]?i&&i!==o[s].rawSettings&&(o[s].rawSettings=i):p.a.tryCatch(()=>new We(t)).map(e=>e.get()).fold(e=>{ei.warn("Invalid placement ID value provided",t,i,e)},t=>{o[s]=new ri(e,t,i,n,s)});const a=o[s];return a.findMatchingScript()?(a.logger.debug("found script with serve attribute -> serve it"),a.serve()):n?a.logger.debug("tag deferred"):a.load(),a}getPid(){return this.pid}load(){var e;if(this.state!==si.INIT)return this.logger.warn("tag already loaded, loading or served",this.state),this;const t=g.b.fromNullable(null===(e=ni[this.pid])||void 0===e?void 0:e.headerBiddingSlotAvailableTrackUrl);return this.state=si.LOADING,this.logger.debug("load: checkPlacement > checkSlot > callRAS > loadAd"),this.onReadyState(()=>{const e=g.b.fromNullable(ni[this.pid]),i=Object(vt.a)(this.pageId,this.pid,this.pageIndex),n=e.flatMap(ge(this.pid)).flatMap(({auctionId:e})=>e.map(p.d)).getOrElse(()=>Object(yt.getUuid)().map(l.b)),s=n.toOption(),r=e.flatMap(Object(w.safeProp)("viewerId"));let o;try{o=((e,t)=>e.filter(e=>"debugFormat"!==e).match({some:e=>t.match({some:t=>Object(g.c)({provider:e,hbSlotAvailableTrackingUrl:t}),none:()=>{throw new Error("Missing headerBiddingSlotAvailableTrackingUrl")}}),none:()=>g.a}))(this.headerBiddingProvider,t)}catch(e){return Object(fe.r)({pageId:this.pageId,placementId:this.pid,placementKey:i,sumologicLogger:this.sumologicLogger,logger:this.logger,wigo:this.wigo,auctionId:s,viewerId:r,headerBiddingProvider:this.headerBiddingProvider}),this.logger.error("load - "+e.message),this.sumologicLogger.error("incompatibilityFormat - "+e.message),void(this.state=si.ERRORED)}this.wigo.settings=e.flatMap(me);const a=wt({pageId:this.pageId,placementId:this.pid,pageIndex:this.pageIndex,auctionId:s,headerBiddingProvider:this.headerBiddingProvider,sumologicLogger:this.sumologicLogger});n.tapLeft(e=>{this.sumologicLogger.error("limitedCapabilities "+Object(P.a)(e)),Object(fe.s)({placementKey:i,sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,headerBiddingProvider:this.headerBiddingProvider,viewerId:r,pageId:this.pageId,placementId:this.pid,auctionId:s})}),this.fillCustomTracking(this.findCustomTracking(this.scripts)),this.adInfos=Kt.checkPlacement({rawPlacement:this.settings,pageId:this.pageId,placementId:this.pid,pageIndex:this.pageIndex,auctionId:s,wigo:this.wigo,sumologicLogger:this.sumologicLogger,headerBiddingProvider:this.headerBiddingProvider,adSettings:e}),this.adInfos?(e.filter(e=>!0===e.wigoEnabled).forEach(()=>this.wigo.enableWigo()),this.logger.debug("load -> checkPlacement ok"),this.adInfos=Kt.checkSlot({placementAd:this.adInfos,wigo:this.wigo,sumologicLogger:this.sumologicLogger,auctionId:s,headerBiddingInfo:o,placementIsFirst:ii(this.pid,this.pageIndex),adSettings:e}),this.adInfos?(this.logger.debug("load -> checkSlot ok"),this.adInfos.ad=this.getAd,Kt.callRAS({placementAd:this.adInfos,auctionId:s,viewerId:r,sumologicLogger:this.sumologicLogger,browserIsHeadless:a,onRASResponse:e=>{this.logger.debug("load -> callRAS",this.getAd?"bypassed by data-insertion":"ok"),this.adInfos=e,this.sendTagToWigo()},tagManagerPackage:Object(g.c)({tagManagerInstance:this,onFormatLoaded:()=>{this.state!==si.PASSBACKED&&(this.state=si.LOADED)},done:()=>{this.doServe?this.serve():this.logger.debug("waiting for serve")}})})):(this.logger.debug("load - checkSlot failure"),this.state=si.ERRORED)):(this.logger.debug("load - placement failure"),this.state=si.ERRORED)}),this}serve(){let e=this;switch(this.state){case si.ERRORED:this.state=si.SERVED,this.logger.warn("serve - this placement cannot be served - state = ERROR");break;case si.SERVED:this.logger.warn("already served - reload and serve it again"),e=this.reload().serve();break;case si.INIT:this.doServe=!0,this.logger.debug("load before serve (defer)",this.adInfos),this.load();break;case si.LOADING:this.logger.warn("serve - the tag is currently loading"),this.doServe=!0;break;case si.LOADED:this.state=si.SERVED,this.logger.debug("serve",this.adInfos),this.formatInstance.filter(()=>!Object(E.c)(this)).forEach(e=>{e.start(),Object(Jt.a)(this,e.player.getMediafile())}),this.logger.debug("ad successfully served"),this.adInfos.ad&&!Object(E.b)(this)||(this.logger.debug("serve - no ad to serve so exec passback"),this.execPassback())}return e}reload(){return ri.page(this.pageId).placement(this.pid,this.rawSettings,this.defer,this.pageIndex+1)}passback(e,t=!1){return Object(o.includes)([si.SERVED,si.PASSBACKED],this.state)&&!t?this.reload().passback(e):(Object(o.includes)(this.passbacks.afterServe,e)?this.logger.warn("passback - signature was already appended to the passback list",e,this.passbacks.afterServe):"function"==typeof e?(this.passbacks.afterServe.push(e),this.logger.debug("passback - pushed to the list",e),t&&(this.passbacks.beforeServe.push(e),this.logger.debug("passback - pushed to the *before serve* list too")),this.doPassback&&(this.logger.debug("passback - execPassback already called with no passback to exec, call it again"),this.doPassback=!1,this.execPassback())):this.logger.warn("passback - must be a function"),this)}fillCustomTracking(e){const t=Object(vt.a)(this.pageId,this.pid,this.pageIndex),i=Object(m.a)(Zt.a,o.cArray.forEach(Object(m.a)(Object(w.tap)(vt.b.format.addFormatCustomTrackings(t)),e=>this.logger.debug(`[${t}][classic] Add custom tracking`,e)))),n=Object(m.a)(Zt.b,f.a.biforeach(o.cArray.forEach(vt.b.vast.addVastCustomProgressTrackings(t)),o.cArray.forEach(vt.b.vast.addVastCustomTrackings(t))));Object(m.b)(e,Object(w.tap)(Object(m.a)(o.cArray.filter(Zt.d),i)),Object(w.tap)(Object(m.a)(o.cArray.filter(Zt.e),n)),Object(m.a)(o.cArray.filter(e=>!Object(Zt.d)(e)&&!Object(Zt.e)(e)),e=>{e.length>0&&this.logger.warn("Could not add unsupported custom trackings",e)}))}execPassback(){let e;switch(this.state){case si.SERVED:case si.PASSBACKED:e=this.passbacks.afterServe,this.logger.debug("exec passback - after serve");break;default:e=this.passbacks.beforeServe,this.logger.debug("exec passback - before serve")}if(e.length){let t=e.shift();return this.logger.debug("exec passback -",t),this.state=si.PASSBACKED,t(()=>this.execPassback()),this.doPassback=!1,null}return this.logger.debug("exec passback - no passback to exec"),this.doPassback=!0,this.passbacks.afterServe.length?null:I.b}findMatchingScript(){let e=!1;const t=L.findAllWindows(document.body);for(const i of t){const t=c.querySelectorAll("script.teads",i);for(let i=0;i<t.length;i++){this.scripts.push(t[i]);const n=t[i]?t[i].getAttribute("data-serve"):"";n&&n.match(this.pid.toString())&&(t[i].setAttribute("data-serve",n.replace(this.pid.toString(),"")),e=!0)}}return e}constructAdSettings(e=g.b.empty()){var t,i;const n=ri.defaultAdsSettings,s=e.getOrValue({}),r=null!==(t=ni[this.pid])&&void 0!==t?t:{};return Object.assign(Object.assign(Object.assign(Object.assign({},n),s),r),{settings:Object.assign(Object.assign(Object.assign({},n.settings),r.settings),{values:Object.assign(Object.assign(Object.assign({},n.settings.values),{pageId:this.pageId,placementId:this.pid,placementFormat:this.settings.format}),null===(i=r.settings)||void 0===i?void 0:i.values)})})}handleHeaderBiddingAd(){this.getAd=this.constructAdSettings()}handleDataInsertion(e){const t="data-insertion-"+e,i=L.findAllWindows(document.body),n=c.findMatchingElement(Object(o.map)(i,e=>e.document),`script.teads[${t}]`);return ri.getRawAdFromScript(n,t,this.logger,Object(Qt.a)(this.constructAdSettings,this))}findCustomTracking(e){let t=[];for(let i of e){let e='data-tracking(?:-(\\d+))?-([^=]+)="([^"]+)"';let n=(c.getOuterHTML(i)||"").match(new RegExp(e,"g"))||[];for(let s of n){let n=s.match(new RegExp(e));if(4===n.length){const[,e,s,r]=n;(e&&Number(e)===this.pid||!e)&&(this.logger.debug("find custom tracking (event, url, pid)",s,r,e),t.push({event:s,url:r}),e&&i.removeAttribute(`data-tracking-${e}-${s}`))}else this.logger.debug('error on data-tracking extraction, 3 args expected (["all", "key", "value"])',n)}}return t}sendTagToWigo(){this.wigo.valid(0,1,{ttp:this.settings,tta:this.adInfos.ad,tts:this.adInfos.placement.placementSetting},"modal")}onReadyState(e){let t;const i=L.findAllWindows(document.body);for(const e of i)t=t||e.document.querySelector("script.teads[data-readystate]");t&&"domcomplete"===t.getAttribute("data-readystate")?(this.logger.debug("waiting dom complete"),c.onDomComplete(e)):(this.logger.debug("waiting dom ready"),c.onDomReady(e))}}ri.defaultRawPlacement={pid:null,format:null,slot:null},ri.defaultAdsSettings={settings:{values:{pageId:0,placementFormat:"inread",placementId:1,threshold:50}}};const oi=window.teads||{};oi.ad=ri.ad,oi.page=ri.page,oi.TAG=ti,oi.TAG_STATUS=si,oi.TagManager=ri,oi.helper=oi.helper||{},oi.placement=oi.placement||{},oi.pageInstance=oi.pageInstance||Kt,window.teads=oi,Xt.info("Init - Format initialization success"),d.startAutoplayTest(),Object(V.a)(["tag","format"],Object(L.findChildWindows)(document.body).concat(window)),g.b.fromNullable(window.teads.PAGE_PROCESSED).forEach(e=>$t=e),g.b.fromNullable(window.teads.currentPlayerId).forEach(e=>Yt=e),d.isAmp()&&(window.context.observeIntersection(e=>{window._teads_amp.change=e.pop(),oe.e()}),oe.e()),Ie(),N.b.loadAndStoreReportIfNeeded(s.a),Kt=new qt,c.onDomReady(()=>(d.activatePrivacySandboxRelevanceAndMeasurementFeatures(),Ct({ttpObject:g.b.fromNullable(window._ttp),pageInstance:Kt}).tapLeft(e=>Xt.error(e))))}]);